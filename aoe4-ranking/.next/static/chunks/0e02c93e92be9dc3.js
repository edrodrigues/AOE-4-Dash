(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,38054,(e,t,r)=>{var n={675:function(e,t){"use strict";t.byteLength=function(e){var t=l(e),r=t[0],n=t[1];return(r+n)*3/4-n},t.toByteArray=function(e){var t,r,a=l(e),o=a[0],s=a[1],u=new i((o+s)*3/4-s),c=0,h=s>0?o-4:o;for(r=0;r<h;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],u[c++]=t>>16&255,u[c++]=t>>8&255,u[c++]=255&t;return 2===s&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,u[c++]=255&t),1===s&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,u[c++]=t>>8&255,u[c++]=255&t),u},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,a=[],o=0,s=n-i;o<s;o+=16383)a.push(function(e,t,n){for(var i,a=[],o=t;o<n;o+=3)i=(e[o]<<16&0xff0000)+(e[o+1]<<8&65280)+(255&e[o+2]),a.push(r[i>>18&63]+r[i>>12&63]+r[i>>6&63]+r[63&i]);return a.join("")}(e,o,o+16383>s?s:o+16383));return 1===i?a.push(r[(t=e[n-1])>>2]+r[t<<4&63]+"=="):2===i&&a.push(r[(t=(e[n-2]<<8)+e[n-1])>>10]+r[t>>4&63]+r[t<<2&63]+"="),a.join("")};for(var r=[],n=[],i="u">typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,s=a.length;o<s;++o)r[o]=a[o],n[a.charCodeAt(o)]=o;function l(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");-1===r&&(r=t);var n=r===t?0:4-r%4;return[r,n]}n[45]=62,n[95]=63},72:function(e,t,r){"use strict";var n=r(675),i=r(783),a="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;function o(e){if(e>0x7fffffff)throw RangeError('The value "'+e+'" is invalid for option "size"');var t=new Uint8Array(e);return Object.setPrototypeOf(t,s.prototype),t}function s(e,t,r){if("number"==typeof e){if("string"==typeof t)throw TypeError('The "string" argument must be of type string. Received type number');return c(e)}return l(e,t,r)}function l(e,t,r){if("string"==typeof e){var n=e,i=t;if(("string"!=typeof i||""===i)&&(i="utf8"),!s.isEncoding(i))throw TypeError("Unknown encoding: "+i);var a=0|d(n,i),l=o(a),u=l.write(n,i);return u!==a&&(l=l.slice(0,u)),l}if(ArrayBuffer.isView(e))return h(e);if(null==e)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(C(e,ArrayBuffer)||e&&C(e.buffer,ArrayBuffer)||"u">typeof SharedArrayBuffer&&(C(e,SharedArrayBuffer)||e&&C(e.buffer,SharedArrayBuffer)))return function(e,t,r){var n;if(t<0||e.byteLength<t)throw RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw RangeError('"length" is outside of buffer bounds');return Object.setPrototypeOf(n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),s.prototype),n}(e,t,r);if("number"==typeof e)throw TypeError('The "value" argument must not be of type number. Received type number');var c=e.valueOf&&e.valueOf();if(null!=c&&c!==e)return s.from(c,t,r);var p=function(e){if(s.isBuffer(e)){var t=0|f(e.length),r=o(t);return 0===r.length||e.copy(r,0,0,t),r}return void 0!==e.length?"number"!=typeof e.length||function(e){return e!=e}(e.length)?o(0):h(e):"Buffer"===e.type&&Array.isArray(e.data)?h(e.data):void 0}(e);if(p)return p;if("u">typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return s.from(e[Symbol.toPrimitive]("string"),t,r);throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function u(e){if("number"!=typeof e)throw TypeError('"size" argument must be of type number');if(e<0)throw RangeError('The value "'+e+'" is invalid for option "size"')}function c(e){return u(e),o(e<0?0:0|f(e))}function h(e){for(var t=e.length<0?0:0|f(e.length),r=o(t),n=0;n<t;n+=1)r[n]=255&e[n];return r}t.Buffer=s,t.SlowBuffer=function(e){return+e!=e&&(e=0),s.alloc(+e)},t.INSPECT_MAX_BYTES=50,t.kMaxLength=0x7fffffff,s.TYPED_ARRAY_SUPPORT=function(){try{var e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),!s.TYPED_ARRAY_SUPPORT&&"u">typeof console&&"function"==typeof console.error&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(s.prototype,"parent",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.buffer}}),Object.defineProperty(s.prototype,"offset",{enumerable:!0,get:function(){if(s.isBuffer(this))return this.byteOffset}}),s.poolSize=8192,s.from=function(e,t,r){return l(e,t,r)},Object.setPrototypeOf(s.prototype,Uint8Array.prototype),Object.setPrototypeOf(s,Uint8Array),s.alloc=function(e,t,r){return(u(e),e<=0)?o(e):void 0!==t?"string"==typeof r?o(e).fill(t,r):o(e).fill(t):o(e)},s.allocUnsafe=function(e){return c(e)},s.allocUnsafeSlow=function(e){return c(e)};function f(e){if(e>=0x7fffffff)throw RangeError("Attempt to allocate Buffer larger than maximum size: 0x7fffffff bytes");return 0|e}function d(e,t){if(s.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||C(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);var r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;for(var i=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return O(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return I(e).length;default:if(i)return n?-1:O(e).length;t=(""+t).toLowerCase(),i=!0}}function p(e,t,r){var i,a,o,s=!1;if((void 0===t||t<0)&&(t=0),t>this.length||((void 0===r||r>this.length)&&(r=this.length),r<=0||(r>>>=0)<=(t>>>=0)))return"";for(e||(e="utf8");;)switch(e){case"hex":return function(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",a=t;a<r;++a)i+=k[e[a]];return i}(this,t,r);case"utf8":case"utf-8":return v(this,t,r);case"ascii":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}(this,t,r);case"latin1":case"binary":return function(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}(this,t,r);case"base64":return i=this,a=t,o=r,0===a&&o===i.length?n.fromByteArray(i):n.fromByteArray(i.slice(a,o));case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return function(e,t,r){for(var n=e.slice(t,r),i="",a=0;a<n.length;a+=2)i+=String.fromCharCode(n[a]+256*n[a+1]);return i}(this,t,r);default:if(s)throw TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),s=!0}}function g(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function m(e,t,r,n,i){var a;if(0===e.length)return -1;if("string"==typeof r?(n=r,r=0):r>0x7fffffff?r=0x7fffffff:r<-0x80000000&&(r=-0x80000000),(a=r*=1)!=a&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length)if(i)return -1;else r=e.length-1;else if(r<0)if(!i)return -1;else r=0;if("string"==typeof t&&(t=s.from(t,n)),s.isBuffer(t))return 0===t.length?-1:y(e,t,r,n,i);if("number"==typeof t){if(t&=255,"function"==typeof Uint8Array.prototype.indexOf)if(i)return Uint8Array.prototype.indexOf.call(e,t,r);else return Uint8Array.prototype.lastIndexOf.call(e,t,r);return y(e,[t],r,n,i)}throw TypeError("val must be string, number or Buffer")}function y(e,t,r,n,i){var a,o=1,s=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return -1;o=2,s/=2,l/=2,r/=2}function u(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){var c=-1;for(a=r;a<s;a++)if(u(e,a)===u(t,-1===c?0:a-c)){if(-1===c&&(c=a),a-c+1===l)return c*o}else -1!==c&&(a-=a-c),c=-1}else for(r+l>s&&(r=s-l),a=r;a>=0;a--){for(var h=!0,f=0;f<l;f++)if(u(e,a+f)!==u(t,f)){h=!1;break}if(h)return a}return -1}s.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==s.prototype},s.compare=function(e,t){if(C(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),C(t,Uint8Array)&&(t=s.from(t,t.offset,t.byteLength)),!s.isBuffer(e)||!s.isBuffer(t))throw TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;for(var r=e.length,n=t.length,i=0,a=Math.min(r,n);i<a;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:+(n<r)},s.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},s.concat=function(e,t){if(!Array.isArray(e))throw TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return s.alloc(0);if(void 0===t)for(r=0,t=0;r<e.length;++r)t+=e[r].length;var r,n=s.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var a=e[r];if(C(a,Uint8Array)&&(a=s.from(a)),!s.isBuffer(a))throw TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},s.byteLength=d,s.prototype._isBuffer=!0,s.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)g(this,t,t+1);return this},s.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)g(this,t,t+3),g(this,t+1,t+2);return this},s.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)g(this,t,t+7),g(this,t+1,t+6),g(this,t+2,t+5),g(this,t+3,t+4);return this},s.prototype.toString=function(){var e=this.length;return 0===e?"":0==arguments.length?v(this,0,e):p.apply(this,arguments)},s.prototype.toLocaleString=s.prototype.toString,s.prototype.equals=function(e){if(!s.isBuffer(e))throw TypeError("Argument must be a Buffer");return this===e||0===s.compare(this,e)},s.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},a&&(s.prototype[a]=s.prototype.inspect),s.prototype.compare=function(e,t,r,n,i){if(C(e,Uint8Array)&&(e=s.from(e,e.offset,e.byteLength)),!s.isBuffer(e))throw TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return -1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var a=i-n,o=r-t,l=Math.min(a,o),u=this.slice(n,i),c=e.slice(t,r),h=0;h<l;++h)if(u[h]!==c[h]){a=u[h],o=c[h];break}return a<o?-1:+(o<a)},s.prototype.includes=function(e,t,r){return -1!==this.indexOf(e,t,r)},s.prototype.indexOf=function(e,t,r){return m(this,e,t,r,!0)},s.prototype.lastIndexOf=function(e,t,r){return m(this,e,t,r,!1)};function v(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var a,o,s,l,u=e[i],c=null,h=u>239?4:u>223?3:u>191?2:1;if(i+h<=r)switch(h){case 1:u<128&&(c=u);break;case 2:(192&(a=e[i+1]))==128&&(l=(31&u)<<6|63&a)>127&&(c=l);break;case 3:a=e[i+1],o=e[i+2],(192&a)==128&&(192&o)==128&&(l=(15&u)<<12|(63&a)<<6|63&o)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:a=e[i+1],o=e[i+2],s=e[i+3],(192&a)==128&&(192&o)==128&&(192&s)==128&&(l=(15&u)<<18|(63&a)<<12|(63&o)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,h=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=h}var f=n,d=f.length;if(d<=4096)return String.fromCharCode.apply(String,f);for(var p="",g=0;g<d;)p+=String.fromCharCode.apply(String,f.slice(g,g+=4096));return p}function b(e,t,r){if(e%1!=0||e<0)throw RangeError("offset is not uint");if(e+t>r)throw RangeError("Trying to access beyond buffer length")}function w(e,t,r,n,i,a){if(!s.isBuffer(e))throw TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<a)throw RangeError('"value" argument is out of bounds');if(r+n>e.length)throw RangeError("Index out of range")}function x(e,t,r,n,i,a){if(r+n>e.length||r<0)throw RangeError("Index out of range")}function E(e,t,r,n,a){return t*=1,r>>>=0,a||x(e,t,r,4,34028234663852886e22,-34028234663852886e22),i.write(e,t,r,n,23,4),r+4}function S(e,t,r,n,a){return t*=1,r>>>=0,a||x(e,t,r,8,17976931348623157e292,-17976931348623157e292),i.write(e,t,r,n,52,8),r+8}s.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else if(isFinite(t))t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0);else throw Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");var i,a,o,s,l,u,c,h,f=this.length-t;if((void 0===r||r>f)&&(r=f),e.length>0&&(r<0||t<0)||t>this.length)throw RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var d=!1;;)switch(n){case"hex":return function(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var a=t.length;n>a/2&&(n=a/2);for(var o=0;o<n;++o){var s,l=parseInt(t.substr(2*o,2),16);if((s=l)!=s)break;e[r+o]=l}return o}(this,e,t,r);case"utf8":case"utf-8":return i=t,a=r,A(O(e,this.length-i),this,i,a);case"ascii":return o=t,s=r,A(T(e),this,o,s);case"latin1":case"binary":return function(e,t,r,n){return A(T(t),e,r,n)}(this,e,t,r);case"base64":return l=t,u=r,A(I(e),this,l,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return c=t,h=r,A(function(e,t){for(var r,n,i=[],a=0;a<e.length&&!((t-=2)<0);++a)n=(r=e.charCodeAt(a))>>8,i.push(r%256),i.push(n);return i}(e,this.length-c),this,c,h);default:if(d)throw TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),d=!0}},s.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},s.prototype.slice=function(e,t){var r=this.length;e=~~e,t=void 0===t?r:~~t,e<0?(e+=r)<0&&(e=0):e>r&&(e=r),t<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);var n=this.subarray(e,t);return Object.setPrototypeOf(n,s.prototype),n},s.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||b(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n},s.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||b(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},s.prototype.readUInt8=function(e,t){return e>>>=0,t||b(e,1,this.length),this[e]},s.prototype.readUInt16LE=function(e,t){return e>>>=0,t||b(e,2,this.length),this[e]|this[e+1]<<8},s.prototype.readUInt16BE=function(e,t){return e>>>=0,t||b(e,2,this.length),this[e]<<8|this[e+1]},s.prototype.readUInt32LE=function(e,t){return e>>>=0,t||b(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+0x1000000*this[e+3]},s.prototype.readUInt32BE=function(e,t){return e>>>=0,t||b(e,4,this.length),0x1000000*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},s.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||b(e,t,this.length);for(var n=this[e],i=1,a=0;++a<t&&(i*=256);)n+=this[e+a]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},s.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||b(e,t,this.length);for(var n=t,i=1,a=this[e+--n];n>0&&(i*=256);)a+=this[e+--n]*i;return a>=(i*=128)&&(a-=Math.pow(2,8*t)),a},s.prototype.readInt8=function(e,t){return(e>>>=0,t||b(e,1,this.length),128&this[e])?-((255-this[e]+1)*1):this[e]},s.prototype.readInt16LE=function(e,t){e>>>=0,t||b(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?0xffff0000|r:r},s.prototype.readInt16BE=function(e,t){e>>>=0,t||b(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?0xffff0000|r:r},s.prototype.readInt32LE=function(e,t){return e>>>=0,t||b(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},s.prototype.readInt32BE=function(e,t){return e>>>=0,t||b(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},s.prototype.readFloatLE=function(e,t){return e>>>=0,t||b(e,4,this.length),i.read(this,e,!0,23,4)},s.prototype.readFloatBE=function(e,t){return e>>>=0,t||b(e,4,this.length),i.read(this,e,!1,23,4)},s.prototype.readDoubleLE=function(e,t){return e>>>=0,t||b(e,8,this.length),i.read(this,e,!0,52,8)},s.prototype.readDoubleBE=function(e,t){return e>>>=0,t||b(e,8,this.length),i.read(this,e,!1,52,8)},s.prototype.writeUIntLE=function(e,t,r,n){if(e*=1,t>>>=0,r>>>=0,!n){var i=Math.pow(2,8*r)-1;w(this,e,t,r,i,0)}var a=1,o=0;for(this[t]=255&e;++o<r&&(a*=256);)this[t+o]=e/a&255;return t+r},s.prototype.writeUIntBE=function(e,t,r,n){if(e*=1,t>>>=0,r>>>=0,!n){var i=Math.pow(2,8*r)-1;w(this,e,t,r,i,0)}var a=r-1,o=1;for(this[t+a]=255&e;--a>=0&&(o*=256);)this[t+a]=e/o&255;return t+r},s.prototype.writeUInt8=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,1,255,0),this[t]=255&e,t+1},s.prototype.writeUInt16LE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeUInt16BE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeUInt32LE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,4,0xffffffff,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},s.prototype.writeUInt32BE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,4,0xffffffff,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeIntLE=function(e,t,r,n){if(e*=1,t>>>=0,!n){var i=Math.pow(2,8*r-1);w(this,e,t,r,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<r&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o|0)-s&255;return t+r},s.prototype.writeIntBE=function(e,t,r,n){if(e*=1,t>>>=0,!n){var i=Math.pow(2,8*r-1);w(this,e,t,r,i-1,-i)}var a=r-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o|0)-s&255;return t+r},s.prototype.writeInt8=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},s.prototype.writeInt16LE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},s.prototype.writeInt16BE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},s.prototype.writeInt32LE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,4,0x7fffffff,-0x80000000),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},s.prototype.writeInt32BE=function(e,t,r){return e*=1,t>>>=0,r||w(this,e,t,4,0x7fffffff,-0x80000000),e<0&&(e=0xffffffff+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},s.prototype.writeFloatLE=function(e,t,r){return E(this,e,t,!0,r)},s.prototype.writeFloatBE=function(e,t,r){return E(this,e,t,!1,r)},s.prototype.writeDoubleLE=function(e,t,r){return S(this,e,t,!0,r)},s.prototype.writeDoubleBE=function(e,t,r){return S(this,e,t,!1,r)},s.prototype.copy=function(e,t,r,n){if(!s.isBuffer(e))throw TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r||0===e.length||0===this.length)return 0;if(t<0)throw RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw RangeError("Index out of range");if(n<0)throw RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i=n-r;if(this===e&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(t,r,n);else if(this===e&&r<t&&t<n)for(var a=i-1;a>=0;--a)e[a+t]=this[a+r];else Uint8Array.prototype.set.call(e,this.subarray(r,n),t);return i},s.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw TypeError("encoding must be a string");if("string"==typeof n&&!s.isEncoding(n))throw TypeError("Unknown encoding: "+n);if(1===e.length){var i,a=e.charCodeAt(0);("utf8"===n&&a<128||"latin1"===n)&&(e=a)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw RangeError("Out of range index");if(r<=t)return this;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{var o=s.isBuffer(e)?e:s.from(e,n),l=o.length;if(0===l)throw TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=o[i%l]}return this};var _=/[^+/0-9A-Za-z-_]/g;function O(e,t){t=t||1/0;for(var r,n=e.length,i=null,a=[],o=0;o<n;++o){if((r=e.charCodeAt(o))>55295&&r<57344){if(!i){if(r>56319||o+1===n){(t-=3)>-1&&a.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&a.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;a.push(r)}else if(r<2048){if((t-=2)<0)break;a.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;a.push(r>>12|224,r>>6&63|128,63&r|128)}else if(r<1114112){if((t-=4)<0)break;a.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}else throw Error("Invalid code point")}return a}function T(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}function I(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(_,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function A(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length)&&!(i>=e.length);++i)t[i+r]=e[i];return i}function C(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}var k=function(){for(var e="0123456789abcdef",t=Array(256),r=0;r<16;++r)for(var n=16*r,i=0;i<16;++i)t[n+i]=e[r]+e[i];return t}()},783:function(e,t){t.read=function(e,t,r,n,i){var a,o,s=8*i-n-1,l=(1<<s)-1,u=l>>1,c=-7,h=r?i-1:0,f=r?-1:1,d=e[t+h];for(h+=f,a=d&(1<<-c)-1,d>>=-c,c+=s;c>0;a=256*a+e[t+h],h+=f,c-=8);for(o=a&(1<<-c)-1,a>>=-c,c+=n;c>0;o=256*o+e[t+h],h+=f,c-=8);if(0===a)a=1-u;else{if(a===l)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,n),a-=u}return(d?-1:1)*o*Math.pow(2,a-n)},t.write=function(e,t,r,n,i,a){var o,s,l,u=8*a-i-1,c=(1<<u)-1,h=c>>1,f=5960464477539062e-23*(23===i),d=n?0:a-1,p=n?1:-1,g=+(t<0||0===t&&1/t<0);for(isNaN(t=Math.abs(t))||t===1/0?(s=+!!isNaN(t),o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?t+=f/l:t+=f*Math.pow(2,1-h),t*l>=2&&(o++,l/=2),o+h>=c?(s=0,o=c):o+h>=1?(s=(t*l-1)*Math.pow(2,i),o+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),o=0));i>=8;e[r+d]=255&s,d+=p,s/=256,i-=8);for(o=o<<i|s,u+=i;u>0;e[r+d]=255&o,d+=p,o/=256,u-=8);e[r+d-p]|=128*g}}},i={};function a(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={exports:{}},o=!0;try{n[e](r,r.exports,a),o=!1}finally{o&&delete i[e]}return r.exports}a.ab="/ROOT/OneDrive/Documentos/AOE4 Ranking/aoe4-ranking/node_modules/next/dist/compiled/buffer/",t.exports=a(72)},88363,68392,16505,e=>{"use strict";let t,r,n;var i,a,o,s,l,u,c,h,f,d,p,g,m,y,v,b,w=e.i(86877);let x=function(e){let t=[],r=0;for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);i<128?t[r++]=i:(i<2048?t[r++]=i>>6|192:((64512&i)==55296&&n+1<e.length&&(64512&e.charCodeAt(n+1))==56320?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n)),t[r++]=i>>18|240,t[r++]=i>>12&63|128):t[r++]=i>>12|224,t[r++]=i>>6&63|128),t[r++]=63&i|128)}return t},E=function(e){let t=[],r=0,n=0;for(;r<e.length;){let i=e[r++];if(i<128)t[n++]=String.fromCharCode(i);else if(i>191&&i<224){let a=e[r++];t[n++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){let a=((7&i)<<18|(63&e[r++])<<12|(63&e[r++])<<6|63&e[r++])-65536;t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))}else{let a=e[r++],o=e[r++];t[n++]=String.fromCharCode((15&i)<<12|(63&a)<<6|63&o)}}return t.join("")},S={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();let r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let t=0;t<e.length;t+=3){let i=e[t],a=t+1<e.length,o=a?e[t+1]:0,s=t+2<e.length,l=s?e[t+2]:0,u=i>>2,c=(3&i)<<4|o>>4,h=(15&o)<<2|l>>6,f=63&l;!s&&(f=64,a||(h=64)),n.push(r[u],r[c],r[h],r[f])}return n.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(x(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):E(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();let r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let t=0;t<e.length;){let i=r[e.charAt(t++)],a=t<e.length?r[e.charAt(t)]:0,o=++t<e.length?r[e.charAt(t)]:64,s=++t<e.length?r[e.charAt(t)]:64;if(++t,null==i||null==a||null==o||null==s)throw new _;let l=i<<2|a>>4;if(n.push(l),64!==o){let e=a<<4&240|o>>2;if(n.push(e),64!==s){let e=o<<6&192|s;n.push(e)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class _ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}let O=function(e){let t=x(e);return S.encodeByteArray(t,!0)},T=function(e){return O(e).replace(/\./g,"")},I=function(e){try{return S.decodeString(e,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function A(){return"u">typeof self?self:"u">typeof window?window:e.g}let C=()=>{try{return A().__FIREBASE_DEFAULTS__||(()=>{if(void 0===w.default||void 0===w.default.env)return;let e=w.default.env.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)})()||(()=>{let e;if("u"<typeof document)return;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(e){return}let t=e&&I(e[1]);return t&&JSON.parse(t)})()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},k=()=>C()?.config;class P{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,r))}}}function D(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch{return!1}}async function N(e){return(await fetch(e,{credentials:"include"})).ok}let j={},M=!1;function R(){return"u">typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function L(){let t=C()?.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(e.g.process)}catch(e){return!1}}function F(){return"u">typeof WorkerGlobalScope&&"u">typeof self&&self instanceof WorkerGlobalScope}function V(){return!L()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function B(){return!L()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function U(){try{return"object"==typeof indexedDB}catch(e){return!1}}class z extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,z.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,q.prototype.create)}}class q{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){var r,n;let i=t[0]||{},a=`${this.service}/${e}`,o=this.errors[e],s=o?(r=o,n=i,r.replace($,(e,t)=>{let r=n[t];return null!=r?String(r):`<${t}?>`})):"Error",l=`${this.serviceName}: ${s} (${a}).`;return new z(a,l,i)}}let $=/\{\$([^}]+)}/g;function K(e,t){if(e===t)return!0;let r=Object.keys(e),n=Object.keys(t);for(let i of r){if(!n.includes(i))return!1;let r=e[i],a=t[i];if(G(r)&&G(a)){if(!K(r,a))return!1}else if(r!==a)return!1}for(let e of n)if(!r.includes(e))return!1;return!0}function G(e){return null!==e&&"object"==typeof e}function H(e){return e&&e._delegate?e._delegate:e}class W{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}let Q="[DEFAULT]";class Y{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let e=new P;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&e.resolve(r)}catch(e){}}return this.instancesDeferred.get(t).promise}getImmediate(e){let t=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(e){if(r)return null;throw e}if(r)return null;throw Error(`Service ${this.name} is not available`)}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if("EAGER"===e.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:Q})}catch(e){}for(let[e,t]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(e);try{let e=this.getOrInitializeService({instanceIdentifier:r});t.resolve(e)}catch(e){}}}}clearInstance(e=Q){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e=Q){return this.instances.has(e)}getOptions(e=Q){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let n=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[e,t]of this.instancesDeferred.entries())r===this.normalizeInstanceIdentifier(e)&&t.resolve(n);return n}onInit(e,t){let r=this.normalizeInstanceIdentifier(t),n=this.onInitCallbacks.get(r)??new Set;n.add(e),this.onInitCallbacks.set(r,n);let i=this.instances.get(r);return i&&e(i,r),()=>{n.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let n of r)try{n(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){var r;let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e)===Q?void 0:r,options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Q){return this.component?this.component.multipleInstances?e:Q:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class J{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Y(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}let X=[];(i=a||(a={}))[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT";let Z={debug:a.DEBUG,verbose:a.VERBOSE,info:a.INFO,warn:a.WARN,error:a.ERROR,silent:a.SILENT},ee=a.INFO,et={[a.DEBUG]:"log",[a.VERBOSE]:"log",[a.INFO]:"info",[a.WARN]:"warn",[a.ERROR]:"error"},er=(e,t,...r)=>{if(t<e.logLevel)return;let n=new Date().toISOString(),i=et[t];if(i)console[i](`[${n}]  ${e.name}:`,...r);else throw Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class en{constructor(e){this.name=e,this._logLevel=ee,this._logHandler=er,this._userLogHandler=null,X.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in a))throw TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?Z[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,a.DEBUG,...e),this._logHandler(this,a.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,a.VERBOSE,...e),this._logHandler(this,a.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,a.INFO,...e),this._logHandler(this,a.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,a.WARN,...e),this._logHandler(this,a.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,a.ERROR,...e),this._logHandler(this,a.ERROR,...e)}}let ei=new WeakMap,ea=new WeakMap,eo=new WeakMap,es=new WeakMap,el=new WeakMap,eu={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return ea.get(e);if("objectStoreNames"===t)return e.objectStoreNames||eo.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return ec(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function ec(e){if(e instanceof IDBRequest){let t;return(t=new Promise((t,r)=>{let n=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{t(ec(e.result)),n()},a=()=>{r(e.error),n()};e.addEventListener("success",i),e.addEventListener("error",a)})).then(t=>{t instanceof IDBCursor&&ei.set(t,e)}).catch(()=>{}),el.set(t,e),t}if(es.has(e))return es.get(e);let n=function(e){if("function"==typeof e)return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(r||(r=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(eh(this),t),ec(ei.get(this))}:function(...t){return ec(e.apply(eh(this),t))}:function(t,...r){let n=e.call(eh(this),t,...r);return eo.set(n,t.sort?t.sort():[t]),ec(n)};return e instanceof IDBTransaction&&function(e){if(ea.has(e))return;let t=new Promise((t,r)=>{let n=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{t(),n()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});ea.set(e,t)}(e),(t||(t=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(t=>e instanceof t)?new Proxy(e,eu):e}(e);return n!==e&&(es.set(e,n),el.set(n,e)),n}let eh=e=>el.get(e),ef=["get","getKey","getAll","getAllKeys","count"],ed=["put","add","delete","clear"],ep=new Map;function eg(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(ep.get(t))return ep.get(t);let r=t.replace(/FromIndex$/,""),n=t!==r,i=ed.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||ef.includes(r)))return;let a=async function(e,...t){let a=this.transaction(e,i?"readwrite":"readonly"),o=a.store;return n&&(o=o.index(t.shift())),(await Promise.all([o[r](...t),i&&a.done]))[0]};return ep.set(t,a),a}eu={...n=eu,get:(e,t,r)=>eg(e,t)||n.get(e,t,r),has:(e,t)=>!!eg(e,t)||n.has(e,t)};class em{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{let t;if(t=e.getComponent(),t?.type!=="VERSION")return null;{let t=e.getImmediate();return`${t.library}/${t.version}`}}).filter(e=>e).join(" ")}}let ey="@firebase/app",ev="0.14.7",eb=new en("@firebase/app"),ew="[DEFAULT]",ex={[ey]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/data-connect":"fire-data-connect","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","@firebase/ai":"fire-vertex","fire-js":"fire-js",firebase:"fire-js-all"},eE=new Map,eS=new Map,e_=new Map;function eO(e,t){try{e.container.addComponent(t)}catch(r){eb.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,r)}}function eT(e,t){e.container.addOrOverwriteComponent(t)}function eI(e){let t=e.name;if(e_.has(t))return eb.debug(`There were multiple attempts to register component ${t}.`),!1;for(let r of(e_.set(t,e),eE.values()))eO(r,e);for(let t of eS.values())eO(t,e);return!0}function eA(e,t){let r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}function eC(e,t,r=ew){eA(e,t).clearInstance(r)}function ek(e){return void 0!==e.options}function eP(e){return!ek(e)&&("authIdToken"in e||"appCheckToken"in e||"releaseOnDeref"in e||"automaticDataCollectionEnabled"in e)}function eD(e){return null!=e&&void 0!==e.settings}function eN(){e_.clear()}let ej=new q("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class eM{constructor(e,t,r){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new W("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ej.create("app-deleted",{appName:this._name})}}function eR(e,t){let r=I(e.split(".")[1]);null===r?console.error(`FirebaseServerApp ${t} is invalid: second part could not be parsed.`):void 0===JSON.parse(r).exp?console.error(`FirebaseServerApp ${t} is invalid: expiration claim could not be parsed`):1e3*JSON.parse(r).exp-new Date().getTime()<=0&&console.error(`FirebaseServerApp ${t} is invalid: the token has expired.`)}class eL extends eM{constructor(e,t,r,n){const i=void 0===t.automaticDataCollectionEnabled||t.automaticDataCollectionEnabled,a={name:r,automaticDataCollectionEnabled:i};void 0!==e.apiKey?super(e,a,n):super(e.options,a,n),this._serverConfig={automaticDataCollectionEnabled:i,...t},this._serverConfig.authIdToken&&eR(this._serverConfig.authIdToken,"authIdToken"),this._serverConfig.appCheckToken&&eR(this._serverConfig.appCheckToken,"appCheckToken"),this._finalizationRegistry=null,"u">typeof FinalizationRegistry&&(this._finalizationRegistry=new FinalizationRegistry(()=>{this.automaticCleanup()})),this._refCount=0,this.incRefCount(this._serverConfig.releaseOnDeref),this._serverConfig.releaseOnDeref=void 0,t.releaseOnDeref=void 0,e$(ey,ev,"serverapp")}toJSON(){}get refCount(){return this._refCount}incRefCount(e){this.isDeleted||(this._refCount++,void 0!==e&&null!==this._finalizationRegistry&&this._finalizationRegistry.register(e,this))}decRefCount(){return this.isDeleted?0:--this._refCount}automaticCleanup(){eq(this)}get settings(){return this.checkDestroyed(),this._serverConfig}checkDestroyed(){if(this.isDeleted)throw ej.create("server-app-deleted")}}let eF="12.8.0";function eV(e,t={}){let r=e;"object"!=typeof t&&(t={name:t});let n={name:ew,automaticDataCollectionEnabled:!0,...t},i=n.name;if("string"!=typeof i||!i)throw ej.create("bad-app-name",{appName:String(i)});if(r||(r=k()),!r)throw ej.create("no-options");let a=eE.get(i);if(a)if(K(r,a.options)&&K(n,a.config))return a;else throw ej.create("duplicate-app",{appName:i});let o=new J(i);for(let e of e_.values())o.addComponent(e);let s=new eM(r,n,o);return eE.set(i,s),s}function eB(e,t={}){let r;if(("u">typeof window||F())&&!F())throw ej.create("invalid-server-app-environment");let n=t||{};if(e&&(ek(e)?r=e.options:eP(e)?n=e:r=e),void 0===n.automaticDataCollectionEnabled&&(n.automaticDataCollectionEnabled=!0),r||(r=k()),!r)throw ej.create("no-options");let i={...n,...r};if(void 0!==i.releaseOnDeref&&delete i.releaseOnDeref,void 0!==n.releaseOnDeref&&"u"<typeof FinalizationRegistry)throw ej.create("finalization-registry-not-supported",{});let a=""+[...JSON.stringify(i)].reduce((e,t)=>Math.imul(31,e)+t.charCodeAt(0)|0,0),o=eS.get(a);if(o)return o.incRefCount(n.releaseOnDeref),o;let s=new J(a);for(let e of e_.values())s.addComponent(e);let l=new eL(r,n,a,s);return eS.set(a,l),l}function eU(e=ew){let t=eE.get(e);if(!t&&e===ew&&k())return eV();if(!t)throw ej.create("no-app",{appName:e});return t}function ez(){return Array.from(eE.values())}async function eq(e){let t=!1,r=e.name;eE.has(r)?(t=!0,eE.delete(r)):eS.has(r)&&0>=e.decRefCount()&&(eS.delete(r),t=!0),t&&(await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function e$(e,t,r){let n=ex[e]??e;r&&(n+=`-${r}`);let i=n.match(/\s|\//),a=t.match(/\s|\//);if(i||a){let e=[`Unable to register library "${n}" with version "${t}":`];i&&e.push(`library name "${n}" contains illegal characters (whitespace or "/")`),i&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),eb.warn(e.join(" "));return}eI(new W(`${n}-version`,()=>({library:n,version:t}),"VERSION"))}function eK(e,t){if(null!==e&&"function"!=typeof e)throw ej.create("invalid-log-argument");for(let r of X){let n=null;t&&t.level&&(n=Z[t.level]),null===e?r.userLogHandler=null:r.userLogHandler=(t,r,...i)=>{let o=i.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}}).filter(e=>e).join(" ");r>=(n??t.logLevel)&&e({level:a[r].toLowerCase(),message:o,args:i,type:t.name})}}}function eG(e){X.forEach(t=>{t.setLogLevel(e)})}let eH="firebase-heartbeat-store",eW=null;function eQ(){return eW||(eW=(function(e,t,{blocked:r,upgrade:n,blocking:i,terminated:a}={}){let o=indexedDB.open(e,1),s=ec(o);return n&&o.addEventListener("upgradeneeded",e=>{n(ec(o.result),e.oldVersion,e.newVersion,ec(o.transaction),e)}),r&&o.addEventListener("blocked",e=>r(e.oldVersion,e.newVersion,e)),s.then(e=>{a&&e.addEventListener("close",()=>a()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),s})("firebase-heartbeat-database",0,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(eH)}catch(e){console.warn(e)}}}).catch(e=>{throw ej.create("idb-open",{originalErrorMessage:e.message})})),eW}async function eY(e){try{let t=(await eQ()).transaction(eH),r=await t.objectStore(eH).get(eX(e));return await t.done,r}catch(e){if(e instanceof z)eb.warn(e.message);else{let t=ej.create("idb-get",{originalErrorMessage:e?.message});eb.warn(t.message)}}}async function eJ(e,t){try{let r=(await eQ()).transaction(eH,"readwrite"),n=r.objectStore(eH);await n.put(t,eX(e)),await r.done}catch(e){if(e instanceof z)eb.warn(e.message);else{let t=ej.create("idb-set",{originalErrorMessage:e?.message});eb.warn(t.message)}}}function eX(e){return`${e.name}!${e.options.appId}`}class eZ{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new e1(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{let e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=e0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===t||this._heartbeatsCache.heartbeats.some(e=>e.date===t))return;if(this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats.length>30){let e=function(e){if(0===e.length)return -1;let t=0,r=e[0].date;for(let n=1;n<e.length;n++)e[n].date<r&&(r=e[n].date,t=n);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){eb.warn(e)}}async getHeartbeatsHeader(){try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||0===this._heartbeatsCache.heartbeats.length)return"";let e=e0(),{heartbeatsToSend:t,unsentEntries:r}=function(e,t=1024){let r=[],n=e.slice();for(let i of e){let e=r.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),e2(r)>t){e.dates.pop();break}}else if(r.push({agent:i.agent,dates:[i.date]}),e2(r)>t){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}(this._heartbeatsCache.heartbeats),n=T(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),n}catch(e){return eb.warn(e),""}}}function e0(){return new Date().toISOString().substring(0,10)}class e1{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!U()&&new Promise((e,t)=>{try{let r=!0,n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=()=>{i.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},i.onupgradeneeded=()=>{r=!1},i.onerror=()=>{t(i.error?.message||"")}}catch(e){t(e)}}).then(()=>!0).catch(()=>!1)}async read(){if(!await this._canUseIndexedDBPromise)return{heartbeats:[]};{let e=await eY(this.app);return e?.heartbeats?e:{heartbeats:[]}}}async overwrite(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return eJ(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){let t=await this.read();return eJ(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??t.lastSentHeartbeatDate,heartbeats:[...t.heartbeats,...e.heartbeats]})}}}function e2(e){return T(JSON.stringify({version:2,heartbeats:e})).length}eI(new W("platform-logger",e=>new em(e),"PRIVATE")),eI(new W("heartbeat",e=>new eZ(e),"PRIVATE")),e$(ey,ev,""),e$(ey,ev,"esm2020"),e$("fire-js",""),e.s(["SDK_VERSION",()=>eF,"_DEFAULT_ENTRY_NAME",()=>ew,"_addComponent",()=>eO,"_addOrOverwriteComponent",()=>eT,"_apps",()=>eE,"_clearComponents",()=>eN,"_components",()=>e_,"_getProvider",()=>eA,"_isFirebaseApp",()=>ek,"_isFirebaseServerApp",()=>eD,"_isFirebaseServerAppSettings",()=>eP,"_registerComponent",()=>eI,"_removeServiceInstance",()=>eC,"_serverApps",()=>eS,"deleteApp",()=>eq,"getApp",()=>eU,"getApps",()=>ez,"initializeApp",()=>eV,"initializeServerApp",()=>eB,"onLog",()=>eK,"registerVersion",()=>e$,"setLogLevel",()=>eG],21620),e$("firebase","12.8.0","app"),e.i(21620);var e6=e.i(38054),e3="u">typeof globalThis?globalThis:"u">typeof window?window:e.g,e5={};(function(){function e(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.C=Array(this.blockSize),this.o=this.h=0,this.u()}var t=function(){this.blockSize=-1};function r(){}function n(e,t,r){r||(r=0);let n=Array(16);if("string"==typeof t)for(var i=0;i<16;++i)n[i]=t.charCodeAt(r++)|t.charCodeAt(r++)<<8|t.charCodeAt(r++)<<16|t.charCodeAt(r++)<<24;else for(i=0;i<16;++i)n[i]=t[r++]|t[r++]<<8|t[r++]<<16|t[r++]<<24;t=e.g[0],r=e.g[1],i=e.g[2];let a=e.g[3],o;o=t+(a^r&(i^a))+n[0]+0xd76aa478|0,o=a+(i^(t=r+(o<<7|o>>>25))&(r^i))+n[1]+0xe8c7b756|0,o=i+(r^(a=t+(o<<12|o>>>20))&(t^r))+n[2]+0x242070db|0,o=r+(t^(i=a+(o<<17|o>>>15))&(a^t))+n[3]+0xc1bdceee|0,o=t+(a^(r=i+(o<<22|o>>>10))&(i^a))+n[4]+0xf57c0faf|0,o=a+(i^(t=r+(o<<7|o>>>25))&(r^i))+n[5]+0x4787c62a|0,o=i+(r^(a=t+(o<<12|o>>>20))&(t^r))+n[6]+0xa8304613|0,o=r+(t^(i=a+(o<<17|o>>>15))&(a^t))+n[7]+0xfd469501|0,o=t+(a^(r=i+(o<<22|o>>>10))&(i^a))+n[8]+0x698098d8|0,o=a+(i^(t=r+(o<<7|o>>>25))&(r^i))+n[9]+0x8b44f7af|0,o=i+(r^(a=t+(o<<12|o>>>20))&(t^r))+n[10]+0xffff5bb1|0,o=r+(t^(i=a+(o<<17|o>>>15))&(a^t))+n[11]+0x895cd7be|0,o=t+(a^(r=i+(o<<22|o>>>10))&(i^a))+n[12]+0x6b901122|0,o=a+(i^(t=r+(o<<7|o>>>25))&(r^i))+n[13]+0xfd987193|0,o=i+(r^(a=t+(o<<12|o>>>20))&(t^r))+n[14]+0xa679438e|0,o=r+(t^(i=a+(o<<17|o>>>15))&(a^t))+n[15]+0x49b40821|0,r=i+(o<<22|o>>>10),o=t+(i^a&(r^i))+n[1]+0xf61e2562|0,t=r+(o<<5|o>>>27),o=a+(r^i&(t^r))+n[6]+0xc040b340|0,a=t+(o<<9|o>>>23),o=i+(t^r&(a^t))+n[11]+0x265e5a51|0,i=a+(o<<14|o>>>18),o=r+(a^t&(i^a))+n[0]+0xe9b6c7aa|0,r=i+(o<<20|o>>>12),o=t+(i^a&(r^i))+n[5]+0xd62f105d|0,t=r+(o<<5|o>>>27),o=a+(r^i&(t^r))+n[10]+0x2441453|0,a=t+(o<<9|o>>>23),o=i+(t^r&(a^t))+n[15]+0xd8a1e681|0,i=a+(o<<14|o>>>18),o=r+(a^t&(i^a))+n[4]+0xe7d3fbc8|0,r=i+(o<<20|o>>>12),o=t+(i^a&(r^i))+n[9]+0x21e1cde6|0,t=r+(o<<5|o>>>27),o=a+(r^i&(t^r))+n[14]+0xc33707d6|0,a=t+(o<<9|o>>>23),o=i+(t^r&(a^t))+n[3]+0xf4d50d87|0,i=a+(o<<14|o>>>18),o=r+(a^t&(i^a))+n[8]+0x455a14ed|0,r=i+(o<<20|o>>>12),o=t+(i^a&(r^i))+n[13]+0xa9e3e905|0,t=r+(o<<5|o>>>27),o=a+(r^i&(t^r))+n[2]+0xfcefa3f8|0,a=t+(o<<9|o>>>23),o=i+(t^r&(a^t))+n[7]+0x676f02d9|0,i=a+(o<<14|o>>>18),o=r+(a^t&(i^a))+n[12]+0x8d2a4c8a|0,o=t+((r=i+(o<<20|o>>>12))^i^a)+n[5]+0xfffa3942|0,o=a+((t=r+(o<<4|o>>>28))^r^i)+n[8]+0x8771f681|0,o=i+((a=t+(o<<11|o>>>21))^t^r)+n[11]+0x6d9d6122|0,o=r+((i=a+(o<<16|o>>>16))^a^t)+n[14]+0xfde5380c|0,o=t+((r=i+(o<<23|o>>>9))^i^a)+n[1]+0xa4beea44|0,o=a+((t=r+(o<<4|o>>>28))^r^i)+n[4]+0x4bdecfa9|0,o=i+((a=t+(o<<11|o>>>21))^t^r)+n[7]+0xf6bb4b60|0,o=r+((i=a+(o<<16|o>>>16))^a^t)+n[10]+0xbebfbc70|0,o=t+((r=i+(o<<23|o>>>9))^i^a)+n[13]+0x289b7ec6|0,o=a+((t=r+(o<<4|o>>>28))^r^i)+n[0]+0xeaa127fa|0,o=i+((a=t+(o<<11|o>>>21))^t^r)+n[3]+0xd4ef3085|0,o=r+((i=a+(o<<16|o>>>16))^a^t)+n[6]+0x4881d05|0,o=t+((r=i+(o<<23|o>>>9))^i^a)+n[9]+0xd9d4d039|0,o=a+((t=r+(o<<4|o>>>28))^r^i)+n[12]+0xe6db99e5|0,o=i+((a=t+(o<<11|o>>>21))^t^r)+n[15]+0x1fa27cf8|0,o=r+((i=a+(o<<16|o>>>16))^a^t)+n[2]+0xc4ac5665|0,r=i+(o<<23|o>>>9),o=t+(i^(r|~a))+n[0]+0xf4292244|0,t=r+(o<<6|o>>>26),o=a+(r^(t|~i))+n[7]+0x432aff97|0,a=t+(o<<10|o>>>22),o=i+(t^(a|~r))+n[14]+0xab9423a7|0,i=a+(o<<15|o>>>17),o=r+(a^(i|~t))+n[5]+0xfc93a039|0,r=i+(o<<21|o>>>11),o=t+(i^(r|~a))+n[12]+0x655b59c3|0,t=r+(o<<6|o>>>26),o=a+(r^(t|~i))+n[3]+0x8f0ccc92|0,a=t+(o<<10|o>>>22),o=i+(t^(a|~r))+n[10]+0xffeff47d|0,i=a+(o<<15|o>>>17),o=r+(a^(i|~t))+n[1]+0x85845dd1|0,r=i+(o<<21|o>>>11),o=t+(i^(r|~a))+n[8]+0x6fa87e4f|0,t=r+(o<<6|o>>>26),o=a+(r^(t|~i))+n[15]+0xfe2ce6e0|0,a=t+(o<<10|o>>>22),o=i+(t^(a|~r))+n[6]+0xa3014314|0,i=a+(o<<15|o>>>17),o=r+(a^(i|~t))+n[13]+0x4e0811a1|0,r=i+(o<<21|o>>>11),o=t+(i^(r|~a))+n[4]+0xf7537e82|0,t=r+(o<<6|o>>>26),o=a+(r^(t|~i))+n[11]+0xbd3af235|0,a=t+(o<<10|o>>>22),o=i+(t^(a|~r))+n[2]+0x2ad7d2bb|0,i=a+(o<<15|o>>>17),o=r+(a^(i|~t))+n[9]+0xeb86d391|0,e.g[0]=e.g[0]+t|0,e.g[1]=e.g[1]+(i+(o<<21|o>>>11))|0,e.g[2]=e.g[2]+i|0,e.g[3]=e.g[3]+a|0}function i(e,t){this.h=t;let r=[],n=!0;for(let i=e.length-1;i>=0;i--){let a=0|e[i];n&&a==t||(r[i]=a,n=!1)}this.g=r}r.prototype=t.prototype,e.F=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.D=function(e,r,n){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[r].apply(e,i)},e.prototype.u=function(){this.g[0]=0x67452301,this.g[1]=0xefcdab89,this.g[2]=0x98badcfe,this.g[3]=0x10325476,this.o=this.h=0},e.prototype.v=function(e,t){void 0===t&&(t=e.length);let r=t-this.blockSize,i=this.C,a=this.h,o=0;for(;o<t;){if(0==a)for(;o<=r;)n(this,e,o),o+=this.blockSize;if("string"==typeof e){for(;o<t;)if(i[a++]=e.charCodeAt(o++),a==this.blockSize){n(this,i),a=0;break}}else for(;o<t;)if(i[a++]=e[o++],a==this.blockSize){n(this,i),a=0;break}}this.h=a,this.o+=t},e.prototype.A=function(){var e=Array((this.h<56?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;t=8*this.o;for(var r=e.length-8;r<e.length;++r)e[r]=255&t,t/=256;for(this.v(e),e=Array(16),t=0,r=0;r<4;++r)for(let n=0;n<32;n+=8)e[t++]=this.g[r]>>>n&255;return e};var a,l={};function u(e){var t;return -128<=e&&e<128?(t=function(e){return new i([0|e],e<0?-1:0)},Object.prototype.hasOwnProperty.call(l,e)?l[e]:l[e]=t(e)):new i([0|e],e<0?-1:0)}function c(e){if(isNaN(e)||!isFinite(e))return h;if(e<0)return m(c(-e));let t=[],r=1;for(let n=0;e>=r;n++)t[n]=e/r|0,r*=0x100000000;return new i(t,0)}var h=u(0),f=u(1),d=u(0x1000000);function p(e){if(0!=e.h)return!1;for(let t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function g(e){return -1==e.h}function m(e){let t=e.g.length,r=[];for(let n=0;n<t;n++)r[n]=~e.g[n];return new i(r,~e.h).add(f)}function y(e,t){return e.add(m(t))}function v(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function b(e,t){this.g=e,this.h=t}function w(e,t){if(p(t))throw Error("division by zero");if(p(e))return new b(h,h);if(g(e))return t=w(m(e),t),new b(m(t.g),m(t.h));if(g(t))return t=w(e,m(t)),new b(m(t.g),t.h);if(e.g.length>30){if(g(e)||g(t))throw Error("slowDivide_ only works with positive integers.");for(var r=f,n=t;0>=n.l(e);)r=x(r),n=x(n);var i=E(r,1),a=E(n,1);for(n=E(n,2),r=E(r,2);!p(n);){var o=a.add(n);0>=o.l(e)&&(i=i.add(r),a=o),n=E(n,1),r=E(r,1)}return t=y(e,i.j(t)),new b(i,t)}for(i=h;e.l(t)>=0;){for(n=(n=Math.ceil(Math.log(r=Math.max(1,Math.floor(e.m()/t.m())))/Math.LN2))<=48?1:Math.pow(2,n-48),o=(a=c(r)).j(t);g(o)||o.l(e)>0;)r-=n,o=(a=c(r)).j(t);p(a)&&(a=f),i=i.add(a),e=y(e,o)}return new b(i,e)}function x(e){let t=e.g.length+1,r=[];for(let n=0;n<t;n++)r[n]=e.i(n)<<1|e.i(n-1)>>>31;return new i(r,e.h)}function E(e,t){let r=t>>5;t%=32;let n=e.g.length-r,a=[];for(let i=0;i<n;i++)a[i]=t>0?e.i(i+r)>>>t|e.i(i+r+1)<<32-t:e.i(i+r);return new i(a,e.h)}(a=i.prototype).m=function(){if(g(this))return-m(this).m();let e=0,t=1;for(let r=0;r<this.g.length;r++){let n=this.i(r);e+=(n>=0?n:0x100000000+n)*t,t*=0x100000000}return e},a.toString=function(e){if((e=e||10)<2||36<e)throw Error("radix out of range: "+e);if(p(this))return"0";if(g(this))return"-"+m(this).toString(e);let t=c(Math.pow(e,6));var r=this;let n="";for(;;){let i=w(r,t).g,a=(((r=y(r,i.j(t))).g.length>0?r.g[0]:r.h)>>>0).toString(e);if(p(r=i))return a+n;for(;a.length<6;)a="0"+a;n=a+n}},a.i=function(e){return e<0?0:e<this.g.length?this.g[e]:this.h},a.l=function(e){return g(e=y(this,e))?-1:+!p(e)},a.abs=function(){return g(this)?m(this):this},a.add=function(e){let t=Math.max(this.g.length,e.g.length),r=[],n=0;for(let i=0;i<=t;i++){let t=n+(65535&this.i(i))+(65535&e.i(i)),a=(t>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);n=a>>>16,t&=65535,a&=65535,r[i]=a<<16|t}return new i(r,-0x80000000&r[r.length-1]?-1:0)},a.j=function(e){if(p(this)||p(e))return h;if(g(this))return g(e)?m(this).j(m(e)):m(m(this).j(e));if(g(e))return m(this.j(m(e)));if(0>this.l(d)&&0>e.l(d))return c(this.m()*e.m());let t=this.g.length+e.g.length,r=[];for(var n=0;n<2*t;n++)r[n]=0;for(n=0;n<this.g.length;n++)for(let t=0;t<e.g.length;t++){let i=this.i(n)>>>16,a=65535&this.i(n),o=e.i(t)>>>16,s=65535&e.i(t);r[2*n+2*t]+=a*s,v(r,2*n+2*t),r[2*n+2*t+1]+=i*s,v(r,2*n+2*t+1),r[2*n+2*t+1]+=a*o,v(r,2*n+2*t+1),r[2*n+2*t+2]+=i*o,v(r,2*n+2*t+2)}for(e=0;e<t;e++)r[e]=r[2*e+1]<<16|r[2*e];for(e=t;e<2*t;e++)r[e]=0;return new i(r,0)},a.B=function(e){return w(this,e).h},a.and=function(e){let t=Math.max(this.g.length,e.g.length),r=[];for(let n=0;n<t;n++)r[n]=this.i(n)&e.i(n);return new i(r,this.h&e.h)},a.or=function(e){let t=Math.max(this.g.length,e.g.length),r=[];for(let n=0;n<t;n++)r[n]=this.i(n)|e.i(n);return new i(r,this.h|e.h)},a.xor=function(e){let t=Math.max(this.g.length,e.g.length),r=[];for(let n=0;n<t;n++)r[n]=this.i(n)^e.i(n);return new i(r,this.h^e.h)},e.prototype.digest=e.prototype.A,e.prototype.reset=e.prototype.u,e.prototype.update=e.prototype.v,s=e5.Md5=e,i.prototype.add=i.prototype.add,i.prototype.multiply=i.prototype.j,i.prototype.modulo=i.prototype.B,i.prototype.compare=i.prototype.l,i.prototype.toNumber=i.prototype.m,i.prototype.toString=i.prototype.toString,i.prototype.getBits=i.prototype.i,i.fromNumber=c,i.fromString=function e(t,r){if(0==t.length)throw Error("number format error: empty string");if((r=r||10)<2||36<r)throw Error("radix out of range: "+r);if("-"==t.charAt(0))return m(e(t.substring(1),r));if(t.indexOf("-")>=0)throw Error('number format error: interior "-" character');let n=c(Math.pow(r,8)),i=h;for(let e=0;e<t.length;e+=8){var a=Math.min(8,t.length-e);let o=parseInt(t.substring(e,e+a),r);a<8?(a=c(Math.pow(r,a)),i=i.j(a).add(c(o))):i=(i=i.j(n)).add(c(o))}return i},o=e5.Integer=i}).apply(void 0!==e3?e3:"u">typeof self?self:"u">typeof window?window:{});var e4="u">typeof globalThis?globalThis:"u">typeof window?window:e.g,e8={};(function(){var e,t,r=Object.defineProperty,n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof e4&&e4];for(var t=0;t<e.length;++t){var r=e[t];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")}(this);function i(e,t){if(t)e:{var i=n;e=e.split(".");for(var a=0;a<e.length-1;a++){var o=e[a];if(!(o in i))break e;i=i[o]}(t=t(a=i[e=e[e.length-1]]))!=a&&null!=t&&r(i,e,{configurable:!0,writable:!0,value:t})}}i("Symbol.dispose",function(e){return e||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(e){return e||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(e){return e||function(e){var t,r=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&r.push([t,e[t]]);return r}});var a=a||{},o=this||self;function s(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function m(e,t,r){return e.call.apply(e.bind,arguments)}function y(e,t,r){return(y=m).apply(null,arguments)}function v(e,t){var r=Array.prototype.slice.call(arguments,1);return function(){var t=r.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function b(e,t){function r(){}r.prototype=t.prototype,e.Z=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.Ob=function(e,r,n){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[r].apply(e,i)}}var w="u">typeof AsyncContext&&"function"==typeof AsyncContext.Snapshot?e=>e&&AsyncContext.Snapshot.wrap(e):e=>e;function x(e){let t=e.length;if(t>0){let r=Array(t);for(let n=0;n<t;n++)r[n]=e[n];return r}return[]}function E(e,t){for(let t=1;t<arguments.length;t++){let n=arguments[t];var r=typeof n;if("array"==(r="object"!=r?r:n?Array.isArray(n)?"array":r:"null")||"object"==r&&"number"==typeof n.length){r=e.length||0;let t=n.length||0;e.length=r+t;for(let i=0;i<t;i++)e[r+i]=n[i]}else e.push(n)}}var S=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return this.h>0?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new _,e=>e.reset());class _{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let O,T=!1,I=new class{constructor(){this.h=this.g=null}add(e,t){let r=S.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},A=()=>{let e=Promise.resolve(void 0);O=()=>{e.then(C)}};function C(){let e;for(var t;e=null,I.g&&(e=I.g,I.g=I.g.next,I.g||(I.h=null),e.next=null),t=e;){try{t.h.call(t.g)}catch(e){!function(e){o.setTimeout(()=>{throw e},0)}(e)}S.j(t),S.h<100&&(S.h++,t.next=S.g,S.g=t)}T=!1}function k(){this.u=this.u,this.C=this.C}function P(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},P.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{let e=()=>{};o.addEventListener("test",e,t),o.removeEventListener("test",e,t)}catch(e){}return e}();function N(e){return/^[\s\xa0]*$/.test(e)}function j(e,t){P.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e&&this.init(e,t)}b(j,P),j.prototype.init=function(e,t){let r=this.type=e.type,n=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;this.target=e.target||e.srcElement,this.g=t,(t=e.relatedTarget)||("mouseover"==r?t=e.fromElement:"mouseout"==r&&(t=e.toElement)),this.relatedTarget=t,n?(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType=e.pointerType,this.state=e.state,this.i=e,e.defaultPrevented&&j.Z.h.call(this)},j.prototype.h=function(){j.Z.h.call(this);let e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),R=0;function L(e,t,r,n,i){this.listener=e,this.proxy=null,this.src=t,this.type=r,this.capture=!!n,this.ha=i,this.key=++R,this.da=this.fa=!1}function F(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function V(e,t,r){for(let n in e)t.call(r,e[n],n,e)}function B(e){let t={};for(let r in e)t[r]=e[r];return t}let U="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function z(e,t){let r,n;for(let t=1;t<arguments.length;t++){for(r in n=arguments[t])e[r]=n[r];for(let t=0;t<U.length;t++)r=U[t],Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}}function q(e){this.src=e,this.g={},this.h=0}function $(e,t){let r=t.type;if(r in e.g){var n,i=e.g[r],a=Array.prototype.indexOf.call(i,t,void 0);(n=a>=0)&&Array.prototype.splice.call(i,a,1),n&&(F(t),0==e.g[r].length&&(delete e.g[r],e.h--))}}function K(e,t,r,n){for(let i=0;i<e.length;++i){let a=e[i];if(!a.da&&a.listener==t&&!!r==a.capture&&a.ha==n)return i}return -1}q.prototype.add=function(e,t,r,n,i){let a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);let o=K(e,t,n,i);return o>-1?(t=e[o],r||(t.fa=!1)):((t=new L(t,this.src,a,!!n,i)).fa=r,e.push(t)),t};var G="closure_lm_"+(1e6*Math.random()|0),H={};function W(e,t,r,n,i,a){if(!t)throw Error("Invalid event type");let o=s(i)?!!i.capture:!!i,l=X(e);if(l||(e[G]=l=new q(e)),(r=l.add(t,r,n,o,a)).proxy)return r;if(n=function e(t){return J.call(e.src,e.listener,t)},r.proxy=n,n.src=e,n.listener=r,e.addEventListener)D||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),n,i);else if(e.attachEvent)e.attachEvent(Y(t.toString()),n);else if(e.addListener&&e.removeListener)e.addListener(n);else throw Error("addEventListener and attachEvent are unavailable.");return r}function Q(e){if("number"!=typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])$(t.i,e);else{var r=e.type,n=e.proxy;t.removeEventListener?t.removeEventListener(r,n,e.capture):t.detachEvent?t.detachEvent(Y(r),n):t.addListener&&t.removeListener&&t.removeListener(n),(r=X(t))?($(r,e),0==r.h&&(r.src=null,t[G]=null)):F(e)}}}function Y(e){return e in H?H[e]:H[e]="on"+e}function J(e,t){if(e.da)e=!0;else{t=new j(t,this);let r=e.listener,n=e.ha||e.src;e.fa&&Q(e),e=r.call(n,t)}return e}function X(e){return(e=e[G])instanceof q?e:null}var Z="__closure_events_fn_"+(1e9*Math.random()>>>0);function ee(e){return"function"==typeof e?e:(e[Z]||(e[Z]=function(t){return e.handleEvent(t)}),e[Z])}function et(){k.call(this),this.i=new q(this),this.M=this,this.G=null}function er(e,t){let r,n;var i,a=e.G;if(a)for(i=[];a;a=a.G)i.push(a);if(e=e.M,a=t.type||t,"string"==typeof t)t=new P(t,e);else if(t instanceof P)t.target=t.target||e;else{var o=t;z(t=new P(a,e),o)}if(o=!0,i)for(n=i.length-1;n>=0;n--)o=en(r=t.g=i[n],a,!0,t)&&o;if(o=en(r=t.g=e,a,!0,t)&&o,o=en(r,a,!1,t)&&o,i)for(n=0;n<i.length;n++)o=en(r=t.g=i[n],a,!1,t)&&o}function en(e,t,r,n){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();let i=!0;for(let a=0;a<t.length;++a){let o=t[a];if(o&&!o.da&&o.capture==r){let t=o.listener,r=o.ha||o.src;o.fa&&$(e.i,o),i=!1!==t.call(r,n)&&i}}return i&&!n.defaultPrevented}b(et,k),et.prototype[M]=!0,et.prototype.removeEventListener=function(e,t,r,n){!function e(t,r,n,i,a){if(Array.isArray(r))for(var o=0;o<r.length;o++)e(t,r[o],n,i,a);else(i=s(i)?!!i.capture:!!i,n=ee(n),t&&t[M])?(t=t.i,(o=String(r).toString())in t.g&&(n=K(r=t.g[o],n,i,a))>-1&&(F(r[n]),Array.prototype.splice.call(r,n,1),0==r.length&&(delete t.g[o],t.h--))):t&&(t=X(t))&&(r=t.g[r.toString()],t=-1,r&&(t=K(r,n,i,a)),(n=t>-1?r[t]:null)&&Q(n))}(this,e,t,r,n)},et.prototype.N=function(){if(et.Z.N.call(this),this.i){var e=this.i;for(let t in e.g){let r=e.g[t];for(let e=0;e<r.length;e++)F(r[e]);delete e.g[t],e.h--}}this.G=null},et.prototype.J=function(e,t,r,n){return this.i.add(String(e),t,!1,r,n)},et.prototype.K=function(e,t,r,n){return this.i.add(String(e),t,!0,r,n)};class ei extends k{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:function e(t){t.g=function(e,t){if("function"!=typeof e)if(e&&"function"==typeof e.handleEvent)e=y(e.handleEvent,e);else throw Error("Invalid listener argument");return Number(t)>0x7fffffff?-1:o.setTimeout(e,t||0)}(()=>{t.g=null,t.i&&(t.i=!1,e(t))},t.l);let r=t.h;t.h=null,t.m.apply(null,r)}(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ea(e){k.call(this),this.h=e,this.g={}}b(ea,k);var eo=[];function es(e){V(e.g,function(e,t){this.g.hasOwnProperty(t)&&Q(e)},e),e.g={}}ea.prototype.N=function(){ea.Z.N.call(this),es(this)},ea.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var el=o.JSON.stringify,eu=o.JSON.parse,ec=class{stringify(e){return o.JSON.stringify(e,void 0)}parse(e){return o.JSON.parse(e,void 0)}};function eh(){}function ef(){}var ed={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ep(){P.call(this,"d")}function eg(){P.call(this,"c")}b(ep,P),b(eg,P);var em={},ey=null;function ev(){return ey=ey||new et}function eb(e){P.call(this,em.Ia,e)}function ew(e){let t=ev();er(t,new eb(t))}function ex(e,t){P.call(this,em.STAT_EVENT,e),this.stat=t}function eE(e){let t=ev();er(t,new ex(t,e))}function eS(e,t){P.call(this,em.Ja,e),this.size=t}function e_(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){e()},t)}function eO(){this.g=!0}function eT(e,t,r,n){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{let a=JSON.parse(t);if(a){for(e=0;e<a.length;e++)if(Array.isArray(a[e])){var r=a[e];if(!(r.length<2)){var n=r[1];if(Array.isArray(n)&&!(n.length<1)){var i=n[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(let e=1;e<n.length;e++)n[e]=""}}}}return el(a)}catch(e){return t}}(e,r)+(n?" "+n:"")})}em.Ia="serverreachability",b(eb,P),em.STAT_EVENT="statevent",b(ex,P),em.Ja="timingevent",b(eS,P),eO.prototype.ua=function(){this.g=!1},eO.prototype.info=function(){};var eI={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},eA={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"};function eC(){}function ek(e){return encodeURIComponent(String(e))}function eP(e,t,r,n){this.j=e,this.i=t,this.l=r,this.S=n||1,this.V=new ea(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new eD}function eD(){this.i=null,this.g="",this.h=!1}b(eC,eh),eC.prototype.g=function(){return new XMLHttpRequest},e=new eC;var eN={},ej={};function eM(e,t,r){e.M=1,e.A=e5(e0(t)),e.u=r,e.R=!0,eR(e,null)}function eR(e,t){e.F=Date.now(),eF(e),e.B=e0(e.A);var r,n,i,a,o,l,u=e.B,c=e.S;Array.isArray(c)||(c=[String(c)]),th(u.i,"t",c),e.C=0,u=e.j.L,e.h=new eD,e.g=tJ(e.j,u?t:null,!e.u),e.P>0&&(e.O=new ei(y(e.Y,e,e.g),e.P)),t=e.V,u=e.g,c=e.ba;var h="readystatechange";Array.isArray(h)||(h&&(eo[0]=h.toString()),h=eo);for(let e=0;e<h.length;e++){let r=function e(t,r,n,i,a){if(i&&i.once)return function e(t,r,n,i,a){if(Array.isArray(r)){for(let o=0;o<r.length;o++)e(t,r[o],n,i,a);return null}return n=ee(n),t&&t[M]?t.K(r,n,s(i)?!!i.capture:!!i,a):W(t,r,n,!0,i,a)}(t,r,n,i,a);if(Array.isArray(r)){for(let o=0;o<r.length;o++)e(t,r[o],n,i,a);return null}return n=ee(n),t&&t[M]?t.J(r,n,s(i)?!!i.capture:!!i,a):W(t,r,n,!1,i,a)}(u,h[e],c||t.handleEvent,!1,t.h||t);if(!r)break;t.g[r.key]=r}t=e.J?B(e.J):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.B,e.v,e.u,t)):(e.v="GET",e.g.ea(e.B,e.v,null,t)),ew(),r=e.i,n=e.v,i=e.B,a=e.l,o=e.S,l=e.u,r.info(function(){if(r.g)if(l){var e="",t=l.split("&");for(let r=0;r<t.length;r++){var s=t[r].split("=");if(s.length>1){let t=s[0];s=s[1];let r=t.split("_");e=r.length>=2&&"type"==r[1]?e+(t+"=")+s+"&":e+(t+"=redacted&")}}}else e=null;else e=l;return"XMLHTTP REQ ("+a+") [attempt "+o+"]: "+n+"\n"+i+"\n"+e})}function eL(e){return!!e.g&&"GET"==e.v&&2!=e.M&&e.j.Aa}function eF(e){e.T=Date.now()+e.H,eV(e,e.H)}function eV(e,t){if(null!=e.D)throw Error("WatchDog timer not null");e.D=e_(y(e.aa,e),t)}function eB(e){e.D&&(o.clearTimeout(e.D),e.D=null)}function eU(e){0==e.j.I||e.K||tG(e.j,e)}function ez(e){eB(e);var t=e.O;t&&"function"==typeof t.dispose&&t.dispose(),e.O=null,es(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.dispose())}function eq(e,t){try{var r=e.j;if(0!=r.I&&(r.g==e||eW(r.h,e))){if(!e.L&&eW(r.h,e)&&3==r.I){try{var n=r.Ba.g.parse(t)}catch(e){n=null}if(Array.isArray(n)&&3==n.length){var i=n;if(0==i[0]){e:if(!r.v){if(r.g)if(r.g.F+3e3<e.F)tK(r),tM(r);else break e;tz(r),eE(18)}}else r.xa=i[1],0<r.xa-r.K&&i[2]<37500&&r.F&&0==r.A&&!r.C&&(r.C=e_(y(r.Va,r),6e3));1>=eH(r.h)&&r.ta&&(r.ta=void 0)}else tW(r,11)}else if((e.L||r.g==e)&&tK(r),!N(t))for(i=r.Ba.g.parse(t),t=0;t<i.length;t++){let s=i[t],l=s[0];if(!(l<=r.K))if(r.K=l,s=s[1],2==r.I)if("c"==s[0]){r.M=s[1],r.ba=s[2];let t=s[3];null!=t&&(r.ka=t,r.j.info("VER="+r.ka));let i=s[4];null!=i&&(r.za=i,r.j.info("SVER="+r.za));let l=s[5];null!=l&&"number"==typeof l&&l>0&&(r.O=n=1.5*l,r.j.info("backChannelRequestTimeoutMs_="+n)),n=r;let u=e.g;if(u){let e=u.g?u.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var a=n.h;a.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(eQ(a,a.h),a.h=null))}if(n.G){let e=u.g?u.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(n.wa=e,e3(n.J,n.G,e))}}if(r.I=3,r.l&&r.l.ra(),r.aa&&(r.T=Date.now()-e.F,r.j.info("Handshake RTT: "+r.T+"ms")),(n=r).na=tY(n,n.L?n.ba:null,n.W),e.L){eY(n.h,e);var o=n.O;o&&(e.H=o),e.D&&(eB(e),eF(e)),n.g=e}else tU(n);r.i.length>0&&tL(r)}else"stop"!=s[0]&&"close"!=s[0]||tW(r,7);else 3==r.I&&("stop"==s[0]||"close"==s[0]?"stop"==s[0]?tW(r,7):tj(r):"noop"!=s[0]&&r.l&&r.l.qa(s),r.A=0)}}ew(4)}catch(e){}}eP.prototype.ba=function(e){e=e.target;let t=this.O;t&&3==tk(e)?t.j():this.Y(e)},eP.prototype.Y=function(e){try{if(e==this.g)e:{let d=tk(this.g),p=this.g.ya(),g=this.g.ca();if(!(d<3)&&(3!=d||this.g&&(this.h.h||this.g.la()||tP(this.g)))){this.K||4!=d||7==p||(8==p||g<=0?ew(3):ew(2)),eB(this);var t=this.g.ca();this.X=t;var r=function(e){if(!eL(e))return e.g.la();let t=tP(e.g);if(""===t)return"";let r="",n=t.length,i=4==tk(e.g);if(!e.h.i){if("u"<typeof TextDecoder)return ez(e),eU(e),"";e.h.i=new o.TextDecoder}for(let a=0;a<n;a++)e.h.h=!0,r+=e.h.i.decode(t[a],{stream:!(i&&a==n-1)});return t.length=0,e.h.g+=r,e.C=0,e.h.g}(this);if(this.o=200==t,n=this.i,i=this.v,a=this.B,s=this.l,l=this.S,n.info(function(){return"XMLHTTP RESP ("+s+") [ attempt "+l+"]: "+i+"\n"+a+"\n"+d+" "+t}),this.o){if(this.U&&!this.L){t:{if(this.g){var n,i,a,s,l,u,c=this.g;if((u=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(u)){var h=u;break t}}h=null}if(e=h)eT(this.i,this.l,e,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,eq(this,e);else{this.o=!1,this.m=3,eE(12),ez(this),eU(this);break e}}if(this.R){let t;for(e=!0;!this.K&&this.C<r.length;)if((t=function(e,t){var r=e.C,n=t.indexOf("\n",r);return -1==n?ej:isNaN(r=Number(t.substring(r,n)))?eN:(n+=1)+r>t.length?ej:(t=t.slice(n,n+r),e.C=n+r,t)}(this,r))==ej){4==d&&(this.m=4,eE(14),e=!1),eT(this.i,this.l,null,"[Incomplete Response]");break}else if(t==eN){this.m=4,eE(15),eT(this.i,this.l,r,"[Invalid Chunk]"),e=!1;break}else eT(this.i,this.l,t,null),eq(this,t);if(eL(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=r.length||this.h.h||(this.m=1,eE(16),e=!1),this.o=this.o&&e,e){if(r.length>0&&!this.W){this.W=!0;var f=this.j;f.g==this&&f.aa&&!f.P&&(f.j.info("Great, no buffering proxy detected. Bytes received: "+r.length),tq(f),f.P=!0,eE(11))}}else eT(this.i,this.l,r,"[Invalid Chunked Response]"),ez(this),eU(this)}else eT(this.i,this.l,r,null),eq(this,r);4==d&&ez(this),this.o&&!this.K&&(4==d?tG(this.j,this):(this.o=!1,eF(this)))}else(function(e){let t={};e=(e.g&&tk(e)>=2&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let n=0;n<e.length;n++){if(N(e[n]))continue;var r=function(e){var t=1;e=e.split(":");let r=[];for(;t>0&&e.length;)r.push(e.shift()),t--;return e.length&&r.push(e.join(":")),r}(e[n]);let i=r[0];if("string"!=typeof(r=r[1]))continue;r=r.trim();let a=t[i]||[];t[i]=a,a.push(r)}var n=function(e){return e.join(", ")};for(let e in t)n.call(void 0,t[e],e,t)})(this.g),400==t&&r.indexOf("Unknown SID")>0?(this.m=3,eE(12)):(this.m=0,eE(13)),ez(this),eU(this)}}}catch(e){}finally{}},eP.prototype.cancel=function(){this.K=!0,ez(this)},eP.prototype.aa=function(){var e,t;this.D=null;let r=Date.now();r-this.T>=0?(e=this.i,t=this.B,e.info(function(){return"TIMEOUT: "+t}),2!=this.M&&(ew(),eE(17)),ez(this),this.m=2,eU(this)):eV(this,this.T-r)};var e$=class{constructor(e,t){this.g=e,this.map=t}};function eK(e){this.l=e||10,e=o.PerformanceNavigationTiming?(e=o.performance.getEntriesByType("navigation")).length>0&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function eG(e){return!!e.h||!!e.g&&e.g.size>=e.j}function eH(e){return e.h?1:e.g?e.g.size:0}function eW(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function eQ(e,t){e.g?e.g.add(t):e.h=t}function eY(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function eJ(e){if(null!=e.h)return e.i.concat(e.h.G);if(null!=e.g&&0!==e.g.size){let t=e.i;for(let r of e.g.values())t=t.concat(r.G);return t}return x(e.i)}eK.prototype.cancel=function(){if(this.i=eJ(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(let e of this.g.values())e.cancel();this.g.clear()}};var eX=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function eZ(e){let t;this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1,e instanceof eZ?(this.l=e.l,e1(this,e.j),this.o=e.o,this.g=e.g,e2(this,e.u),this.h=e.h,e6(this,tf(e.i)),this.m=e.m):e&&(t=String(e).match(eX))?(this.l=!1,e1(this,t[1]||"",!0),this.o=e7(t[2]||""),this.g=e7(t[3]||"",!0),e2(this,t[4]),this.h=e7(t[5]||"",!0),e6(this,t[6]||"",!0),this.m=e7(t[7]||"")):(this.l=!1,this.i=new to(null,this.l))}function e0(e){return new eZ(e)}function e1(e,t,r){e.j=r?e7(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function e2(e,t){if(t){if(isNaN(t=Number(t))||t<0)throw Error("Bad port number "+t);e.u=t}else e.u=null}function e6(e,t,r){var n,i;t instanceof to?(e.i=t,n=e.i,(i=e.l)&&!n.j&&(ts(n),n.i=null,n.g.forEach(function(e,t){let r=t.toLowerCase();t!=r&&(tl(this,t),th(this,r,e))},n)),n.j=i):(r||(t=e9(t,ti)),e.i=new to(t,e.l))}function e3(e,t,r){e.i.set(t,r)}function e5(e){return e3(e,"zx",Math.floor(0x80000000*Math.random()).toString(36)+Math.abs(Math.floor(0x80000000*Math.random())^Date.now()).toString(36)),e}function e7(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function e9(e,t,r){return"string"==typeof e?(e=encodeURI(e).replace(t,te),r&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function te(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}eZ.prototype.toString=function(){let e=[];var t=this.j;t&&e.push(e9(t,tt,!0),":");var r=this.g;return(r||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(e9(t,tt,!0),"@"),e.push(ek(r).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(r=this.u)&&e.push(":",String(r))),(r=this.h)&&(this.g&&"/"!=r.charAt(0)&&e.push("/"),e.push(e9(r,"/"==r.charAt(0)?tn:tr,!0))),(r=this.i.toString())&&e.push("?",r),(r=this.m)&&e.push("#",e9(r,ta)),e.join("")},eZ.prototype.resolve=function(e){let t=e0(this),r=!!e.j;r?e1(t,e.j):r=!!e.o,r?t.o=e.o:r=!!e.g,r?t.g=e.g:r=null!=e.u;var n=e.h;if(r)e2(t,e.u);else if(r=!!e.h){if("/"!=n.charAt(0))if(this.g&&!this.h)n="/"+n;else{var i=t.h.lastIndexOf("/");-1!=i&&(n=t.h.slice(0,i+1)+n)}if(".."==(i=n)||"."==i)n="";else if(-1!=i.indexOf("./")||-1!=i.indexOf("/.")){n=0==i.lastIndexOf("/",0),i=i.split("/");let e=[];for(let t=0;t<i.length;){let r=i[t++];"."==r?n&&t==i.length&&e.push(""):".."==r?((e.length>1||1==e.length&&""!=e[0])&&e.pop(),n&&t==i.length&&e.push("")):(e.push(r),n=!0)}n=e.join("/")}else n=i}return r?t.h=n:r=""!==e.i.toString(),r?e6(t,tf(e.i)):r=!!e.m,r&&(t.m=e.m),t};var tt=/[#\/\?@]/g,tr=/[#\?:]/g,tn=/[#\?]/g,ti=/[#\?@]/g,ta=/#/g;function to(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ts(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(let r=0;r<e.length;r++){let n=e[r].indexOf("="),i,a=null;n>=0?(i=e[r].substring(0,n),a=e[r].substring(n+1)):i=e[r],t(i,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}(e.i,function(t,r){e.add(decodeURIComponent(t.replace(/\+/g," ")),r)}))}function tl(e,t){ts(e),t=td(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function tu(e,t){return ts(e),t=td(e,t),e.g.has(t)}function tc(e,t){ts(e);let r=[];if("string"==typeof t)tu(e,t)&&(r=r.concat(e.g.get(td(e,t))));else for(e=Array.from(e.g.values()),t=0;t<e.length;t++)r=r.concat(e[t]);return r}function th(e,t,r){tl(e,t),r.length>0&&(e.i=null,e.g.set(td(e,t),x(r)),e.h+=r.length)}function tf(e){let t=new to;return t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),t}function td(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function tp(e,t,r,n,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),n(r)}catch(e){}}function tg(){this.g=new ec}function tm(e){this.i=e.Sb||null,this.h=e.ab||!1}function ty(e,t){et.call(this),this.H=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}function tv(e){e.j.read().then(e.Ma.bind(e)).catch(e.ga.bind(e))}function tb(e){e.readyState=4,e.l=null,e.j=null,e.B=null,tw(e)}function tw(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function tx(e){let t="";return V(e,function(e,r){t+=r,t+=":",t+=e,t+="\r\n"}),t}function tE(e,t,r){e:{for(n in r){var n=!1;break e}n=!0}n||(r=tx(r),"string"==typeof e?null!=r&&ek(r):e3(e,t,r))}function tS(e){et.call(this),this.headers=new Map,this.L=e||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}(t=to.prototype).add=function(e,t){ts(this),this.i=null,e=td(this,e);let r=this.g.get(e);return r||this.g.set(e,r=[]),r.push(t),this.h+=1,this},t.forEach=function(e,t){ts(this),this.g.forEach(function(r,n){r.forEach(function(r){e.call(t,r,n,this)},this)},this)},t.set=function(e,t){return ts(this),this.i=null,tu(this,e=td(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},t.get=function(e,t){return e&&(e=tc(this,e)).length>0?String(e[0]):t},t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let e=[],t=Array.from(this.g.keys());for(let n=0;n<t.length;n++){var r=t[n];let i=ek(r);r=tc(this,r);for(let t=0;t<r.length;t++){let n=i;""!==r[t]&&(n+="="+ek(r[t])),e.push(n)}}return this.i=e.join("&")},b(tm,eh),tm.prototype.g=function(){return new ty(this.i,this.h)},b(ty,et),(t=ty.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.F=e,this.D=t,this.readyState=1,tw(this)},t.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let t={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};e&&(t.body=e),(this.H||o).fetch(new Request(this.D,t)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&4!=this.readyState&&(this.g=!1,tb(this)),this.readyState=0},t.Pa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,tw(this)),this.g&&(this.readyState=3,tw(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(void 0!==o.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;tv(this)}else e.text().then(this.Oa.bind(this),this.ga.bind(this))},t.Ma=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.B.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?tb(this):tw(this),3==this.readyState&&tv(this)}},t.Oa=function(e){this.g&&(this.response=this.responseText=e,tb(this))},t.Na=function(e){this.g&&(this.response=e,tb(this))},t.ga=function(){this.g&&tb(this)},t.setRequestHeader=function(e,t){this.A.append(e,t)},t.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let e=[],t=this.h.entries();for(var r=t.next();!r.done;)e.push((r=r.value)[0]+": "+r[1]),r=t.next();return e.join("\r\n")},Object.defineProperty(ty.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),b(tS,et);var t_=/^https?$/i,tO=["POST","PUT"];function tT(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.o=5,tI(e),tC(e)}function tI(e){e.A||(e.A=!0,er(e,"complete"),er(e,"error"))}function tA(e){if(e.h&&void 0!==a){if(e.v&&4==tk(e))setTimeout(e.Ca.bind(e),0);else if(er(e,"readystatechange"),4==tk(e)){e.h=!1;try{let a=e.ca();switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t,r,n=!0;break;default:n=!1}if(!(t=n)){if(r=0===a){let t=String(e.D).match(eX)[1]||null;!t&&o.self&&o.self.location&&(t=o.self.location.protocol.slice(0,-1)),r=!t_.test(t?t.toLowerCase():"")}t=r}if(t)er(e,"complete"),er(e,"success");else{e.o=6;try{var i=tk(e)>2?e.g.statusText:""}catch(e){i=""}e.l=i+" ["+e.ca()+"]",tI(e)}}finally{tC(e)}}}}function tC(e,t){if(e.g){e.m&&(clearTimeout(e.m),e.m=null);let r=e.g;e.g=null,t||er(e,"ready");try{r.onreadystatechange=null}catch(e){}}}function tk(e){return e.g?e.g.readyState:0}function tP(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.F){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(e){return null}}function tD(e,t,r){return r&&r.internalChannelParams&&r.internalChannelParams[e]||t}function tN(e){this.za=0,this.i=[],this.j=new eO,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=tD("failFast",!1,e),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=tD("baseRetryDelayMs",5e3,e),this.Za=tD("retryDelaySeedMs",1e4,e),this.Ta=tD("forwardChannelMaxRetries",2,e),this.va=tD("forwardChannelRequestTimeoutMs",2e4,e),this.ma=e&&e.xmlHttpFactory||void 0,this.Ua=e&&e.Rb||void 0,this.Aa=e&&e.useFetchStreams||!1,this.O=void 0,this.L=e&&e.supportsCrossDomainXhr||!1,this.M="",this.h=new eK(e&&e.concurrentRequestLimit),this.Ba=new tg,this.S=e&&e.fastHandshake||!1,this.R=e&&e.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=e&&e.Pb||!1,e&&e.ua&&this.j.ua(),e&&e.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&e&&e.detectBufferingProxy||!1,this.ia=void 0,e&&e.longPollingTimeout&&e.longPollingTimeout>0&&(this.ia=e.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}function tj(e){if(tR(e),3==e.I){var t=e.V++,r=e0(e.J);if(e3(r,"SID",e.M),e3(r,"RID",t),e3(r,"TYPE","terminate"),tV(e,r),(t=new eP(e,e.j,t)).M=2,t.A=e5(e0(r)),r=!1,o.navigator&&o.navigator.sendBeacon)try{r=o.navigator.sendBeacon(t.A.toString(),"")}catch(e){}!r&&o.Image&&((new Image).src=t.A,r=!0),r||(t.g=tJ(t.j,null),t.g.ea(t.A)),t.F=Date.now(),eF(t)}tQ(e)}function tM(e){e.g&&(tq(e),e.g.cancel(),e.g=null)}function tR(e){tM(e),e.v&&(o.clearTimeout(e.v),e.v=null),tK(e),e.h.cancel(),e.m&&("number"==typeof e.m&&o.clearTimeout(e.m),e.m=null)}function tL(e){if(!eG(e.h)&&!e.m){e.m=!0;var t=e.Ea;O||A(),T||(O(),T=!0),I.add(t,e),e.D=0}}function tF(e,t){var r;r=t?t.l:e.V++;let n=e0(e.J);e3(n,"SID",e.M),e3(n,"RID",r),e3(n,"AID",e.K),tV(e,n),e.u&&e.o&&tE(n,e.u,e.o),r=new eP(e,e.j,r,e.D+1),null===e.u&&(r.J=e.o),t&&(e.i=t.G.concat(e.i)),t=tB(e,r,1e3),r.H=Math.round(.5*e.va)+Math.round(.5*e.va*Math.random()),eQ(e.h,r),eM(r,n,t)}function tV(e,t){e.H&&V(e.H,function(e,r){e3(t,r,e)}),e.l&&V({},function(e,r){e3(t,r,e)})}function tB(e,t,r){r=Math.min(e.i.length,r);let n=e.l?y(e.l.Ka,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){let e=["count="+r];-1==t?r>0?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let l=!0;for(let u=0;u<r;u++){var a=i[u].g;let r=i[u].map;if((a-=t)<0)t=Math.max(0,i[u].g-100),l=!1;else try{a="req"+a+"_";try{var o=r instanceof Map?r:Object.entries(r);for(let[t,r]of o){let n=r;s(r)&&(n=el(r)),e.push(a+t+"="+encodeURIComponent(n))}}catch(t){throw e.push(a+"type="+encodeURIComponent("_badmap")),t}}catch(e){n&&n(r)}}if(l){o=e.join("&");break e}}o=void 0}return t.G=e=e.i.splice(0,r),o}function tU(e){if(!e.g&&!e.v){e.Y=1;var t=e.Da;O||A(),T||(O(),T=!0),I.add(t,e),e.A=0}}function tz(e){return!e.g&&!e.v&&!(e.A>=3)&&(e.Y++,e.v=e_(y(e.Da,e),tH(e,e.A)),e.A++,!0)}function tq(e){null!=e.B&&(o.clearTimeout(e.B),e.B=null)}function t$(e){e.g=new eP(e,e.j,"rpc",e.Y),null===e.u&&(e.g.J=e.o),e.g.P=0;var t=e0(e.na);e3(t,"RID","rpc"),e3(t,"SID",e.M),e3(t,"AID",e.K),e3(t,"CI",e.F?"0":"1"),!e.F&&e.ia&&e3(t,"TO",e.ia),e3(t,"TYPE","xmlhttp"),tV(e,t),e.u&&e.o&&tE(t,e.u,e.o),e.O&&(e.g.H=e.O);var r=e.g;e=e.ba,r.M=1,r.A=e5(e0(t)),r.u=null,r.R=!0,eR(r,e)}function tK(e){null!=e.C&&(o.clearTimeout(e.C),e.C=null)}function tG(e,t){var r,n=null;if(e.g==t){tK(e),tq(e),e.g=null;var i=2}else{if(!eW(e.h,t))return;n=t.G,eY(e.h,t),i=1}if(0!=e.I){if(t.o)if(1==i){n=t.u?t.u.length:0,t=Date.now()-t.F;var a=e.D;er(i=ev(),new eS(i,n)),tL(e)}else tU(e);else if(3==(a=t.m)||0==a&&t.X>0||!(1==i&&(r=t,!(eH(e.h)>=e.h.j-!!e.m)&&(e.m?(e.i=r.G.concat(e.i),!0):1!=e.I&&2!=e.I&&!(e.D>=(e.Sa?0:e.Ta))&&(e.m=e_(y(e.Ea,e,r),tH(e,e.D)),e.D++,!0)))||2==i&&tz(e)))switch(n&&n.length>0&&((t=e.h).i=t.i.concat(n)),a){case 1:tW(e,5);break;case 4:tW(e,10);break;case 3:tW(e,6);break;default:tW(e,2)}}}function tH(e,t){let r=e.Qa+Math.floor(Math.random()*e.Za);return e.isActive()||(r*=2),r*t}function tW(e,t){if(e.j.info("Error code "+t),2==t){let t,a,s;var r,n=y(e.bb,e),i=e.Ua;let l=!i;i=new eZ(i||"//www.google.com/images/cleardot.gif"),o.location&&"http"==o.location.protocol||e1(i,"https"),e5(i),l?function(e,t){let r=new eO;if(o.Image){let n=new Image;n.onload=v(tp,r,"TestLoadImage: loaded",!0,t,n),n.onerror=v(tp,r,"TestLoadImage: error",!1,t,n),n.onabort=v(tp,r,"TestLoadImage: abort",!1,t,n),n.ontimeout=v(tp,r,"TestLoadImage: timeout",!1,t,n),o.setTimeout(function(){n.ontimeout&&n.ontimeout()},1e4),n.src=e}else t(!1)}(i.toString(),n):(r=i.toString(),t=new eO,a=new AbortController,s=setTimeout(()=>{a.abort(),tp(t,"TestPingServer: timeout",!1,n)},1e4),fetch(r,{signal:a.signal}).then(e=>{clearTimeout(s),e.ok?tp(t,"TestPingServer: ok",!0,n):tp(t,"TestPingServer: server error",!1,n)}).catch(()=>{clearTimeout(s),tp(t,"TestPingServer: error",!1,n)}))}else eE(2);e.I=0,e.l&&e.l.pa(t),tQ(e),tR(e)}function tQ(e){if(e.I=0,e.ja=[],e.l){let t=eJ(e.h);(0!=t.length||0!=e.i.length)&&(E(e.ja,t),E(e.ja,e.i),e.h.i.length=0,x(e.i),e.i.length=0),e.l.oa()}}function tY(e,t,r){var n=r instanceof eZ?e0(r):new eZ(r);if(""!=n.g)t&&(n.g=t+"."+n.g),e2(n,n.u);else{var i=o.location;n=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;let e=new eZ(null);n&&e1(e,n),t&&(e.g=t),i&&e2(e,i),r&&(e.h=r),n=e}return r=e.G,t=e.wa,r&&t&&e3(n,r,t),e3(n,"VER",e.ka),tV(e,n),n}function tJ(e,t,r){if(t&&!e.L)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new tS(e.Aa&&!e.ma?new tm({ab:r}):e.ma)).Fa(e.L),t}function tX(){}function tZ(){}function t0(e,t){et.call(this),this.g=new tN(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.sa&&(e?e["X-WebChannel-Client-Profile"]=t.sa:e={"X-WebChannel-Client-Profile":t.sa}),this.g.U=e,(e=t&&t.Qb)&&!N(e)&&(this.g.u=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!N(t)&&(this.g.G=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new t6(this)}function t1(e){ep.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(let r in t){e=r;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function t2(){eg.call(this),this.status=1}function t6(e){this.g=e}(t=tS.prototype).Fa=function(e){this.H=e},t.ea=function(t,r,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+t);r=r?r.toUpperCase():"GET",this.D=t,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():e.g(),this.g.onreadystatechange=w(y(this.Ca,this));try{this.B=!0,this.g.open(r,String(t),!0),this.B=!1}catch(e){tT(this,e);return}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var a in i)n.set(a,i[a]);else if("function"==typeof i.keys&&"function"==typeof i.get)for(let e of i.keys())n.set(e,i.get(e));else throw Error("Unknown input type for opt_headers: "+String(i));for(let[e,s]of(i=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),a=o.FormData&&t instanceof o.FormData,!(Array.prototype.indexOf.call(tO,r,void 0)>=0)||i||a||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),n))this.g.setRequestHeader(e,s);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(t),this.v=!1}catch(e){tT(this,e)}},t.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=e||7,er(this,"complete"),er(this,"abort"),tC(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tC(this,!0)),tS.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?tA(this):this.Xa())},t.Xa=function(){tA(this)},t.isActive=function(){return!!this.g},t.ca=function(){try{return tk(this)>2?this.g.status:-1}catch(e){return -1}},t.la=function(){try{return this.g?this.g.responseText:""}catch(e){return""}},t.La=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),eu(t)}},t.ya=function(){return this.o},t.Ha=function(){return"string"==typeof this.l?this.l:String(this.l)},(t=tN.prototype).ka=8,t.I=1,t.connect=function(e,t,r,n){eE(0),this.W=e,this.H=t||{},r&&void 0!==n&&(this.H.OSID=r,this.H.OAID=n),this.F=this.X,this.J=tY(this,null,this.W),tL(this)},t.Ea=function(e){if(this.m)if(this.m=null,1==this.I){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;let i=new eP(this,this.j,e),a=this.o;if(this.U&&(a?z(a=B(a),this.U):a=this.U),null!==this.u||this.R||(i.J=a,a=null),this.S)e:{for(var t=0,r=0;r<this.i.length;r++){t:{var n=this.i[r];if("__data__"in n.map&&"string"==typeof(n=n.map.__data__)){n=n.length;break t}n=void 0}if(void 0===n)break;if((t+=n)>4096){t=r;break e}if(4096===t||r===this.i.length-1){t=r+1;break e}}t=1e3}else t=1e3;t=tB(this,i,t),e3(r=e0(this.J),"RID",e),e3(r,"CVER",22),this.G&&e3(r,"X-HTTP-Session-Id",this.G),tV(this,r),a&&(this.R?t="headers="+ek(tx(a))+"&"+t:this.u&&tE(r,this.u,a)),eQ(this.h,i),this.Ra&&e3(r,"TYPE","init"),this.S?(e3(r,"$req",t),e3(r,"SID","null"),i.U=!0,eM(i,r,null)):eM(i,r,t),this.I=2}}else 3==this.I&&(e?tF(this,e):0==this.i.length||eG(this.h)||tF(this))},t.Da=function(){if(this.v=null,t$(this),this.aa&&!(this.P||null==this.g||this.T<=0)){var e=4*this.T;this.j.info("BP detection timer enabled: "+e),this.B=e_(y(this.Wa,this),e)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,eE(10),tM(this),t$(this))},t.Va=function(){null!=this.C&&(this.C=null,tM(this),tz(this),eE(19))},t.bb=function(e){e?(this.j.info("Successfully pinged google.com"),eE(2)):(this.j.info("Failed to ping google.com"),eE(1))},t.isActive=function(){return!!this.l&&this.l.isActive(this)},(t=tX.prototype).ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){},tZ.prototype.g=function(e,t){return new t0(e,t)},b(t0,et),t0.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},t0.prototype.close=function(){tj(this.g)},t0.prototype.o=function(e){var t=this.g;if("string"==typeof e){var r={};r.__data__=e,e=r}else this.v&&((r={}).__data__=el(e),e=r);t.i.push(new e$(t.Ya++,e)),3==t.I&&tL(t)},t0.prototype.N=function(){this.g.l=null,delete this.j,tj(this.g),delete this.g,t0.Z.N.call(this)},b(t1,ep),b(t2,eg),b(t6,tX),t6.prototype.ra=function(){er(this.g,"a")},t6.prototype.qa=function(e){er(this.g,new t1(e))},t6.prototype.pa=function(e){er(this.g,new t2)},t6.prototype.oa=function(){er(this.g,"b")},tZ.prototype.createWebChannel=tZ.prototype.g,t0.prototype.send=t0.prototype.o,t0.prototype.open=t0.prototype.m,t0.prototype.close=t0.prototype.close,g=e8.createWebChannelTransport=function(){return new tZ},p=e8.getStatEventTarget=function(){return ev()},d=e8.Event=em,f=e8.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},eI.NO_ERROR=0,eI.TIMEOUT=8,eI.HTTP_ERROR=6,h=e8.ErrorCode=eI,eA.COMPLETE="complete",c=e8.EventType=eA,ef.EventType=ed,ed.OPEN="a",ed.CLOSE="b",ed.ERROR="c",ed.MESSAGE="d",et.prototype.listen=et.prototype.J,u=e8.WebChannel=ef,e8.FetchXmlHttpFactory=tm,tS.prototype.listenOnce=tS.prototype.K,tS.prototype.getLastError=tS.prototype.Ha,tS.prototype.getLastErrorCode=tS.prototype.ya,tS.prototype.getStatus=tS.prototype.ca,tS.prototype.getResponseJson=tS.prototype.La,tS.prototype.getResponseText=tS.prototype.la,tS.prototype.send=tS.prototype.ea,tS.prototype.setWithCredentials=tS.prototype.Fa,l=e8.XhrIo=tS}).apply(void 0!==e4?e4:"u">typeof self?self:"u">typeof window?window:{});class e7{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}e7.UNAUTHENTICATED=new e7(null),e7.GOOGLE_CREDENTIALS=new e7("google-credentials-uid"),e7.FIRST_PARTY=new e7("first-party-uid"),e7.MOCK_USER=new e7("mock-user");let e9="12.8.0",te=new en("@firebase/firestore");function tt(){return te.logLevel}function tr(e,...t){if(te.logLevel<=a.DEBUG){let r=t.map(ta);te.debug(`Firestore (${e9}): ${e}`,...r)}}function tn(e,...t){if(te.logLevel<=a.ERROR){let r=t.map(ta);te.error(`Firestore (${e9}): ${e}`,...r)}}function ti(e,...t){if(te.logLevel<=a.WARN){let r=t.map(ta);te.warn(`Firestore (${e9}): ${e}`,...r)}}function ta(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function to(e,t,r){let n="Unexpected state";"string"==typeof t?n=t:r=t,ts(e,n,r)}function ts(e,t,r){let n=`FIRESTORE (${e9}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(void 0!==r)try{n+=" CONTEXT: "+JSON.stringify(r)}catch(e){n+=" CONTEXT: "+r}throw tn(n),Error(n)}function tl(e,t,r,n){let i="Unexpected state";"string"==typeof r?i=r:n=r,e||ts(t,i,n)}let tu={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class tc extends z{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class th{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class tf{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class td{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(e7.UNAUTHENTICATED))}shutdown(){}}class tp{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class tg{constructor(e){this.t=e,this.currentUser=e7.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){tl(void 0===this.o,42304);let r=this.i,n=e=>this.i!==r?(r=this.i,t(e)):Promise.resolve(),i=new th;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new th,e.enqueueRetryable(()=>n(this.currentUser))};let a=()=>{let t=i;e.enqueueRetryable(async()=>{await t.promise,await n(this.currentUser)})},o=e=>{tr("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){let e=this.t.getImmediate({optional:!0});e?o(e):(tr("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new th)}},0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(tr("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(tl("string"==typeof t.accessToken,31837,{l:t}),new tf(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return tl(null===e||"string"==typeof e,2055,{h:e}),new e7(e)}}class tm{constructor(e,t,r){this.P=e,this.T=t,this.I=r,this.type="FirstParty",this.user=e7.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);let e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class ty{constructor(e,t,r){this.P=e,this.T=t,this.I=r}getToken(){return Promise.resolve(new tm(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(e7.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class tv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class tb{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,eD(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){tl(void 0===this.o,3512);let r=e=>{null!=e.error&&tr("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);let r=e.token!==this.m;return this.m=e.token,tr("FirebaseAppCheckTokenProvider",`Received ${r?"new":"existing"} token.`),r?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>r(t))};let n=e=>{tr("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>n(e)),setTimeout(()=>{if(!this.appCheck){let e=this.V.getImmediate({optional:!0});e?n(e):tr("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new tv(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(tl("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new tv(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class tw{static newId(){let e=62*Math.floor(256/62),t="";for(;t.length<20;){let r=function(e){let t="u">typeof self&&(self.crypto||self.msCrypto),r=new Uint8Array(40);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(r);else for(let e=0;e<40;e++)r[e]=Math.floor(256*Math.random());return r}(0);for(let n=0;n<r.length;++n)t.length<20&&r[n]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(r[n]%62))}return t}}function tx(e,t){return e<t?-1:+(e>t)}function tE(e,t){let r=Math.min(e.length,t.length);for(let n=0;n<r;n++){let r=e.charAt(n),i=t.charAt(n);if(r!==i)return tS(r)===tS(i)?tx(r,i):tS(r)?1:-1}return tx(e.length,t.length)}function tS(e){let t=e.charCodeAt(0);return t>=55296&&t<=57343}function t_(e,t,r){return e.length===t.length&&e.every((e,n)=>r(e,t[n]))}let tO="__name__";class tT{constructor(e,t,r){void 0===t?t=0:t>e.length&&to(637,{offset:t,range:e.length}),void 0===r?r=e.length-t:r>e.length-t&&to(1746,{length:r,range:e.length-t}),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===tT.comparator(this,e)}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof tT?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let n=0;n<r;n++){let r=tT.compareSegments(e.get(n),t.get(n));if(0!==r)return r}return tx(e.length,t.length)}static compareSegments(e,t){let r=tT.isNumericId(e),n=tT.isNumericId(t);return r&&!n?-1:!r&&n?1:r&&n?tT.extractNumericId(e).compare(tT.extractNumericId(t)):tE(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return o.fromString(e.substring(4,e.length-2))}}class tI extends tT{construct(e,t,r){return new tI(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new tc(tu.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(e=>e.length>0))}return new tI(t)}static emptyPath(){return new tI([])}}let tA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tC extends tT{construct(e,t,r){return new tC(e,t,r)}static isValidIdentifier(e){return tA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tC.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===tO}static keyField(){return new tC([tO])}static fromServerFormat(e){let t=[],r="",n=0,i=()=>{if(0===r.length)throw new tc(tu.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},a=!1;for(;n<e.length;){let t=e[n];if("\\"===t){if(n+1===e.length)throw new tc(tu.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let t=e[n+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new tc(tu.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=t,n+=2}else"`"===t?a=!a:"."!==t||a?r+=t:i(),n++}if(i(),a)throw new tc(tu.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tC(t)}static emptyPath(){return new tC([])}}class tk{constructor(e){this.path=e}static fromPath(e){return new tk(tI.fromString(e))}static fromName(e){return new tk(tI.fromString(e).popFirst(5))}static empty(){return new tk(tI.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===tI.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return tI.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new tk(new tI(e.slice()))}}function tP(e,t,r){if(!r)throw new tc(tu.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function tD(e){if(!tk.isDocumentKey(e))throw new tc(tu.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function tN(e){if(tk.isDocumentKey(e))throw new tc(tu.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function tj(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function tM(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{var t;let r=(t=e).constructor?t.constructor.name:null;return r?`a custom ${r} object`:"an object"}}return"function"==typeof e?"a function":to(12329,{type:typeof e})}function tR(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new tc(tu.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let r=tM(e);throw new tc(tu.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${r}`)}}return e}function tL(e,t){if(t<=0)throw new tc(tu.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}function tF(e,t){let r={typeString:e};return t&&(r.value=t),r}function tV(e,t){let r;if(!tj(e))throw new tc(tu.INVALID_ARGUMENT,"JSON must be an object");for(let n in t)if(t[n]){let i=t[n].typeString,a="value"in t[n]?{value:t[n].value}:void 0;if(!(n in e)){r=`JSON missing required field: '${n}'`;break}let o=e[n];if(i&&typeof o!==i){r=`JSON field '${n}' must be a ${i}.`;break}if(void 0!==a&&o!==a.value){r=`Expected '${n}' field to equal '${a.value}'`;break}}if(r)throw new tc(tu.INVALID_ARGUMENT,r);return!0}class tB{static now(){return tB.fromMillis(Date.now())}static fromDate(e){return tB.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*1e6);return new tB(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0||t>=1e9)throw new tc(tu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-0xe7791f700||e>=0x3afff44180)throw new tc(tu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?tx(this.nanoseconds,e.nanoseconds):tx(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:tB._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(tV(e,tB._jsonSchema))return new tB(e.seconds,e.nanoseconds)}valueOf(){return String(this.seconds- -0xe7791f700).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}tB._jsonSchemaVersion="firestore/timestamp/1.0",tB._jsonSchema={type:tF("string",tB._jsonSchemaVersion),seconds:tF("number"),nanoseconds:tF("number")};class tU{static fromTimestamp(e){return new tU(e)}static min(){return new tU(new tB(0,0))}static max(){return new tU(new tB(0x3afff4417f,0x3b9ac9ff))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class tz{constructor(e,t,r,n){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=n}}function tq(e){return e.fields.find(e=>2===e.kind)}function t$(e){return e.fields.filter(e=>2!==e.kind)}function tK(e,t){let r=tx(e.collectionGroup,t.collectionGroup);if(0!==r)return r;for(let n=0;n<Math.min(e.fields.length,t.fields.length);++n)if(0!==(r=function(e,t){let r=tC.comparator(e.fieldPath,t.fieldPath);return 0!==r?r:tx(e.kind,t.kind)}(e.fields[n],t.fields[n])))return r;return tx(e.fields.length,t.fields.length)}tz.UNKNOWN_ID=-1;class tG{constructor(e,t){this.fieldPath=e,this.kind=t}}class tH{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new tH(0,tY.min())}}function tW(e,t){let r=e.toTimestamp().seconds,n=e.toTimestamp().nanoseconds+1;return new tY(tU.fromTimestamp(1e9===n?new tB(r+1,0):new tB(r,n)),tk.empty(),t)}function tQ(e){return new tY(e.readTime,e.key,-1)}class tY{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new tY(tU.min(),tk.empty(),-1)}static max(){return new tY(tU.max(),tk.empty(),-1)}}function tJ(e,t){let r=e.readTime.compareTo(t.readTime);return 0!==r||0!==(r=tk.comparator(e.documentKey,t.documentKey))?r:tx(e.largestBatchId,t.largestBatchId)}let tX="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tZ{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function t0(e){if(e.code!==tu.FAILED_PRECONDITION||e.message!==tX)throw e;tr("LocalStore","Unexpectedly lost primary lease")}class t1{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&to(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new t1((r,n)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(r,n)},this.catchCallback=e=>{this.wrapFailure(t,e).next(r,n)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof t1?t:t1.resolve(t)}catch(e){return t1.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):t1.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):t1.reject(t)}static resolve(e){return new t1((t,r)=>{t(e)})}static reject(e){return new t1((t,r)=>{r(e)})}static waitFor(e){return new t1((t,r)=>{let n=0,i=0,a=!1;e.forEach(e=>{++n,e.next(()=>{++i,a&&i===n&&t()},e=>r(e))}),a=!0,i===n&&t()})}static or(e){let t=t1.resolve(!1);for(let r of e)t=t.next(e=>e?t1.resolve(e):r());return t}static forEach(e,t){let r=[];return e.forEach((e,n)=>{r.push(t.call(this,e,n))}),this.waitFor(r)}static mapArray(e,t){return new t1((r,n)=>{let i=e.length,a=Array(i),o=0;for(let s=0;s<i;s++){let l=s;t(e[l]).next(e=>{a[l]=e,++o===i&&r(a)},e=>n(e))}})}static doWhile(e,t){return new t1((r,n)=>{let i=()=>{!0===e()?t().next(()=>{i()},n):r()};i()})}}let t2="SimpleDb";class t6{static open(e,t,r,n){try{return new t6(t,e.transaction(n,r))}catch(e){throw new t8(t,e)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.S=new th,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{t.error?this.S.reject(new t8(e,t.error)):this.S.resolve()},this.transaction.onerror=t=>{let r=rr(t.target.error);this.S.reject(new t8(e,r))}}get D(){return this.S.promise}abort(e){e&&this.S.reject(e),this.aborted||(tr(t2,"Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){let e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){return new t9(this.transaction.objectStore(e))}}class t3{static delete(e){return tr(t2,"Removing database:",e),re(A().indexedDB.deleteDatabase(e)).toPromise()}static v(){if(!U())return!1;if(t3.F())return!0;let e=R(),t=t3.M(e),r=t5(e);return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||0<t&&t<10||0<r&&r<4.5)}static F(){return void 0!==w.default&&"YES"===w.default.__PRIVATE_env?.__PRIVATE_USE_MOCK_PERSISTENCE}static O(e,t){return e.store(t)}static M(e){let t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i);return Number(t?t[1].split("_").slice(0,2).join("."):"-1")}constructor(e,t,r){this.name=e,this.version=t,this.N=r,this.B=null,12.2===t3.M(R())&&tn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(e){return this.db||(tr(t2,"Opening database:",this.name),this.db=await new Promise((t,r)=>{let n=indexedDB.open(this.name,this.version);n.onsuccess=e=>{t(e.target.result)},n.onblocked=()=>{r(new t8(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},n.onerror=t=>{let n=t.target.error;"VersionError"===n.name?r(new tc(tu.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new tc(tu.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new t8(e,n))},n.onupgradeneeded=e=>{tr(t2,'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);let t=e.target.result;this.N.k(t,n.transaction,e.oldVersion,this.version).next(()=>{tr(t2,"Database upgrade to version "+this.version+" complete")})}})),this.K&&(this.db.onversionchange=e=>this.K(e)),this.db}q(e){this.K=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,r,n){let i="readonly"===t,a=0;for(;;){++a;try{this.db=await this.L(e);let t=t6.open(this.db,e,i?"readonly":"readwrite",r),a=n(t).next(e=>(t.C(),e)).catch(e=>(t.abort(e),t1.reject(e))).toPromise();return a.catch(()=>{}),await t.D,a}catch(t){let e="FirebaseError"!==t.name&&a<3;if(tr(t2,"Transaction failed with error:",t.message,"Retrying:",e),this.close(),!e)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function t5(e){let t=e.match(/Android ([\d.]+)/i);return Number(t?t[1].split(".").slice(0,2).join("."):"-1")}class t4{constructor(e){this.U=e,this.$=!1,this.W=null}get isDone(){return this.$}get G(){return this.W}set cursor(e){this.U=e}done(){this.$=!0}j(e){this.W=e}delete(){return re(this.U.delete())}}class t8 extends tc{constructor(e,t){super(tu.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function t7(e){return"IndexedDbTransactionError"===e.name}class t9{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(tr(t2,"PUT",this.store.name,e,t),r=this.store.put(t,e)):(tr(t2,"PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),re(r)}add(e){return tr(t2,"ADD",this.store.name,e,e),re(this.store.add(e))}get(e){return re(this.store.get(e)).next(t=>(void 0===t&&(t=null),tr(t2,"GET",this.store.name,e,t),t))}delete(e){return tr(t2,"DELETE",this.store.name,e),re(this.store.delete(e))}count(){return tr(t2,"COUNT",this.store.name),re(this.store.count())}H(e,t){let r=this.options(e,t),n=r.index?this.store.index(r.index):this.store;if("function"==typeof n.getAll){let e=n.getAll(r.range);return new t1((t,r)=>{e.onerror=e=>{r(e.target.error)},e.onsuccess=e=>{t(e.target.result)}})}{let e=this.cursor(r),t=[];return this.J(e,(e,r)=>{t.push(r)}).next(()=>t)}}Z(e,t){let r=this.store.getAll(e,null===t?void 0:t);return new t1((e,t)=>{r.onerror=e=>{t(e.target.error)},r.onsuccess=t=>{e(t.target.result)}})}X(e,t){tr(t2,"DELETE ALL",this.store.name);let r=this.options(e,t);r.Y=!1;let n=this.cursor(r);return this.J(n,(e,t,r)=>r.delete())}ee(e,t){let r;t?r=e:(r={},t=e);let n=this.cursor(r);return this.J(n,t)}te(e){let t=this.cursor({});return new t1((r,n)=>{t.onerror=e=>{n(rr(e.target.error))},t.onsuccess=t=>{let n=t.target.result;n?e(n.primaryKey,n.value).next(e=>{e?n.continue():r()}):r()}})}J(e,t){let r=[];return new t1((n,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{let i=e.target.result;if(!i)return void n();let a=new t4(i),o=t(i.primaryKey,i.value,a);if(o instanceof t1){let e=o.catch(e=>(a.done(),t1.reject(e)));r.push(e)}a.isDone?n():null===a.G?i.continue():i.continue(a.G)}}).next(()=>t1.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){let r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function re(e){return new t1((t,r)=>{e.onsuccess=e=>{t(e.target.result)},e.onerror=e=>{r(rr(e.target.error))}})}let rt=!1;function rr(e){let t=t3.M(R());if(t>=12.2&&t<13){let t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){let e=new tc("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return rt||(rt=!0,setTimeout(()=>{throw e},0)),e}}return e}let rn="IndexBackfiller";class ri{constructor(e,t){this.asyncQueue=e,this.ne=t,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}re(e){tr(rn,`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{let e=await this.ne.ie();tr(rn,`Documents written: ${e}`)}catch(e){t7(e)?tr(rn,"Ignoring IndexedDB error during index backfill: ",e):await t0(e)}await this.re(6e4)})}}class ra{constructor(e,t){this.localStore=e,this.persistence=t}async ie(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.se(t,e))}se(e,t){let r=new Set,n=t,i=!0;return t1.doWhile(()=>!0===i&&n>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(t=>{if(null!==t&&!r.has(t))return tr(rn,`Processing collection: ${t}`),this.oe(e,t,n).next(e=>{n-=e,r.add(t)});i=!1})).next(()=>t-n)}oe(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(n=>this.localStore.localDocuments.getNextDocuments(e,t,n,r).next(r=>{let i=r.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this._e(n,r)).next(r=>(tr(rn,`Updating offset: ${r}`),this.localStore.indexManager.updateCollectionGroup(e,t,r))).next(()=>i.size)}))}_e(e,t){let r=e;return t.changes.forEach((e,t)=>{let n=tQ(t);tJ(n,r)>0&&(r=n)}),new tY(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}class ro{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.ue&&this.ue(e),e}}function rs(e){return null==e}function rl(e){return 0===e&&1/e==-1/0}function ru(e){return"number"==typeof e&&Number.isInteger(e)&&!rl(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function rc(e){let t="";for(let r=0;r<e.length;r++)t.length>0&&(t+="\x01\x01"),t=function(e,t){let r=t,n=e.length;for(let t=0;t<n;t++){let n=e.charAt(t);switch(n){case"\0":r+="\x01\x10";break;case"\x01":r+="\x01\x11";break;default:r+=n}}return r}(e.get(r),t);return t+"\x01\x01"}ro.ce=-1;function rh(e){let t=e.length;if(tl(t>=2,64408,{path:e}),2===t)return tl("\x01"===e.charAt(0)&&"\x01"===e.charAt(1),56145,{path:e}),tI.emptyPath();let r=t-2,n=[],i="";for(let a=0;a<t;){let t=e.indexOf("\x01",a);switch((t<0||t>r)&&to(50515,{path:e}),e.charAt(t+1)){case"\x01":let o,s=e.substring(a,t);0===i.length?o=s:(i+=s,o=i,i=""),n.push(o);break;case"\x10":i+=e.substring(a,t),i+="\0";break;case"\x11":i+=e.substring(a,t+1);break;default:to(61167,{path:e})}a=t+2}return new tI(n)}let rf="remoteDocuments",rd="owner",rp="owner",rg="mutationQueues",rm="mutations",ry="batchId",rv="userMutationsIndex",rb=["userId","batchId"],rw={},rx="documentMutations",rE="remoteDocumentsV14",rS=["prefixPath","collectionGroup","readTime","documentId"],r_="documentKeyIndex",rO=["prefixPath","collectionGroup","documentId"],rT="collectionGroupIndex",rI=["collectionGroup","readTime","prefixPath","documentId"],rA="remoteDocumentGlobal",rC="remoteDocumentGlobalKey",rk="targets",rP="queryTargetsIndex",rD=["canonicalId","targetId"],rN="targetDocuments",rj=["targetId","path"],rM="documentTargetsIndex",rR=["path","targetId"],rL="targetGlobalKey",rF="targetGlobal",rV="collectionParents",rB=["collectionId","parent"],rU="clientMetadata",rz="bundles",rq="namedQueries",r$="indexConfiguration",rK="collectionGroupIndex",rG="indexState",rH=["indexId","uid"],rW="sequenceNumberIndex",rQ=["uid","sequenceNumber"],rY="indexEntries",rJ=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],rX="documentKeyIndex",rZ=["indexId","uid","orderedDocumentKey"],r0="documentOverlays",r1=["userId","collectionPath","documentId"],r2="collectionPathOverlayIndex",r6=["userId","collectionPath","largestBatchId"],r3="collectionGroupOverlayIndex",r5=["userId","collectionGroup","largestBatchId"],r4="globals",r8=[rg,rm,rx,rf,rk,rd,rF,rN,rU,rA,rV,rz,rq],r7=[...r8,r0],r9=[rg,rm,rx,rE,rk,rd,rF,rN,rU,rA,rV,rz,rq,r0],ne=[...r9,r$,rG,rY],nt=[...ne,r4];class nr extends tZ{constructor(e,t){super(),this.le=e,this.currentSequenceNumber=t}}function nn(e,t){return t3.O(e.le,t)}function ni(e){let t=0;for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t++;return t}function na(e,t){for(let r in e)Object.prototype.hasOwnProperty.call(e,r)&&t(r,e[r])}function no(e){for(let t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class ns{constructor(e,t){this.comparator=e,this.root=t||nu.EMPTY}insert(e,t){return new ns(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,nu.BLACK,null,null))}remove(e){return new ns(this.comparator,this.root.remove(e,this.comparator).copy(null,null,nu.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let n=this.comparator(e,r.key);if(0===n)return t+r.left.size;n<0?r=r.left:(t+=r.left.size+1,r=r.right)}return -1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new nl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new nl(this.root,e,this.comparator,!1)}getReverseIterator(){return new nl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new nl(this.root,e,this.comparator,!0)}}class nl{constructor(e,t,r,n){this.isReverse=n,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?r(e.key,t):1,t&&n&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class nu{constructor(e,t,r,n,i){this.key=e,this.value=t,this.color=null!=r?r:nu.RED,this.left=null!=n?n:nu.EMPTY,this.right=null!=i?i:nu.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,n,i){return new nu(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=n?n:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let n=this,i=r(e,n.key);return(n=i<0?n.copy(null,null,null,n.left.insert(e,t,r),null):0===i?n.copy(null,t,null,null,null):n.copy(null,null,null,null,n.right.insert(e,t,r))).fixUp()}removeMin(){if(this.left.isEmpty())return nu.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()}remove(e,t){let r,n=this;if(0>t(e,n.key))n.left.isEmpty()||n.left.isRed()||n.left.left.isRed()||(n=n.moveRedLeft()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed()&&(n=n.rotateRight()),n.right.isEmpty()||n.right.isRed()||n.right.left.isRed()||(n=n.moveRedRight()),0===t(e,n.key)){if(n.right.isEmpty())return nu.EMPTY;r=n.right.min(),n=n.copy(r.key,r.value,null,null,n.right.removeMin())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}rotateLeft(){let e=this.copy(null,null,nu.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,nu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){return Math.pow(2,this.check())<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw to(43730,{key:this.key,value:this.value});if(this.right.isRed())throw to(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw to(27949);return e+ +!this.isRed()}}nu.EMPTY=null,nu.RED=!0,nu.BLACK=!1,nu.EMPTY=new class{constructor(){this.size=0}get key(){throw to(57766)}get value(){throw to(16141)}get color(){throw to(16727)}get left(){throw to(29726)}get right(){throw to(36894)}copy(e,t,r,n,i){return this}insert(e,t,r){return new nu(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class nc{constructor(e){this.comparator=e,this.data=new ns(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let n=r.getNext();if(this.comparator(n.key,e[1])>=0)return;t(n.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new nh(this.data.getIterator())}getIteratorFrom(e){return new nh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof nc)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let e=t.getNext().key,n=r.getNext().key;if(0!==this.comparator(e,n))return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new nc(this.comparator);return t.data=e,t}}class nh{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function nf(e){return e.hasNext()?e.getNext():void 0}class nd{constructor(e){this.fields=e,e.sort(tC.comparator)}static empty(){return new nd([])}unionWith(e){let t=new nc(tC.comparator);for(let e of this.fields)t=t.add(e);for(let r of e)t=t.add(r);return new nd(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return t_(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class np extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ng{constructor(e){this.binaryString=e}static fromBase64String(e){return new ng(function(e){try{return atob(e)}catch(e){throw"u">typeof DOMException&&e instanceof DOMException?new np("Invalid base64 string: "+e):e}}(e))}static fromUint8Array(e){return new ng(function(e){let t="";for(let r=0;r<e.length;++r)t+=String.fromCharCode(e[r]);return t}(e))}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){var e=this.binaryString;let t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return tx(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ng.EMPTY_BYTE_STRING=new ng("");let nm=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ny(e){if(tl(!!e,39018),"string"==typeof e){let t=0,r=nm.exec(e);if(tl(!!r,46558,{timestamp:e}),r[1]){let e=r[1];t=Number(e=(e+"000000000").substr(0,9))}return{seconds:Math.floor(new Date(e).getTime()/1e3),nanos:t}}return{seconds:nv(e.seconds),nanos:nv(e.nanos)}}function nv(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function nb(e){return"string"==typeof e?ng.fromBase64String(e):ng.fromUint8Array(e)}let nw="server_timestamp",nx="__type__",nE="__previous_value__",nS="__local_write_time__";function n_(e){return(e?.mapValue?.fields||{})[nx]?.stringValue===nw}function nO(e){let t=e.mapValue.fields[nE];return n_(t)?nO(t):t}function nT(e){let t=ny(e.mapValue.fields[nS].timestampValue);return new tB(t.seconds,t.nanos)}class nI{constructor(e,t,r,n,i,a,o,s,l,u,c){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=n,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=o,this.longPollingOptions=s,this.useFetchStreams=l,this.isUsingEmulator=u,this.apiKey=c}}let nA="(default)";class nC{constructor(e,t){this.projectId=e,this.database=t||nA}static empty(){return new nC("","")}get isDefaultDatabase(){return this.database===nA}isEqual(e){return e instanceof nC&&e.projectId===this.projectId&&e.database===this.database}}let nk="__type__",nP="__max__",nD={mapValue:{fields:{__type__:{stringValue:nP}}}},nN="__vector__",nj="value",nM={nullValue:"NULL_VALUE"};function nR(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?n_(e)?4:nJ(e)?0x1fffffffffffff:nQ(e)?10:11:to(28295,{value:e})}function nL(e,t){if(e===t)return!0;let r=nR(e);if(r!==nR(t))return!1;switch(r){case 0:case 0x1fffffffffffff:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return nT(e).isEqual(nT(t));case 3:if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;let n=ny(e.timestampValue),i=ny(t.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos;case 5:return e.stringValue===t.stringValue;case 6:return nb(e.bytesValue).isEqual(nb(t.bytesValue));case 7:return e.referenceValue===t.referenceValue;case 8:return nv(e.geoPointValue.latitude)===nv(t.geoPointValue.latitude)&&nv(e.geoPointValue.longitude)===nv(t.geoPointValue.longitude);case 2:if("integerValue"in e&&"integerValue"in t)return nv(e.integerValue)===nv(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){let r=nv(e.doubleValue),n=nv(t.doubleValue);return r===n?rl(r)===rl(n):isNaN(r)&&isNaN(n)}return!1;case 9:return t_(e.arrayValue.values||[],t.arrayValue.values||[],nL);case 10:case 11:let a=e.mapValue.fields||{},o=t.mapValue.fields||{};if(ni(a)!==ni(o))return!1;for(let e in a)if(a.hasOwnProperty(e)&&(void 0===o[e]||!nL(a[e],o[e])))return!1;return!0;default:return to(52216,{left:e})}}function nF(e,t){return void 0!==(e.values||[]).find(e=>nL(e,t))}function nV(e,t){var r,n,i,a,o,s;if(e===t)return 0;let l=nR(e),u=nR(t);if(l!==u)return tx(l,u);switch(l){case 0:case 0x1fffffffffffff:return 0;case 1:return tx(e.booleanValue,t.booleanValue);case 2:let c,h;return c=nv(e.integerValue||e.doubleValue),c<(h=nv(t.integerValue||t.doubleValue))?-1:c>h?1:c===h?0:isNaN(c)?isNaN(h)?0:-1:1;case 3:return nB(e.timestampValue,t.timestampValue);case 4:return nB(nT(e),nT(t));case 5:return tE(e.stringValue,t.stringValue);case 6:let f,d;return r=e.bytesValue,n=t.bytesValue,f=nb(r),d=nb(n),f.compareTo(d);case 7:return function(e,t){let r=e.split("/"),n=t.split("/");for(let e=0;e<r.length&&e<n.length;e++){let t=tx(r[e],n[e]);if(0!==t)return t}return tx(r.length,n.length)}(e.referenceValue,t.referenceValue);case 8:let p;return i=e.geoPointValue,a=t.geoPointValue,0!==(p=tx(nv(i.latitude),nv(a.latitude)))?p:tx(nv(i.longitude),nv(a.longitude));case 9:return nU(e.arrayValue,t.arrayValue);case 10:let g,m,y,v,b;return o=e.mapValue,s=t.mapValue,g=o.fields||{},m=s.fields||{},y=g[nj]?.arrayValue,v=m[nj]?.arrayValue,0!==(b=tx(y?.values?.length||0,v?.values?.length||0))?b:nU(y,v);case 11:return function(e,t){if(e===nD.mapValue&&t===nD.mapValue)return 0;if(e===nD.mapValue)return 1;if(t===nD.mapValue)return -1;let r=e.fields||{},n=Object.keys(r),i=t.fields||{},a=Object.keys(i);n.sort(),a.sort();for(let e=0;e<n.length&&e<a.length;++e){let t=tE(n[e],a[e]);if(0!==t)return t;let o=nV(r[n[e]],i[a[e]]);if(0!==o)return o}return tx(n.length,a.length)}(e.mapValue,t.mapValue);default:throw to(23264,{he:l})}}function nB(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return tx(e,t);let r=ny(e),n=ny(t),i=tx(r.seconds,n.seconds);return 0!==i?i:tx(r.nanos,n.nanos)}function nU(e,t){let r=e.values||[],n=t.values||[];for(let e=0;e<r.length&&e<n.length;++e){let t=nV(r[e],n[e]);if(t)return t}return tx(r.length,n.length)}function nz(e){var t,r;let n;return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?(n=ny(e.timestampValue),`time(${n.seconds},${n.nanos})`):"stringValue"in e?e.stringValue:"bytesValue"in e?nb(e.bytesValue).toBase64():"referenceValue"in e?(t=e.referenceValue,tk.fromName(t).toString()):"geoPointValue"in e?(r=e.geoPointValue,`geo(${r.latitude},${r.longitude})`):"arrayValue"in e?function(e){let t="[",r=!0;for(let n of e.values||[])r?r=!1:t+=",",t+=nz(n);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){let t=Object.keys(e.fields||{}).sort(),r="{",n=!0;for(let i of t)n?n=!1:r+=",",r+=`${i}:${nz(e.fields[i])}`;return r+"}"}(e.mapValue):to(61005,{value:e})}function nq(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function n$(e){return!!e&&"integerValue"in e}function nK(e){return!!e&&"arrayValue"in e}function nG(e){return!!e&&"nullValue"in e}function nH(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function nW(e){return!!e&&"mapValue"in e}function nQ(e){return(e?.mapValue?.fields||{})[nk]?.stringValue===nN}function nY(e){if(e.geoPointValue)return{geoPointValue:{...e.geoPointValue}};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:{...e.timestampValue}};if(e.mapValue){let t={mapValue:{fields:{}}};return na(e.mapValue.fields,(e,r)=>t.mapValue.fields[e]=nY(r)),t}if(e.arrayValue){let t={arrayValue:{values:[]}};for(let r=0;r<(e.arrayValue.values||[]).length;++r)t.arrayValue.values[r]=nY(e.arrayValue.values[r]);return t}return{...e}}function nJ(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===nP}let nX={mapValue:{fields:{[nk]:{stringValue:nN},[nj]:{arrayValue:{}}}}};function nZ(e,t){let r=nV(e.value,t.value);return 0!==r?r:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function n0(e,t){let r=nV(e.value,t.value);return 0!==r?r:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class n1{constructor(e){this.value=e}static empty(){return new n1({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(!nW(t=(t.mapValue.fields||{})[e.get(r)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=nY(t)}setAll(e){let t=tC.emptyPath(),r={},n=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){let e=this.getFieldsMap(t);this.applyChanges(e,r,n),r={},n=[],t=i.popLast()}e?r[i.lastSegment()]=nY(e):n.push(i.lastSegment())});let i=this.getFieldsMap(t);this.applyChanges(i,r,n)}delete(e){let t=this.field(e.popLast());nW(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return nL(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let n=t.mapValue.fields[e.get(r)];nW(n)&&n.mapValue.fields||(n={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=n),t=n}return t.mapValue.fields}applyChanges(e,t,r){for(let n of(na(t,(t,r)=>e[t]=r),r))delete e[n]}clone(){return new n1(nY(this.value))}}class n2{constructor(e,t,r,n,i,a,o){this.key=e,this.documentType=t,this.version=r,this.readTime=n,this.createTime=i,this.data=a,this.documentState=o}static newInvalidDocument(e){return new n2(e,0,tU.min(),tU.min(),tU.min(),n1.empty(),0)}static newFoundDocument(e,t,r,n){return new n2(e,1,t,tU.min(),r,n,0)}static newNoDocument(e,t){return new n2(e,2,t,tU.min(),tU.min(),n1.empty(),0)}static newUnknownDocument(e,t){return new n2(e,3,t,tU.min(),tU.min(),n1.empty(),2)}convertToFoundDocument(e,t){return this.createTime.isEqual(tU.min())&&(2===this.documentType||0===this.documentType)&&(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=n1.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=n1.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=tU.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof n2&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n2(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class n6{constructor(e,t){this.position=e,this.inclusive=t}}function n3(e,t,r){let n=0;for(let i=0;i<e.position.length;i++){let a=t[i],o=e.position[i];if(n=a.field.isKeyField()?tk.comparator(tk.fromName(o.referenceValue),r.key):nV(o,r.data.field(a.field)),"desc"===a.dir&&(n*=-1),0!==n)break}return n}function n5(e,t){if(null===e)return null===t;if(null===t||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let r=0;r<e.position.length;r++)if(!nL(e.position[r],t.position[r]))return!1;return!0}class n4{constructor(e,t="asc"){this.field=e,this.dir=t}}class n8{}class n7 extends n8{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new io(e,t,r):"array-contains"===t?new ic(e,r):"in"===t?new ih(e,r):"not-in"===t?new id(e,r):"array-contains-any"===t?new ip(e,r):new n7(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new is(e,r):new il(e,r)}matches(e){let t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(nV(t,this.value)):null!==t&&nR(this.value)===nR(t)&&this.matchesComparison(nV(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return to(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class n9 extends n8{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new n9(e,t)}matches(e){return ie(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function ie(e){return"and"===e.op}function it(e){return"or"===e.op}function ir(e){return ii(e)&&ie(e)}function ii(e){for(let t of e.filters)if(t instanceof n9)return!1;return!0}function ia(e,t){let r=e.filters.concat(t);return n9.create(r,e.op)}class io extends n7{constructor(e,t,r){super(e,t,r),this.key=tk.fromName(r.referenceValue)}matches(e){let t=tk.comparator(e.key,this.key);return this.matchesComparison(t)}}class is extends n7{constructor(e,t){super(e,"in",t),this.keys=iu("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class il extends n7{constructor(e,t){super(e,"not-in",t),this.keys=iu("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function iu(e,t){return(t.arrayValue?.values||[]).map(e=>tk.fromName(e.referenceValue))}class ic extends n7{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return nK(t)&&nF(t.arrayValue,this.value)}}class ih extends n7{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return null!==t&&nF(this.value.arrayValue,t)}}class id extends n7{constructor(e,t){super(e,"not-in",t)}matches(e){if(nF(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!nF(this.value.arrayValue,t)}}class ip extends n7{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!nK(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>nF(this.value.arrayValue,e))}}class ig{constructor(e,t=null,r=[],n=[],i=null,a=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=n,this.limit=i,this.startAt=a,this.endAt=o,this.Te=null}}function im(e,t=null,r=[],n=[],i=null,a=null,o=null){return new ig(e,t,r,n,i,a,o)}function iy(e){if(null===e.Te){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(e=>(function e(t){if(t instanceof n7)return t.field.canonicalString()+t.op.toString()+nz(t.value);if(ir(t))return t.filters.map(t=>e(t)).join(",");{let r=t.filters.map(t=>e(t)).join(",");return`${t.op}(${r})`}})(e)).join(","),t+="|ob:",t+=e.orderBy.map(e=>e.field.canonicalString()+e.dir).join(","),rs(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>nz(e)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>nz(e)).join(",")),e.Te=t}return e.Te}function iv(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<e.orderBy.length;i++){var r,n;if(r=e.orderBy[i],n=t.orderBy[i],!(r.dir===n.dir&&r.field.isEqual(n.field)))return!1}if(e.filters.length!==t.filters.length)return!1;for(let r=0;r<e.filters.length;r++)if(!function e(t,r){return t instanceof n7?r instanceof n7&&t.op===r.op&&t.field.isEqual(r.field)&&nL(t.value,r.value):t instanceof n9?r instanceof n9&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((t,n,i)=>t&&e(n,r.filters[i]),!0):void to(19439)}(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!n5(e.startAt,t.startAt)&&n5(e.endAt,t.endAt)}function ib(e){return tk.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function iw(e,t){return e.filters.filter(e=>e instanceof n7&&e.field.isEqual(t))}function ix(e,t,r){let n=nM,i=!0;for(let r of iw(e,t)){let e=nM,t=!0;switch(r.op){case"<":case"<=":var a;e="nullValue"in(a=r.value)?nM:"booleanValue"in a?{booleanValue:!1}:"integerValue"in a||"doubleValue"in a?{doubleValue:NaN}:"timestampValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in a?{stringValue:""}:"bytesValue"in a?{bytesValue:""}:"referenceValue"in a?nq(nC.empty(),tk.empty()):"geoPointValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in a?{arrayValue:{}}:"mapValue"in a?nQ(a)?nX:{mapValue:{}}:to(35942,{value:a});break;case"==":case"in":case">=":e=r.value;break;case">":e=r.value,t=!1;break;case"!=":case"not-in":e=nM}0>nZ({value:n,inclusive:i},{value:e,inclusive:t})&&(n=e,i=t)}if(null!==r){for(let a=0;a<e.orderBy.length;++a)if(e.orderBy[a].field.isEqual(t)){let e=r.position[a];0>nZ({value:n,inclusive:i},{value:e,inclusive:r.inclusive})&&(n=e,i=r.inclusive);break}}return{value:n,inclusive:i}}function iE(e,t,r){let n=nD,i=!0;for(let r of iw(e,t)){let e=nD,t=!0;switch(r.op){case">=":case">":var a;e="nullValue"in(a=r.value)?{booleanValue:!1}:"booleanValue"in a?{doubleValue:NaN}:"integerValue"in a||"doubleValue"in a?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in a?{stringValue:""}:"stringValue"in a?{bytesValue:""}:"bytesValue"in a?nq(nC.empty(),tk.empty()):"referenceValue"in a?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in a?{arrayValue:{}}:"arrayValue"in a?nX:"mapValue"in a?nQ(a)?{mapValue:{}}:nD:to(61959,{value:a}),t=!1;break;case"==":case"in":case"<=":e=r.value;break;case"<":e=r.value,t=!1;break;case"!=":case"not-in":e=nD}n0({value:n,inclusive:i},{value:e,inclusive:t})>0&&(n=e,i=t)}if(null!==r){for(let a=0;a<e.orderBy.length;++a)if(e.orderBy[a].field.isEqual(t)){let e=r.position[a];n0({value:n,inclusive:i},{value:e,inclusive:r.inclusive})>0&&(n=e,i=r.inclusive);break}}return{value:n,inclusive:i}}class iS{constructor(e,t=null,r=[],n=[],i=null,a="F",o=null,s=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=n,this.limit=i,this.limitType=a,this.startAt=o,this.endAt=s,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function i_(e){return new iS(e)}function iO(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function iT(e){return null!==e.collectionGroup}function iI(e){if(null===e.Ie){let t;e.Ie=[];let r=new Set;for(let t of e.explicitOrderBy)e.Ie.push(t),r.add(t.field.canonicalString());let n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(t=new nc(tC.comparator),e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t).forEach(t=>{r.has(t.canonicalString())||t.isKeyField()||e.Ie.push(new n4(t,n))}),r.has(tC.keyField().canonicalString())||e.Ie.push(new n4(tC.keyField(),n))}return e.Ie}function iA(e){return e.Ee||(e.Ee=iC(e,iI(e))),e.Ee}function iC(e,t){if("F"===e.limitType)return im(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{let t="desc"===e.dir?"asc":"desc";return new n4(e.field,t)});let r=e.endAt?new n6(e.endAt.position,e.endAt.inclusive):null,n=e.startAt?new n6(e.startAt.position,e.startAt.inclusive):null;return im(e.path,e.collectionGroup,t,e.filters,e.limit,r,n)}}function ik(e,t){let r=e.filters.concat([t]);return new iS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),r,e.limit,e.limitType,e.startAt,e.endAt)}function iP(e,t,r){return new iS(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,r,e.startAt,e.endAt)}function iD(e,t){return iv(iA(e),iA(t))&&e.limitType===t.limitType}function iN(e){return`${iy(iA(e))}|lt:${e.limitType}`}function ij(e){var t;let r;return`Query(target=${r=(t=iA(e)).path.canonicalString(),null!==t.collectionGroup&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(e=>(function e(t){return t instanceof n7?`${t.field.canonicalString()} ${t.op} ${nz(t.value)}`:t instanceof n9?t.op.toString()+" {"+t.getFilters().map(e).join(" ,")+"}":"Filter"})(e)).join(", ")}]`),rs(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(e=>`${e.field.canonicalString()} (${e.dir})`).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(e=>nz(e)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(e=>nz(e)).join(",")),`Target(${r})`}; limitType=${e.limitType})`}function iM(e,t){var r,n,i,a;let o,s,l;return t.isFoundDocument()&&(o=t.key.path,null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(o):tk.isDocumentKey(e.path)?e.path.isEqual(o):e.path.isImmediateParentOf(o))&&function(e,t){for(let r of iI(e))if(!r.field.isKeyField()&&null===t.data.field(r.field))return!1;return!0}(e,t)&&function(e,t){for(let r of e.filters)if(!r.matches(t))return!1;return!0}(e,t)&&(r=e,n=t,(!r.startAt||(i=r.startAt,s=n3(i,iI(r),n),i.inclusive?!!(s<=0):!!(s<0)))&&(!r.endAt||(a=r.endAt,l=n3(a,iI(r),n),a.inclusive?!!(l>=0):!!(l>0))))}function iR(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function iL(e){return(t,r)=>{let n=!1;for(let i of iI(e)){let e=function(e,t,r){var n;let i,a,o=e.field.isKeyField()?tk.comparator(t.key,r.key):(n=e.field,i=t.data.field(n),a=r.data.field(n),null!==i&&null!==a?nV(i,a):to(42886));switch(e.dir){case"asc":return o;case"desc":return -1*o;default:return to(19790,{direction:e.dir})}}(i,t,r);if(0!==e)return e;n=n||i.field.isKeyField()}return 0}}class iF{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r){for(let[t,n]of r)if(this.equalsFn(t,e))return n}}has(e){return void 0!==this.get(e)}set(e,t){let r=this.mapKeyFn(e),n=this.inner[r];if(void 0===n)return this.inner[r]=[[e,t]],void this.innerSize++;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return void(n[r]=[e,t]);n.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return 1===r.length?delete this.inner[t]:r.splice(n,1),this.innerSize--,!0;return!1}forEach(e){na(this.inner,(t,r)=>{for(let[t,n]of r)e(t,n)})}isEmpty(){return no(this.inner)}size(){return this.innerSize}}let iV=new ns(tk.comparator),iB=new ns(tk.comparator);function iU(...e){let t=iB;for(let r of e)t=t.insert(r.key,r);return t}function iz(e){let t=iB;return e.forEach((e,r)=>t=t.insert(e,r.overlayedDocument)),t}function iq(){return new iF(e=>e.toString(),(e,t)=>e.isEqual(t))}let i$=new ns(tk.comparator),iK=new nc(tk.comparator);function iG(...e){let t=iK;for(let r of e)t=t.add(r);return t}let iH=new nc(tx);function iW(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:rl(t)?"-0":t}}function iQ(e){return{integerValue:""+e}}function iY(e,t){return ru(t)?iQ(t):iW(e,t)}class iJ{constructor(){this._=void 0}}function iX(e,t){return e instanceof i3?n$(t)||t&&"doubleValue"in t?t:{integerValue:0}:null}class iZ extends iJ{}class i0 extends iJ{constructor(e){super(),this.elements=e}}function i1(e,t){let r=i4(t);for(let t of e.elements)r.some(e=>nL(e,t))||r.push(t);return{arrayValue:{values:r}}}class i2 extends iJ{constructor(e){super(),this.elements=e}}function i6(e,t){let r=i4(t);for(let t of e.elements)r=r.filter(e=>!nL(e,t));return{arrayValue:{values:r}}}class i3 extends iJ{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function i5(e){return nv(e.integerValue||e.doubleValue)}function i4(e){return nK(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class i8{constructor(e,t){this.field=e,this.transform=t}}class i7{constructor(e,t){this.version=e,this.transformResults=t}}class i9{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new i9}static exists(e){return new i9(void 0,e)}static updateTime(e){return new i9(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ae(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class at{}function ar(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new ac(e.key,i9.none()):new aa(e.key,e.data,i9.none());{let r=e.data,n=n1.empty(),i=new nc(tC.comparator);for(let e of t.fields)if(!i.has(e)){let t=r.field(e);null===t&&e.length>1&&(e=e.popLast(),t=r.field(e)),null===t?n.delete(e):n.set(e,t),i=i.add(e)}return new ao(e.key,n,new nd(i.toArray()),i9.none())}}function an(e,t,r,n){return e instanceof aa?function(e,t,r,n){if(!ae(e.precondition,t))return r;let i=e.value.clone(),a=au(e.fieldTransforms,n,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,r,n):e instanceof ao?function(e,t,r,n){if(!ae(e.precondition,t))return r;let i=au(e.fieldTransforms,n,t),a=t.data;return(a.setAll(as(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===r)?null:r.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,r,n):ae(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):r}function ai(e,t){var r,n;return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&(r=e.fieldTransforms,n=t.fieldTransforms,!!(void 0===r&&void 0===n||!(!r||!n)&&t_(r,n,(e,t)=>{var r,n;return e.field.isEqual(t.field)&&(r=e.transform,n=t.transform,r instanceof i0&&n instanceof i0||r instanceof i2&&n instanceof i2?t_(r.elements,n.elements,nL):r instanceof i3&&n instanceof i3?nL(r.Ae,n.Ae):r instanceof iZ&&n instanceof iZ)})))&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class aa extends at{constructor(e,t,r,n=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=n,this.type=0}getFieldMask(){return null}}class ao extends at{constructor(e,t,r,n,i=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=n,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function as(e){let t=new Map;return e.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){let n=e.data.field(r);t.set(r,n)}}),t}function al(e,t,r){let n=new Map;tl(e.length===r.length,32656,{Ve:r.length,de:e.length});for(let a=0;a<r.length;a++){var i;let o=e[a],s=o.transform,l=t.data.field(o.field);n.set(o.field,(i=r[a],s instanceof i0?i1(s,l):s instanceof i2?i6(s,l):i))}return n}function au(e,t,r){let n=new Map;for(let i of e){let e=i.transform,a=r.data.field(i.field);n.set(i.field,function(e,t,r){var n;let i,a,o;return e instanceof iZ?(n=t,i={fields:{[nx]:{stringValue:nw},[nS]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}},n&&n_(n)&&(n=nO(n)),n&&(i.fields[nE]=n),{mapValue:i}):e instanceof i0?i1(e,t):e instanceof i2?i6(e,t):(o=i5(a=iX(e,t))+i5(e.Ae),n$(a)&&n$(e.Ae)?iQ(o):iW(e.serializer,o))}(e,a,t))}return n}class ac extends at{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ah extends at{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class af{constructor(e,t,r,n){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=n}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let t=0;t<this.mutations.length;t++){let n=this.mutations[t];n.key.isEqual(e.key)&&function(e,t,r){let n,i;e instanceof aa?(n=e.value.clone(),i=al(e.fieldTransforms,t,r.transformResults),n.setAll(i),t.convertToFoundDocument(r.version,n).setHasCommittedMutations()):e instanceof ao?function(e,t,r){if(!ae(e.precondition,t))return t.convertToUnknownDocument(r.version);let n=al(e.fieldTransforms,t,r.transformResults),i=t.data;i.setAll(as(e)),i.setAll(n),t.convertToFoundDocument(r.version,i).setHasCommittedMutations()}(e,t,r):t.convertToNoDocument(r.version).setHasCommittedMutations()}(n,e,r[t])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=an(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=an(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=iq();return this.mutations.forEach(n=>{let i=e.get(n.key),a=i.overlayedDocument,o=this.applyToLocalView(a,i.mutatedFields),s=ar(a,o=t.has(n.key)?null:o);null!==s&&r.set(n.key,s),a.isValidDocument()||a.convertToNoDocument(tU.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),iG())}isEqual(e){return this.batchId===e.batchId&&t_(this.mutations,e.mutations,(e,t)=>ai(e,t))&&t_(this.baseMutations,e.baseMutations,(e,t)=>ai(e,t))}}class ad{constructor(e,t,r,n){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=n}static from(e,t,r){tl(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let n=i$,i=e.mutations;for(let e=0;e<i.length;e++)n=n.insert(i[e].key,r[e].version);return new ad(e,t,r,n)}}class ap{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class ag{constructor(e,t,r){this.alias=e,this.aggregateType=t,this.fieldPath=r}}class am{constructor(e,t){this.count=e,this.unchangedNames=t}}function ay(e){switch(e){case tu.OK:return to(64938);case tu.CANCELLED:case tu.UNKNOWN:case tu.DEADLINE_EXCEEDED:case tu.RESOURCE_EXHAUSTED:case tu.INTERNAL:case tu.UNAVAILABLE:case tu.UNAUTHENTICATED:return!1;case tu.INVALID_ARGUMENT:case tu.NOT_FOUND:case tu.ALREADY_EXISTS:case tu.PERMISSION_DENIED:case tu.FAILED_PRECONDITION:case tu.ABORTED:case tu.OUT_OF_RANGE:case tu.UNIMPLEMENTED:case tu.DATA_LOSS:return!0;default:return to(15467,{code:e})}}function av(e){if(void 0===e)return tn("GRPC error has no .code"),tu.UNKNOWN;switch(e){case m.OK:return tu.OK;case m.CANCELLED:return tu.CANCELLED;case m.UNKNOWN:return tu.UNKNOWN;case m.DEADLINE_EXCEEDED:return tu.DEADLINE_EXCEEDED;case m.RESOURCE_EXHAUSTED:return tu.RESOURCE_EXHAUSTED;case m.INTERNAL:return tu.INTERNAL;case m.UNAVAILABLE:return tu.UNAVAILABLE;case m.UNAUTHENTICATED:return tu.UNAUTHENTICATED;case m.INVALID_ARGUMENT:return tu.INVALID_ARGUMENT;case m.NOT_FOUND:return tu.NOT_FOUND;case m.ALREADY_EXISTS:return tu.ALREADY_EXISTS;case m.PERMISSION_DENIED:return tu.PERMISSION_DENIED;case m.FAILED_PRECONDITION:return tu.FAILED_PRECONDITION;case m.ABORTED:return tu.ABORTED;case m.OUT_OF_RANGE:return tu.OUT_OF_RANGE;case m.UNIMPLEMENTED:return tu.UNIMPLEMENTED;case m.DATA_LOSS:return tu.DATA_LOSS;default:return to(39323,{code:e})}}(y=m||(m={}))[y.OK=0]="OK",y[y.CANCELLED=1]="CANCELLED",y[y.UNKNOWN=2]="UNKNOWN",y[y.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",y[y.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",y[y.NOT_FOUND=5]="NOT_FOUND",y[y.ALREADY_EXISTS=6]="ALREADY_EXISTS",y[y.PERMISSION_DENIED=7]="PERMISSION_DENIED",y[y.UNAUTHENTICATED=16]="UNAUTHENTICATED",y[y.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",y[y.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",y[y.ABORTED=10]="ABORTED",y[y.OUT_OF_RANGE=11]="OUT_OF_RANGE",y[y.UNIMPLEMENTED=12]="UNIMPLEMENTED",y[y.INTERNAL=13]="INTERNAL",y[y.UNAVAILABLE=14]="UNAVAILABLE",y[y.DATA_LOSS=15]="DATA_LOSS";let ab=null;function aw(){return new TextEncoder}let ax=new o([0xffffffff,0xffffffff],0);function aE(e){let t=aw().encode(e),r=new s;return r.update(t),new Uint8Array(r.digest())}function aS(e){let t=new DataView(e.buffer),r=t.getUint32(0,!0),n=t.getUint32(4,!0),i=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new o([r,n],0),new o([i,a],0)]}class a_{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new aO(`Invalid padding: ${t}`);if(r<0||e.length>0&&0===this.hashCount)throw new aO(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new aO(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=o.fromNumber(this.ge)}ye(e,t,r){let n=e.add(t.multiply(o.fromNumber(r)));return 1===n.compare(ax)&&(n=new o([n.getBits(0),n.getBits(1)],0)),n.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;let[t,r]=aS(aE(e));for(let e=0;e<this.hashCount;e++){let n=this.ye(t,r,e);if(!this.we(n))return!1}return!0}static create(e,t,r){let n=new a_(new Uint8Array(Math.ceil(e/8)),e%8==0?0:8-e%8,t);return r.forEach(e=>n.insert(e)),n}insert(e){if(0===this.ge)return;let[t,r]=aS(aE(e));for(let e=0;e<this.hashCount;e++){let n=this.ye(t,r,e);this.be(n)}}be(e){let t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class aO extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class aT{constructor(e,t,r,n,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=n,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,r){let n=new Map;return n.set(e,aI.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new aT(tU.min(),n,new ns(tx),iV,iG())}}class aI{constructor(e,t,r,n,i){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=n,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new aI(r,t,iG(),iG(),iG())}}class aA{constructor(e,t,r,n){this.Se=e,this.removedTargetIds=t,this.key=r,this.De=n}}class aC{constructor(e,t){this.targetId=e,this.Ce=t}}class ak{constructor(e,t,r=ng.EMPTY_BYTE_STRING,n=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=n}}class aP{constructor(){this.ve=0,this.Fe=aj(),this.Me=ng.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=iG(),t=iG(),r=iG();return this.Fe.forEach((n,i)=>{switch(i){case 0:e=e.add(n);break;case 2:t=t.add(n);break;case 1:r=r.add(n);break;default:to(38017,{changeType:i})}}),new aI(this.Me,this.xe,e,t,r)}Ke(){this.Oe=!1,this.Fe=aj()}qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,tl(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class aD{constructor(e){this.Ge=e,this.ze=new Map,this.je=iV,this.He=aN(),this.Je=aN(),this.Ze=new ns(tx)}Xe(e){for(let t of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(t,e.De):this.et(t,e.key,e.De);for(let t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{let r=this.nt(t);switch(e.state){case 0:this.rt(t)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),r.Le(e.resumeToken));break;default:to(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,r)=>{this.rt(r)&&t(r)})}st(e){let t=e.targetId,r=e.Ce.count,n=this.ot(t);if(n){let o=n.target;if(ib(o))if(0===r){let e=new tk(o.path);this.et(t,e,n2.newNoDocument(e,tU.min()))}else tl(1===r,20013,{expectedCount:r});else{let n=this._t(t);if(n!==r){var i,a;let r,o,s=this.ut(e),l=s?this.ct(s,e,n):1;0!==l&&(this.it(t),this.Ze=this.Ze.insert(t,2===l?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),ab?.lt((i=e.Ce,a=this.Ge.ht(),r={localCacheCount:n,existenceFilterCount:i.count,databaseId:a.database,projectId:a.projectId},(o=i.unchangedNames)&&(r.bloomFilter={applied:0===l,hashCount:o?.hashCount??0,bitmapLength:o?.bits?.bitmap?.length??0,padding:o?.bits?.padding??0,mightContain:e=>s?.mightContain(e)??!1}),r))}}}}ut(e){let t,r,n=e.Ce.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:i="",padding:a=0},hashCount:o=0}=n;try{t=nb(i).toUint8Array()}catch(e){if(e instanceof np)return ti("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{r=new a_(t,a,o)}catch(e){return ti(e instanceof aO?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===r.ge?null:r}ct(e,t,r){return 2*(t.Ce.count!==r-this.Pt(e,t.targetId))}Pt(e,t){let r=this.Ge.getRemoteKeysForTarget(t),n=0;return r.forEach(r=>{let i=this.Ge.ht(),a=`projects/${i.projectId}/databases/${i.database}/documents/${r.path.canonicalString()}`;e.mightContain(a)||(this.et(t,r,null),n++)}),n}Tt(e){let t=new Map;this.ze.forEach((r,n)=>{let i=this.ot(n);if(i){if(r.current&&ib(i.target)){let t=new tk(i.target.path);this.It(t).has(n)||this.Et(n,t)||this.et(n,t,n2.newNoDocument(t,e))}r.Be&&(t.set(n,r.ke()),r.Ke())}});let r=iG();this.Je.forEach((e,t)=>{let n=!0;t.forEachWhile(e=>{let t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(n=!1,!1)}),n&&(r=r.add(e))}),this.je.forEach((t,r)=>r.setReadTime(e));let n=new aT(e,t,this.Ze,this.je,r);return this.je=iV,this.He=aN(),this.Je=aN(),this.Ze=new ns(tx),n}Ye(e,t){if(!this.rt(e))return;let r=2*!!this.Et(e,t.key);this.nt(e).qe(t.key,r),this.je=this.je.insert(t.key,t),this.He=this.He.insert(t.key,this.It(t.key).add(e)),this.Je=this.Je.insert(t.key,this.Rt(t.key).add(e))}et(e,t,r){if(!this.rt(e))return;let n=this.nt(e);this.Et(e,t)?n.qe(t,1):n.Ue(t),this.Je=this.Je.insert(t,this.Rt(t).delete(e)),this.Je=this.Je.insert(t,this.Rt(t).add(e)),r&&(this.je=this.je.insert(t,r))}removeTarget(e){this.ze.delete(e)}_t(e){let t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let t=this.ze.get(e);return t||(t=new aP,this.ze.set(e,t)),t}Rt(e){let t=this.Je.get(e);return t||(t=new nc(tx),this.Je=this.Je.insert(e,t)),t}It(e){let t=this.He.get(e);return t||(t=new nc(tx),this.He=this.He.insert(e,t)),t}rt(e){let t=null!==this.ot(e);return t||tr("WatchChangeAggregator","Detected inactive target",e),t}ot(e){let t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new aP),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function aN(){return new ns(tk.comparator)}function aj(){return new ns(tk.comparator)}let aM={asc:"ASCENDING",desc:"DESCENDING"},aR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},aL={and:"AND",or:"OR"};class aF{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function aV(e,t){return e.useProto3Json||rs(t)?t:{value:t}}function aB(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function aU(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function az(e){let t;return tl(!!e,49232),tU.fromTimestamp(new tB((t=ny(e)).seconds,t.nanos))}function aq(e,t){return a$(e,t).canonicalString()}function a$(e,t){let r=new tI(["projects",e.projectId,"databases",e.database]).child("documents");return void 0===t?r:r.child(t)}function aK(e){let t=tI.fromString(e);return tl(a8(t),10190,{key:t.toString()}),t}function aG(e,t){return aq(e.databaseId,t.path)}function aH(e,t){let r=aK(t);if(r.get(1)!==e.databaseId.projectId)throw new tc(tu.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+e.databaseId.projectId);if(r.get(3)!==e.databaseId.database)throw new tc(tu.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+e.databaseId.database);return new tk(aJ(r))}function aW(e,t){return aq(e.databaseId,t)}function aQ(e){let t=aK(e);return 4===t.length?tI.emptyPath():aJ(t)}function aY(e){return new tI(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function aJ(e){return tl(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function aX(e,t,r){return{name:aG(e,t),fields:r.value.mapValue.fields}}function aZ(e,t,r){let n=aH(e,t.name),i=az(t.updateTime),a=t.createTime?az(t.createTime):tU.min(),o=new n1({mapValue:{fields:t.fields}}),s=n2.newFoundDocument(n,i,a,o);return r&&s.setHasCommittedMutations(),r?s.setHasCommittedMutations():s}function a0(e,t){var r,n;let i;if(t instanceof aa)i={update:aX(e,t.key,t.value)};else if(t instanceof ac)i={delete:aG(e,t.key)};else if(t instanceof ao){let r;i={update:aX(e,t.key,t.data),updateMask:(n=t.fieldMask,r=[],n.fields.forEach(e=>r.push(e.canonicalString())),{fieldPaths:r})}}else{if(!(t instanceof ah))return to(16599,{dt:t.type});i={verify:aG(e,t.key)}}return t.fieldTransforms.length>0&&(i.updateTransforms=t.fieldTransforms.map(e=>(function(e,t){let r=t.transform;if(r instanceof iZ)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(r instanceof i0)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:r.elements}};if(r instanceof i2)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:r.elements}};if(r instanceof i3)return{fieldPath:t.field.canonicalString(),increment:r.Ae};throw to(20930,{transform:t.transform})})(0,e))),t.precondition.isNone||(i.currentDocument=void 0!==(r=t.precondition).updateTime?{updateTime:aB(e,r.updateTime.toTimestamp())}:void 0!==r.exists?{exists:r.exists}:to(27497)),i}function a1(e,t){var r;let n=t.currentDocument?void 0!==(r=t.currentDocument).updateTime?i9.updateTime(az(r.updateTime)):void 0!==r.exists?i9.exists(r.exists):i9.none():i9.none(),i=t.updateTransforms?t.updateTransforms.map(t=>{let r;return r=null,"setToServerValue"in t?(tl("REQUEST_TIME"===t.setToServerValue,16630,{proto:t}),r=new iZ):"appendMissingElements"in t?r=new i0(t.appendMissingElements.values||[]):"removeAllFromArray"in t?r=new i2(t.removeAllFromArray.values||[]):"increment"in t?r=new i3(e,t.increment):to(16584,{proto:t}),new i8(tC.fromServerFormat(t.fieldPath),r)}):[];if(t.update){t.update.name;let r=aH(e,t.update.name),a=new n1({mapValue:{fields:t.update.fields}});return t.updateMask?new ao(r,a,new nd((t.updateMask.fieldPaths||[]).map(e=>tC.fromServerFormat(e))),n,i):new aa(r,a,n,i)}return t.delete?new ac(aH(e,t.delete),n):t.verify?new ah(aH(e,t.verify),n):to(1463,{proto:t})}function a2(e,t){return{documents:[aW(e,t.path)]}}function a6(e,t){var r,n;let i,a={structuredQuery:{}},o=t.path;null!==t.collectionGroup?(i=o,a.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=o.popLast(),a.structuredQuery.from=[{collectionId:o.lastSegment()}]),a.parent=aW(e,i);let s=function(e){if(0!==e.length)return function e(t){var r;let n;return t instanceof n7?function(e){if("=="===e.op){if(nH(e.value))return{unaryFilter:{field:a5(e.field),op:"IS_NAN"}};if(nG(e.value))return{unaryFilter:{field:a5(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(nH(e.value))return{unaryFilter:{field:a5(e.field),op:"IS_NOT_NAN"}};if(nG(e.value))return{unaryFilter:{field:a5(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:a5(e.field),op:aR[e.op],value:e.value}}}(t):t instanceof n9?1===(n=(r=t).getFilters().map(t=>e(t))).length?n[0]:{compositeFilter:{op:aL[r.op],filters:n}}:to(54877,{filter:t})}(n9.create(e,"and"))}(t.filters);s&&(a.structuredQuery.where=s);let l=function(e){if(0!==e.length)return e.map(e=>({field:a5(e.field),direction:aM[e.dir]}))}(t.orderBy);l&&(a.structuredQuery.orderBy=l);let u=aV(e,t.limit);return null!==u&&(a.structuredQuery.limit=u),t.startAt&&(a.structuredQuery.startAt={before:(r=t.startAt).inclusive,values:r.position}),t.endAt&&(a.structuredQuery.endAt={before:!(n=t.endAt).inclusive,values:n.position}),{ft:a,parent:i}}function a3(e){var t,r,n;let i,a,o,s,l=aQ(e.parent),u=e.structuredQuery,c=u.from?u.from.length:0,h=null;if(c>0){tl(1===c,65062);let e=u.from[0];e.allDescendants?h=e.collectionId:l=l.child(e.collectionId)}let f=[];u.where&&(f=(i=function e(t){return void 0!==t.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":let t=a4(e.unaryFilter.field);return n7.create(t,"==",{doubleValue:NaN});case"IS_NULL":let r=a4(e.unaryFilter.field);return n7.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let n=a4(e.unaryFilter.field);return n7.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let i=a4(e.unaryFilter.field);return n7.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return to(61313);default:return to(60726)}}(t):void 0!==t.fieldFilter?n7.create(a4(t.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return to(58110);default:return to(50506)}}(t.fieldFilter.op),t.fieldFilter.value):void 0!==t.compositeFilter?n9.create(t.compositeFilter.filters.map(t=>e(t)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return to(1026)}}(t.compositeFilter.op)):to(30097,{filter:t})}(u.where))instanceof n9&&ir(i)?i.getFilters():[i]);let d=[];u.orderBy&&(d=u.orderBy.map(e=>new n4(a4(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))));let p=null;u.limit&&(p=rs(a="object"==typeof(t=u.limit)?t.value:t)?null:a);let g=null;u.startAt&&(o=!!(r=u.startAt).before,g=new n6(r.values||[],o));let m=null;return u.endAt&&(s=!(n=u.endAt).before,m=new n6(n.values||[],s)),new iS(l,h,d,f,p,"F",g,m)}function a5(e){return{fieldPath:e.canonicalString()}}function a4(e){return tC.fromServerFormat(e.fieldPath)}function a8(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function a7(e){return!!e&&"function"==typeof e._toProto&&"ProtoValue"===e._protoValueType}class a9{constructor(e,t,r,n,i=tU.min(),a=tU.min(),o=ng.EMPTY_BYTE_STRING,s=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=n,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=o,this.expectedCount=s}withSequenceNumber(e){return new a9(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new a9(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new a9(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new a9(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class oe{constructor(e){this.yt=e}}function ot(e,t){let r=t.key,n={prefixPath:r.getCollectionPath().popLast().toArray(),collectionGroup:r.collectionGroup,documentId:r.path.lastSegment(),readTime:or(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument()){var i;n.document={name:aG(i=e.yt,t.key),fields:t.data.value.mapValue.fields,updateTime:aB(i,t.version.toTimestamp()),createTime:aB(i,t.createTime.toTimestamp())}}else if(t.isNoDocument())n.noDocument={path:r.path.toArray(),readTime:on(t.version)};else{if(!t.isUnknownDocument())return to(57904,{document:t});n.unknownDocument={path:r.path.toArray(),version:on(t.version)}}return n}function or(e){let t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function on(e){let t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function oi(e){let t=new tB(e.seconds,e.nanoseconds);return tU.fromTimestamp(t)}function oa(e,t){let r=(t.baseMutations||[]).map(t=>a1(e.yt,t));for(let e=0;e<t.mutations.length-1;++e){let r=t.mutations[e];e+1<t.mutations.length&&void 0!==t.mutations[e+1].transform&&(r.updateTransforms=t.mutations[e+1].transform.fieldTransforms,t.mutations.splice(e+1,1),++e)}let n=t.mutations.map(t=>a1(e.yt,t)),i=tB.fromMillis(t.localWriteTimeMs);return new af(t.batchId,i,r,n)}function oo(e){var t;let r,n=oi(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?oi(e.lastLimboFreeSnapshotVersion):tU.min();return new a9(void 0!==e.query.documents?(tl(1===(r=(t=e.query).documents.length),1966,{count:r}),iA(i_(aQ(t.documents[0])))):iA(a3(e.query)),e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,n,i,ng.fromBase64String(e.resumeToken))}function os(e,t){let r,n=on(t.snapshotVersion),i=on(t.lastLimboFreeSnapshotVersion);r=ib(t.target)?a2(e.yt,t.target):a6(e.yt,t.target).ft;let a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:iy(t.target),readTime:n,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function ol(e){let t=a3({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?iP(t,t.limit,"L"):t}function ou(e,t){return new ap(t.largestBatchId,a1(e.yt,t.overlayMutation))}function oc(e,t){let r=t.path.lastSegment();return[e,rc(t.path.popLast()),r]}function oh(e,t,r,n){return{indexId:e,uid:t,sequenceNumber:r,readTime:on(n.readTime),documentKey:rc(n.documentKey.path),largestBatchId:n.largestBatchId}}class of{getBundleMetadata(e,t){return nn(e,rz).get(t).next(e=>{if(e)return{id:e.bundleId,createTime:oi(e.createTime),version:e.version}})}saveBundleMetadata(e,t){return nn(e,rz).put({bundleId:t.id,createTime:on(az(t.createTime)),version:t.version})}getNamedQuery(e,t){return nn(e,rq).get(t).next(e=>{if(e)return{name:e.name,query:ol(e.bundledQuery),readTime:oi(e.readTime)}})}saveNamedQuery(e,t){return nn(e,rq).put({name:t.name,readTime:on(az(t.readTime)),bundledQuery:t.bundledQuery})}}class od{constructor(e,t){this.serializer=e,this.userId=t}static wt(e,t){return new od(e,t.uid||"")}getOverlay(e,t){return nn(e,r0).get(oc(this.userId,t)).next(e=>e?ou(this.serializer,e):null)}getOverlays(e,t){let r=iq();return t1.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&r.set(t,e)})).next(()=>r)}saveOverlays(e,t,r){let n=[];return r.forEach((r,i)=>{let a=new ap(t,i);n.push(this.bt(e,a))}),t1.waitFor(n)}removeOverlaysForBatchId(e,t,r){let n=new Set;t.forEach(e=>n.add(rc(e.getCollectionPath())));let i=[];return n.forEach(t=>{let n=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,r+1],!1,!0);i.push(nn(e,r0).X(r2,n))}),t1.waitFor(i)}getOverlaysForCollection(e,t,r){let n=iq(),i=rc(t),a=IDBKeyRange.bound([this.userId,i,r],[this.userId,i,1/0],!0);return nn(e,r0).H(r2,a).next(e=>{for(let t of e){let e=ou(this.serializer,t);n.set(e.getKey(),e)}return n})}getOverlaysForCollectionGroup(e,t,r,n){let i,a=iq(),o=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,1/0],!0);return nn(e,r0).ee({index:r3,range:o},(e,t,r)=>{let o=ou(this.serializer,t);a.size()<n||o.largestBatchId===i?(a.set(o.getKey(),o),i=o.largestBatchId):r.done()}).next(()=>a)}bt(e,t){return nn(e,r0).put(function(e,t,r){let[n,i,a]=oc(t,r.mutation.key);return{userId:t,collectionPath:i,documentId:a,collectionGroup:r.mutation.key.getCollectionGroup(),largestBatchId:r.largestBatchId,overlayMutation:a0(e.yt,r.mutation)}}(this.serializer,this.userId,t))}}class op{St(e){return nn(e,r4)}getSessionToken(e){return this.St(e).get("sessionToken").next(e=>{let t=e?.value;return t?ng.fromUint8Array(t):ng.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.St(e).put({name:"sessionToken",value:t.toUint8Array()})}}class og{Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(+!!e.booleanValue);else if("integerValue"in e)this.Ft(t,15),t.Mt(nv(e.integerValue));else if("doubleValue"in e){let r=nv(e.doubleValue);isNaN(r)?this.Ft(t,13):(this.Ft(t,15),rl(r)?t.Mt(0):t.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(t,20),"string"==typeof r&&(r=ny(r)),t.xt(`${r.seconds||""}`),t.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(nb(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(t,45),t.Mt(r.latitude||0),t.Mt(r.longitude||0)}else"mapValue"in e?nJ(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):nQ(e)?this.kt(e.mapValue,t):(this.Kt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.qt(e.arrayValue,t),this.Nt(t)):to(19022,{Ut:e})}Ot(e,t){this.Ft(t,25),this.$t(e,t)}$t(e,t){t.xt(e)}Kt(e,t){let r=e.fields||{};for(let e of(this.Ft(t,55),Object.keys(r)))this.Ot(e,t),this.Ct(r[e],t)}kt(e,t){let r=e.fields||{};this.Ft(t,53);let n=r[nj].arrayValue?.values?.length||0;this.Ft(t,15),t.Mt(nv(n)),this.Ot(nj,t),this.Ct(r[nj],t)}qt(e,t){let r=e.values||[];for(let e of(this.Ft(t,50),r))this.Ct(e,t)}Lt(e,t){this.Ft(t,37),tk.fromName(e).path.forEach(e=>{this.Ft(t,60),this.$t(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}function om(e){return Math.ceil((64-function(e){let t=0;for(let r=0;r<8;++r){let n=function(e){if(0===e)return 8;let t=0;return e>>4||(t+=4,e<<=4),e>>6||(t+=2,e<<=2),e>>7||(t+=1),t}(255&e[r]);if(t+=n,8!==n)break}return t}(e))/8)}og.Wt=new og;class oy{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Qt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Gt(r.value),r=t.next();this.zt()}jt(e){let t=e[Symbol.iterator](),r=t.next();for(;!r.done;)this.Ht(r.value),r=t.next();this.Jt()}Zt(e){for(let t of e){let e=t.charCodeAt(0);if(e<128)this.Gt(e);else if(e<2048)this.Gt(960|e>>>6),this.Gt(128|63&e);else if(t<"\uD800"||"\uDBFF"<t)this.Gt(480|e>>>12),this.Gt(128|63&e>>>6),this.Gt(128|63&e);else{let e=t.codePointAt(0);this.Gt(240|e>>>18),this.Gt(128|63&e>>>12),this.Gt(128|63&e>>>6),this.Gt(128|63&e)}}this.zt()}Xt(e){for(let t of e){let e=t.charCodeAt(0);if(e<128)this.Ht(e);else if(e<2048)this.Ht(960|e>>>6),this.Ht(128|63&e);else if(t<"\uD800"||"\uDBFF"<t)this.Ht(480|e>>>12),this.Ht(128|63&e>>>6),this.Ht(128|63&e);else{let e=t.codePointAt(0);this.Ht(240|e>>>18),this.Ht(128|63&e>>>12),this.Ht(128|63&e>>>6),this.Ht(128|63&e)}}this.Jt()}Yt(e){let t=this.en(e),r=om(t);this.tn(1+r),this.buffer[this.position++]=255&r;for(let e=t.length-r;e<t.length;++e)this.buffer[this.position++]=255&t[e]}nn(e){let t=this.en(e),r=om(t);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let e=t.length-r;e<t.length;++e)this.buffer[this.position++]=~(255&t[e])}rn(){this.sn(255),this.sn(255)}_n(){this.an(255),this.an(255)}reset(){this.position=0}seed(e){this.tn(e.length),this.buffer.set(e,this.position),this.position+=e.length}un(){return this.buffer.slice(0,this.position)}en(e){let t,r=((t=new DataView(new ArrayBuffer(8))).setFloat64(0,e,!1),new Uint8Array(t.buffer)),n=!!(128&r[0]);r[0]^=n?255:128;for(let e=1;e<r.length;++e)r[e]^=255*!!n;return r}Gt(e){let t=255&e;0===t?(this.sn(0),this.sn(255)):255===t?(this.sn(255),this.sn(0)):this.sn(t)}Ht(e){let t=255&e;0===t?(this.an(0),this.an(255)):255===t?(this.an(255),this.an(0)):this.an(e)}zt(){this.sn(0),this.sn(1)}Jt(){this.an(0),this.an(1)}sn(e){this.tn(1),this.buffer[this.position++]=e}an(e){this.tn(1),this.buffer[this.position++]=~e}tn(e){let t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);let n=new Uint8Array(r);n.set(this.buffer),this.buffer=n}}class ov{constructor(e){this.cn=e}Bt(e){this.cn.Qt(e)}xt(e){this.cn.Zt(e)}Mt(e){this.cn.Yt(e)}vt(){this.cn.rn()}}class ob{constructor(e){this.cn=e}Bt(e){this.cn.jt(e)}xt(e){this.cn.Xt(e)}Mt(e){this.cn.nn(e)}vt(){this.cn._n()}}class ow{constructor(){this.cn=new oy,this.ascending=new ov(this.cn),this.descending=new ob(this.cn)}seed(e){this.cn.seed(e)}ln(e){return 0===e?this.ascending:this.descending}un(){return this.cn.un()}reset(){this.cn.reset()}}class ox{constructor(e,t,r,n){this.hn=e,this.Pn=t,this.Tn=r,this.In=n}En(){let e=this.In.length,t=0===e||255===this.In[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.In,0),t!==e?r.set([0],this.In.length):++r[r.length-1],new ox(this.hn,this.Pn,this.Tn,r)}Rn(e,t,r){return{indexId:this.hn,uid:e,arrayValue:o_(this.Tn),directionalValue:o_(this.In),orderedDocumentKey:o_(t),documentKey:r.path.toArray()}}An(e,t,r){let n=this.Rn(e,t,r);return[n.indexId,n.uid,n.arrayValue,n.directionalValue,n.orderedDocumentKey,n.documentKey]}}function oE(e,t){let r=e.hn-t.hn;return 0!==r||0!==(r=oS(e.Tn,t.Tn))||0!==(r=oS(e.In,t.In))?r:tk.comparator(e.Pn,t.Pn)}function oS(e,t){for(let r=0;r<e.length&&r<t.length;++r){let n=e[r]-t[r];if(0!==n)return n}return e.length-t.length}function o_(e){return B()?function(e){let t="";for(let r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t}(e):e}function oO(e){return"string"!=typeof e?e:function(e){let t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(e)}class oT{constructor(e){for(const t of(this.Vn=new nc((e,t)=>tC.comparator(e.field,t.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.dn=e.orderBy,this.mn=[],e.filters))t.isInequality()?this.Vn=this.Vn.add(t):this.mn.push(t)}get fn(){return this.Vn.size>1}gn(e){if(tl(e.collectionGroup===this.collectionId,49279),this.fn)return!1;let t=tq(e);if(void 0!==t&&!this.pn(t))return!1;let r=t$(e),n=new Set,i=0,a=0;for(;i<r.length&&this.pn(r[i]);++i)n=n.add(r[i].fieldPath.canonicalString());if(i===r.length)return!0;if(this.Vn.size>0){let e=this.Vn.getIterator().getNext();if(!n.has(e.field.canonicalString())){let t=r[i];if(!this.yn(e,t)||!this.wn(this.dn[a++],t))return!1}++i}for(;i<r.length;++i){let e=r[i];if(a>=this.dn.length||!this.wn(this.dn[a++],e))return!1}return!0}bn(){if(this.fn)return null;let e=new nc(tC.comparator),t=[];for(let r of this.mn)if(!r.field.isKeyField())if("array-contains"===r.op||"array-contains-any"===r.op)t.push(new tG(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),t.push(new tG(r.field,0))}for(let r of this.dn)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),t.push(new tG(r.field,+("asc"!==r.dir))));return new tz(tz.UNKNOWN_ID,this.collectionId,t,tH.empty())}pn(e){for(let t of this.mn)if(this.yn(t,e))return!0;return!1}yn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;let r="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===r}wn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function oI(e){return e instanceof n7}function oA(e){return e instanceof n9&&ir(e)}function oC(e){return oI(e)||oA(e)||function(e){if(e instanceof n9&&it(e)){for(let t of e.getFilters())if(!oI(t)&&!oA(t))return!1;return!0}return!1}(e)}function ok(e,t){return tl(e instanceof n7||e instanceof n9,38388),tl(t instanceof n7||t instanceof n9,25473),oD(e instanceof n7?t instanceof n7?n9.create([e,t],"and"):oP(e,t):t instanceof n7?oP(t,e):function(e,t){if(tl(e.filters.length>0&&t.filters.length>0,48005),ie(e)&&ie(t))return ia(e,t.getFilters());let r=it(e)?e:t,n=it(e)?t:e,i=r.filters.map(e=>ok(e,n));return n9.create(i,"or")}(e,t))}function oP(e,t){if(ie(t))return ia(t,e.getFilters());{let r=t.filters.map(t=>ok(e,t));return n9.create(r,"or")}}function oD(e){if(tl(e instanceof n7||e instanceof n9,11850),e instanceof n7)return e;let t=e.getFilters();if(1===t.length)return oD(t[0]);if(ii(e))return e;let r=t.map(e=>oD(e)),n=[];return r.forEach(t=>{t instanceof n7?n.push(t):t instanceof n9&&(t.op===e.op?n.push(...t.filters):n.push(t))}),1===n.length?n[0]:n9.create(n,e.op)}class oN{constructor(){this.Sn=new oj}addToCollectionParentIndex(e,t){return this.Sn.add(t),t1.resolve()}getCollectionParents(e,t){return t1.resolve(this.Sn.getEntries(t))}addFieldIndex(e,t){return t1.resolve()}deleteFieldIndex(e,t){return t1.resolve()}deleteAllFieldIndexes(e){return t1.resolve()}createTargetIndexes(e,t){return t1.resolve()}getDocumentsMatchingTarget(e,t){return t1.resolve(null)}getIndexType(e,t){return t1.resolve(0)}getFieldIndexes(e,t){return t1.resolve([])}getNextCollectionGroupToUpdate(e){return t1.resolve(null)}getMinOffset(e,t){return t1.resolve(tY.min())}getMinOffsetFromCollectionGroup(e,t){return t1.resolve(tY.min())}updateCollectionGroup(e,t,r){return t1.resolve()}updateIndexEntries(e,t){return t1.resolve()}}class oj{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),n=this.index[t]||new nc(tI.comparator),i=!n.has(r);return this.index[t]=n.add(r),i}has(e){let t=e.lastSegment(),r=e.popLast(),n=this.index[t];return n&&n.has(r)}getEntries(e){return(this.index[e]||new nc(tI.comparator)).toArray()}}let oM="IndexedDbIndexManager",oR=new Uint8Array(0);class oL{constructor(e,t){this.databaseId=t,this.Dn=new oj,this.Cn=new iF(e=>iy(e),(e,t)=>iv(e,t)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Dn.has(t)){let r=t.lastSegment(),n=t.popLast();e.addOnCommittedListener(()=>{this.Dn.add(t)});let i={collectionId:r,parent:rc(n)};return nn(e,rV).put(i)}return t1.resolve()}getCollectionParents(e,t){let r=[],n=IDBKeyRange.bound([t,""],[t+"\0",""],!1,!0);return nn(e,rV).H(n).next(e=>{for(let n of e){if(n.collectionId!==t)break;r.push(rh(n.parent))}return r})}addFieldIndex(e,t){let r=nn(e,r$),n={indexId:t.indexId,collectionGroup:t.collectionGroup,fields:t.fields.map(e=>[e.fieldPath.canonicalString(),e.kind])};delete n.indexId;let i=r.add(n);if(t.indexState){let r=nn(e,rG);return i.next(e=>{r.put(oh(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return i.next()}deleteFieldIndex(e,t){let r=nn(e,r$),n=nn(e,rG),i=nn(e,rY);return r.delete(t.indexId).next(()=>n.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){let t=nn(e,r$),r=nn(e,rY),n=nn(e,rG);return t.X().next(()=>r.X()).next(()=>n.X())}createTargetIndexes(e,t){return t1.forEach(this.vn(t),t=>this.getIndexType(e,t).next(r=>{if(0===r||1===r){let r=new oT(t).bn();if(null!=r)return this.addFieldIndex(e,r)}}))}getDocumentsMatchingTarget(e,t){let r=nn(e,rY),n=!0,i=new Map;return t1.forEach(this.vn(t),t=>this.Fn(e,t).next(e=>{n&&(n=!!e),i.set(t,e)})).next(()=>{if(n){let e=iG(),n=[];return t1.forEach(i,(i,a)=>{tr(oM,`Using index id=${i.indexId}|cg=${i.collectionGroup}|f=${i.fields.map(e=>`${e.fieldPath}:${e.kind}`).join(",")} to execute ${iy(t)}`);let o=function(e,t){let r=tq(t);if(void 0===r)return null;for(let t of iw(e,r.fieldPath))switch(t.op){case"array-contains-any":return t.value.arrayValue.values||[];case"array-contains":return[t.value]}return null}(a,i),s=function(e,t){let r=new Map;for(let n of t$(t))for(let t of iw(e,n.fieldPath))switch(t.op){case"==":case"in":r.set(n.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return r.set(n.fieldPath.canonicalString(),t.value),Array.from(r.values())}return null}(a,i),l=function(e,t){let r=[],n=!0;for(let i of t$(t)){let t=0===i.kind?ix(e,i.fieldPath,e.startAt):iE(e,i.fieldPath,e.startAt);r.push(t.value),n&&(n=t.inclusive)}return new n6(r,n)}(a,i),u=function(e,t){let r=[],n=!0;for(let i of t$(t)){let t=0===i.kind?iE(e,i.fieldPath,e.endAt):ix(e,i.fieldPath,e.endAt);r.push(t.value),n&&(n=t.inclusive)}return new n6(r,n)}(a,i),c=this.Mn(i,a,l),h=this.Mn(i,a,u),f=this.xn(i,a,s),d=this.On(i.indexId,o,c,l.inclusive,h,u.inclusive,f);return t1.forEach(d,i=>r.Z(i,t.limit).next(t=>{t.forEach(t=>{let r=tk.fromSegments(t.documentKey);e.has(r)||(e=e.add(r),n.push(r))})}))}).next(()=>n)}return t1.resolve(null)})}vn(e){let t=this.Cn.get(e);return t||(t=0===e.filters.length?[e]:(function(e){if(0===e.getFilters().length)return[];let t=function e(t){if(tl(t instanceof n7||t instanceof n9,34018),t instanceof n7)return t;if(1===t.filters.length)return e(t.filters[0]);let r=t.filters.map(t=>e(t)),n=n9.create(r,t.op);return oC(n=oD(n))?n:(tl(n instanceof n9,64498),tl(ie(n),40251),tl(n.filters.length>1,57927),n.filters.reduce((e,t)=>ok(e,t)))}(function e(t){if(tl(t instanceof n7||t instanceof n9,20012),t instanceof n7){if(t instanceof ih){let e=t.value.arrayValue?.values?.map(e=>n7.create(t.field,"==",e))||[];return n9.create(e,"or")}return t}let r=t.filters.map(t=>e(t));return n9.create(r,t.op)}(e));return tl(oC(t),7391),oI(t)||oA(t)?[t]:t.getFilters()})(n9.create(e.filters,"and")).map(t=>im(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)),this.Cn.set(e,t)),t}On(e,t,r,n,i,a,o){let s=(null!=t?t.length:1)*Math.max(r.length,i.length),l=s/(null!=t?t.length:1),u=[];for(let c=0;c<s;++c){let s=t?this.Nn(t[c/l]):oR,h=this.Bn(e,s,r[c%l],n),f=this.Ln(e,s,i[c%l],a),d=o.map(t=>this.Bn(e,s,t,!0));u.push(...this.createRange(h,f,d))}return u}Bn(e,t,r,n){let i=new ox(e,tk.empty(),t,r);return n?i:i.En()}Ln(e,t,r,n){let i=new ox(e,tk.empty(),t,r);return n?i.En():i}Fn(e,t){let r=new oT(t),n=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,n).next(e=>{let t=null;for(let n of e)r.gn(n)&&(!t||n.fields.length>t.fields.length)&&(t=n);return t})}getIndexType(e,t){let r=2,n=this.vn(t);return t1.forEach(n,t=>this.Fn(e,t).next(e=>{e?0!==r&&e.fields.length<function(e){let t=new nc(tC.comparator),r=!1;for(let n of e.filters)for(let e of n.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?r=!0:t=t.add(e.field));for(let r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+ +!!r}(t)&&(r=1):r=0})).next(()=>null!==t.limit&&n.length>1&&2===r?1:r)}kn(e,t){let r=new ow;for(let n of t$(e)){let e=t.data.field(n.fieldPath);if(null==e)return null;let i=r.ln(n.kind);og.Wt.Dt(e,i)}return r.un()}Nn(e){let t=new ow;return og.Wt.Dt(e,t.ln(0)),t.un()}Kn(e,t){let r,n=new ow;return og.Wt.Dt(nq(this.databaseId,t),n.ln(0===(r=t$(e)).length?0:r[r.length-1].kind)),n.un()}xn(e,t,r){if(null===r)return[];let n=[];n.push(new ow);let i=0;for(let a of t$(e)){let e=r[i++];for(let r of n)if(this.qn(t,a.fieldPath)&&nK(e))n=this.Un(n,a,e);else{let t=r.ln(a.kind);og.Wt.Dt(e,t)}}return this.$n(n)}Mn(e,t,r){return this.xn(e,t,r.position)}$n(e){let t=[];for(let r=0;r<e.length;++r)t[r]=e[r].un();return t}Un(e,t,r){let n=[...e],i=[];for(let e of r.arrayValue.values||[])for(let r of n){let n=new ow;n.seed(r.un()),og.Wt.Dt(e,n.ln(t.kind)),i.push(n)}return i}qn(e,t){return!!e.filters.find(e=>e instanceof n7&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op))}getFieldIndexes(e,t){let r=nn(e,r$),n=nn(e,rG);return(t?r.H(rK,IDBKeyRange.bound(t,t)):r.H()).next(e=>{let t=[];return t1.forEach(e,e=>n.get([e.indexId,this.uid]).next(r=>{let n,i;t.push((n=r?new tH(r.sequenceNumber,new tY(oi(r.readTime),new tk(rh(r.documentKey)),r.largestBatchId)):tH.empty(),i=e.fields.map(([e,t])=>new tG(tC.fromServerFormat(e),t)),new tz(e.indexId,e.collectionGroup,i,n)))})).next(()=>t)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(e=>0===e.length?null:(e.sort((e,t)=>{let r=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==r?r:tx(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(e,t,r){let n=nn(e,r$),i=nn(e,rG);return this.Wn(e).next(e=>n.H(rK,IDBKeyRange.bound(t,t)).next(t=>t1.forEach(t,t=>i.put(oh(t.indexId,this.uid,e,r)))))}updateIndexEntries(e,t){let r=new Map;return t1.forEach(t,(t,n)=>{let i=r.get(t.collectionGroup);return(i?t1.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next(i=>(r.set(t.collectionGroup,i),t1.forEach(i,r=>this.Qn(e,t,r).next(t=>{let i=this.Gn(n,r);return t.isEqual(i)?t1.resolve():this.zn(e,n,r,t,i)}))))})}jn(e,t,r,n){return nn(e,rY).put(n.Rn(this.uid,this.Kn(r,t.key),t.key))}Hn(e,t,r,n){return nn(e,rY).delete(n.An(this.uid,this.Kn(r,t.key),t.key))}Qn(e,t,r){let n=nn(e,rY),i=new nc(oE);return n.ee({index:rX,range:IDBKeyRange.only([r.indexId,this.uid,o_(this.Kn(r,t))])},(e,n)=>{i=i.add(new ox(r.indexId,t,oO(n.arrayValue),oO(n.directionalValue)))}).next(()=>i)}Gn(e,t){let r=new nc(oE),n=this.kn(t,e);if(null==n)return r;let i=tq(t);if(null!=i){let a=e.data.field(i.fieldPath);if(nK(a))for(let i of a.arrayValue.values||[])r=r.add(new ox(t.indexId,e.key,this.Nn(i),n))}else r=r.add(new ox(t.indexId,e.key,oR,n));return r}zn(e,t,r,n,i){tr(oM,"Updating index entries for document '%s'",t.key);let a=[];return function(e,t,r,n,i){let a=e.getIterator(),o=t.getIterator(),s=nf(a),l=nf(o);for(;s||l;){let e=!1,t=!1;if(s&&l){let n=r(s,l);n<0?t=!0:n>0&&(e=!0)}else null!=s?t=!0:e=!0;e?(n(l),l=nf(o)):t?(i(s),s=nf(a)):(s=nf(a),l=nf(o))}}(n,i,oE,n=>{a.push(this.jn(e,t,r,n))},n=>{a.push(this.Hn(e,t,r,n))}),t1.waitFor(a)}Wn(e){let t=1;return nn(e,rG).ee({index:rW,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(e,r,n)=>{n.done(),t=r.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((e,t)=>oE(e,t)).filter((e,t,r)=>!t||0!==oE(e,r[t-1]));let n=[];for(let i of(n.push(e),r)){let r=oE(i,e),a=oE(i,t);if(0===r)n[0]=e.En();else if(r>0&&a<0)n.push(i),n.push(i.En());else if(a>0)break}n.push(t);let i=[];for(let e=0;e<n.length;e+=2){if(this.Jn(n[e],n[e+1]))return[];let t=n[e].An(this.uid,oR,tk.empty()),r=n[e+1].An(this.uid,oR,tk.empty());i.push(IDBKeyRange.bound(t,r))}return i}Jn(e,t){return oE(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(oF)}getMinOffset(e,t){return t1.mapArray(this.vn(t),t=>this.Fn(e,t).next(e=>e||to(44426))).next(oF)}}function oF(e){tl(0!==e.length,28825);let t=e[0].indexState.offset,r=t.largestBatchId;for(let n=1;n<e.length;n++){let i=e[n].indexState.offset;0>tJ(i,t)&&(t=i),r<i.largestBatchId&&(r=i.largestBatchId)}return new tY(t.readTime,t.documentKey,r)}let oV={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class oB{static withCacheSize(e){return new oB(e,oB.DEFAULT_COLLECTION_PERCENTILE,oB.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}function oU(e,t,r){let n=e.store(rm),i=e.store(rx),a=[],o=IDBKeyRange.only(r.batchId),s=0,l=n.ee({range:o},(e,t,r)=>(s++,r.delete()));a.push(l.next(()=>{tl(1===s,47070,{batchId:r.batchId})}));let u=[];for(let e of r.mutations){var c,h;let n=(c=e.key.path,h=r.batchId,[t,rc(c),h]);a.push(i.delete(n)),u.push(e.key)}return t1.waitFor(a).next(()=>u)}function oz(e){let t;if(!e)return 0;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw to(14731);t=e.noDocument}return JSON.stringify(t).length}oB.DEFAULT_COLLECTION_PERCENTILE=10,oB.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,oB.DEFAULT=new oB(0x2800000,oB.DEFAULT_COLLECTION_PERCENTILE,oB.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),oB.DISABLED=new oB(-1,0,0);class oq{constructor(e,t,r,n){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=n,this.Zn={}}static wt(e,t,r,n){return tl(""!==e.uid,64387),new oq(e.isAuthenticated()?e.uid:"",t,r,n)}checkEmpty(e){let t=!0,r=IDBKeyRange.bound([this.userId,-1/0],[this.userId,1/0]);return oK(e).ee({index:rv,range:r},(e,r,n)=>{t=!1,n.done()}).next(()=>t)}addMutationBatch(e,t,r,n){let i=nn(e,rx),a=oK(e);return a.add({}).next(o=>{var s,l,u,c;let h,f;tl("number"==typeof o,49019);let d=new af(o,t,r,n),p=(s=this.serializer,l=this.userId,h=d.baseMutations.map(e=>a0(s.yt,e)),f=d.mutations.map(e=>a0(s.yt,e)),{userId:l,batchId:d.batchId,localWriteTimeMs:d.localWriteTime.toMillis(),baseMutations:h,mutations:f}),g=[],m=new nc((e,t)=>tx(e.canonicalString(),t.canonicalString()));for(let e of n){let t=(u=this.userId,c=e.key.path,[u,rc(c),o]);m=m.add(e.key.path.popLast()),g.push(a.put(p)),g.push(i.put(t,rw))}return m.forEach(t=>{g.push(this.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.Zn[o]=d.keys()}),t1.waitFor(g).next(()=>d)})}lookupMutationBatch(e,t){return oK(e).get(t).next(e=>e?(tl(e.userId===this.userId,48,"Unexpected user for mutation batch",{userId:e.userId,batchId:t}),oa(this.serializer,e)):null)}Xn(e,t){return this.Zn[t]?t1.resolve(this.Zn[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){let r=e.keys();return this.Zn[t]=r,r}return null})}getNextMutationBatchAfterBatchId(e,t){let r=t+1,n=IDBKeyRange.lowerBound([this.userId,r]),i=null;return oK(e).ee({index:rv,range:n},(e,t,n)=>{t.userId===this.userId&&(tl(t.batchId>=r,47524,{Yn:r}),i=oa(this.serializer,t)),n.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){let t=IDBKeyRange.upperBound([this.userId,1/0]),r=-1;return oK(e).ee({index:rv,range:t,reverse:!0},(e,t,n)=>{r=t.batchId,n.done()}).next(()=>r)}getAllMutationBatches(e){let t=IDBKeyRange.bound([this.userId,-1],[this.userId,1/0]);return oK(e).H(rv,t).next(e=>e.map(e=>oa(this.serializer,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){let r=[this.userId,rc(t.path)],n=IDBKeyRange.lowerBound(r),i=[];return nn(e,rx).ee({range:n},(r,n,a)=>{let[o,s,l]=r,u=rh(s);if(o===this.userId&&t.path.isEqual(u))return oK(e).get(l).next(e=>{if(!e)throw to(61480,{er:r,batchId:l});tl(e.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:e.userId,batchId:l}),i.push(oa(this.serializer,e))});a.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new nc(tx),n=[];return t.forEach(t=>{let i=[this.userId,rc(t.path)],a=IDBKeyRange.lowerBound(i),o=nn(e,rx).ee({range:a},(e,n,i)=>{let[a,o,s]=e,l=rh(o);a===this.userId&&t.path.isEqual(l)?r=r.add(s):i.done()});n.push(o)}),t1.waitFor(n).next(()=>this.tr(e,r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,n=r.length+1,i=[this.userId,rc(r)],a=IDBKeyRange.lowerBound(i),o=new nc(tx);return nn(e,rx).ee({range:a},(e,t,i)=>{let[a,s,l]=e,u=rh(s);a===this.userId&&r.isPrefixOf(u)?u.length===n&&(o=o.add(l)):i.done()}).next(()=>this.tr(e,o))}tr(e,t){let r=[],n=[];return t.forEach(t=>{n.push(oK(e).get(t).next(e=>{if(null===e)throw to(35274,{batchId:t});tl(e.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:e.userId,batchId:t}),r.push(oa(this.serializer,e))}))}),t1.waitFor(n).next(()=>r)}removeMutationBatch(e,t){return oU(e.le,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.nr(t.batchId)}),t1.forEach(r,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}nr(e){delete this.Zn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return t1.resolve();let r=IDBKeyRange.lowerBound([this.userId]),n=[];return nn(e,rx).ee({range:r},(e,t,r)=>{if(e[0]===this.userId){let t=rh(e[1]);n.push(t)}else r.done()}).next(()=>{tl(0===n.length,56720,{rr:n.map(e=>e.canonicalString())})})})}containsKey(e,t){return o$(e,this.userId,t)}ir(e){return nn(e,rg).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function o$(e,t,r){let n=[t,rc(r.path)],i=n[1],a=IDBKeyRange.lowerBound(n),o=!1;return nn(e,rx).ee({range:a,Y:!0},(e,r,n)=>{let[a,s,l]=e;a===t&&s===i&&(o=!0),n.done()}).next(()=>o)}function oK(e){return nn(e,rm)}class oG{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new oG(0)}static ar(){return new oG(-1)}}class oH{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.ur(e).next(t=>{let r=new oG(t.highestTargetId);return t.highestTargetId=r.next(),this.cr(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.ur(e).next(e=>tU.fromTimestamp(new tB(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.ur(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.ur(e).next(n=>(n.highestListenSequenceNumber=t,r&&(n.lastRemoteSnapshotVersion=r.toTimestamp()),t>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=t),this.cr(e,n)))}addTargetData(e,t){return this.lr(e,t).next(()=>this.ur(e).next(r=>(r.targetCount+=1,this.hr(t,r),this.cr(e,r))))}updateTargetData(e,t){return this.lr(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>nn(e,rk).delete(t.targetId)).next(()=>this.ur(e)).next(t=>(tl(t.targetCount>0,8065),t.targetCount-=1,this.cr(e,t)))}removeTargets(e,t,r){let n=0,i=[];return nn(e,rk).ee((a,o)=>{let s=oo(o);s.sequenceNumber<=t&&null===r.get(s.targetId)&&(n++,i.push(this.removeTargetData(e,s)))}).next(()=>t1.waitFor(i)).next(()=>n)}forEachTarget(e,t){return nn(e,rk).ee((e,r)=>{t(oo(r))})}ur(e){return nn(e,rF).get(rL).next(e=>(tl(null!==e,2888),e))}cr(e,t){return nn(e,rF).put(rL,t)}lr(e,t){return nn(e,rk).put(os(this.serializer,t))}hr(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.ur(e).next(e=>e.targetCount)}getTargetData(e,t){let r=iy(t),n=IDBKeyRange.bound([r,-1/0],[r,1/0]),i=null;return nn(e,rk).ee({range:n,index:rP},(e,r,n)=>{let a=oo(r);iv(t,a.target)&&(i=a,n.done())}).next(()=>i)}addMatchingKeys(e,t,r){let n=[],i=oW(e);return t.forEach(t=>{let a=rc(t.path);n.push(i.put({targetId:r,path:a})),n.push(this.referenceDelegate.addReference(e,r,t))}),t1.waitFor(n)}removeMatchingKeys(e,t,r){let n=oW(e);return t1.forEach(t,t=>{let i=rc(t.path);return t1.waitFor([n.delete([r,i]),this.referenceDelegate.removeReference(e,r,t)])})}removeMatchingKeysForTargetId(e,t){let r=oW(e),n=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(n)}getMatchingKeysForTargetId(e,t){let r=IDBKeyRange.bound([t],[t+1],!1,!0),n=oW(e),i=iG();return n.ee({range:r,Y:!0},(e,t,r)=>{let n=new tk(rh(e[1]));i=i.add(n)}).next(()=>i)}containsKey(e,t){let r=rc(t.path),n=IDBKeyRange.bound([r],[r+"\0"],!1,!0),i=0;return oW(e).ee({index:rM,Y:!0,range:n},([e,t],r,n)=>{0!==e&&(i++,n.done())}).next(()=>i>0)}At(e,t){return nn(e,rk).get(t).next(e=>e?oo(e):null)}}function oW(e){return nn(e,rN)}let oQ="LruGarbageCollector";function oY([e,t],[r,n]){let i=tx(e,r);return 0===i?tx(t,n):i}class oJ{constructor(e){this.Pr=e,this.buffer=new nc(oY),this.Tr=0}Ir(){return++this.Tr}Er(e){let t=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(t);else{let e=this.buffer.last();0>oY(t,e)&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class oX{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Ar(e){tr(oQ,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){t7(e)?tr(oQ,"Ignoring IndexedDB error during garbage collection: ",e):await t0(e)}await this.Ar(3e5)})}}class oZ{constructor(e,t){this.Vr=e,this.params=t}calculateTargetCount(e,t){return this.Vr.dr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return t1.resolve(ro.ce);let r=new oJ(t);return this.Vr.forEachTarget(e,e=>r.Er(e.sequenceNumber)).next(()=>this.Vr.mr(e,e=>r.Er(e))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.Vr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.Vr.removeOrphanedDocuments(e,t)}collect(e,t){return -1===this.params.cacheSizeCollectionThreshold?(tr("LruGarbageCollector","Garbage collection skipped; disabled"),t1.resolve(oV)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(tr("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),oV):this.gr(e,t))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,t){let r,n,i,o,s,l,u,c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(tr("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),n=this.params.maximumSequenceNumbersToCollect):n=t,o=Date.now(),this.nthSequenceNumber(e,n))).next(n=>(r=n,s=Date.now(),this.removeTargets(e,r,t))).next(t=>(i=t,l=Date.now(),this.removeOrphanedDocuments(e,r))).next(e=>(u=Date.now(),tt()<=a.DEBUG&&tr("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${n} in `+(s-o)+"ms\n"+`	Removed ${i} targets in `+(l-s)+"ms\n"+`	Removed ${e} documents in `+(u-l)+"ms\n"+`Total Duration: ${u-c}ms`),t1.resolve({didRun:!0,sequenceNumbersCollected:n,targetsRemoved:i,documentsRemoved:e})))}}class o0{constructor(e,t){this.db=e,this.garbageCollector=function(e,t){return new oZ(e,t)}(this,t)}dr(e){let t=this.pr(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}pr(e){let t=0;return this.mr(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}mr(e,t){return this.yr(e,(e,r)=>t(r))}addReference(e,t,r){return o1(e,r)}removeReference(e,t,r){return o1(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return o1(e,t)}wr(e,t){let r;return r=!1,nn(e,rg).te(n=>o$(e,n,t).next(e=>(e&&(r=!0),t1.resolve(!e)))).next(()=>r)}removeOrphanedDocuments(e,t){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),n=[],i=0;return this.yr(e,(a,o)=>{if(o<=t){let t=this.wr(e,a).next(t=>{if(!t)return i++,r.getEntry(e,a).next(()=>(r.removeEntry(a,tU.min()),oW(e).delete([0,rc(a.path)])))});n.push(t)}}).next(()=>t1.waitFor(n)).next(()=>r.apply(e)).next(()=>i)}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return o1(e,t)}yr(e,t){let r=oW(e),n,i=ro.ce;return r.ee({index:rM},([e,r],{path:a,sequenceNumber:o})=>{0===e?(i!==ro.ce&&t(new tk(rh(n)),i),i=o,n=a):i=ro.ce}).next(()=>{i!==ro.ce&&t(new tk(rh(n)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function o1(e,t){var r;return oW(e).put((r=e.currentSequenceNumber,{targetId:0,path:rc(t.path),sequenceNumber:r}))}class o2{constructor(){this.changes=new iF(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,n2.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return void 0!==r?t1.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class o6{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return nn(e,rE).put(r)}removeEntry(e,t,r){let n;return nn(e,rE).delete([(n=t.path.toArray()).slice(0,n.length-2),n[n.length-2],or(r),n[n.length-1]])}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.br(e,r)))}getEntry(e,t){let r=n2.newInvalidDocument(t);return nn(e,rE).ee({index:r_,range:IDBKeyRange.only(o5(t))},(e,n)=>{r=this.Sr(t,n)}).next(()=>r)}Dr(e,t){let r={size:0,document:n2.newInvalidDocument(t)};return nn(e,rE).ee({index:r_,range:IDBKeyRange.only(o5(t))},(e,n)=>{r={document:this.Sr(t,n),size:oz(n)}}).next(()=>r)}getEntries(e,t){let r=iV;return this.Cr(e,t,(e,t)=>{let n=this.Sr(e,t);r=r.insert(e,n)}).next(()=>r)}vr(e,t){let r=iV,n=new ns(tk.comparator);return this.Cr(e,t,(e,t)=>{let i=this.Sr(e,t);r=r.insert(e,i),n=n.insert(e,oz(t))}).next(()=>({documents:r,Fr:n}))}Cr(e,t,r){if(t.isEmpty())return t1.resolve();let n=new nc(o8);t.forEach(e=>n=n.add(e));let i=IDBKeyRange.bound(o5(n.first()),o5(n.last())),a=n.getIterator(),o=a.getNext();return nn(e,rE).ee({index:r_,range:i},(e,t,n)=>{let i=tk.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;o&&0>o8(o,i);)r(o,null),o=a.getNext();o&&o.isEqual(i)&&(r(o,t),o=a.hasNext()?a.getNext():null),o?n.j(o5(o)):n.done()}).next(()=>{for(;o;)r(o,null),o=a.hasNext()?a.getNext():null})}getDocumentsMatchingQuery(e,t,r,n,i){let a=t.path,o=[a.popLast().toArray(),a.lastSegment(),or(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],s=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return nn(e,rE).H(IDBKeyRange.bound(o,s,!0)).next(e=>{i?.incrementDocumentReadCount(e.length);let r=iV;for(let i of e){let e=this.Sr(tk.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(iM(t,e)||n.has(e.key))&&(r=r.insert(e.key,e))}return r})}getAllFromCollectionGroup(e,t,r,n){let i=iV,a=o4(t,r),o=o4(t,tY.max());return nn(e,rE).ee({index:rT,range:IDBKeyRange.bound(a,o,!0)},(e,t,r)=>{let a=this.Sr(tk.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(i=i.insert(a.key,a)).size===n&&r.done()}).next(()=>i)}newChangeBuffer(e){return new o3(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return nn(e,rA).get(rC).next(e=>(tl(!!e,20021),e))}br(e,t){return nn(e,rA).put(rC,t)}Sr(e,t){if(t){let e=function(e,t){var r;let n,i;if(t.document)n=aZ(e.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){let e=tk.fromSegments(t.noDocument.path),r=oi(t.noDocument.readTime);n=n2.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return to(56709);{let e=tk.fromSegments(t.unknownDocument.path),r=oi(t.unknownDocument.version);n=n2.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime((i=new tB((r=t.readTime)[0],r[1]),tU.fromTimestamp(i))),n}(this.serializer,t);if(!(e.isNoDocument()&&e.version.isEqual(tU.min())))return e}return n2.newInvalidDocument(e)}}class o3 extends o2{constructor(e,t){super(),this.Mr=e,this.trackRemovals=t,this.Or=new iF(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){let t=[],r=0,n=new nc((e,t)=>tx(e.canonicalString(),t.canonicalString()));return this.changes.forEach((i,a)=>{let o=this.Or.get(i);if(t.push(this.Mr.removeEntry(e,i,o.readTime)),a.isValidDocument()){let s=ot(this.Mr.serializer,a);n=n.add(i.path.popLast());let l=oz(s);r+=l-o.size,t.push(this.Mr.addEntry(e,i,s))}else if(r-=o.size,this.trackRemovals){let r=ot(this.Mr.serializer,a.convertToNoDocument(tU.min()));t.push(this.Mr.addEntry(e,i,r))}}),n.forEach(r=>{t.push(this.Mr.indexManager.addToCollectionParentIndex(e,r))}),t.push(this.Mr.updateMetadata(e,r)),t1.waitFor(t)}getFromCache(e,t){return this.Mr.Dr(e,t).next(e=>(this.Or.set(t,{size:e.size,readTime:e.document.readTime}),e.document))}getAllFromCache(e,t){return this.Mr.vr(e,t).next(({documents:e,Fr:t})=>(t.forEach((t,r)=>{this.Or.set(t,{size:r,readTime:e.get(t).readTime})}),e))}}function o5(e){let t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function o4(e,t){let r=t.documentKey.path.toArray();return[e,or(t.readTime),r.slice(0,r.length-2),r.length>0?r[r.length-1]:""]}function o8(e,t){let r=e.path.toArray(),n=t.path.toArray(),i=0;for(let e=0;e<r.length-2&&e<n.length-2;++e)if(i=tx(r[e],n[e]))return i;return(i=tx(r.length,n.length))||(i=tx(r[r.length-2],n[n.length-2]))||tx(r[r.length-1],n[n.length-1])}class o7{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class o9{constructor(e,t,r,n){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=n}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(n=>(r=n,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==r&&an(r.mutation,e,nd.empty(),tB.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,iG()).next(()=>t))}getLocalViewOfDocuments(e,t,r=iG()){let n=iq();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,r).next(e=>{let t=iU();return e.forEach((e,r)=>{t=t.insert(e,r.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){let r=iq();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,iG()))}populateOverlays(e,t,r){let n=[];return r.forEach(e=>{t.has(e)||n.push(e)}),this.documentOverlayCache.getOverlays(e,n).next(e=>{e.forEach((e,r)=>{t.set(e,r)})})}computeViews(e,t,r,n){let i=iV,a=iq(),o=iq();return t.forEach((e,t)=>{let o=r.get(t.key);n.has(t.key)&&(void 0===o||o.mutation instanceof ao)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),an(o.mutation,t,o.mutation.getFieldMask(),tB.now())):a.set(t.key,nd.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>a.set(e,t)),t.forEach((e,t)=>o.set(e,new o7(t,a.get(e)??null))),o))}recalculateAndSaveOverlays(e,t){let r=iq(),n=new ns((e,t)=>e-t),i=iG();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(let i of e)i.keys().forEach(e=>{let a=t.get(e);if(null===a)return;let o=r.get(e)||nd.empty();o=i.applyToLocalView(a,o),r.set(e,o);let s=(n.get(i.batchId)||iG()).add(e);n=n.insert(i.batchId,s)})}).next(()=>{let a=[],o=n.getReverseIterator();for(;o.hasNext();){let n=o.getNext(),s=n.key,l=n.value,u=iq();l.forEach(e=>{if(!i.has(e)){let n=ar(t.get(e),r.get(e));null!==n&&u.set(e,n),i=i.add(e)}}),a.push(this.documentOverlayCache.saveOverlays(e,s,u))}return t1.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,r,n){return tk.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):iT(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,n):this.getDocumentsMatchingCollectionQuery(e,t,r,n)}getNextDocuments(e,t,r,n){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,n).next(i=>{let a=n-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,n-i.size):t1.resolve(iq()),o=-1,s=i;return a.next(t=>t1.forEach(t,(t,r)=>(o<r.largestBatchId&&(o=r.largestBatchId),i.get(t)?t1.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{s=s.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,s,t,iG())).next(e=>({batchId:o,changes:iz(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new tk(t)).next(e=>{let t=iU();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,r,n){let i=t.collectionGroup,a=iU();return this.indexManager.getCollectionParents(e,i).next(o=>t1.forEach(o,o=>{let s=new iS(o.child(i),null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt);return this.getDocumentsMatchingCollectionQuery(e,s,r,n).next(e=>{e.forEach((e,t)=>{a=a.insert(e,t)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,n){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i,n))).next(e=>{i.forEach((t,r)=>{let n=r.getKey();null===e.get(n)&&(e=e.insert(n,n2.newInvalidDocument(n)))});let r=iU();return e.forEach((e,n)=>{let a=i.get(e);void 0!==a&&an(a.mutation,n,nd.empty(),tB.now()),iM(t,n)&&(r=r.insert(e,n))}),r})}}class se{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,t){return t1.resolve(this.Nr.get(t))}saveBundleMetadata(e,t){return this.Nr.set(t.id,{id:t.id,version:t.version,createTime:az(t.createTime)}),t1.resolve()}getNamedQuery(e,t){return t1.resolve(this.Br.get(t))}saveNamedQuery(e,t){return this.Br.set(t.name,{name:t.name,query:ol(t.bundledQuery),readTime:az(t.readTime)}),t1.resolve()}}class st{constructor(){this.overlays=new ns(tk.comparator),this.Lr=new Map}getOverlay(e,t){return t1.resolve(this.overlays.get(t))}getOverlays(e,t){let r=iq();return t1.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&r.set(t,e)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((r,n)=>{this.bt(e,t,n)}),t1.resolve()}removeOverlaysForBatchId(e,t,r){let n=this.Lr.get(r);return void 0!==n&&(n.forEach(e=>this.overlays=this.overlays.remove(e)),this.Lr.delete(r)),t1.resolve()}getOverlaysForCollection(e,t,r){let n=iq(),i=t.length+1,a=new tk(t.child("")),o=this.overlays.getIteratorFrom(a);for(;o.hasNext();){let e=o.getNext().value,a=e.getKey();if(!t.isPrefixOf(a.path))break;a.path.length===i&&e.largestBatchId>r&&n.set(e.getKey(),e)}return t1.resolve(n)}getOverlaysForCollectionGroup(e,t,r,n){let i=new ns((e,t)=>e-t),a=this.overlays.getIterator();for(;a.hasNext();){let e=a.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>r){let t=i.get(e.largestBatchId);null===t&&(t=iq(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}let o=iq(),s=i.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=n)););return t1.resolve(o)}bt(e,t,r){let n=this.overlays.get(r.key);if(null!==n){let e=this.Lr.get(n.largestBatchId).delete(r.key);this.Lr.set(n.largestBatchId,e)}this.overlays=this.overlays.insert(r.key,new ap(t,r));let i=this.Lr.get(t);void 0===i&&(i=iG(),this.Lr.set(t,i)),this.Lr.set(t,i.add(r.key))}}class sr{constructor(){this.sessionToken=ng.EMPTY_BYTE_STRING}getSessionToken(e){return t1.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,t1.resolve()}}class sn{constructor(){this.kr=new nc(si.Kr),this.qr=new nc(si.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,t){let r=new si(e,t);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Wr(new si(e,t))}Qr(e,t){e.forEach(e=>this.removeReference(e,t))}Gr(e){let t=new tk(new tI([])),r=new si(t,e),n=new si(t,e+1),i=[];return this.qr.forEachInRange([r,n],e=>{this.Wr(e),i.push(e.key)}),i}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){let t=new tk(new tI([])),r=new si(t,e),n=new si(t,e+1),i=iG();return this.qr.forEachInRange([r,n],e=>{i=i.add(e.key)}),i}containsKey(e){let t=new si(e,0),r=this.kr.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class si{constructor(e,t){this.key=e,this.Hr=t}static Kr(e,t){return tk.comparator(e.key,t.key)||tx(e.Hr,t.Hr)}static Ur(e,t){return tx(e.Hr,t.Hr)||tk.comparator(e.key,t.key)}}class sa{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Yn=1,this.Jr=new nc(si.Kr)}checkEmpty(e){return t1.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,n){let i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new af(i,t,r,n);for(let t of(this.mutationQueue.push(a),n))this.Jr=this.Jr.add(new si(t.key,i)),this.indexManager.addToCollectionParentIndex(e,t.key.path.popLast());return t1.resolve(a)}lookupMutationBatch(e,t){return t1.resolve(this.Zr(t))}getNextMutationBatchAfterBatchId(e,t){let r=this.Xr(t+1),n=r<0?0:r;return t1.resolve(this.mutationQueue.length>n?this.mutationQueue[n]:null)}getHighestUnacknowledgedBatchId(){return t1.resolve(0===this.mutationQueue.length?-1:this.Yn-1)}getAllMutationBatches(e){return t1.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new si(t,0),n=new si(t,1/0),i=[];return this.Jr.forEachInRange([r,n],e=>{let t=this.Zr(e.Hr);i.push(t)}),t1.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new nc(tx);return t.forEach(e=>{let t=new si(e,0),n=new si(e,1/0);this.Jr.forEachInRange([t,n],e=>{r=r.add(e.Hr)})}),t1.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,n=r.length+1,i=r;tk.isDocumentKey(i)||(i=i.child(""));let a=new si(new tk(i),0),o=new nc(tx);return this.Jr.forEachWhile(e=>{let t=e.key.path;return!!r.isPrefixOf(t)&&(t.length===n&&(o=o.add(e.Hr)),!0)},a),t1.resolve(this.Yr(o))}Yr(e){let t=[];return e.forEach(e=>{let r=this.Zr(e);null!==r&&t.push(r)}),t}removeMutationBatch(e,t){tl(0===this.ei(t.batchId,"removed"),55003),this.mutationQueue.shift();let r=this.Jr;return t1.forEach(t.mutations,n=>{let i=new si(n.key,t.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,n.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,t){let r=new si(t,0),n=this.Jr.firstAfterOrEqual(r);return t1.resolve(t.isEqual(n&&n.key))}performConsistencyCheck(e){return this.mutationQueue.length,t1.resolve()}ei(e,t){return this.Xr(e)}Xr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Zr(e){let t=this.Xr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class so{constructor(e){this.ti=e,this.docs=new ns(tk.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,n=this.docs.get(r),i=n?n.size:0,a=this.ti(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return t1.resolve(r?r.document.mutableCopy():n2.newInvalidDocument(t))}getEntries(e,t){let r=iV;return t.forEach(e=>{let t=this.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():n2.newInvalidDocument(e))}),t1.resolve(r)}getDocumentsMatchingQuery(e,t,r,n){let i=iV,a=t.path,o=new tk(a.child("__id-9223372036854775808__")),s=this.docs.getIteratorFrom(o);for(;s.hasNext();){let{key:e,value:{document:o}}=s.getNext();if(!a.isPrefixOf(e.path))break;e.path.length>a.length+1||0>=tJ(tQ(o),r)||(n.has(o.key)||iM(t,o))&&(i=i.insert(o.key,o.mutableCopy()))}return t1.resolve(i)}getAllFromCollectionGroup(e,t,r,n){to(9500)}ni(e,t){return t1.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new ss(this)}getSize(e){return t1.resolve(this.size)}}class ss extends o2{constructor(e){super(),this.Mr=e}applyChanges(e){let t=[];return this.changes.forEach((r,n)=>{n.isValidDocument()?t.push(this.Mr.addEntry(e,n)):this.Mr.removeEntry(r)}),t1.waitFor(t)}getFromCache(e,t){return this.Mr.getEntry(e,t)}getAllFromCache(e,t){return this.Mr.getEntries(e,t)}}class sl{constructor(e){this.persistence=e,this.ri=new iF(e=>iy(e),iv),this.lastRemoteSnapshotVersion=tU.min(),this.highestTargetId=0,this.ii=0,this.si=new sn,this.targetCount=0,this.oi=oG._r()}forEachTarget(e,t){return this.ri.forEach((e,r)=>t(r)),t1.resolve()}getLastRemoteSnapshotVersion(e){return t1.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return t1.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),t1.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.ii&&(this.ii=t),t1.resolve()}lr(e){this.ri.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.oi=new oG(t),this.highestTargetId=t),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,t){return this.lr(t),this.targetCount+=1,t1.resolve()}updateTargetData(e,t){return this.lr(t),t1.resolve()}removeTargetData(e,t){return this.ri.delete(t.target),this.si.Gr(t.targetId),this.targetCount-=1,t1.resolve()}removeTargets(e,t,r){let n=0,i=[];return this.ri.forEach((a,o)=>{o.sequenceNumber<=t&&null===r.get(o.targetId)&&(this.ri.delete(a),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),n++)}),t1.waitFor(i).next(()=>n)}getTargetCount(e){return t1.resolve(this.targetCount)}getTargetData(e,t){let r=this.ri.get(t)||null;return t1.resolve(r)}addMatchingKeys(e,t,r){return this.si.$r(t,r),t1.resolve()}removeMatchingKeys(e,t,r){this.si.Qr(t,r);let n=this.persistence.referenceDelegate,i=[];return n&&t.forEach(t=>{i.push(n.markPotentiallyOrphaned(e,t))}),t1.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.si.Gr(t),t1.resolve()}getMatchingKeysForTargetId(e,t){let r=this.si.jr(t);return t1.resolve(r)}containsKey(e,t){return t1.resolve(this.si.containsKey(t))}}class su{constructor(e,t){this._i={},this.overlays={},this.ai=new ro(0),this.ui=!1,this.ui=!0,this.ci=new sr,this.referenceDelegate=e(this),this.li=new sl(this),this.indexManager=new oN,this.remoteDocumentCache=function(e){return new so(e)}(e=>this.referenceDelegate.hi(e)),this.serializer=new oe(t),this.Pi=new se(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new st,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this._i[e.toKey()];return r||(r=new sa(t,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,t,r){tr("MemoryPersistence","Starting transaction:",e);let n=new sc(this.ai.next());return this.referenceDelegate.Ti(),r(n).next(e=>this.referenceDelegate.Ii(n).next(()=>e)).toPromise().then(e=>(n.raiseOnCommittedEvent(),e))}Ei(e,t){return t1.or(Object.values(this._i).map(r=>()=>r.containsKey(e,t)))}}class sc extends tZ{constructor(e){super(),this.currentSequenceNumber=e}}class sh{constructor(e){this.persistence=e,this.Ri=new sn,this.Ai=null}static Vi(e){return new sh(e)}get di(){if(this.Ai)return this.Ai;throw to(60996)}addReference(e,t,r){return this.Ri.addReference(r,t),this.di.delete(r.toString()),t1.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.di.add(r.toString()),t1.resolve()}markPotentiallyOrphaned(e,t){return this.di.add(t.toString()),t1.resolve()}removeTarget(e,t){this.Ri.Gr(t.targetId).forEach(e=>this.di.add(e.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.di.add(e.toString()))}).next(()=>r.removeTargetData(e,t))}Ti(){this.Ai=new Set}Ii(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return t1.forEach(this.di,r=>{let n=tk.fromPath(r);return this.mi(e,n).next(e=>{e||t.removeEntry(n,tU.min())})}).next(()=>(this.Ai=null,t.apply(e)))}updateLimboDocument(e,t){return this.mi(e,t).next(e=>{e?this.di.delete(t.toString()):this.di.add(t.toString())})}hi(e){return 0}mi(e,t){return t1.or([()=>t1.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ei(e,t)])}}class sf{constructor(e,t){this.persistence=e,this.fi=new iF(e=>rc(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=function(e,t){return new oZ(e,t)}(this,t)}static Vi(e,t){return new sf(e,t)}Ti(){}Ii(e){return t1.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}dr(e){let t=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}pr(e){let t=0;return this.mr(e,e=>{t++}).next(()=>t)}mr(e,t){return t1.forEach(this.fi,(r,n)=>this.wr(e,r,n).next(e=>e?t1.resolve():t(n)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0,n=this.persistence.getRemoteDocumentCache(),i=n.newChangeBuffer();return n.ni(e,n=>this.wr(e,n,t).next(e=>{e||(r++,i.removeEntry(n,tU.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.fi.set(t,e.currentSequenceNumber),t1.resolve()}removeTarget(e,t){let r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),t1.resolve()}removeReference(e,t,r){return this.fi.set(r,e.currentSequenceNumber),t1.resolve()}updateLimboDocument(e,t){return this.fi.set(t,e.currentSequenceNumber),t1.resolve()}hi(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=function e(t){switch(nR(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let r=nO(t);return r?16+e(r):16;case 5:return 2*t.stringValue.length;case 6:return nb(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(t.arrayValue.values||[]).reduce((t,r)=>t+e(r),0);case 10:case 11:var n;let i;return n=t.mapValue,i=0,na(n.fields,(t,r)=>{i+=t.length+e(r)}),i;default:throw to(13486,{value:t})}}(e.data.value)),t}wr(e,t,r){return t1.or([()=>this.persistence.Ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{let e=this.fi.get(t);return t1.resolve(void 0!==e&&e>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class sd{constructor(e){this.serializer=e}k(e,t,r,n){let i=new t6("createOrUpgrade",t);r<1&&n>=1&&(e.createObjectStore(rd),e.createObjectStore(rg,{keyPath:"userId"}),e.createObjectStore(rm,{keyPath:ry,autoIncrement:!0}).createIndex(rv,rb,{unique:!0}),e.createObjectStore(rx),sp(e),e.createObjectStore(rf));let a=t1.resolve();return r<3&&n>=3&&(0!==r&&(e.deleteObjectStore(rN),e.deleteObjectStore(rk),e.deleteObjectStore(rF),sp(e)),a=a.next(()=>{let e,t;return e=i.store(rF),t={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:tU.min().toTimestamp(),targetCount:0},e.put(rL,t)})),r<4&&n>=4&&(0!==r&&(a=a.next(()=>i.store(rm).H().next(t=>{e.deleteObjectStore(rm),e.createObjectStore(rm,{keyPath:ry,autoIncrement:!0}).createIndex(rv,rb,{unique:!0});let r=i.store(rm),n=t.map(e=>r.put(e));return t1.waitFor(n)}))),a=a.next(()=>{e.createObjectStore(rU,{keyPath:"clientId"})})),r<5&&n>=5&&(a=a.next(()=>this.gi(i))),r<6&&n>=6&&(a=a.next(()=>(e.createObjectStore(rA),this.pi(i)))),r<7&&n>=7&&(a=a.next(()=>this.yi(i))),r<8&&n>=8&&(a=a.next(()=>this.wi(e,i))),r<9&&n>=9&&(a=a.next(()=>{e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")})),r<10&&n>=10&&(a=a.next(()=>this.bi(i))),r<11&&n>=11&&(a=a.next(()=>{e.createObjectStore(rz,{keyPath:"bundleId"}),e.createObjectStore(rq,{keyPath:"name"})})),r<12&&n>=12&&(a=a.next(()=>{let t;(t=e.createObjectStore(r0,{keyPath:r1})).createIndex(r2,r6,{unique:!1}),t.createIndex(r3,r5,{unique:!1})})),r<13&&n>=13&&(a=a.next(()=>{let t;(t=e.createObjectStore(rE,{keyPath:rS})).createIndex(r_,rO),t.createIndex(rT,rI)}).next(()=>this.Si(e,i)).next(()=>e.deleteObjectStore(rf))),r<14&&n>=14&&(a=a.next(()=>this.Di(e,i))),r<15&&n>=15&&(a=a.next(()=>{e.createObjectStore(r$,{keyPath:"indexId",autoIncrement:!0}).createIndex(rK,"collectionGroup",{unique:!1}),e.createObjectStore(rG,{keyPath:rH}).createIndex(rW,rQ,{unique:!1}),e.createObjectStore(rY,{keyPath:rJ}).createIndex(rX,rZ,{unique:!1})})),r<16&&n>=16&&(a=a.next(()=>{t.objectStore(rG).clear()}).next(()=>{t.objectStore(rY).clear()})),r<17&&n>=17&&(a=a.next(()=>{e.createObjectStore(r4,{keyPath:"name"})})),r<18&&n>=18&&B()&&(a=a.next(()=>{t.objectStore(rG).clear()}).next(()=>{t.objectStore(rY).clear()})),a}pi(e){let t=0;return e.store(rf).ee((e,r)=>{t+=oz(r)}).next(()=>{let r={byteSize:t};return e.store(rA).put(rC,r)})}gi(e){let t=e.store(rg),r=e.store(rm);return t.H().next(t=>t1.forEach(t,t=>{let n=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return r.H(rv,n).next(r=>t1.forEach(r,r=>{tl(r.userId===t.userId,18650,"Cannot process batch from unexpected user",{batchId:r.batchId});let n=oa(this.serializer,r);return oU(e,t.userId,n).next(()=>{})}))}))}yi(e){let t=e.store(rN),r=e.store(rf);return e.store(rF).get(rL).next(e=>{let n=[];return r.ee((r,i)=>{let a=new tI(r),o=[0,rc(a)];n.push(t.get(o).next(r=>r?t1.resolve():t.put({targetId:0,path:rc(a),sequenceNumber:e.highestListenSequenceNumber})))}).next(()=>t1.waitFor(n))})}wi(e,t){e.createObjectStore(rV,{keyPath:rB});let r=t.store(rV),n=new oj,i=e=>{if(n.add(e)){let t=e.lastSegment(),n=e.popLast();return r.put({collectionId:t,parent:rc(n)})}};return t.store(rf).ee({Y:!0},(e,t)=>i(new tI(e).popLast())).next(()=>t.store(rx).ee({Y:!0},([e,t,r],n)=>i(rh(t).popLast())))}bi(e){let t=e.store(rk);return t.ee((e,r)=>{let n=oo(r),i=os(this.serializer,n);return t.put(i)})}Si(e,t){let r=t.store(rf),n=[];return r.ee((e,r)=>{let i=t.store(rE),a=(r.document?new tk(tI.fromString(r.document.name).popFirst(5)):r.noDocument?tk.fromSegments(r.noDocument.path):r.unknownDocument?tk.fromSegments(r.unknownDocument.path):to(36783)).path.toArray(),o={prefixPath:a.slice(0,a.length-2),collectionGroup:a[a.length-2],documentId:a[a.length-1],readTime:r.readTime||[0,0],unknownDocument:r.unknownDocument,noDocument:r.noDocument,document:r.document,hasCommittedMutations:!!r.hasCommittedMutations};n.push(i.put(o))}).next(()=>t1.waitFor(n))}Di(e,t){let r=t.store(rm),n=new o6(this.serializer),i=new su(sh.Vi,this.serializer.yt);return r.H().next(e=>{let r=new Map;return e.forEach(e=>{let t=r.get(e.userId)??iG();oa(this.serializer,e).keys().forEach(e=>t=t.add(e)),r.set(e.userId,t)}),t1.forEach(r,(e,r)=>{let a=new e7(r),o=od.wt(this.serializer,a),s=i.getIndexManager(a);return new o9(n,oq.wt(a,this.serializer,s,i.referenceDelegate),o,s).recalculateAndSaveOverlaysForDocumentKeys(new nr(t,ro.ce),e).next()})})}}function sp(e){e.createObjectStore(rN,{keyPath:rj}).createIndex(rM,rR,{unique:!0}),e.createObjectStore(rk,{keyPath:"targetId"}).createIndex(rP,rD,{unique:!0}),e.createObjectStore(rF)}let sg="IndexedDbPersistence",sm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class sy{constructor(e,t,r,n,i,a,o,s,l,u,c=18){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Ci=i,this.window=a,this.document=o,this.Fi=l,this.Mi=u,this.xi=c,this.ai=null,this.ui=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Oi=null,this.inForeground=!1,this.Ni=null,this.Bi=null,this.Li=-1/0,this.ki=e=>Promise.resolve(),!sy.v())throw new tc(tu.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new o0(this,n),this.Ki=t+"main",this.serializer=new oe(s),this.qi=new t3(this.Ki,this.xi,new sd(this.serializer)),this.ci=new op,this.li=new oH(this.referenceDelegate,this.serializer),this.remoteDocumentCache=function(e){return new o6(e)}(this.serializer),this.Pi=new of,this.window&&this.window.localStorage?this.Ui=this.window.localStorage:(this.Ui=null,!1===u&&tn(sg,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.$i().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new tc(tu.FAILED_PRECONDITION,sm);return this.Wi(),this.Qi(),this.Gi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.li.getHighestSequenceNumber(e))}).then(e=>{this.ai=new ro(e,this.Fi)}).then(()=>{this.ui=!0}).catch(e=>(this.qi&&this.qi.close(),Promise.reject(e)))}zi(e){return this.ki=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.qi.q(async t=>{null===t.newVersion&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Ci.enqueueAndForget(async()=>{this.started&&await this.$i()}))}$i(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>nn(e,rU).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.ji(e).next(e=>{e||(this.isPrimary=!1,this.Ci.enqueueRetryable(()=>this.ki(!1)))})}).next(()=>this.Hi(e)).next(t=>this.isPrimary&&!t?this.Ji(e).next(()=>!1):!!t&&this.Zi(e).next(()=>!0))).catch(e=>{if(t7(e))return tr(sg,"Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return tr(sg,"Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Ci.enqueueRetryable(()=>this.ki(e)),this.isPrimary=e})}ji(e){return nn(e,rd).get(rp).next(e=>t1.resolve(this.Xi(e)))}Yi(e){return nn(e,rU).delete(this.clientId)}async es(){if(this.isPrimary&&!this.ts(this.Li,18e5)){this.Li=Date.now();let e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{let t=nn(e,rU);return t.H().next(e=>{let r=this.ns(e,18e5),n=e.filter(e=>-1===r.indexOf(e));return t1.forEach(n,e=>t.delete(e.clientId)).next(()=>n)})}).catch(()=>[]);if(this.Ui)for(let t of e)this.Ui.removeItem(this.rs(t.clientId))}}Gi(){this.Bi=this.Ci.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.$i().then(()=>this.es()).then(()=>this.Gi()))}Xi(e){return!!e&&e.ownerId===this.clientId}Hi(e){return this.Mi?t1.resolve(!0):nn(e,rd).get(rp).next(t=>{if(null!==t&&this.ts(t.leaseTimestampMs,5e3)&&!this.ss(t.ownerId)){if(this.Xi(t)&&this.networkEnabled)return!0;if(!this.Xi(t)){if(!t.allowTabSynchronization)throw new tc(tu.FAILED_PRECONDITION,sm);return!1}}return!(!this.networkEnabled||!this.inForeground)||nn(e,rU).H().next(e=>void 0===this.ns(e,5e3).find(e=>{if(this.clientId!==e.clientId){let t=!this.networkEnabled&&e.networkEnabled,r=!this.inForeground&&e.inForeground,n=this.networkEnabled===e.networkEnabled;if(t||r&&n)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&tr(sg,`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}async shutdown(){this.ui=!1,this._s(),this.Bi&&(this.Bi.cancel(),this.Bi=null),this.us(),this.cs(),await this.qi.runTransaction("shutdown","readwrite",[rd,rU],e=>{let t=new nr(e,ro.ce);return this.Ji(t).next(()=>this.Yi(t))}),this.qi.close(),this.ls()}ns(e,t){return e.filter(e=>this.ts(e.updateTimeMs,t)&&!this.ss(e.clientId))}hs(){return this.runTransaction("getActiveClients","readonly",e=>nn(e,rU).H().next(e=>this.ns(e,18e5).map(e=>e.clientId)))}get started(){return this.ui}getGlobalsCache(){return this.ci}getMutationQueue(e,t){return oq.wt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new oL(e,this.serializer.yt.databaseId)}getDocumentOverlayCache(e){return od.wt(this.serializer,e)}getBundleCache(){return this.Pi}runTransaction(e,t,r){var n;let i;tr(sg,"Starting transaction:",e);let a=18===(n=this.xi)||17===n?nt:16===n||15===n?ne:14===n||13===n?r9:12===n?r7:11===n?r8:void to(60245);return this.qi.runTransaction(e,"readonly"===t?"readonly":"readwrite",a,n=>(i=new nr(n,this.ai?this.ai.next():ro.ce),"readwrite-primary"===t?this.ji(i).next(e=>!!e||this.Hi(i)).next(t=>{if(!t)throw tn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Ci.enqueueRetryable(()=>this.ki(!1)),new tc(tu.FAILED_PRECONDITION,tX);return r(i)}).next(e=>this.Zi(i).next(()=>e)):this.Ps(i).next(()=>r(i)))).then(e=>(i.raiseOnCommittedEvent(),e))}Ps(e){return nn(e,rd).get(rp).next(e=>{if(null!==e&&this.ts(e.leaseTimestampMs,5e3)&&!this.ss(e.ownerId)&&!this.Xi(e)&&!(this.Mi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new tc(tu.FAILED_PRECONDITION,sm)})}Zi(e){let t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return nn(e,rd).put(rp,t)}static v(){return t3.v()}Ji(e){let t=nn(e,rd);return t.get(rp).next(e=>this.Xi(e)?(tr(sg,"Releasing primary lease."),t.delete(rp)):t1.resolve())}ts(e,t){let r=Date.now();return!(e<r-t)&&(!(e>r)||(tn(`Detected an update time that is in the future: ${e} > ${r}`),!1))}Wi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ni=()=>{this.Ci.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.$i()))},this.document.addEventListener("visibilitychange",this.Ni),this.inForeground="visible"===this.document.visibilityState)}us(){this.Ni&&(this.document.removeEventListener("visibilitychange",this.Ni),this.Ni=null)}Qi(){"function"==typeof this.window?.addEventListener&&(this.Oi=()=>{this._s();let e=/(?:Version|Mobile)\/1[456]/;V()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.Ci.enterRestrictedMode(!0),this.Ci.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Oi))}cs(){this.Oi&&(this.window.removeEventListener("pagehide",this.Oi),this.Oi=null)}ss(e){try{let t=null!==this.Ui?.getItem(this.rs(e));return tr(sg,`Client '${e}' ${t?"is":"is not"} zombied in LocalStorage`),t}catch(e){return tn(sg,"Failed to get zombied client id.",e),!1}}_s(){if(this.Ui)try{this.Ui.setItem(this.rs(this.clientId),String(Date.now()))}catch(e){tn("Failed to set zombie client id.",e)}}ls(){if(this.Ui)try{this.Ui.removeItem(this.rs(this.clientId))}catch(e){}}rs(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function sv(e,t){let r=e.projectId;return e.isDefaultDatabase||(r+="."+e.database),"firestore/"+t+"/"+r+"/"}class sb{constructor(e,t,r,n){this.targetId=e,this.fromCache=t,this.Ts=r,this.Is=n}static Es(e,t){let r=iG(),n=iG();for(let e of t.docChanges)switch(e.type){case 0:r=r.add(e.doc.key);break;case 1:n=n.add(e.doc.key)}return new sb(e,t.fromCache,r,n)}}class sw{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class sx{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=V()?8:t5(R())>0?6:4}initialize(e,t){this.fs=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,r,n){let i={result:null};return this.gs(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.ps(e,t,n,r).next(e=>{i.result=e})}).next(()=>{if(i.result)return;let r=new sw;return this.ys(e,t,r).next(n=>{if(i.result=n,this.As)return this.ws(e,t,r,n.size)})}).next(()=>i.result)}ws(e,t,r,n){return r.documentReadCount<this.Vs?(tt()<=a.DEBUG&&tr("QueryEngine","SDK will not create cache indexes for query:",ij(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),t1.resolve()):(tt()<=a.DEBUG&&tr("QueryEngine","Query:",ij(t),"scans",r.documentReadCount,"local documents and returns",n,"documents as results."),r.documentReadCount>this.ds*n?(tt()<=a.DEBUG&&tr("QueryEngine","The SDK decides to create cache indexes for query:",ij(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,iA(t))):t1.resolve())}gs(e,t){if(iO(t))return t1.resolve(null);let r=iA(t);return this.indexManager.getIndexType(e,r).next(n=>0===n?null:(null!==t.limit&&1===n&&(r=iA(t=iP(t,null,"F"))),this.indexManager.getDocumentsMatchingTarget(e,r).next(n=>{let i=iG(...n);return this.fs.getDocuments(e,i).next(n=>this.indexManager.getMinOffset(e,r).next(r=>{let a=this.bs(t,n);return this.Ss(t,a,i,r.readTime)?this.gs(e,iP(t,null,"F")):this.Ds(e,a,t,r)}))})))}ps(e,t,r,n){return iO(t)||n.isEqual(tU.min())?t1.resolve(null):this.fs.getDocuments(e,r).next(i=>{let o=this.bs(t,i);return this.Ss(t,o,r,n)?t1.resolve(null):(tt()<=a.DEBUG&&tr("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),ij(t)),this.Ds(e,o,t,tW(n,-1)).next(e=>e))})}bs(e,t){let r=new nc(iL(e));return t.forEach((t,n)=>{iM(e,n)&&(r=r.add(n))}),r}Ss(e,t,r,n){if(null===e.limit)return!1;if(r.size!==t.size)return!0;let i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(n)>0)}ys(e,t,r){return tt()<=a.DEBUG&&tr("QueryEngine","Using full collection scan to execute query:",ij(t)),this.fs.getDocumentsMatchingQuery(e,t,tY.min(),r)}Ds(e,t,r,n){return this.fs.getDocumentsMatchingQuery(e,r,n).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}let sE="LocalStore";class sS{constructor(e,t,r,n){this.persistence=e,this.Cs=t,this.serializer=n,this.vs=new ns(tx),this.Fs=new iF(e=>iy(e),iv),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new o9(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.vs))}}async function s_(e,t){return await e.persistence.runTransaction("Handle user change","readonly",r=>{let n;return e.mutationQueue.getAllMutationBatches(r).next(i=>(n=i,e.Os(t),e.mutationQueue.getAllMutationBatches(r))).next(t=>{let i=[],a=[],o=iG();for(let e of n)for(let t of(i.push(e.batchId),e.mutations))o=o.add(t.key);for(let e of t)for(let t of(a.push(e.batchId),e.mutations))o=o.add(t.key);return e.localDocuments.getDocuments(r,o).next(e=>({Ns:e,removedBatchIds:i,addedBatchIds:a}))})})}function sO(e){return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.li.getLastRemoteSnapshotVersion(t))}function sT(e,t,r){let n=iG(),i=iG();return r.forEach(e=>n=n.add(e)),t.getEntries(e,n).next(e=>{let n=iV;return r.forEach((r,a)=>{let o=e.get(r);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(r)),a.isNoDocument()&&a.version.isEqual(tU.min())?(t.removeEntry(r,a.readTime),n=n.insert(r,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),n=n.insert(r,a)):tr(sE,"Ignoring outdated watch update for ",r,". Current version:",o.version," Watch version:",a.version)}),{Bs:n,Ls:i}})}function sI(e,t){return e.persistence.runTransaction("Allocate target","readwrite",r=>{let n;return e.li.getTargetData(r,t).next(i=>i?(n=i,t1.resolve(n)):e.li.allocateTargetId(r).next(i=>(n=new a9(t,i,"TargetPurposeListen",r.currentSequenceNumber),e.li.addTargetData(r,n).next(()=>n))))}).then(r=>{let n=e.vs.get(r.targetId);return(null===n||r.snapshotVersion.compareTo(n.snapshotVersion)>0)&&(e.vs=e.vs.insert(r.targetId,r),e.Fs.set(t,r.targetId)),r})}async function sA(e,t,r){let n=e.vs.get(t);try{r||await e.persistence.runTransaction("Release target",r?"readwrite":"readwrite-primary",t=>e.persistence.referenceDelegate.removeTarget(t,n))}catch(e){if(!t7(e))throw e;tr(sE,`Failed to update sequence numbers for target ${t}: ${e}`)}e.vs=e.vs.remove(t),e.Fs.delete(n.target)}function sC(e,t,r){let n=tU.min(),i=iG();return e.persistence.runTransaction("Execute query","readwrite",a=>{var o;let s;return(o=iA(t),void 0!==(s=e.Fs.get(o))?t1.resolve(e.vs.get(s)):e.li.getTargetData(a,o)).next(t=>{if(t)return n=t.lastLimboFreeSnapshotVersion,e.li.getMatchingKeysForTargetId(a,t.targetId).next(e=>{i=e})}).next(()=>e.Cs.getDocumentsMatchingQuery(a,t,r?n:tU.min(),r?i:iG())).next(r=>(sD(e,iR(t),r),{documents:r,ks:i}))})}function sk(e,t){let r=e.li,n=e.vs.get(t);return n?Promise.resolve(n.target):e.persistence.runTransaction("Get target data","readonly",e=>r.At(e,t).next(e=>e?e.target:null))}function sP(e,t){let r=e.Ms.get(t)||tU.min();return e.persistence.runTransaction("Get new document changes","readonly",n=>e.xs.getAllFromCollectionGroup(n,t,tW(r,-1),Number.MAX_SAFE_INTEGER)).then(r=>(sD(e,t,r),r))}function sD(e,t,r){let n=e.Ms.get(t)||tU.min();r.forEach((e,t)=>{t.readTime.compareTo(n)>0&&(n=t.readTime)}),e.Ms.set(t,n)}async function sN(e,t,r,n){let i=iG(),a=iV;for(let e of r){let r=t.Ks(e.metadata.name);e.document&&(i=i.add(r));let n=t.qs(e);n.setReadTime(t.Us(e.metadata.readTime)),a=a.insert(r,n)}let o=e.xs.newChangeBuffer({trackRemovals:!0}),s=await sI(e,iA(i_(tI.fromString(`__bundle__/docs/${n}`))));return e.persistence.runTransaction("Apply bundle documents","readwrite",t=>sT(t,o,a).next(e=>(o.apply(t),e)).next(r=>e.li.removeMatchingKeysForTargetId(t,s.targetId).next(()=>e.li.addMatchingKeys(t,i,s.targetId)).next(()=>e.localDocuments.getLocalViewOfDocuments(t,r.Bs,r.Ls)).next(()=>r.Bs)))}async function sj(e,t,r=iG()){let n=await sI(e,iA(ol(t.bundledQuery)));return e.persistence.runTransaction("Save named query","readwrite",i=>{let a=az(t.readTime);if(n.snapshotVersion.compareTo(a)>=0)return e.Pi.saveNamedQuery(i,t);let o=n.withResumeToken(ng.EMPTY_BYTE_STRING,a);return e.vs=e.vs.insert(o.targetId,o),e.li.updateTargetData(i,o).next(()=>e.li.removeMatchingKeysForTargetId(i,n.targetId)).next(()=>e.li.addMatchingKeys(i,r,n.targetId)).next(()=>e.Pi.saveNamedQuery(i,t))})}let sM="firestore_clients";function sR(e,t){return`${sM}_${e}_${t}`}let sL="firestore_mutations";function sF(e,t,r){let n=`${sL}_${e}_${r}`;return t.isAuthenticated()&&(n+=`_${t.uid}`),n}let sV="firestore_targets";function sB(e,t){return`${sV}_${e}_${t}`}let sU="SharedClientState";class sz{constructor(e,t,r,n){this.user=e,this.batchId=t,this.state=r,this.error=n}static $s(e,t,r){let n=JSON.parse(r),i,a="object"==typeof n&&-1!==["pending","acknowledged","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return a&&n.error&&(a="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new tc(n.error.code,n.error.message)),a?new sz(e,t,n.state,i):(tn(sU,`Failed to parse mutation state for ID '${t}': ${r}`),null)}Ws(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class sq{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static $s(e,t){let r=JSON.parse(t),n,i="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(n=new tc(r.error.code,r.error.message)),i?new sq(e,r.state,n):(tn(sU,`Failed to parse target state for ID '${e}': ${t}`),null)}Ws(){let e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class s${constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){let r=JSON.parse(t),n="object"==typeof r&&r.activeTargetIds instanceof Array,i=iH;for(let e=0;n&&e<r.activeTargetIds.length;++e)n=ru(r.activeTargetIds[e]),i=i.add(r.activeTargetIds[e]);return n?new s$(e,i):(tn(sU,`Failed to parse client data for instance '${e}': ${t}`),null)}}class sK{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){let t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new sK(t.clientId,t.onlineState):(tn(sU,`Failed to parse online state: ${e}`),null)}}class sG{constructor(){this.activeTargetIds=iH}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){return JSON.stringify({activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()})}}class sH{constructor(e,t,r,n,i){this.window=e,this.Ci=t,this.persistenceKey=r,this.zs=n,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.js=this.Hs.bind(this),this.Js=new ns(tx),this.started=!1,this.Zs=[];const a=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Xs=sR(this.persistenceKey,this.zs),this.Ys=function(e){return`firestore_sequence_number_${e}`}(this.persistenceKey),this.Js=this.Js.insert(this.zs,new sG),this.eo=RegExp(`^${sM}_${a}_([^_]*)$`),this.no=RegExp(`^${sL}_${a}_(\\d+)(?:_(.*))?$`),this.ro=RegExp(`^${sV}_${a}_(\\d+)$`),this.io=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this.so=function(e){return`firestore_bundle_loaded_v2_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this.js)}static v(e){return!(!e||!e.localStorage)}async start(){for(let e of(await this.syncEngine.hs())){if(e===this.zs)continue;let t=this.getItem(sR(this.persistenceKey,e));if(t){let r=s$.$s(e,t);r&&(this.Js=this.Js.insert(r.clientId,r))}}this.oo();let e=this.storage.getItem(this.io);if(e){let t=this._o(e);t&&this.ao(t)}for(let e of this.Zs)this.Hs(e);this.Zs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ys,JSON.stringify(e))}getAllActiveQueryTargets(){return this.uo(this.Js)}isActiveQueryTarget(e){let t=!1;return this.Js.forEach((r,n)=>{n.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.co(e,"pending")}updateMutationState(e,t,r){this.co(e,t,r),this.lo(e)}addLocalQueryTarget(e,t=!0){let r="not-current";if(this.isActiveQueryTarget(e)){let t=this.storage.getItem(sB(this.persistenceKey,e));if(t){let n=sq.$s(e,t);n&&(r=n.state)}}return t&&this.ho.Qs(e),this.oo(),r}removeLocalQueryTarget(e){this.ho.Gs(e),this.oo()}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(sB(this.persistenceKey,e))}updateQueryState(e,t,r){this.Po(e,t,r)}handleUserChange(e,t,r){t.forEach(e=>{this.lo(e)}),this.currentUser=e,r.forEach(e=>{this.addPendingMutation(e)})}setOnlineState(e){this.To(e)}notifyBundleLoaded(e){this.Io(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.js),this.removeItem(this.Xs),this.started=!1)}getItem(e){let t=this.storage.getItem(e);return tr(sU,"READ",e,t),t}setItem(e,t){tr(sU,"SET",e,t),this.storage.setItem(e,t)}removeItem(e){tr(sU,"REMOVE",e),this.storage.removeItem(e)}Hs(e){if(e.storageArea===this.storage){if(tr(sU,"EVENT",e.key,e.newValue),e.key===this.Xs)return void tn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ci.enqueueRetryable(async()=>{if(this.started){if(null!==e.key){if(this.eo.test(e.key)){if(null==e.newValue){let t=this.Eo(e.key);return this.Ro(t,null)}{let t=this.Ao(e.key,e.newValue);if(t)return this.Ro(t.clientId,t)}}else if(this.no.test(e.key)){if(null!==e.newValue){let t=this.Vo(e.key,e.newValue);if(t)return this.mo(t)}}else if(this.ro.test(e.key)){if(null!==e.newValue){let t=this.fo(e.key,e.newValue);if(t)return this.po(t)}}else if(e.key===this.io){if(null!==e.newValue){let t=this._o(e.newValue);if(t)return this.ao(t)}}else if(e.key===this.Ys){let t=function(e){let t=ro.ce;if(null!=e)try{let r=JSON.parse(e);tl("number"==typeof r,30636,{yo:e}),t=r}catch(e){tn(sU,"Failed to read sequence number from WebStorage",e)}return t}(e.newValue);t!==ro.ce&&this.sequenceNumberHandler(t)}else if(e.key===this.so){let t=this.wo(e.newValue);await Promise.all(t.map(e=>this.syncEngine.bo(e)))}}}else this.Zs.push(e)})}}get ho(){return this.Js.get(this.zs)}oo(){this.setItem(this.Xs,this.ho.Ws())}co(e,t,r){let n=new sz(this.currentUser,e,t,r),i=sF(this.persistenceKey,this.currentUser,e);this.setItem(i,n.Ws())}lo(e){let t=sF(this.persistenceKey,this.currentUser,e);this.removeItem(t)}To(e){let t={clientId:this.zs,onlineState:e};this.storage.setItem(this.io,JSON.stringify(t))}Po(e,t,r){let n=sB(this.persistenceKey,e),i=new sq(e,t,r);this.setItem(n,i.Ws())}Io(e){let t=JSON.stringify(Array.from(e));this.setItem(this.so,t)}Eo(e){let t=this.eo.exec(e);return t?t[1]:null}Ao(e,t){let r=this.Eo(e);return s$.$s(r,t)}Vo(e,t){let r=this.no.exec(e),n=Number(r[1]),i=void 0!==r[2]?r[2]:null;return sz.$s(new e7(i),n,t)}fo(e,t){let r=Number(this.ro.exec(e)[1]);return sq.$s(r,t)}_o(e){return sK.$s(e)}wo(e){return JSON.parse(e)}async mo(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.So(e.batchId,e.state,e.error);tr(sU,`Ignoring mutation for non-active user ${e.user.uid}`)}po(e){return this.syncEngine.Do(e.targetId,e.state,e.error)}Ro(e,t){let r=t?this.Js.insert(e,t):this.Js.remove(e),n=this.uo(this.Js),i=this.uo(r),a=[],o=[];return i.forEach(e=>{n.has(e)||a.push(e)}),n.forEach(e=>{i.has(e)||o.push(e)}),this.syncEngine.Co(a,o).then(()=>{this.Js=r})}ao(e){this.Js.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}uo(e){let t=iH;return e.forEach((e,r)=>{t=t.unionWith(r.activeTargetIds)}),t}}class sW{constructor(){this.vo=new sG,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,t,r){this.Fo[e]=t}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new sG,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class sQ{Mo(e){}shutdown(){}}let sY="ConnectivityMonitor";class sJ{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){for(let e of(tr(sY,"Network connectivity changed: AVAILABLE"),this.Lo))e(0)}Bo(){for(let e of(tr(sY,"Network connectivity changed: UNAVAILABLE"),this.Lo))e(1)}static v(){return"u">typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let sX=null;function sZ(){return null===sX?sX=0x10000000+Math.round(0x80000000*Math.random()):sX++,"0x"+sX.toString(16)}let s0="RestConnection",s1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class s2{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),n=encodeURIComponent(this.databaseId.database);this.qo=t+"://"+e.host,this.Uo=`projects/${r}/databases/${n}`,this.$o=this.databaseId.database===nA?`project_id=${r}`:`project_id=${r}&database_id=${n}`}Wo(e,t,r,n,i){let a=sZ(),o=this.Qo(e,t.toUriEncodedString());tr(s0,`Sending RPC '${e}' ${a}:`,o,r);let s={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(s,n,i);let{host:l}=new URL(o),u=D(l);return this.zo(e,o,s,r,u).then(t=>(tr(s0,`Received RPC '${e}' ${a}: `,t),t),t=>{throw ti(s0,`RPC '${e}' ${a} failed with error: `,t,"url: ",o,"request:",r),t})}jo(e,t,r,n,i,a){return this.Wo(e,t,r,n,i)}Go(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+e9,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,r)=>e[r]=t),r&&r.headers.forEach((t,r)=>e[r]=t)}Qo(e,t){let r=s1[e],n=`${this.qo}/v1/${t}:${r}`;return this.databaseInfo.apiKey&&(n=`${n}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),n}terminate(){}}class s6{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}let s3="WebChannelConnection",s5=(e,t,r)=>{e.listen(t,e=>{try{r(e)}catch(e){setTimeout(()=>{throw e},0)}})};class s4 extends s2{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){s4.c_||(s5(p(),d.STAT_EVENT,e=>{e.stat===f.PROXY?tr(s3,"STAT_EVENT: detected buffering proxy"):e.stat===f.NOPROXY&&tr(s3,"STAT_EVENT: detected no buffering proxy")}),s4.c_=!0)}zo(e,t,r,n,i){let a=sZ();return new Promise((i,o)=>{let s=new l;s.setWithCredentials(!0),s.listenOnce(c.COMPLETE,()=>{try{switch(s.getLastErrorCode()){case h.NO_ERROR:let t=s.getResponseJson();tr(s3,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(t)),i(t);break;case h.TIMEOUT:tr(s3,`RPC '${e}' ${a} timed out`),o(new tc(tu.DEADLINE_EXCEEDED,"Request time out"));break;case h.HTTP_ERROR:let r=s.getStatus();if(tr(s3,`RPC '${e}' ${a} failed with status:`,r,"response text:",s.getResponseText()),r>0){let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);let t=e?.error;if(t&&t.status&&t.message){let e,r=(e=t.status.toLowerCase().replace(/_/g,"-"),Object.values(tu).indexOf(e)>=0?e:tu.UNKNOWN);o(new tc(r,t.message))}else o(new tc(tu.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new tc(tu.UNAVAILABLE,"Connection failed."));break;default:to(9055,{l_:e,streamId:a,h_:s.getLastErrorCode(),P_:s.getLastError()})}}finally{tr(s3,`RPC '${e}' ${a} completed.`)}});let u=JSON.stringify(n);tr(s3,`RPC '${e}' ${a} sending request:`,n),s.send(t,"POST",u,r,15)})}T_(e,t,r){let n=sZ(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=this.createWebChannelTransport(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},s=this.longPollingOptions.timeoutSeconds;void 0!==s&&(o.longPollingTimeout=Math.round(1e3*s)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Go(o.initMessageHeaders,t,r),o.encodeInitMessageHeaders=!0;let l=i.join("");tr(s3,`Creating RPC '${e}' stream ${n}: ${l}`,o);let c=a.createWebChannel(l,o);this.I_(c);let h=!1,f=!1,d=new s6({Ho:t=>{f?tr(s3,`Not sending because RPC '${e}' stream ${n} is closed:`,t):(h||(tr(s3,`Opening RPC '${e}' stream ${n} transport.`),c.open(),h=!0),tr(s3,`RPC '${e}' stream ${n} sending:`,t),c.send(t))},Jo:()=>c.close()});return s5(c,u.EventType.OPEN,()=>{f||(tr(s3,`RPC '${e}' stream ${n} transport opened.`),d.i_())}),s5(c,u.EventType.CLOSE,()=>{f||(f=!0,tr(s3,`RPC '${e}' stream ${n} transport closed`),d.o_(),this.E_(c))}),s5(c,u.EventType.ERROR,t=>{f||(f=!0,ti(s3,`RPC '${e}' stream ${n} transport errored. Name:`,t.name,"Message:",t.message),d.o_(new tc(tu.UNAVAILABLE,"The operation could not be completed")))}),s5(c,u.EventType.MESSAGE,t=>{if(!f){let r=t.data[0];tl(!!r,16349);let i=r?.error||r[0]?.error;if(i){tr(s3,`RPC '${e}' stream ${n} received error:`,i);let t=i.status,r=function(e){let t=m[e];if(void 0!==t)return av(t)}(t),a=i.message;void 0===r&&(r=tu.INTERNAL,a="Unknown error status: "+t+" with message "+i.message),f=!0,d.o_(new tc(r,a)),c.close()}else tr(s3,`RPC '${e}' stream ${n} received:`,r),d.__(r)}}),s4.u_(),setTimeout(()=>{d.s_()},0),d}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(t=>t===e)}Go(e,t,r){super.Go(e,t,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return g()}}function s8(){return"u">typeof window?window:null}function s7(){return"u">typeof document?document:null}function s9(e){return new aF(e,!0)}s4.c_=!1;class le{constructor(e,t,r=1e3,n=1.5,i=6e4){this.Ci=e,this.timerId=t,this.R_=r,this.A_=n,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();let t=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),n=Math.max(0,t-r);n>0&&tr("ExponentialBackoff",`Backing off for ${n} ms (base delay: ${this.d_} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,n,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}let lt="PersistentStream";class lr{constructor(e,t,r,n,i,a,o,s){this.Ci=e,this.b_=r,this.S_=n,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=o,this.listener=s,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new le(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===tu.RESOURCE_EXHAUSTED?(tn(t.toString()),tn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===tu.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(t)}W_(){}auth(){this.state=1;let e=this.Q_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([e,r])=>{this.D_===t&&this.G_(e,r)},t=>{e(()=>{let e=new tc(tu.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){let r=this.Q_(this.D_);this.stream=this.j_(e,t),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(e=>{r(()=>this.z_(e))}),this.stream.onMessage(e=>{r(()=>1==++this.F_?this.H_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return tr(lt,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return t=>{this.Ci.enqueueAndForget(()=>this.D_===e?t():(tr(lt,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ln extends lr{constructor(e,t,r,n,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,n,a),this.serializer=i}j_(e,t){return this.connection.T_("Listen",e,t)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();let t=function(e,t){let r;if("targetChange"in t){var n,i;t.targetChange;let a="NO_CHANGE"===(n=t.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===n?1:"REMOVE"===n?2:"CURRENT"===n?3:"RESET"===n?4:to(39313,{state:n}),o=t.targetChange.targetIds||[],s=(i=t.targetChange.resumeToken,e.useProto3Json?(tl(void 0===i||"string"==typeof i,58123),ng.fromBase64String(i||"")):(tl(void 0===i||i instanceof e6.Buffer||i instanceof Uint8Array,16193),ng.fromUint8Array(i||new Uint8Array))),l=t.targetChange.cause;r=new ak(a,o,s,l&&new tc(void 0===l.code?tu.UNKNOWN:av(l.code),l.message||"")||null)}else if("documentChange"in t){t.documentChange;let n=t.documentChange;n.document,n.document.name,n.document.updateTime;let i=aH(e,n.document.name),a=az(n.document.updateTime),o=n.document.createTime?az(n.document.createTime):tU.min(),s=new n1({mapValue:{fields:n.document.fields}}),l=n2.newFoundDocument(i,a,o,s);r=new aA(n.targetIds||[],n.removedTargetIds||[],l.key,l)}else if("documentDelete"in t){t.documentDelete;let n=t.documentDelete;n.document;let i=aH(e,n.document),a=n.readTime?az(n.readTime):tU.min(),o=n2.newNoDocument(i,a);r=new aA([],n.removedTargetIds||[],o.key,o)}else if("documentRemove"in t){t.documentRemove;let n=t.documentRemove;n.document;let i=aH(e,n.document);r=new aA([],n.removedTargetIds||[],i,null)}else{if(!("filter"in t))return to(11601,{Vt:t});{t.filter;let e=t.filter;e.targetId;let{count:n=0,unchangedNames:i}=e,a=new am(n,i);r=new aC(e.targetId,a)}}return r}(this.serializer,e),r=function(e){if(!("targetChange"in e))return tU.min();let t=e.targetChange;return t.targetIds&&t.targetIds.length?tU.min():t.readTime?az(t.readTime):tU.min()}(e);return this.listener.J_(t,r)}Z_(e){let t,r={};r.database=aY(this.serializer),r.addTarget=function(e,t){let r,n=t.target;if((r=ib(n)?{documents:a2(e,n)}:{query:a6(e,n).ft}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0){r.resumeToken=aU(e,t.resumeToken);let n=aV(e,t.expectedCount);null!==n&&(r.expectedCount=n)}else if(t.snapshotVersion.compareTo(tU.min())>0){r.readTime=aB(e,t.snapshotVersion.toTimestamp());let n=aV(e,t.expectedCount);null!==n&&(r.expectedCount=n)}return r}(this.serializer,e);let n=(this.serializer,null==(t=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return to(28987,{purpose:e})}}(e.purpose))?null:{"goog-listen-tags":t});n&&(r.labels=n),this.K_(r)}X_(e){let t={};t.database=aY(this.serializer),t.removeTarget=e,this.K_(t)}}class li extends lr{constructor(e,t,r,n,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,n,a),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}H_(e){return tl(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,tl(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){var t,r;tl(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let n=(t=e.writeResults,r=e.commitTime,t&&t.length>0?(tl(void 0!==r,14353),t.map(e=>{let t;return(t=e.updateTime?az(e.updateTime):az(r)).isEqual(tU.min())&&(t=az(r)),new i7(t,e.transformResults||[])})):[]),i=az(e.commitTime);return this.listener.na(i,n)}ra(){let e={};e.database=aY(this.serializer),this.K_(e)}ea(e){let t={streamToken:this.lastStreamToken,writes:e.map(e=>a0(this.serializer,e))};this.K_(t)}}class la{}class lo extends la{constructor(e,t,r,n){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=n,this.ia=!1}sa(){if(this.ia)throw new tc(tu.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,t,r,n){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Wo(e,a$(t,r),n,i,a)).catch(e=>{throw"FirebaseError"===e.name?(e.code===tu.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new tc(tu.UNKNOWN,e.toString())})}jo(e,t,r,n,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,o])=>this.connection.jo(e,a$(t,r),n,a,o,i)).catch(e=>{throw"FirebaseError"===e.name?(e.code===tu.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new tc(tu.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class ls{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(tn(t),this.aa=!1):tr("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}let ll="RemoteStore";class lu{constructor(e,t,r,n,i){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo(e=>{r.enqueueAndForget(async()=>{lv(this)&&(tr(ll,"Restarting streams for network reachability change."),await async function(e){e.Ea.add(4),await lh(e),e.Va.set("Unknown"),e.Ea.delete(4),await lc(e)}(this))})}),this.Va=new ls(r,n)}}async function lc(e){if(lv(e))for(let t of e.Ra)await t(!0)}async function lh(e){for(let t of e.Ra)await t(!1)}function lf(e,t){e.Ia.has(t.targetId)||(e.Ia.set(t.targetId,t),ly(e)?lm(e):lj(e).O_()&&lp(e,t))}function ld(e,t){let r=lj(e);e.Ia.delete(t),r.O_()&&lg(e,t),0===e.Ia.size&&(r.O_()?r.L_():lv(e)&&e.Va.set("Unknown"))}function lp(e,t){if(e.da.$e(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(tU.min())>0){let r=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(r)}lj(e).Z_(t)}function lg(e,t){e.da.$e(t),lj(e).X_(t)}function lm(e){e.da=new aD({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),lj(e).start(),e.Va.ua()}function ly(e){return lv(e)&&!lj(e).x_()&&e.Ia.size>0}function lv(e){return 0===e.Ea.size}async function lb(e){e.Va.set("Online")}async function lw(e){e.Ia.forEach((t,r)=>{lp(e,t)})}async function lx(e,t){e.da=void 0,ly(e)?(e.Va.ha(t),lm(e)):e.Va.set("Unknown")}async function lE(e,t,r){if(e.Va.set("Online"),t instanceof ak&&2===t.state&&t.cause)try{await async function(e,t){let r=t.cause;for(let n of t.targetIds)e.Ia.has(n)&&(await e.remoteSyncer.rejectListen(n,r),e.Ia.delete(n),e.da.removeTarget(n))}(e,t)}catch(r){tr(ll,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await lS(e,r)}else if(t instanceof aA?e.da.Xe(t):t instanceof aC?e.da.st(t):e.da.tt(t),!r.isEqual(tU.min()))try{let t,n=await sO(e.localStore);r.compareTo(n)>=0&&await ((t=e.da.Tt(r)).targetChanges.forEach((t,n)=>{if(t.resumeToken.approximateByteSize()>0){let i=e.Ia.get(n);i&&e.Ia.set(n,i.withResumeToken(t.resumeToken,r))}}),t.targetMismatches.forEach((t,r)=>{let n=e.Ia.get(t);if(!n)return;e.Ia.set(t,n.withResumeToken(ng.EMPTY_BYTE_STRING,n.snapshotVersion)),lg(e,t);let i=new a9(n.target,t,r,n.sequenceNumber);lp(e,i)}),e.remoteSyncer.applyRemoteEvent(t))}catch(t){tr(ll,"Failed to raise snapshot:",t),await lS(e,t)}}async function lS(e,t,r){if(!t7(t))throw t;e.Ea.add(1),await lh(e),e.Va.set("Offline"),r||(r=()=>sO(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{tr(ll,"Retrying IndexedDB access"),await r(),e.Ea.delete(1),await lc(e)})}function l_(e,t){return t().catch(r=>lS(e,r,t))}async function lO(e){var t;let r=lM(e),n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:-1;for(;lv(t=e)&&t.Ta.length<10;)try{let t=await function(e,t){return e.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===t&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}(e.localStore,n);if(null===t){0===e.Ta.length&&r.L_();break}n=t.batchId,function(e,t){e.Ta.push(t);let r=lM(e);r.O_()&&r.Y_&&r.ea(t.mutations)}(e,t)}catch(t){await lS(e,t)}lT(e)&&lI(e)}function lT(e){return lv(e)&&!lM(e).x_()&&e.Ta.length>0}function lI(e){lM(e).start()}async function lA(e){lM(e).ra()}async function lC(e){let t=lM(e);for(let r of e.Ta)t.ea(r.mutations)}async function lk(e,t,r){let n=e.Ta.shift(),i=ad.from(n,t,r);await l_(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await lO(e)}async function lP(e,t){t&&lM(e).Y_&&await async function(e,t){var r;if(ay(r=t.code)&&r!==tu.ABORTED){let r=e.Ta.shift();lM(e).B_(),await l_(e,()=>e.remoteSyncer.rejectFailedWrite(r.batchId,t)),await lO(e)}}(e,t),lT(e)&&lI(e)}async function lD(e,t){e.asyncQueue.verifyOperationInProgress(),tr(ll,"RemoteStore received new credentials");let r=lv(e);e.Ea.add(3),await lh(e),r&&e.Va.set("Unknown"),await e.remoteSyncer.handleCredentialChange(t),e.Ea.delete(3),await lc(e)}async function lN(e,t){t?(e.Ea.delete(2),await lc(e)):t||(e.Ea.add(2),await lh(e),e.Va.set("Unknown"))}function lj(e){var t,r,n;return e.ma||(t=e.datastore,r=e.asyncQueue,n={Zo:lb.bind(null,e),Yo:lw.bind(null,e),t_:lx.bind(null,e),J_:lE.bind(null,e)},t.sa(),e.ma=new ln(r,t.connection,t.authCredentials,t.appCheckCredentials,t.serializer,n),e.Ra.push(async t=>{t?(e.ma.B_(),ly(e)?lm(e):e.Va.set("Unknown")):(await e.ma.stop(),e.da=void 0)})),e.ma}function lM(e){var t,r,n;return e.fa||(t=e.datastore,r=e.asyncQueue,n={Zo:()=>Promise.resolve(),Yo:lA.bind(null,e),t_:lP.bind(null,e),ta:lC.bind(null,e),na:lk.bind(null,e)},t.sa(),e.fa=new li(r,t.connection,t.authCredentials,t.appCheckCredentials,t.serializer,n),e.Ra.push(async t=>{t?(e.fa.B_(),await lO(e)):(await e.fa.stop(),e.Ta.length>0&&(tr(ll,`Stopping write stream with ${e.Ta.length} pending writes`),e.Ta=[]))})),e.fa}class lR{constructor(e,t,r,n,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=n,this.removalCallback=i,this.deferred=new th,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,n,i){let a=new lR(e,t,Date.now()+r,n,i);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new tc(tu.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function lL(e,t){if(tn("AsyncQueue",`${t}: ${e}`),t7(e))return new tc(tu.UNAVAILABLE,`${t}: ${e}`);throw e}class lF{static emptySet(e){return new lF(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||tk.comparator(t.key,r.key):(e,t)=>tk.comparator(e.key,t.key),this.keyedMap=iU(),this.sortedSet=new ns(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof lF)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){let e=t.getNext().key,n=r.getNext().key;if(!e.isEqual(n))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){let r=new lF;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class lV{constructor(){this.ga=new ns(tk.comparator)}track(e){let t=e.doc.key,r=this.ga.get(t);r?0!==e.type&&3===r.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==r.type?this.ga=this.ga.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.ga=this.ga.remove(t):1===e.type&&2===r.type?this.ga=this.ga.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):to(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(t,e)}ya(){let e=[];return this.ga.inorderTraversal((t,r)=>{e.push(r)}),e}}class lB{constructor(e,t,r,n,i,a,o,s,l){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=n,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=o,this.excludesMetadataChanges=s,this.hasCachedResults=l}static fromInitialDocuments(e,t,r,n,i){let a=[];return t.forEach(e=>{a.push({type:0,doc:e})}),new lB(e,t,lF.emptySet(t),a,r,n,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&iD(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let e=0;e<t.length;e++)if(t[e].type!==r[e].type||!t[e].doc.isEqual(r[e].doc))return!1;return!0}}class lU{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class lz{constructor(){this.queries=lq(),this.onlineState="Unknown",this.Ca=new Set}terminate(){var e;let t;e=new tc(tu.ABORTED,"Firestore shutting down"),t=this.queries,this.queries=lq(),t.forEach((t,r)=>{for(let t of r.ba)t.onError(e)})}}function lq(){return new iF(e=>iN(e),iD)}async function l$(e,t){let r=3,n=t.query,i=e.queries.get(n);i?!i.Sa()&&t.Da()&&(r=2):(i=new lU,r=+!t.Da());try{switch(r){case 0:i.wa=await e.onListen(n,!0);break;case 1:i.wa=await e.onListen(n,!1);break;case 2:await e.onFirstRemoteStoreListen(n)}}catch(r){let e=lL(r,`Initialization of query '${ij(t.query)}' failed`);return void t.onError(e)}e.queries.set(n,i),i.ba.push(t),t.va(e.onlineState),i.wa&&t.Fa(i.wa)&&lW(e)}async function lK(e,t){let r=t.query,n=3,i=e.queries.get(r);if(i){let e=i.ba.indexOf(t);e>=0&&(i.ba.splice(e,1),0===i.ba.length?n=+!t.Da():!i.Sa()&&t.Da()&&(n=2))}switch(n){case 0:return e.queries.delete(r),e.onUnlisten(r,!0);case 1:return e.queries.delete(r),e.onUnlisten(r,!1);case 2:return e.onLastRemoteStoreUnlisten(r);default:return}}function lG(e,t){let r=!1;for(let n of t){let t=n.query,i=e.queries.get(t);if(i){for(let e of i.ba)e.Fa(n)&&(r=!0);i.wa=n}}r&&lW(e)}function lH(e,t,r){let n=e.queries.get(t);if(n)for(let e of n.ba)e.onError(r);e.queries.delete(t)}function lW(e){e.Ca.forEach(e=>{e.next()})}(b=v||(v={})).Ma="default",b.Cache="cache";class lQ{constructor(e,t,r){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let t=[];for(let r of e.docChanges)3!==r.type&&t.push(r);e=new lB(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){return!(e.fromCache&&this.Da())||(!this.options.Ka||"Offline"===t)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;let t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=lB.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==v.Cache}}class lY{constructor(e,t){this.qa=e,this.byteLength=t}Ua(){return"metadata"in this.qa}}class lJ{constructor(e){this.serializer=e}Ks(e){return aH(this.serializer,e)}qs(e){return e.metadata.exists?aZ(this.serializer,e.document,!1):n2.newNoDocument(this.Ks(e.metadata.name),this.Us(e.metadata.readTime))}Us(e){return az(e)}}class lX{constructor(e,t){this.$a=e,this.serializer=t,this.Wa=[],this.Qa=[],this.collectionGroups=new Set,this.progress=lZ(e)}get queries(){return this.Wa}get documents(){return this.Qa}Ga(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.qa.namedQuery)this.Wa.push(e.qa.namedQuery);else if(e.qa.documentMetadata){this.Qa.push({metadata:e.qa.documentMetadata}),e.qa.documentMetadata.exists||++t;let r=tI.fromString(e.qa.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.qa.document&&(this.Qa[this.Qa.length-1].document=e.qa.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,{...this.progress}):null}za(e){let t=new Map,r=new lJ(this.serializer);for(let n of e)if(n.metadata.queries){let e=r.Ks(n.metadata.name);for(let r of n.metadata.queries){let n=(t.get(r)||iG()).add(e);t.set(r,n)}}return t}async ja(e){let t=await sN(e,new lJ(this.serializer),this.Qa,this.$a.id),r=this.za(this.documents);for(let t of this.Wa)await sj(e,t,r.get(t.name));return this.progress.taskState="Success",{progress:this.progress,Ha:this.collectionGroups,Ja:t}}}function lZ(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class l0{constructor(e){this.key=e}}class l1{constructor(e){this.key=e}}class l2{constructor(e,t){this.query=e,this.Za=t,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=iG(),this.mutatedKeys=iG(),this.eu=iL(e),this.tu=new lF(this.eu)}get nu(){return this.Za}ru(e,t){let r=t?t.iu:new lV,n=t?t.tu:this.tu,i=t?t.mutatedKeys:this.mutatedKeys,a=n,o=!1,s="F"===this.query.limitType&&n.size===this.query.limit?n.last():null,l="L"===this.query.limitType&&n.size===this.query.limit?n.first():null;if(e.inorderTraversal((e,t)=>{let u=n.get(e),c=iM(this.query,t)?t:null,h=!!u&&this.mutatedKeys.has(u.key),f=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations),d=!1;u&&c?u.data.isEqual(c.data)?h!==f&&(r.track({type:3,doc:c}),d=!0):this.su(u,c)||(r.track({type:2,doc:c}),d=!0,(s&&this.eu(c,s)>0||l&&0>this.eu(c,l))&&(o=!0)):!u&&c?(r.track({type:0,doc:c}),d=!0):u&&!c&&(r.track({type:1,doc:u}),d=!0,(s||l)&&(o=!0)),d&&(c?(a=a.add(c),i=f?i.add(e):i.delete(e)):(a=a.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;a.size>this.query.limit;){let e="F"===this.query.limitType?a.last():a.first();a=a.delete(e.key),i=i.delete(e.key),r.track({type:1,doc:e})}return{tu:a,iu:r,Ss:o,mutatedKeys:i}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,n){let i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let a=e.iu.ya();a.sort((e,t)=>{var r,n;let i;return r=e.type,n=t.type,(i=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return to(20277,{Vt:e})}})(r)-i(n)||this.eu(e.doc,t.doc)}),this.ou(r),n=n??!1;let o=t&&!n?this._u():[],s=0===this.Ya.size&&this.current&&!n?1:0,l=s!==this.Xa;return(this.Xa=s,0!==a.length||l)?{snapshot:new lB(this.query,e.tu,i,a,e.mutatedKeys,0===s,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:o}:{au:o}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new lV,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Za=this.Za.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Za=this.Za.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Ya;this.Ya=iG(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Ya=this.Ya.add(e.key))});let t=[];return e.forEach(e=>{this.Ya.has(e)||t.push(new l1(e))}),this.Ya.forEach(r=>{e.has(r)||t.push(new l0(r))}),t}cu(e){this.Za=e.ks,this.Ya=iG();let t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return lB.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Xa,this.hasCachedResults)}}let l6="SyncEngine";class l3{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class l5{constructor(e){this.key=e,this.hu=!1}}class l4{constructor(e,t,r,n,i,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=n,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new iF(e=>iN(e),iD),this.Iu=new Map,this.Eu=new Set,this.Ru=new ns(tk.comparator),this.Au=new Map,this.Vu=new sn,this.du={},this.mu=new Map,this.fu=oG.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function l8(e,t,r=!0){let n,i=uI(e),a=i.Tu.get(t);return a?(i.sharedClientState.addLocalQueryTarget(a.targetId),n=a.view.lu()):n=await l9(i,t,r,!0),n}async function l7(e,t){let r=uI(e);await l9(r,t,!0,!1)}async function l9(e,t,r,n){let i,a=await sI(e.localStore,iA(t)),o=a.targetId,s=e.sharedClientState.addLocalQueryTarget(o,r);return n&&(i=await ue(e,t,o,"current"===s,a.resumeToken)),e.isPrimaryClient&&r&&lf(e.remoteStore,a),i}async function ue(e,t,r,n,i){e.pu=(t,r,n)=>(async function(e,t,r,n){let i=t.view.ru(r);i.Ss&&(i=await sC(e.localStore,t.query,!1).then(({documents:e})=>t.view.ru(e,i)));let a=n&&n.targetChanges.get(t.targetId),o=n&&null!=n.targetMismatches.get(t.targetId),s=t.view.applyChanges(i,e.isPrimaryClient,a,o);return ud(e,t.targetId,s.au),s.snapshot})(e,t,r,n);let a=await sC(e.localStore,t,!0),o=new l2(t,a.ks),s=o.ru(a.documents),l=aI.createSynthesizedTargetChangeForCurrentChange(r,n&&"Offline"!==e.onlineState,i),u=o.applyChanges(s,e.isPrimaryClient,l);ud(e,r,u.au);let c=new l3(t,r,o);return e.Tu.set(t,c),e.Iu.has(r)?e.Iu.get(r).push(t):e.Iu.set(r,[t]),u.snapshot}async function ut(e,t,r){let n=e.Tu.get(t),i=e.Iu.get(n.targetId);i.length>1?(e.Iu.set(n.targetId,i.filter(e=>!iD(e,t))),e.Tu.delete(t)):e.isPrimaryClient?(e.sharedClientState.removeLocalQueryTarget(n.targetId),e.sharedClientState.isActiveQueryTarget(n.targetId)||await sA(e.localStore,n.targetId,!1).then(()=>{e.sharedClientState.clearQueryState(n.targetId),r&&ld(e.remoteStore,n.targetId),uh(e,n.targetId)}).catch(t0)):(uh(e,n.targetId),await sA(e.localStore,n.targetId,!0))}async function ur(e,t){let r=e.Tu.get(t),n=e.Iu.get(r.targetId);e.isPrimaryClient&&1===n.length&&(e.sharedClientState.removeLocalQueryTarget(r.targetId),ld(e.remoteStore,r.targetId))}async function un(e,t,r){let n=uA(e);try{var i,a;let e,o,s,l,u,c=await (i=n.localStore,s=tB.now(),l=t.reduce((e,t)=>e.add(t.key),iG()),i.persistence.runTransaction("Locally write mutations","readwrite",r=>{let n=iV,a=iG();return i.xs.getEntries(r,l).next(e=>{(n=e).forEach((e,t)=>{t.isValidDocument()||(a=a.add(e))})}).next(()=>i.localDocuments.getOverlayedDocuments(r,n)).next(n=>{e=n;let a=[];for(let r of t){let t=function(e,t){let r=null;for(let n of e.fieldTransforms){let e=t.data.field(n.field),i=iX(n.transform,e||null);null!=i&&(null===r&&(r=n1.empty()),r.set(n.field,i))}return r||null}(r,e.get(r.key).overlayedDocument);null!=t&&a.push(new ao(r.key,t,function e(t){let r=[];return na(t.fields,(t,n)=>{let i=new tC([t]);if(nW(n)){let t=e(n.mapValue).fields;if(0===t.length)r.push(i);else for(let e of t)r.push(i.child(e))}else r.push(i)}),new nd(r)}(t.value.mapValue),i9.exists(!0)))}return i.mutationQueue.addMutationBatch(r,s,a,t)}).next(t=>{o=t;let n=t.applyToLocalDocumentSet(e,a);return i.documentOverlayCache.saveOverlays(r,t.batchId,n)})}).then(()=>({batchId:o.batchId,changes:iz(e)})));n.sharedClientState.addPendingMutation(c.batchId),a=c.batchId,(u=n.du[n.currentUser.toKey()])||(u=new ns(tx)),u=u.insert(a,r),n.du[n.currentUser.toKey()]=u,await ug(n,c.changes),await lO(n.remoteStore)}catch(t){let e=lL(t,"Failed to persist write");r.reject(e)}}async function ui(e,t){var r;try{let n,i,a=await (r=e.localStore,n=t.snapshotVersion,i=r.vs,r.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{let a=r.xs.newChangeBuffer({trackRemovals:!0});i=r.vs;let o=[];t.targetChanges.forEach((a,s)=>{var l;let u=i.get(s);if(!u)return;o.push(r.li.removeMatchingKeys(e,a.removedDocuments,s).next(()=>r.li.addMatchingKeys(e,a.addedDocuments,s)));let c=u.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?c=c.withResumeToken(ng.EMPTY_BYTE_STRING,tU.min()).withLastLimboFreeSnapshotVersion(tU.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,n)),i=i.insert(s,c),l=c,(0===u.resumeToken.approximateByteSize()||l.snapshotVersion.toMicroseconds()-u.snapshotVersion.toMicroseconds()>=3e8||a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size>0)&&o.push(r.li.updateTargetData(e,c))});let s=iV,l=iG();if(t.documentUpdates.forEach(n=>{t.resolvedLimboDocuments.has(n)&&o.push(r.persistence.referenceDelegate.updateLimboDocument(e,n))}),o.push(sT(e,a,t.documentUpdates).next(e=>{s=e.Bs,l=e.Ls})),!n.isEqual(tU.min())){let t=r.li.getLastRemoteSnapshotVersion(e).next(t=>r.li.setTargetsMetadata(e,e.currentSequenceNumber,n));o.push(t)}return t1.waitFor(o).next(()=>a.apply(e)).next(()=>r.localDocuments.getLocalViewOfDocuments(e,s,l)).next(()=>s)}).then(e=>(r.vs=i,e)));t.targetChanges.forEach((t,r)=>{let n=e.Au.get(r);n&&(tl(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1,22616),t.addedDocuments.size>0?n.hu=!0:t.modifiedDocuments.size>0?tl(n.hu,14607):t.removedDocuments.size>0&&(tl(n.hu,42227),n.hu=!1))}),await ug(e,a,t)}catch(e){await t0(e)}}function ua(e,t,r){var n;if(e.isPrimaryClient&&0===r||!e.isPrimaryClient&&1===r){let r,i=[];e.Tu.forEach((e,r)=>{let n=r.view.va(t);n.snapshot&&i.push(n.snapshot)}),(n=e.eventManager).onlineState=t,r=!1,n.queries.forEach((e,n)=>{for(let e of n.ba)e.va(t)&&(r=!0)}),r&&lW(n),i.length&&e.Pu.J_(i),e.onlineState=t,e.isPrimaryClient&&e.sharedClientState.setOnlineState(t)}}async function uo(e,t,r){e.sharedClientState.updateQueryState(t,"rejected",r);let n=e.Au.get(t),i=n&&n.key;if(i){let r=new ns(tk.comparator);r=r.insert(i,n2.newNoDocument(i,tU.min()));let n=iG().add(i),a=new aT(tU.min(),new Map,new ns(tx),r,n);await ui(e,a),e.Ru=e.Ru.remove(i),e.Au.delete(t),up(e)}else await sA(e.localStore,t,!1).then(()=>uh(e,t,r)).catch(t0)}async function us(e,t){var r;let n=t.batch.batchId;try{let i=await (r=e.localStore,r.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{let n,i,a,o=t.batch.keys(),s=r.xs.newChangeBuffer({trackRemovals:!0});return(i=(n=t.batch).keys(),a=t1.resolve(),i.forEach(r=>{a=a.next(()=>s.getEntry(e,r)).next(e=>{let i=t.docVersions.get(r);tl(null!==i,48541),0>e.version.compareTo(i)&&(n.applyToRemoteDocument(e,t),e.isValidDocument()&&(e.setReadTime(t.commitVersion),s.addEntry(e)))})}),a.next(()=>r.mutationQueue.removeMutationBatch(e,n))).next(()=>s.apply(e)).next(()=>r.mutationQueue.performConsistencyCheck(e)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(e,o,t.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=iG();for(let r=0;r<e.mutationResults.length;++r)e.mutationResults[r].transformResults.length>0&&(t=t.add(e.batch.mutations[r].key));return t}(t))).next(()=>r.localDocuments.getDocuments(e,o))}));uc(e,n,null),uu(e,n),e.sharedClientState.updateMutationState(n,"acknowledged"),await ug(e,i)}catch(e){await t0(e)}}async function ul(e,t,r){var n;try{let i=await (n=e.localStore,n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(tl(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))}));uc(e,t,r),uu(e,t),e.sharedClientState.updateMutationState(t,"rejected",r),await ug(e,i)}catch(e){await t0(e)}}function uu(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function uc(e,t,r){let n=e.du[e.currentUser.toKey()];if(n){let i=n.get(t);i&&(r?i.reject(r):i.resolve(),n=n.remove(t)),e.du[e.currentUser.toKey()]=n}}function uh(e,t,r=null){for(let n of(e.sharedClientState.removeLocalQueryTarget(t),e.Iu.get(t)))e.Tu.delete(n),r&&e.Pu.yu(n,r);e.Iu.delete(t),e.isPrimaryClient&&e.Vu.Gr(t).forEach(t=>{e.Vu.containsKey(t)||uf(e,t)})}function uf(e,t){e.Eu.delete(t.path.canonicalString());let r=e.Ru.get(t);null!==r&&(ld(e.remoteStore,r),e.Ru=e.Ru.remove(t),e.Au.delete(r),up(e))}function ud(e,t,r){for(let n of r)n instanceof l0?(e.Vu.addReference(n.key,t),function(e,t){let r=t.key,n=r.path.canonicalString();e.Ru.get(r)||e.Eu.has(n)||(tr(l6,"New document in limbo: "+r),e.Eu.add(n),up(e))}(e,n)):n instanceof l1?(tr(l6,"Document no longer in limbo: "+n.key),e.Vu.removeReference(n.key,t),e.Vu.containsKey(n.key)||uf(e,n.key)):to(19791,{wu:n})}function up(e){for(;e.Eu.size>0&&e.Ru.size<e.maxConcurrentLimboResolutions;){let t=e.Eu.values().next().value;e.Eu.delete(t);let r=new tk(tI.fromString(t)),n=e.fu.next();e.Au.set(n,new l5(r)),e.Ru=e.Ru.insert(r,n),lf(e.remoteStore,new a9(iA(i_(r.path)),n,"TargetPurposeLimboResolution",ro.ce))}}async function ug(e,t,r){let n=[],i=[],a=[];e.Tu.isEmpty()||(e.Tu.forEach((o,s)=>{a.push(e.pu(s,t,r).then(t=>{if((t||r)&&e.isPrimaryClient){let n=t?!t.fromCache:r?.targetChanges.get(s.targetId)?.current;e.sharedClientState.updateQueryState(s.targetId,n?"current":"not-current")}if(t){n.push(t);let e=sb.Es(s.targetId,t);i.push(e)}}))}),await Promise.all(a),e.Pu.J_(n),await async function(e,t){try{await e.persistence.runTransaction("notifyLocalViewChanges","readwrite",r=>t1.forEach(t,t=>t1.forEach(t.Ts,n=>e.persistence.referenceDelegate.addReference(r,t.targetId,n)).next(()=>t1.forEach(t.Is,n=>e.persistence.referenceDelegate.removeReference(r,t.targetId,n)))))}catch(e){if(!t7(e))throw e;tr(sE,"Failed to update sequence numbers: "+e)}for(let r of t){let t=r.targetId;if(!r.fromCache){let r=e.vs.get(t),n=r.snapshotVersion,i=r.withLastLimboFreeSnapshotVersion(n);e.vs=e.vs.insert(t,i)}}}(e.localStore,i))}async function um(e,t){if(!e.currentUser.isEqual(t)){tr(l6,"User change. New user:",t.toKey());let r=await s_(e.localStore,t);e.currentUser=t,e.mu.forEach(e=>{e.forEach(e=>{e.reject(new tc(tu.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.mu.clear(),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await ug(e,r.Ns)}}function uy(e,t){let r=e.Au.get(t);if(r&&r.hu)return iG().add(r.key);{let r=iG(),n=e.Iu.get(t);if(!n)return r;for(let t of n){let n=e.Tu.get(t);r=r.unionWith(n.view.nu)}return r}}async function uv(e,t){let r=await sC(e.localStore,t.query,!0),n=t.view.cu(r);return e.isPrimaryClient&&ud(e,t.targetId,n.au),n}async function ub(e,t){return sP(e.localStore,t).then(t=>ug(e,t))}async function uw(e,t,r,n){var i,a;let o,s=await (i=e.localStore,o=i.mutationQueue,i.persistence.runTransaction("Lookup mutation documents","readonly",e=>o.Xn(e,t).next(t=>t?i.localDocuments.getDocuments(e,t):t1.resolve(null))));null!==s?("pending"===r?await lO(e.remoteStore):"acknowledged"===r||"rejected"===r?(uc(e,t,n||null),uu(e,t),a=e.localStore,a.mutationQueue.nr(t)):to(6720,"Unknown batchState",{bu:r}),await ug(e,s)):tr(l6,"Cannot apply mutation batch with id: "+t)}async function ux(e,t){if(uI(e),uA(e),!0===t&&!0!==e.gu){let t=e.sharedClientState.getAllActiveQueryTargets(),r=await uE(e,t.toArray());for(let t of(e.gu=!0,await lN(e.remoteStore,!0),r))lf(e.remoteStore,t)}else if(!1===t&&!1!==e.gu){let t=[],r=Promise.resolve();e.Iu.forEach((n,i)=>{e.sharedClientState.isLocalQueryTarget(i)?t.push(i):r=r.then(()=>(uh(e,i),sA(e.localStore,i,!0))),ld(e.remoteStore,i)}),await r,await uE(e,t),e.Au.forEach((t,r)=>{ld(e.remoteStore,r)}),e.Vu.zr(),e.Au=new Map,e.Ru=new ns(tk.comparator),e.gu=!1,await lN(e.remoteStore,!1)}}async function uE(e,t,r){let n=[],i=[];for(let r of t){let t,a=e.Iu.get(r);if(a&&0!==a.length)for(let r of(t=await sI(e.localStore,iA(a[0])),a)){let t=e.Tu.get(r),n=await uv(e,t);n.snapshot&&i.push(n.snapshot)}else{let n=await sk(e.localStore,r);t=await sI(e.localStore,n),await ue(e,uS(n),r,!1,t.resumeToken)}n.push(t)}return e.Pu.J_(i),n}function uS(e){var t,r,n,i,a;return t=e.path,r=e.collectionGroup,n=e.orderBy,i=e.filters,a=e.limit,new iS(t,r,n,i,a,"F",e.startAt,e.endAt)}function u_(e){return e.localStore.persistence.hs()}async function uO(e,t,r,n){if(e.gu)return void tr(l6,"Ignoring unexpected query state notification.");let i=e.Iu.get(t);if(i&&i.length>0)switch(r){case"current":case"not-current":{let n=await sP(e.localStore,iR(i[0])),a=aT.createSynthesizedRemoteEventForCurrentChange(t,"current"===r,ng.EMPTY_BYTE_STRING);await ug(e,n,a);break}case"rejected":await sA(e.localStore,t,!0),uh(e,t,n);break;default:to(64155,r)}}async function uT(e,t,r){let n=uI(e);if(n.gu){for(let e of t){if(n.Iu.has(e)&&n.sharedClientState.isActiveQueryTarget(e)){tr(l6,"Adding an already active target "+e);continue}let t=await sk(n.localStore,e),r=await sI(n.localStore,t);await ue(n,uS(t),r.targetId,!1,r.resumeToken),lf(n.remoteStore,r)}for(let e of r)n.Iu.has(e)&&await sA(n.localStore,e,!1).then(()=>{ld(n.remoteStore,e),uh(n,e)}).catch(t0)}}function uI(e){return e.remoteStore.remoteSyncer.applyRemoteEvent=ui.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uy.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=uo.bind(null,e),e.Pu.J_=lG.bind(null,e.eventManager),e.Pu.yu=lH.bind(null,e.eventManager),e}function uA(e){return e.remoteStore.remoteSyncer.applySuccessfulWrite=us.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ul.bind(null,e),e}class uC{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=s9(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){var t,r;return t=this.persistence,r=new sx,new sS(t,r,e.initialUser,this.serializer)}Cu(e){return new su(sh.Vi,this.serializer)}Du(e){return new sW}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}uC.provider={build:()=>new uC};class uk extends uC{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){return tl(this.persistence.referenceDelegate instanceof sf,46915),new oX(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Cu(e){let t=void 0!==this.cacheSizeBytes?oB.withCacheSize(this.cacheSizeBytes):oB.DEFAULT;return new su(e=>sf.Vi(e,t),this.serializer)}}class uP extends uC{constructor(e,t,r){super(),this.xu=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.xu.initialize(this,e),await uA(this.xu.syncEngine),await lO(this.xu.remoteStore),await this.persistence.zi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}vu(e){var t,r;return t=this.persistence,r=new sx,new sS(t,r,e.initialUser,this.serializer)}Fu(e,t){return new oX(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Mu(e,t){let r=new ra(t,this.persistence);return new ri(e.asyncQueue,r)}Cu(e){let t=sv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?oB.withCacheSize(this.cacheSizeBytes):oB.DEFAULT;return new sy(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,s8(),s7(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(e){return new sW}}class uD extends uP{constructor(e,t){super(e,t,!1),this.xu=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);let t=this.xu.syncEngine;this.sharedClientState instanceof sH&&(this.sharedClientState.syncEngine={So:uw.bind(null,t),Do:uO.bind(null,t),Co:uT.bind(null,t),hs:u_.bind(null,t),bo:ub.bind(null,t)},await this.sharedClientState.start()),await this.persistence.zi(async e=>{await ux(this.xu.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())})}Du(e){let t=s8();if(!sH.v(t))throw new tc(tu.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let r=sv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new sH(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class uN{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>ua(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=um.bind(null,this.syncEngine),await lN(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new lz}createDatastore(e){var t;let r=s9(e.databaseInfo.databaseId),n=new s4(e.databaseInfo);return t=e.authCredentials,new lo(t,e.appCheckCredentials,n,r)}createRemoteStore(e){var t,r;return t=this.localStore,r=this.datastore,new lu(t,r,e.asyncQueue,e=>ua(this.syncEngine,e,0),sJ.v()?new sJ:new sQ)}createSyncEngine(e,t){var r,n,i,a,o,s;let l;return r=this.localStore,n=this.remoteStore,i=this.eventManager,a=this.sharedClientState,o=e.initialUser,s=e.maxConcurrentLimboResolutions,l=new l4(r,n,i,a,o,s),t&&(l.gu=!0),l}async terminate(){await async function(e){tr(ll,"RemoteStore shutting down."),e.Ea.add(5),await lh(e),e.Aa.shutdown(),e.Va.set("Unknown")}(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}function uj(e,t=10240){let r=0;return{async read(){if(r<e.byteLength){let n={value:e.slice(r,r+t),done:!1};return r+=t,n}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}uN.provider={build:()=>new uN};class uM{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):tn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class uR{constructor(e,t){this.Bu=e,this.serializer=t,this.metadata=new th,this.buffer=new Uint8Array,this.Lu=new TextDecoder("utf-8"),this.ku().then(e=>{e&&e.Ua()?this.metadata.resolve(e.qa.metadata):this.metadata.reject(Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(e?.qa)}`))},e=>this.metadata.reject(e))}close(){return this.Bu.cancel()}async getMetadata(){return this.metadata.promise}async Su(){return await this.getMetadata(),this.ku()}async ku(){let e=await this.Ku();if(null===e)return null;let t=this.Lu.decode(e),r=Number(t);return isNaN(r)&&this.qu(`length string (${t}) is not valid number`),new lY(JSON.parse(await this.Uu(r)),e.length+r)}$u(){return this.buffer.findIndex(e=>123===e)}async Ku(){for(;0>this.$u()&&!await this.Wu(););if(0===this.buffer.length)return null;let e=this.$u();e<0&&this.qu("Reached the end of bundle when a length string is expected.");let t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Uu(e){for(;this.buffer.length<e;)await this.Wu()&&this.qu("Reached the end of bundle when more is expected.");let t=this.Lu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}qu(e){throw this.Bu.cancel(),Error(`Invalid bundle format: ${e}`)}async Wu(){let e=await this.Bu.read();if(!e.done){let t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class uL{constructor(e,t){this.bundleData=e,this.serializer=t,this.cursor=0,this.elements=[];let r=this.Su();if(!r||!r.Ua())throw Error(`The first element of the bundle is not a metadata object, it is
         ${JSON.stringify(r?.qa)}`);this.metadata=r;do null!==(r=this.Su())&&this.elements.push(r);while(null!==r)}getMetadata(){return this.metadata}Qu(){return this.elements}Su(){if(this.cursor===this.bundleData.length)return null;let e=this.Ku();return new lY(JSON.parse(this.Uu(e)),e)}Uu(e){if(this.cursor+e>this.bundleData.length)throw new tc(tu.INTERNAL,"Reached the end of bundle when more is expected.");return this.bundleData.slice(this.cursor,this.cursor+=e)}Ku(){let e=this.cursor,t=this.cursor;for(;t<this.bundleData.length;){if("{"===this.bundleData[t]){if(t===e)throw Error("First character is a bracket and not a number");return this.cursor=t,Number(this.bundleData.slice(e,t))}t++}throw Error("Reached the end of bundle when more is expected.")}}class uF{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new tc(tu.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let t=await async function(e,t){let r={documents:t.map(t=>aG(e.serializer,t))},n=await e.jo("BatchGetDocuments",e.serializer.databaseId,tI.emptyPath(),r,t.length),i=new Map;n.forEach(t=>{var r;let n,a,o,s,l,u,c=(r=e.serializer,"found"in t?(tl(!!t.found,43571),t.found.name,t.found.updateTime,n=aH(r,t.found.name),a=az(t.found.updateTime),o=t.found.createTime?az(t.found.createTime):tU.min(),s=new n1({mapValue:{fields:t.found.fields}}),n2.newFoundDocument(n,a,o,s)):"missing"in t?(tl(!!t.missing,3894),tl(!!t.readTime,22933),l=aH(r,t.missing),u=az(t.readTime),n2.newNoDocument(l,u)):to(7234,{result:t}));i.set(c.key.toString(),c)});let a=[];return t.forEach(e=>{let t=i.get(e.toString());tl(!!t,55234,{key:e}),a.push(t)}),a}(this.datastore,e);return t.forEach(e=>this.recordVersion(e)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new ac(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((e,t)=>{let r=tk.fromPath(t);this.mutations.push(new ah(r,this.precondition(r)))}),await async function(e,t){let r={writes:t.map(t=>a0(e.serializer,t))};await e.Wo("Commit",e.serializer.databaseId,tI.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw to(50498,{Gu:e.constructor.name});t=tU.min()}let r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new tc(tu.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){let t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(tU.min())?i9.exists(!1):i9.updateTime(t):i9.none()}preconditionForUpdate(e){let t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(tU.min()))throw new tc(tu.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return i9.updateTime(t)}return i9.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class uV{constructor(e,t,r,n,i){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=n,this.deferred=i,this.zu=r.maxAttempts,this.M_=new le(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Hu()}Hu(){this.M_.p_(async()=>{let e=new uF(this.datastore),t=this.Ju(e);t&&t.then(t=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(t)}).catch(e=>{this.Zu(e)}))}).catch(e=>{this.Zu(e)})})}Ju(e){try{let t=this.updateFunction(e);return!rs(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Zu(e){this.zu>0&&this.Xu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Hu(),Promise.resolve()))):this.deferred.reject(e)}Xu(e){if("FirebaseError"===e?.name){let t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!ay(t)}return!1}}let uB="FirestoreClient";class uU{constructor(e,t,r,n,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this._databaseInfo=n,this.user=e7.UNAUTHENTICATED,this.clientId=tw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async e=>{tr(uB,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(r,e=>(tr(uB,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new th;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){let t=lL(r,"Failed to shutdown persistence");e.reject(t)}}),e.promise}}async function uz(e,t){e.asyncQueue.verifyOperationInProgress(),tr(uB,"Initializing OfflineComponentProvider");let r=e.configuration;await t.initialize(r);let n=r.initialUser;e.setCredentialChangeListener(async e=>{n.isEqual(e)||(await s_(t.localStore,e),n=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function uq(e,t){e.asyncQueue.verifyOperationInProgress();let r=await u$(e);tr(uB,"Initializing OnlineComponentProvider"),await t.initialize(r,e.configuration),e.setCredentialChangeListener(e=>lD(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,r)=>lD(t.remoteStore,r)),e._onlineComponents=t}async function u$(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){tr(uB,"Using user provided OfflineComponentProvider");try{await uz(e,e._uninitializedComponentsProvider._offline)}catch(t){if(!("FirebaseError"===t.name?t.code===tu.FAILED_PRECONDITION||t.code===tu.UNIMPLEMENTED:!("u">typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code))throw t;ti("Error using user provided cache. Falling back to memory cache: "+t),await uz(e,new uC)}}else tr(uB,"Using default OfflineComponentProvider"),await uz(e,new uk(void 0));return e._offlineComponents}async function uK(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(tr(uB,"Using user provided OnlineComponentProvider"),await uq(e,e._uninitializedComponentsProvider._online)):(tr(uB,"Using default OnlineComponentProvider"),await uq(e,new uN))),e._onlineComponents}function uG(e){return u$(e).then(e=>e.localStore)}function uH(e){return uK(e).then(e=>e.syncEngine)}function uW(e){return uK(e).then(e=>e.datastore)}async function uQ(e){let t=await uK(e),r=t.eventManager;return r.onListen=l8.bind(null,t.syncEngine),r.onUnlisten=ut.bind(null,t.syncEngine),r.onFirstRemoteStoreListen=l7.bind(null,t.syncEngine),r.onLastRemoteStoreUnlisten=ur.bind(null,t.syncEngine),r}function uY(e,t,r={}){let n=new th;return e.asyncQueue.enqueueAndForget(async()=>{var i,a;let o,s;return i=await uQ(e),a=e.asyncQueue,o=new uM({next:e=>{o.Nu(),a.enqueueAndForget(()=>lK(i,s));let l=e.docs.has(t);!l&&e.fromCache?n.reject(new tc(tu.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&e.fromCache&&r&&"server"===r.source?n.reject(new tc(tu.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):n.resolve(e)},error:e=>n.reject(e)}),l$(i,s=new lQ(i_(t.path),o,{includeMetadataChanges:!0,Ka:!0}))}),n.promise}function uJ(e,t,r={}){let n=new th;return e.asyncQueue.enqueueAndForget(async()=>{var i,a;let o,s;return i=await uQ(e),a=e.asyncQueue,s=new lQ(t,o=new uM({next:e=>{o.Nu(),a.enqueueAndForget(()=>lK(i,s)),e.fromCache&&"server"===r.source?n.reject(new tc(tu.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):n.resolve(e)},error:e=>n.reject(e)}),{includeMetadataChanges:!0,Ka:!0}),l$(i,s)}),n.promise}function uX(e){let t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}let uZ=new Map,u0="firestore.googleapis.com";class u1{constructor(e){if(void 0===e.host){if(void 0!==e.ssl)throw new tc(tu.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=u0,this.ssl=!0}else this.host=e.host,this.ssl=e.ssl??!0;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=0x2800000;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new tc(tu.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,r,n){if(!0===t&&!0===n)throw new tc(tu.INVALID_ARGUMENT,`${e} and ${r} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=uX(e.experimentalLongPollingOptions??{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new tc(tu.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new tc(tu.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new tc(tu.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){var t,r;return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,r=e.experimentalLongPollingOptions,t.timeoutSeconds===r.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class u2{constructor(e,t,r,n){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=n,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new u1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new tc(tu.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new tc(tu.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new u1(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new td;switch(e.type){case"firstParty":return new ty(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new tc(tu.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){let e;return(e=uZ.get(this))&&(tr("ComponentProvider","Removing Datastore"),uZ.delete(this),e.terminate()),Promise.resolve()}}class u6{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new u6(this.firestore,e,this._query)}}class u3{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new u5(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new u3(this.firestore,e,this._key)}toJSON(){return{type:u3._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,r){if(tV(t,u3._jsonSchema))return new u3(e,r||null,new tk(tI.fromString(t.referencePath)))}}u3._jsonSchemaVersion="firestore/documentReference/1.0",u3._jsonSchema={type:tF("string",u3._jsonSchemaVersion),referencePath:tF("string")};class u5 extends u6{constructor(e,t,r){super(e,t,i_(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new u3(this.firestore,null,new tk(e))}withConverter(e){return new u5(this.firestore,e,this._path)}}function u4(e,t,...r){if(e=H(e),tP("collection","path",t),e instanceof u2){let n=tI.fromString(t,...r);return tN(n),new u5(e,null,n)}{if(!(e instanceof u3||e instanceof u5))throw new tc(tu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=e._path.child(tI.fromString(t,...r));return tN(n),new u5(e.firestore,null,n)}}function u8(e,t,...r){if(e=H(e),1==arguments.length&&(t=tw.newId()),tP("doc","path",t),e instanceof u2){let n=tI.fromString(t,...r);return tD(n),new u3(e,null,new tk(n))}{if(!(e instanceof u3||e instanceof u5))throw new tc(tu.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=e._path.child(tI.fromString(t,...r));return tD(n),new u3(e.firestore,e instanceof u5?e.converter:null,new tk(n))}}function u7(e,t){return e=H(e),t=H(t),e instanceof u6&&t instanceof u6&&e.firestore===t.firestore&&iD(e._query,t._query)&&e.converter===t.converter}let u9="AsyncQueue";class ce{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new le(this,"async_queue_retry"),this._c=()=>{let e=s7();e&&tr(u9,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=s7();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let t=s7();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let t=new th;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(0!==this.Yu.length){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!t7(e))throw e;tr(u9,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,tn("INTERNAL UNHANDLED ERROR: ",ct(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,r){this.uc(),this.oc.indexOf(e)>-1&&(t=0);let n=lR.createAndSchedule(this,e,t,r,e=>this.hc(e));return this.tc.push(n),n}uc(){this.nc&&to(47125,{Pc:ct(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{for(let t of(this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs),this.tc))if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){let t=this.tc.indexOf(e);this.tc.splice(t,1)}}function ct(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}class cr{constructor(){this._progressObserver={},this._taskCompletionResolver=new th,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class cn extends u2{constructor(e,t,r,n){super(e,t,r,n),this.type="firestore",this._queue=new ce,this._persistenceKey=n?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new ce(e),this._firestoreClient=void 0,await e}}}function ci(e,t){let r=eA("object"==typeof e?e:eU(),"firestore").getImmediate({identifier:"string"==typeof e?e:t||nA});if(!r._initialized){let e=(e=>{let t=C()?.emulatorHosts?.[e];if(!t)return;let r=t.lastIndexOf(":");if(r<=0||r+1===t.length)throw Error(`Invalid host ${t} with no separate hostname and port!`);let n=parseInt(t.substring(r+1),10);return"["===t[0]?[t.substring(1,r-1),n]:[t.substring(0,r),n]})("firestore");e&&function(e,t,r,n={}){e=tR(e,u2);let i=D(t),a=e._getSettings(),o={...a,emulatorOptions:e._getEmulatorOptions()},s=`${t}:${r}`;i&&(N(`https://${s}`),function(e,t){if("u"<typeof window||"u"<typeof document||!D(window.location.host)||j[e]===t||j[e]||M)return;function r(e){return`__firebase__banner__${e}`}j[e]=t;let n="__firebase__banner",i=function(){let e={prod:[],emulator:[]};for(let t of Object.keys(j))j[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function a(){let e,t,a=(e=document.getElementById(n),t=!1,e||((e=document.createElement("div")).setAttribute("id",n),t=!0),{created:t,element:e}),o=r("text"),s=document.getElementById(o)||document.createElement("span"),l=r("learnmore"),u=document.getElementById(l)||document.createElement("a"),c=r("preprendIcon"),h=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(a.created){let e,t=a.element;t.style.display="flex",t.style.background="#7faaf0",t.style.position="fixed",t.style.bottom="5px",t.style.left="5px",t.style.padding=".5em",t.style.borderRadius="5px",t.style.alignItems="center",u.setAttribute("id",l),u.innerText="Learn more",u.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",u.setAttribute("target","__blank"),u.style.paddingLeft="5px",u.style.textDecoration="underline";let r=((e=document.createElement("span")).style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{let e;M=!0,(e=document.getElementById(n))&&e.remove()},e);h.setAttribute("width","24"),h.setAttribute("id",c),h.setAttribute("height","24"),h.setAttribute("viewBox","0 0 24 24"),h.setAttribute("fill","none"),h.style.marginLeft="-6px",t.append(h,s,u,r),document.body.appendChild(t)}i?(s.innerText="Preview backend disconnected.",h.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(h.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,s.innerText="Preview backend running in this workspace."),s.setAttribute("id",o)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}("Firestore",!0)),a.host!==u0&&a.host!==s&&ti("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let l={...a,host:s,ssl:i,emulatorOptions:n};if(!K(l,o)&&(e._setSettings(l),n.mockUserToken)){let t,r;if("string"==typeof n.mockUserToken)t=n.mockUserToken,r=e7.MOCK_USER;else{t=function(e,t){if(e.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let r=t||"demo-project",n=e.iat||0,i=e.sub||e.user_id;if(!i)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");let a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:n,exp:n+3600,auth_time:n,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...e};return[T(JSON.stringify({alg:"none",type:"JWT"})),T(JSON.stringify(a)),""].join(".")}(n.mockUserToken,e._app?.options.projectId);let i=n.mockUserToken.sub||n.mockUserToken.user_id;if(!i)throw new tc(tu.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");r=new e7(i)}e._authCredentials=new tp(new tf(t,r))}}(r,...e)}return r}function ca(e){if(e._terminated)throw new tc(tu.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||function(e){var t,r,n,i,a;let o,s=e._freezeSettings(),l=(t=e._databaseId,r=e._app?.options.appId||"",n=e._persistenceKey,i=e._app?.options.apiKey,new nI(t,r,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,uX(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,i));e._componentsProvider||s.localCache?._offlineComponentProvider&&s.localCache?._onlineComponentProvider&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new uU(e._authCredentials,e._appCheckCredentials,e._queue,l,e._componentsProvider&&(a=e._componentsProvider,o=a?._online.build(),{_offline:a?._offline.build(o),_online:o}))}(e),e._firestoreClient}function co(e,t){let r=ca(e=tR(e,cn)),n=new cr;return function(e,t,r,n){var i;let a=(i=s9(t),new uR(function(e,t){if(e instanceof Uint8Array)return uj(e,void 0);if(e instanceof ArrayBuffer)return uj(new Uint8Array(e),void 0);if(e instanceof ReadableStream)return e.getReader();throw Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof r?aw().encode(r):r),i));e.asyncQueue.enqueueAndForget(async()=>{var t;(async function(e,t,r){try{var n,i;let a,o=await t.getMetadata();if(await (n=e.localStore,a=az(o.createTime),n.persistence.runTransaction("hasNewerBundle","readonly",e=>n.Pi.getBundleMetadata(e,o.id)).then(e=>!!e&&e.createTime.compareTo(a)>=0)))return await t.close(),r._completeWith({taskState:"Success",documentsLoaded:o.totalDocuments,bytesLoaded:o.totalBytes,totalDocuments:o.totalDocuments,totalBytes:o.totalBytes}),Promise.resolve(new Set);r._updateProgress(lZ(o));let s=new lX(o,t.serializer),l=await t.Su();for(;l;){let e=await s.Ga(l);e&&r._updateProgress(e),l=await t.Su()}let u=await s.ja(e.localStore);return await ug(e,u.Ja,void 0),await (i=e.localStore,i.persistence.runTransaction("Save bundle","readwrite",e=>i.Pi.saveBundleMetadata(e,o))),r._completeWith(u.progress),Promise.resolve(u.Ha)}catch(e){return ti(l6,`Loading bundle failed with ${e}`),r._failWith(e),Promise.resolve(new Set)}})(t=await uH(e),a,n).then(e=>{t.sharedClientState.notifyBundleLoaded(e)})})}(r,e._databaseId,t,n),n}class cs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new cs(ng.fromBase64String(e))}catch(e){throw new tc(tu.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new cs(ng.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:cs._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(tV(e,cs._jsonSchema))return cs.fromBase64String(e.bytes)}}cs._jsonSchemaVersion="firestore/bytes/1.0",cs._jsonSchema={type:tF("string",cs._jsonSchemaVersion),bytes:tF("string")};class cl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new tc(tu.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tC(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class cu{constructor(e){this._methodName=e}}class cc{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new tc(tu.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new tc(tu.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return tx(this._lat,e._lat)||tx(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:cc._jsonSchemaVersion}}static fromJSON(e){if(tV(e,cc._jsonSchema))return new cc(e.latitude,e.longitude)}}cc._jsonSchemaVersion="firestore/geoPoint/1.0",cc._jsonSchema={type:tF("string",cc._jsonSchemaVersion),latitude:tF("number"),longitude:tF("number")};class ch{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}(this._values,e._values)}toJSON(){return{type:ch._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(tV(e,ch._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new ch(e.vectorValues);throw new tc(tu.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ch._jsonSchemaVersion="firestore/vectorValue/1.0",ch._jsonSchema={type:tF("string",ch._jsonSchemaVersion),vectorValues:tF("object")};let cf=/^__.*__$/;class cd{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ao(e,this.data,this.fieldMask,t,this.fieldTransforms):new aa(e,this.data,t,this.fieldTransforms)}}class cp{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ao(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function cg(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw to(40011,{dataSource:e})}}class cm{constructor(e,t,r,n,i,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=n,void 0===i&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new cm({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){let t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){let t=this.path?.child(e),r=this.contextWith({path:t,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return cD(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(0===e.length)throw this.createError("Document fields must not be empty");if(cg(this.dataSource)&&cf.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class cy{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||s9(e)}createContext(e,t,r,n=!1){return new cm({dataSource:e,methodName:t,targetDoc:r,path:tC.emptyPath(),arrayElement:!1,hasConverter:n},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cv(e){let t=e._freezeSettings(),r=s9(e._databaseId);return new cy(e._databaseId,!!t.ignoreUndefinedProperties,r)}function cb(e,t,r,n,i,a={}){let o,s,l=e.createContext(a.merge||a.mergeFields?2:0,t,r,i);cA("Data must be an object, but it was:",l,n);let u=cT(n,l);if(a.merge)o=new nd(l.fieldMask),s=l.fieldTransforms;else if(a.mergeFields){let e=[];for(let n of a.mergeFields){let i=cC(t,n,r);if(!l.contains(i))throw new tc(tu.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);cN(e,i)||e.push(i)}o=new nd(e),s=l.fieldTransforms.filter(e=>o.covers(e.field))}else o=null,s=l.fieldTransforms;return new cd(new n1(u),o,s)}class cw extends cu{_toFieldTransform(e){if(2!==e.dataSource)throw 1===e.dataSource?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof cw}}class cx extends cu{constructor(e,t){super(e),this.Vc=t}_toFieldTransform(e){let t=new i3(e.serializer,iY(e.serializer,this.Vc));return new i8(e.path,t)}isEqual(e){return e instanceof cx&&this.Vc===e.Vc}}function cE(e,t,r,n){let i=e.createContext(1,t,r);cA("Data must be an object, but it was:",i,n);let a=[],o=n1.empty();return na(n,(e,n)=>{let s=cP(t,e,r);n=H(n);let l=i.childContextForFieldPath(s);if(n instanceof cw)a.push(s);else{let e=cO(n,l);null!=e&&(a.push(s),o.set(s,e))}}),new cp(o,new nd(a),i.fieldTransforms)}function cS(e,t,r,n,i,a){let o=e.createContext(1,t,r),s=[cC(t,n,r)],l=[i];if(a.length%2!=0)throw new tc(tu.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let e=0;e<a.length;e+=2)s.push(cC(t,a[e])),l.push(a[e+1]);let u=[],c=n1.empty();for(let e=s.length-1;e>=0;--e)if(!cN(u,s[e])){let t=s[e],r=l[e];r=H(r);let n=o.childContextForFieldPath(t);if(r instanceof cw)u.push(t);else{let e=cO(r,n);null!=e&&(u.push(t),c.set(t,e))}}return new cp(c,new nd(u),o.fieldTransforms)}function c_(e,t,r,n=!1){return cO(r,e.createContext(n?4:3,t))}function cO(e,t){if(cI(e=H(e)))return cA("Unsupported field value:",t,e),cT(e,t);if(e instanceof cu)return function(e,t){if(!cg(t.dataSource))throw t.createError(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.createError(`${e._methodName}() is not currently supported inside arrays`);let r=e._toFieldTransform(t);r&&t.fieldTransforms.push(r)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.arrayElement&&4!==t.dataSource)throw t.createError("Nested arrays are not supported");let r=[],n=0;for(let i of e){let e=cO(i,t.childContextForArray(n));null==e&&(e={nullValue:"NULL_VALUE"}),r.push(e),n++}return{arrayValue:{values:r}}}return function(e,t){if(null===(e=H(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return iY(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){let r=tB.fromDate(e);return{timestampValue:aB(t.serializer,r)}}if(e instanceof tB){let r=new tB(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:aB(t.serializer,r)}}if(e instanceof cc)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof cs)return{bytesValue:aU(t.serializer,e._byteString)};if(e instanceof u3){let r=t.databaseId,n=e.firestore._databaseId;if(!n.isEqual(r))throw t.createError(`Document reference is for database ${n.projectId}/${n.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:aq(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof ch){var r;return{mapValue:{fields:{[nk]:{stringValue:nN},[nj]:{arrayValue:{values:((r=e)instanceof ch?r.toArray():r).map(e=>{if("number"!=typeof e)throw t.createError("VectorValues must only contain numeric values.");return iW(t.serializer,e)})}}}}}}if(a7(e))return e._toProto(t.serializer);throw t.createError(`Unsupported field value: ${tM(e)}`)}(e,t)}function cT(e,t){let r={};return no(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):na(e,(e,n)=>{let i=cO(n,t.childContextForField(e));null!=i&&(r[e]=i)}),{mapValue:{fields:r}}}function cI(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof tB||e instanceof cc||e instanceof cs||e instanceof u3||e instanceof cu||e instanceof ch||a7(e))}function cA(e,t,r){if(!cI(r)||!tj(r)){let n=tM(r);throw"an object"===n?t.createError(e+" a custom object"):t.createError(e+" "+n)}}function cC(e,t,r){if((t=H(t))instanceof cl)return t._internalPath;if("string"==typeof t)return cP(e,t);throw cD("Field path arguments must be of type string or ",e,!1,void 0,r)}let ck=RegExp("[~\\*/\\[\\]]");function cP(e,t,r){if(t.search(ck)>=0)throw cD(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,r);try{return new cl(...t.split("."))._internalPath}catch(n){throw cD(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,r)}}function cD(e,t,r,n,i){let a=n&&!n.isEmpty(),o=void 0!==i,s=`Function ${t}() called with invalid data`;r&&(s+=" (via `toFirestore()`)"),s+=". ";let l="";return(a||o)&&(l+=" (found",a&&(l+=` in field ${n}`),o&&(l+=` in document ${i}`),l+=")"),new tc(tu.INVALID_ARGUMENT,s+e+l)}function cN(e,t){return e.some(e=>e.isEqual(t))}class cj{convertValue(e,t="none"){switch(nR(e)){case 0:return null;case 1:return e.booleanValue;case 2:return nv(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(nb(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw to(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let r={};return na(e,(e,n)=>{r[e]=this.convertValue(n,t)}),r}convertVectorValue(e){return new ch(e.fields?.[nj].arrayValue?.values?.map(e=>nv(e.doubleValue)))}convertGeoPoint(e){return new cc(nv(e.latitude),nv(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":let r=nO(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(nT(e));default:return null}}convertTimestamp(e){let t=ny(e);return new tB(t.seconds,t.nanos)}convertDocumentKey(e,t){let r=tI.fromString(e);tl(a8(r),9688,{name:e});let n=new nC(r.get(1),r.get(3)),i=new tk(r.popFirst(5));return n.isEqual(t)||tn(`Document ${i} contains a document reference within a different database (${n.projectId}/${n.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}class cM extends cj{constructor(e){super(),this.firestore=e}convertBytes(e){return new cs(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new u3(this.firestore,null,t)}}function cR(e){return new cx("increment",e)}let cL="@firebase/firestore",cF="4.10.0";function cV(e){if("object"!=typeof e||null===e)return!1;for(let t of["next","error","complete"])if(t in e&&"function"==typeof e[t])return!0;return!1}class cB{constructor(e="count",t){this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class cU{constructor(e,t,r){this._userDataWriter=t,this._data=r,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}_fieldsProto(){return new n1({mapValue:{fields:this._data}}).clone().value.mapValue.fields}}class cz{constructor(e,t,r,n,i){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=n,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new u3(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){let e=new cq(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){let t=this._document.data.field(cC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class cq extends cz{data(){return super.data()}}function c$(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new tc(tu.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cK{}class cG extends cK{}function cH(e,t,...r){let n=[];for(let i of(t instanceof cK&&n.push(t),function(e){let t=e.filter(e=>e instanceof cY).length,r=e.filter(e=>e instanceof cW).length;if(t>1||t>0&&r>0)throw new tc(tu.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(r)),n))e=i._apply(e);return e}class cW extends cG{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new cW(e,t,r)}_apply(e){let t=this._parse(e);return hn(e._query,t),new u6(e.firestore,e.converter,ik(e._query,t))}_parse(e){let t=cv(e.firestore);return function(e,t,r,n,i,a,o){let s;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new tc(tu.INVALID_ARGUMENT,`Invalid Query. You can't perform '${a}' queries on documentId().`);if("in"===a||"not-in"===a){hr(o,a);let t=[];for(let r of o)t.push(ht(n,e,r));s={arrayValue:{values:t}}}else s=ht(n,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||hr(o,a),s=c_(r,t,o,"in"===a||"not-in"===a);return n7.create(i,a,s)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function cQ(e,t,r){let n=cC("where",e);return cW._create(n,t,r)}class cY extends cK{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new cY(e,t)}_parse(e){let t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:n9.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let r=e;for(let e of t.getFlattenedFilters())hn(r,e),r=ik(r,e)}(e._query,t),new u6(e.firestore,e.converter,ik(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function cJ(...e){return e.forEach(e=>hi("or",e)),cY._create("or",e)}function cX(...e){return e.forEach(e=>hi("and",e)),cY._create("and",e)}class cZ extends cG{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new cZ(e,t)}_apply(e){var t;let r,n=function(e,t,r){if(null!==e.startAt)throw new tc(tu.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new tc(tu.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new n4(t,r)}(e._query,this._field,this._direction);return new u6(e.firestore,e.converter,(t=e._query,r=t.explicitOrderBy.concat([n]),new iS(t.path,t.collectionGroup,r,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)))}}function c0(e,t="asc"){let r=cC("orderBy",e);return cZ._create(r,t)}class c1 extends cG{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new c1(e,t,r)}_apply(e){return new u6(e.firestore,e.converter,iP(e._query,this._limit,this._limitType))}}function c2(e){return tL("limit",e),c1._create("limit",e,"F")}function c6(e){return tL("limitToLast",e),c1._create("limitToLast",e,"L")}class c3 extends cG{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new c3(e,t,r)}_apply(e){var t;let r=he(e,this.type,this._docOrFields,this._inclusive);return new u6(e.firestore,e.converter,(t=e._query,new iS(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,r,t.endAt)))}}function c5(...e){return c3._create("startAt",e,!0)}function c4(...e){return c3._create("startAfter",e,!1)}class c8 extends cG{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new c8(e,t,r)}_apply(e){var t;let r=he(e,this.type,this._docOrFields,this._inclusive);return new u6(e.firestore,e.converter,(t=e._query,new iS(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,r)))}}function c7(...e){return c8._create("endBefore",e,!1)}function c9(...e){return c8._create("endAt",e,!0)}function he(e,t,r,n){if(r[0]=H(r[0]),r[0]instanceof cz)return function(e,t,r,n,i){if(!n)throw new tc(tu.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${r}().`);let a=[];for(let r of iI(e))if(r.field.isKeyField())a.push(nq(t,n.key));else{let e=n.data.field(r.field);if(n_(e))throw new tc(tu.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+r.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){let e=r.field.canonicalString();throw new tc(tu.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}a.push(e)}return new n6(a,i)}(e._query,e.firestore._databaseId,t,r[0]._document,n);{let i=cv(e.firestore);return function(e,t,r,n,i,a){let o=e.explicitOrderBy;if(i.length>o.length)throw new tc(tu.INVALID_ARGUMENT,`Too many arguments provided to ${n}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let s=[];for(let a=0;a<i.length;a++){let l=i[a];if(o[a].field.isKeyField()){if("string"!=typeof l)throw new tc(tu.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${n}(), but got a ${typeof l}`);if(!iT(e)&&-1!==l.indexOf("/"))throw new tc(tu.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${n}() must be a plain document ID, but '${l}' contains a slash.`);let r=e.path.child(tI.fromString(l));if(!tk.isDocumentKey(r))throw new tc(tu.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${n}() must result in a valid document path, but '${r}' is not because it contains an odd number of segments.`);let i=new tk(r);s.push(nq(t,i))}else{let e=c_(r,n,l);s.push(e)}}return new n6(s,a)}(e._query,e.firestore._databaseId,i,t,r,n)}}function ht(e,t,r){if("string"==typeof(r=H(r))){if(""===r)throw new tc(tu.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!iT(t)&&-1!==r.indexOf("/"))throw new tc(tu.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);let n=t.path.child(tI.fromString(r));if(!tk.isDocumentKey(n))throw new tc(tu.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return nq(e,new tk(n))}if(r instanceof u3)return nq(e,r._key);throw new tc(tu.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tM(r)}.`)}function hr(e,t){if(!Array.isArray(e)||0===e.length)throw new tc(tu.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function hn(e,t){let r=function(e,t){for(let r of e)for(let e of r.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==r)throw r===t.op?new tc(tu.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new tc(tu.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${r.toString()}' filters.`)}function hi(e,t){if(!(t instanceof cW||t instanceof cY))throw new tc(tu.INVALID_ARGUMENT,`Function ${e}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}function ha(e,t,r){return e?r&&(r.merge||r.mergeFields)?e.toFirestore(t,r):e.toFirestore(t):t}class ho extends cj{constructor(e){super(),this.firestore=e}convertBytes(e){return new cs(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new u3(this.firestore,null,t)}}function hs(e){return new cB("sum",cC("sum",e))}function hl(e){return new cB("avg",cC("average",e))}function hu(){return new cB("count")}function hc(e,t){return e instanceof cB&&t instanceof cB&&e.aggregateType===t.aggregateType&&e._internalFieldPath?.canonicalString()===t._internalFieldPath?.canonicalString()}function hh(e,t){return u7(e.query,t.query)&&K(e.data(),t.data())}function hf(e){return hd(e,{count:hu()})}function hd(e,t){var r;let n,i=tR(e.firestore,cn),a=ca(i),o=function(e,t){let r=[];for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.push(t(e[n],n,e));return r}(t,(e,t)=>new ag(t,e.aggregateType,e._internalFieldPath));return(r=e._query,n=new th,a.asyncQueue.enqueueAndForget(async()=>{try{let e=await uW(a);n.resolve(async function(e,t,r){let{request:n,gt:i,parent:a}=function(e,t,r,n){let{ft:i,parent:a}=a6(e,t),o={},s=[],l=0;return r.forEach(e=>{let t="aggregate_"+l++;o[t]=e.alias,"count"===e.aggregateType?s.push({alias:t,count:{}}):"avg"===e.aggregateType?s.push({alias:t,avg:{field:a5(e.fieldPath)}}):"sum"===e.aggregateType&&s.push({alias:t,sum:{field:a5(e.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:s,structuredQuery:i.structuredQuery},parent:i.parent},gt:o,parent:a}}(e.serializer,(t.Re||(t.Re=iC(t,t.explicitOrderBy)),t.Re),r);e.connection.Ko||delete n.parent;let o=(await e.jo("RunAggregationQuery",e.serializer.databaseId,a,n,1)).filter(e=>!!e.result);tl(1===o.length,64727);let s=o[0].result?.aggregateFields;return Object.keys(s).reduce((e,t)=>(e[i[t]]=s[t],e),{})}(e,r,o))}catch(e){n.reject(e)}}),n.promise).then(t=>new cU(e,new cM(i),t))}class hp{constructor(e){this.kind="memory",this._onlineComponentProvider=uN.provider,this._offlineComponentProvider=e?.garbageCollector?e.garbageCollector._offlineComponentProvider:{build:()=>new uk(void 0)}}toJSON(){return{kind:this.kind}}}class hg{constructor(e){let t;this.kind="persistent",e?.tabManager?(e.tabManager._initialize(e),t=e.tabManager):(t=h_(void 0))._initialize(e),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class hm{constructor(){this.kind="memoryEager",this._offlineComponentProvider=uC.provider}toJSON(){return{kind:this.kind}}}class hy{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new uk(e)}}toJSON(){return{kind:this.kind}}}function hv(){return new hm}function hb(e){return new hy(e?.cacheSizeBytes)}function hw(e){return new hp(e)}function hx(e){return new hg(e)}class hE{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=uN.provider,this._offlineComponentProvider={build:t=>new uP(t,e?.cacheSizeBytes,this.forceOwnership)}}}class hS{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=uN.provider,this._offlineComponentProvider={build:t=>new uD(t,e?.cacheSizeBytes)}}}function h_(e){return new hE(e?.forceOwnership)}function hO(){return new hS}let hT="NOT SUPPORTED";class hI{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class hA extends cz{constructor(e,t,r,n,i,a){super(e,t,r,n,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new hk(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let r=this._document.data.field(cC("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new tc(tu.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,t={};return t.type=hA._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()&&(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),this._firestore,this.ref.path,t.bundle="NOT SUPPORTED"),t}}function hC(e,t,r){if(tV(t,hA._jsonSchema)){var n;if(t.bundle===hT)throw new tc(tu.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");let i=s9(e._databaseId),a=(n=t.bundle,new uL(n,i)),o=a.t(),s=new lX(a.getMetadata(),i);for(let e of o)s.o(e);let l=s.documents;if(1!==l.length)throw new tc(tu.INVALID_ARGUMENT,`Expected bundle data to contain 1 document, but it contains ${l.length} documents.`);let u=aZ(i,l[0].document),c=new tk(tI.fromString(t.bundleName));return new hA(e,new ho(e),c,u,new hI(!1,!1),r||null)}}hA._jsonSchemaVersion="firestore/documentSnapshot/1.0",hA._jsonSchema={type:tF("string",hA._jsonSchemaVersion),bundleSource:tF("string","DocumentSnapshot"),bundleName:tF("string"),bundle:tF("string")};class hk extends hA{data(e={}){return super.data(e)}}class hP{constructor(e,t,r,n){this._firestore=e,this._userDataWriter=t,this._snapshot=n,this.metadata=new hI(n.hasPendingWrites,n.fromCache),this.query=r}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new hk(this._firestore,this._userDataWriter,r.key,r,new hI(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new tc(tu.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(r=>{let n=new hk(e._firestore,e._userDataWriter,r.doc.key,r.doc,new hI(e._snapshot.mutatedKeys.has(r.doc.key),e._snapshot.fromCache),e.query.converter);return r.doc,{type:"added",doc:n,oldIndex:-1,newIndex:t++}})}{let r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{let n=new hk(e._firestore,e._userDataWriter,t.doc.key,t.doc,new hI(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:function(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return to(61501,{type:e})}}(t.type),doc:n,oldIndex:i,newIndex:a}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new tc(tu.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=hP._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=tw.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let t=[],r=[],n=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),r.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),n.push(e.ref.path))}),this._firestore,this.query._query,e.bundleName,e.bundle="NOT SUPPORTED",e}}function hD(e,t,r){if(tV(t,hP._jsonSchema)){var n;if(t.bundle===hT)throw new tc(tu.INVALID_ARGUMENT,"The provided JSON object was created in a client environment, which is not supported.");let i=s9(e._databaseId),a=(n=t.bundle,new uL(n,i)),o=a.t(),s=new lX(a.getMetadata(),i);for(let e of o)s.o(e);if(1!==s.queries.length)throw new tc(tu.INVALID_ARGUMENT,`Snapshot data expected 1 query but found ${s.queries.length} queries.`);let l=ol(s.queries[0].bundledQuery),u=s.documents,c=new lF;u.map(e=>{let t=aZ(i,e.document);c=c.add(t)});let h=lB.fromInitialDocuments(l,c,iG(),!1,!1),f=new u6(e,r||null,l);return new hP(e,new ho(e),f,h)}}function hN(e,t){return e instanceof hA&&t instanceof hA?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof hP&&t instanceof hP&&e._firestore===t._firestore&&u7(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}hP._jsonSchemaVersion="firestore/querySnapshot/1.0",hP._jsonSchema={type:tF("string",hP._jsonSchemaVersion),bundleSource:tF("string","QuerySnapshot"),bundleName:tF("string"),bundle:tF("string")};let hj={maxAttempts:5};class hM{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=cv(e)}set(e,t,r){this._verifyNotCommitted();let n=hR(e,this._firestore),i=ha(n.converter,t,r),a=cb(this._dataReader,"WriteBatch.set",n._key,i,null!==n.converter,r);return this._mutations.push(a.toMutation(n._key,i9.none())),this}update(e,t,r,...n){let i;this._verifyNotCommitted();let a=hR(e,this._firestore);return i="string"==typeof(t=H(t))||t instanceof cl?cS(this._dataReader,"WriteBatch.update",a._key,t,r,n):cE(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(i.toMutation(a._key,i9.exists(!0))),this}delete(e){this._verifyNotCommitted();let t=hR(e,this._firestore);return this._mutations=this._mutations.concat(new ac(t._key,i9.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new tc(tu.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function hR(e,t){if((e=H(e)).firestore!==t)throw new tc(tu.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class hL{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=cv(e)}get(e){let t=hR(e,this._firestore),r=new ho(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return to(24041);let n=e[0];if(n.isFoundDocument())return new cz(this._firestore,r,n.key,n,t.converter);if(n.isNoDocument())return new cz(this._firestore,r,t._key,null,t.converter);throw to(18433,{doc:n})})}set(e,t,r){let n=hR(e,this._firestore),i=ha(n.converter,t,r),a=cb(this._dataReader,"Transaction.set",n._key,i,null!==n.converter,r);return this._transaction.set(n._key,a),this}update(e,t,r,...n){let i,a=hR(e,this._firestore);return i="string"==typeof(t=H(t))||t instanceof cl?cS(this._dataReader,"Transaction.update",a._key,t,r,n):cE(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,i),this}delete(e){let t=hR(e,this._firestore);return this._transaction.delete(t._key),this}}class hF extends hL{constructor(e,t){super(e,t),this._firestore=e}get(e){let t=hR(e,this._firestore),r=new cM(this._firestore);return super.get(e).then(e=>new hA(this._firestore,r,t._key,e._document,new hI(!1,!1),t.converter))}}function hV(e,t,r){var n,i;let a;e=tR(e,cn);let o={...hj,...r};if(o.maxAttempts<1)throw new tc(tu.INVALID_ARGUMENT,"Max attempts must be at least 1");return n=ca(e),i=r=>t(new hF(e,r)),a=new th,n.asyncQueue.enqueueAndForget(async()=>{let e=await uW(n);new uV(n.asyncQueue,e,o,i,a).ju()}),a.promise}function hB(e){e=tR(e,u3);let t=tR(e.firestore,cn);return uY(ca(t),e._key).then(r=>h0(t,e,r))}function hU(e){var t;let r;e=tR(e,u3);let n=tR(e.firestore,cn),i=ca(n),a=new cM(n);return(t=e._key,r=new th,i.asyncQueue.enqueueAndForget(async()=>(async function(e,t,r){try{let n=await e.persistence.runTransaction("read document","readonly",r=>e.localDocuments.getDocument(r,t));n.isFoundDocument()?r.resolve(n):n.isNoDocument()?r.resolve(null):r.reject(new tc(tu.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(n){let e=lL(n,`Failed to get document '${t} from cache`);r.reject(e)}})(await uG(i),t,r)),r.promise).then(t=>new hA(n,a,e._key,t,new hI(null!==t&&t.hasLocalMutations,!0),e.converter))}function hz(e){e=tR(e,u3);let t=tR(e.firestore,cn);return uY(ca(t),e._key,{source:"server"}).then(r=>h0(t,e,r))}function hq(e){e=tR(e,u6);let t=tR(e.firestore,cn),r=ca(t),n=new cM(t);return c$(e._query),uJ(r,e._query).then(r=>new hP(t,n,e,r))}function h$(e){var t;let r;e=tR(e,u6);let n=tR(e.firestore,cn),i=ca(n),a=new cM(n);return(t=e._query,r=new th,i.asyncQueue.enqueueAndForget(async()=>(async function(e,t,r){try{let n=await sC(e,t,!0),i=new l2(t,n.ks),a=i.ru(n.documents),o=i.applyChanges(a,!1);r.resolve(o.snapshot)}catch(n){let e=lL(n,`Failed to execute query '${t} against cache`);r.reject(e)}})(await uG(i),t,r)),r.promise).then(t=>new hP(n,a,e,t))}function hK(e){e=tR(e,u6);let t=tR(e.firestore,cn),r=ca(t),n=new cM(t);return uJ(r,e._query,{source:"server"}).then(r=>new hP(t,n,e,r))}function hG(e,t,r){e=tR(e,u3);let n=tR(e.firestore,cn),i=ha(e.converter,t,r),a=cv(n);return hZ(n,[cb(a,"setDoc",e._key,i,null!==e.converter,r).toMutation(e._key,i9.none())])}function hH(e,t,r,...n){e=tR(e,u3);let i=tR(e.firestore,cn),a=cv(i);return hZ(i,[("string"==typeof(t=H(t))||t instanceof cl?cS(a,"updateDoc",e._key,t,r,n):cE(a,"updateDoc",e._key,t)).toMutation(e._key,i9.exists(!0))])}function hW(e){return hZ(tR(e.firestore,cn),[new ac(e._key,i9.none())])}function hQ(e,t){let r=tR(e.firestore,cn),n=u8(e),i=ha(e.converter,t);return hZ(r,[cb(cv(e.firestore),"addDoc",n._key,i,null!==e.converter,{}).toMutation(n._key,i9.exists(!1))]).then(()=>n)}function hY(e,...t){var r;let n,i,a,o,s;e=H(e);let l={includeMetadataChanges:!1,source:"default"},u=0;"object"!=typeof t[0]||cV(t[u])||(l=t[u++]);let c={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(cV(t[u])){let e=t[u];t[u]=e.next?.bind(e),t[u+1]=e.error?.bind(e),t[u+2]=e.complete?.bind(e)}if(e instanceof u3)i=tR(e.firestore,cn),a=i_(e._key.path),n={next:r=>{t[u]&&t[u](h0(i,e,r))},error:t[u+1],complete:t[u+2]};else{let r=tR(e,u6);i=tR(r.firestore,cn),a=r._query;let o=new cM(i);n={next:e=>{t[u]&&t[u](new hP(i,o,r,e))},error:t[u+1],complete:t[u+2]},c$(e._query)}return r=ca(i),s=new lQ(a,o=new uM(n),c),r.asyncQueue.enqueueAndForget(async()=>l$(await uQ(r),s)),()=>{o.Nu(),r.asyncQueue.enqueueAndForget(async()=>lK(await uQ(r),s))}}function hJ(e,t,...r){var n,i,a,o,s,l;let u=H(e),c=function(e){let t={bundle:"",bundleName:"",bundleSource:""};for(let r of["bundle","bundleName","bundleSource"]){if(!(r in e)){t.error=`snapshotJson missing required field: ${r}`;break}let n=e[r];if("string"!=typeof n){t.error=`snapshotJson field '${r}' must be a string.`;break}if(0===n.length){t.error=`snapshotJson field '${r}' cannot be an empty string.`;break}"bundle"===r?t.bundle=n:"bundleName"===r?t.bundleName=n:"bundleSource"===r&&(t.bundleSource=n)}return t}(t);if(c.error)throw new tc(tu.INVALID_ARGUMENT,c.error);let h,f=0;if("object"!=typeof r[0]||cV(r[f])||(h=r[f++]),"QuerySnapshot"===c.bundleSource){let e,t,o=null;if("object"==typeof r[f]&&cV(r[f])){let e=r[f++];o={next:e.next,error:e.error,complete:e.complete}}else o={next:r[f++],error:r[f++],complete:r[f++]};return n=h,i=o,a=r[f],t=!1,co(u,c.bundle).then(()=>{var e,t,r;return e=u,t=c.bundleName,(r=ca(e=tR(e,cn)),r.asyncQueue.enqueue(async()=>{var e;return e=await uG(r),e.persistence.runTransaction("Get named query","readonly",r=>e.Pi.getNamedQuery(r,t))})).then(t=>t?new u6(e,null,t.query):null)}).then(r=>{r&&!t&&(a&&r.withConverter(a),e=hY(r,n||{},i))}).catch(e=>(i.error&&i.error(e),()=>{})),()=>{t||(t=!0,e&&e())}}if("DocumentSnapshot"===c.bundleSource){let e,t,n=null;if("object"==typeof r[f]&&cV(r[f])){let e=r[f++];n={next:e.next,error:e.error,complete:e.complete}}else n={next:r[f++],error:r[f++],complete:r[f++]};return o=h,s=n,l=r[f],t=!1,co(u,c.bundle).then(()=>{t||(e=hY(new u3(u,l||null,tk.fromPath(c.bundleName)),o||{},s))}).catch(e=>(s.error&&s.error(e),()=>{})),()=>{t||(t=!0,e&&e())}}throw new tc(tu.INVALID_ARGUMENT,`unsupported bundle source: ${c.bundleSource}`)}function hX(e,t){let r,n=ca(e=tR(e,cn));return r=new uM(cV(t)?t:{next:t}),n.asyncQueue.enqueueAndForget(async()=>{var e;return e=await uQ(n),void(e.Ca.add(r),r.next())}),()=>{r.Nu(),n.asyncQueue.enqueueAndForget(async()=>{var e;return e=await uQ(n),void e.Ca.delete(r)})}}function hZ(e,t){var r;let n;return r=ca(e),n=new th,r.asyncQueue.enqueueAndForget(async()=>un(await uH(r),t,n)),n.promise}function h0(e,t,r){let n=r.docs.get(t._key),i=new cM(e);return new hA(e,i,t._key,n,new hI(r.hasPendingWrites,r.fromCache),t.converter)}function h1(e){return ca(e=tR(e,cn)),new hM(e,t=>hZ(e,t))}function h2(e,t){let r=ca(e=tR(e,cn));if(!r._uninitializedComponentsProvider||"memory"===r._uninitializedComponentsProvider._offline.kind)return ti("Cannot enable indexes when persistence is disabled"),Promise.resolve();let n=function(e){let t="string"==typeof e?function(e){try{return JSON.parse(e)}catch(e){throw new tc(tu.INVALID_ARGUMENT,"Failed to parse JSON: "+e?.message)}}(e):e,r=[];if(Array.isArray(t.indexes))for(let e of t.indexes){let t=h6(e,"collectionGroup"),n=[];if(Array.isArray(e.fields))for(let t of e.fields){let e=cP("setIndexConfiguration",h6(t,"fieldPath"));"CONTAINS"===t.arrayConfig?n.push(new tG(e,2)):"ASCENDING"===t.order?n.push(new tG(e,0)):"DESCENDING"===t.order&&n.push(new tG(e,1))}r.push(new tz(tz.UNKNOWN_ID,t,n,tH.empty()))}return r}(t);return r.asyncQueue.enqueue(async()=>(async function(e,t){let r=e.indexManager,n=[];return e.persistence.runTransaction("Configure indexes","readwrite",e=>r.getFieldIndexes(e).next(i=>(function(e,t,r,n,i){t=[...t],(e=[...e]).sort(r),t.sort(r);let a=e.length,o=t.length,s=0,l=0;for(;s<o&&l<a;){let a=r(e[l],t[s]);a<0?i(e[l++]):a>0?n(t[s++]):(s++,l++)}for(;s<o;)n(t[s++]);for(;l<a;)i(e[l++])})(i,t,tK,t=>{n.push(r.addFieldIndex(e,t))},t=>{n.push(r.deleteFieldIndex(e,t))})).next(()=>t1.waitFor(n)))})(await uG(r),n))}function h6(e,t){if("string"!=typeof e[t])throw new tc(tu.INVALID_ARGUMENT,"Missing string value for: "+t);return e[t]}class h3{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function h5(e){e=tR(e,cn);let t=fe.get(e);if(t)return t;let r=ca(e);if("persistent"!==r._uninitializedComponentsProvider?._offline.kind)return null;let n=new h3(e);return fe.set(e,n),n}function h4(e){h9(e,!0)}function h8(e){h9(e,!1)}function h7(e){var t;(t=ca(e._firestore)).asyncQueue.enqueue(async()=>{var e;let r;return r=(e=await uG(t)).indexManager,e.persistence.runTransaction("Delete All Indexes","readwrite",e=>r.deleteAllFieldIndexes(e))}).then(e=>tr("deleting all persistent cache indexes succeeded")).catch(e=>ti("deleting all persistent cache indexes failed",e))}function h9(e,t){var r;(r=ca(e._firestore),r.asyncQueue.enqueue(async()=>{var e;return e=await uG(r),void(e.Cs.As=t)})).then(e=>tr(`setting persistent cache index auto creation isEnabled=${t} succeeded`)).catch(e=>ti(`setting persistent cache index auto creation isEnabled=${t} failed`,e))}let fe=new WeakMap;class ft{constructor(){throw Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return fr.instance.onExistenceFilterMismatch(e)}}class fr{constructor(){this.i=new Map}static get instance(){return fn||function(e){if(ab)throw Error("a TestingHooksSpi instance is already set");ab=e}(fn=new fr),fn}u(e){this.i.forEach(t=>t(e))}onExistenceFilterMismatch(e){let t=Symbol(),r=this.i;return r.set(t,e),()=>r.delete(t)}}let fn=null;!function(e=!0){e9=eF,eI(new W("firestore",(t,{instanceIdentifier:r,options:n})=>{let i=t.getProvider("app").getImmediate(),a=new cn(new tg(t.getProvider("auth-internal")),new tb(i,t.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new tc(tu.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new nC(e.options.projectId,t)}(i,r),i);return n={useFetchStreams:e,...n},a._setSettings(n),a},"PUBLIC").setMultipleInstances(!0)),e$(cL,cF,void 0),e$(cL,cF,"esm2020")}(),e.s(["AggregateField",()=>cB,"AggregateQuerySnapshot",()=>cU,"DocumentSnapshot",()=>hA,"PersistentCacheIndexManager",()=>h3,"QueryCompositeFilterConstraint",()=>cY,"QueryConstraint",()=>cG,"QueryDocumentSnapshot",()=>hk,"QueryEndAtConstraint",()=>c8,"QueryFieldFilterConstraint",()=>cW,"QueryLimitConstraint",()=>c1,"QueryOrderByConstraint",()=>cZ,"QuerySnapshot",()=>hP,"QueryStartAtConstraint",()=>c3,"SnapshotMetadata",()=>hI,"Transaction",()=>hF,"WriteBatch",()=>hM,"_TestingHooks",()=>ft,"addDoc",()=>hQ,"aggregateFieldEqual",()=>hc,"aggregateQuerySnapshotEqual",()=>hh,"and",()=>cX,"average",()=>hl,"count",()=>hu,"deleteAllPersistentCacheIndexes",()=>h7,"deleteDoc",()=>hW,"disablePersistentCacheIndexAutoCreation",()=>h8,"documentSnapshotFromJSON",()=>hC,"enablePersistentCacheIndexAutoCreation",()=>h4,"endAt",()=>c9,"endBefore",()=>c7,"executeWrite",()=>hZ,"getAggregateFromServer",()=>hd,"getCountFromServer",()=>hf,"getDoc",()=>hB,"getDocFromCache",()=>hU,"getDocFromServer",()=>hz,"getDocs",()=>hq,"getDocsFromCache",()=>h$,"getDocsFromServer",()=>hK,"getPersistentCacheIndexManager",()=>h5,"limit",()=>c2,"limitToLast",()=>c6,"memoryEagerGarbageCollector",()=>hv,"memoryLocalCache",()=>hw,"memoryLruGarbageCollector",()=>hb,"onSnapshot",()=>hY,"onSnapshotResume",()=>hJ,"onSnapshotsInSync",()=>hX,"or",()=>cJ,"orderBy",()=>c0,"persistentLocalCache",()=>hx,"persistentMultipleTabManager",()=>hO,"persistentSingleTabManager",()=>h_,"query",()=>cH,"querySnapshotFromJSON",()=>hD,"runTransaction",()=>hV,"setDoc",()=>hG,"setIndexConfiguration",()=>h2,"snapshotEqual",()=>hN,"startAfter",()=>c4,"startAt",()=>c5,"sum",()=>hs,"updateDoc",()=>hH,"where",()=>cQ,"writeBatch",()=>h1],27156),e.s([],68392),e.i(27156),e.s(["Timestamp",()=>tB,"addDoc",()=>hQ,"collection",()=>u4,"doc",()=>u8,"getDocs",()=>hq,"getFirestore",()=>ci,"increment",()=>cR,"orderBy",()=>c0,"query",()=>cH,"updateDoc",()=>hH],16505);let fi=ci(0===ez().length?eV({apiKey:"AIzaSyBs15tX_VBrS9IvPN2rbJAbB9nRkDijNgk",authDomain:"aoe4-dashboard.firebaseapp.com",projectId:"aoe4-dashboard",storageBucket:"aoe4-dashboard.firebasestorage.app",messagingSenderId:"1064938687552",appId:"1:1064938687552:web:18becedde33a6557c4a3a5",measurementId:"G-57TVF82TDK"}):ez()[0]);e.s(["db",()=>fi],88363)},74224,e=>{"use strict";var t=e.i(68692);let r=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,t.forwardRef)(({color:e="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:s="",children:l,iconNode:u,...c},h)=>(0,t.createElement)("svg",{ref:h,...n,width:i,height:i,stroke:e,strokeWidth:o?24*Number(a)/Number(i):a,className:r("lucide",s),...c},[...u.map(([e,r])=>(0,t.createElement)(e,r)),...Array.isArray(l)?l:[l]])),a=(e,n)=>{let a=(0,t.forwardRef)(({className:a,...o},s)=>(0,t.createElement)(i,{ref:s,iconNode:n,className:r(`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,a),...o}));return a.displayName=`${e}`,a};e.s(["default",()=>a],74224)},90288,e=>{"use strict";let t=(0,e.i(74224).default)("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);e.s(["Crown",()=>t],90288)},10488,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),r.isUnsafeProperty=function(e){return"__proto__"===e}},77692,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),r.isDeepKey=function(e){switch(typeof e){case"number":case"symbol":return!1;case"string":return e.includes(".")||e.includes("[")||e.includes("]")}}},56872,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),r.toKey=function(e){return"string"==typeof e||"symbol"==typeof e?e:Object.is(e?.valueOf?.(),-0)?"-0":String(e)}},3201,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),r.toString=function e(t){if(null==t)return"";if("string"==typeof t)return t;if(Array.isArray(t))return t.map(e).join(",");let r=String(t);return"0"===r&&Object.is(Number(t),-0)?"-0":r}},78690,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});let n=e.r(3201),i=e.r(56872);r.toPath=function(e){if(Array.isArray(e))return e.map(i.toKey);if("symbol"==typeof e)return[e];e=n.toString(e);let t=[],r=e.length;if(0===r)return t;let a=0,o="",s="",l=!1;for(46===e.charCodeAt(0)&&(t.push(""),a++);a<r;){let n=e[a];s?"\\"===n&&a+1<r?o+=e[++a]:n===s?s="":o+=n:l?'"'===n||"'"===n?s=n:"]"===n?(l=!1,t.push(o),o=""):o+=n:"["===n?(l=!0,o&&(t.push(o),o="")):"."===n?o&&(t.push(o),o=""):o+=n,a++}return o&&t.push(o),t}},51040,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});let n=e.r(10488),i=e.r(77692),a=e.r(56872),o=e.r(78690);r.get=function e(t,r,s){if(null==t)return s;switch(typeof r){case"string":{if(n.isUnsafeProperty(r))return s;let a=t[r];if(void 0===a)if(i.isDeepKey(r))return e(t,o.toPath(r),s);else return s;return a}case"number":case"symbol":{"number"==typeof r&&(r=a.toKey(r));let e=t[r];if(void 0===e)return s;return e}default:{if(Array.isArray(r)){var l=t,u=r,c=s;if(0===u.length)return c;let e=l;for(let t=0;t<u.length;t++){if(null==e||n.isUnsafeProperty(u[t]))return c;e=e[u[t]]}return void 0===e?c:e}if(r=Object.is(r?.valueOf(),-0)?"-0":String(r),n.isUnsafeProperty(r))return s;let e=t[r];if(void 0===e)return s;return e}}}},84249,(e,t,r)=>{t.exports=e.r(51040).get},78876,(e,t,r)=>{"use strict";var n=e.r(68692),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=n.useSyncExternalStore,o=n.useRef,s=n.useEffect,l=n.useMemo,u=n.useDebugValue;r.useSyncExternalStoreWithSelector=function(e,t,r,n,c){var h=o(null);if(null===h.current){var f={hasValue:!1,value:null};h.current=f}else f=h.current;var d=a(e,(h=l(function(){function e(e){if(!s){if(s=!0,a=e,e=n(e),void 0!==c&&f.hasValue){var t=f.value;if(c(t,e))return o=t}return o=e}if(t=o,i(a,e))return t;var r=n(e);return void 0!==c&&c(t,r)?(a=e,t):(a=e,o=r)}var a,o,s=!1,l=void 0===r?null:r;return[function(){return e(t())},null===l?void 0:function(){return e(l())}]},[t,r,n,c]))[0],h[1]);return s(function(){f.hasValue=!0,f.value=d},[d]),u(d),d}},50329,(e,t,r)=>{"use strict";t.exports=e.r(78876)},33273,(e,t,r)=>{"use strict";var n=e.r(68692),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},a=n.useState,o=n.useEffect,s=n.useLayoutEffect,l=n.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!i(e,r)}catch(e){return!0}}var c="u"<typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var r=t(),n=a({inst:{value:r,getSnapshot:t}}),i=n[0].inst,c=n[1];return s(function(){i.value=r,i.getSnapshot=t,u(i)&&c({inst:i})},[e,r,t]),o(function(){return u(i)&&c({inst:i}),e(function(){u(i)&&c({inst:i})})},[e]),l(r),r};r.useSyncExternalStore=void 0!==n.useSyncExternalStore?n.useSyncExternalStore:c},6960,(e,t,r)=>{"use strict";t.exports=e.r(33273)},96581,(e,t,r)=>{"use strict";var n=e.r(68692),i=e.r(6960),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=i.useSyncExternalStore,s=n.useRef,l=n.useEffect,u=n.useMemo,c=n.useDebugValue;r.useSyncExternalStoreWithSelector=function(e,t,r,n,i){var h=s(null);if(null===h.current){var f={hasValue:!1,value:null};h.current=f}else f=h.current;var d=o(e,(h=u(function(){function e(e){if(!l){if(l=!0,o=e,e=n(e),void 0!==i&&f.hasValue){var t=f.value;if(i(t,e))return s=t}return s=e}if(t=s,a(o,e))return t;var r=n(e);return void 0!==i&&i(t,r)?(o=e,t):(o=e,s=r)}var o,s,l=!1,u=void 0===r?null:r;return[function(){return e(t())},null===u?void 0:function(){return e(u())}]},[t,r,n,i]))[0],h[1]);return l(function(){f.hasValue=!0,f.value=d},[d]),c(d),d}},93135,(e,t,r)=>{"use strict";t.exports=e.r(96581)},40282,(e,t,r)=>{"use strict";function n(e){return"symbol"==typeof e?1:null===e?2:void 0===e?3:4*(e!=e)}Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),r.compareValues=(e,t,r)=>{if(e!==t){let i=n(e),a=n(t);if(i===a&&0===i){if(e<t)return"desc"===r?1:-1;if(e>t)return"desc"===r?-1:1}return"desc"===r?a-i:i-a}return 0}},58251,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),r.isSymbol=function(e){return"symbol"==typeof e||e instanceof Symbol}},68686,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});let n=e.r(58251),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;r.isKey=function(e,t){return!Array.isArray(e)&&(!!("number"==typeof e||"boolean"==typeof e||null==e||n.isSymbol(e))||"string"==typeof e&&(a.test(e)||!i.test(e))||null!=t&&Object.hasOwn(t,e))}},37575,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});let n=e.r(40282),i=e.r(68686),a=e.r(78690);r.orderBy=function(e,t,r,o){if(null==e)return[];r=o?void 0:r,Array.isArray(e)||(e=Object.values(e)),Array.isArray(t)||(t=null==t?[null]:[t]),0===t.length&&(t=[null]),Array.isArray(r)||(r=null==r?[]:[r]),r=r.map(e=>String(e));let s=(e,t)=>{let r=e;for(let e=0;e<t.length&&null!=r;++e)r=r[t[e]];return r},l=t.map(e=>(Array.isArray(e)&&1===e.length&&(e=e[0]),null==e||"function"==typeof e||Array.isArray(e)||i.isKey(e))?e:{key:e,path:a.toPath(e)});return e.map(e=>({original:e,criteria:l.map(t=>{var r,n;return r=t,null==(n=e)||null==r?n:"object"==typeof r&&"key"in r?Object.hasOwn(n,r.key)?n[r.key]:s(n,r.path):"function"==typeof r?r(n):Array.isArray(r)?s(n,r):"object"==typeof n?n[r]:n})})).slice().sort((e,t)=>{for(let i=0;i<l.length;i++){let a=n.compareValues(e.criteria[i],t.criteria[i],r[i]);if(0!==a)return a}return 0}).map(e=>e.original)}},57243,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),r.flatten=function(e,t=1){let r=[],n=Math.floor(t),i=(e,t)=>{for(let a=0;a<e.length;a++){let o=e[a];Array.isArray(o)&&t<n?i(o,t+1):r.push(o)}};return i(e,0),r}},65692,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});let n=/^(?:0|[1-9]\d*)$/;r.isIndex=function(e,t=Number.MAX_SAFE_INTEGER){switch(typeof e){case"number":return Number.isInteger(e)&&e>=0&&e<t;case"symbol":return!1;case"string":return n.test(e)}}},37958,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),r.isLength=function(e){return Number.isSafeInteger(e)&&e>=0}},35252,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});let n=e.r(37958);r.isArrayLike=function(e){return null!=e&&"function"!=typeof e&&n.isLength(e.length)}},34250,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),r.isObject=function(e){return null!==e&&("object"==typeof e||"function"==typeof e)}},44296,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),r.isEqualsSameValueZero=function(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}},68109,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});let n=e.r(65692),i=e.r(35252),a=e.r(34250),o=e.r(44296);r.isIterateeCall=function(e,t,r){return!!a.isObject(r)&&(!!("number"==typeof t&&i.isArrayLike(r)&&n.isIndex(t))&&t<r.length||"string"==typeof t&&t in r)&&o.isEqualsSameValueZero(r[t],e)}},38902,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});let n=e.r(37575),i=e.r(57243),a=e.r(68109);r.sortBy=function(e,...t){let r=t.length;return r>1&&a.isIterateeCall(e,t[0],t[1])?t=[]:r>2&&a.isIterateeCall(t[0],t[1],t[2])&&(t=[t[0]]),n.orderBy(e,i.flatten(t),["asc"])}},44884,(e,t,r)=>{t.exports=e.r(38902).sortBy},88401,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),r.debounce=function(e,t,{signal:r,edges:n}={}){let i,a=null,o=null!=n&&n.includes("leading"),s=null==n||n.includes("trailing"),l=()=>{null!==a&&(e.apply(i,a),i=void 0,a=null)},u=null,c=()=>{null!=u&&clearTimeout(u),u=setTimeout(()=>{u=null,s&&l(),h()},t)},h=()=>{null!==u&&(clearTimeout(u),u=null),i=void 0,a=null},f=function(...e){if(r?.aborted)return;i=this,a=e;let t=null==u;c(),o&&t&&l()};return f.schedule=c,f.cancel=h,f.flush=()=>{l()},r?.addEventListener("abort",h,{once:!0}),f}},28795,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});let n=e.r(88401);r.debounce=function(e,t=0,r={}){let i;"object"!=typeof r&&(r={});let{leading:a=!1,trailing:o=!0,maxWait:s}=r,l=[,,];a&&(l[0]="leading"),o&&(l[1]="trailing");let u=null,c=n.debounce(function(...t){i=e.apply(this,t),u=null},t,{edges:l}),h=function(...t){return null!=s&&(null===u&&(u=Date.now()),Date.now()-u>=s)?(i=e.apply(this,t),u=Date.now(),c.cancel(),c.schedule(),i):(c.apply(this,t),i)};return h.cancel=c.cancel,h.flush=()=>(c.flush(),i),h}},72370,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});let n=e.r(28795);r.throttle=function(e,t=0,r={}){let{leading:i=!0,trailing:a=!0}=r;return n.debounce(e,t,{leading:i,maxWait:t,trailing:a})}},90512,(e,t,r)=>{t.exports=e.r(72370).throttle},73948,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});let n=e.r(58251);r.toNumber=function(e){return n.isSymbol(e)?NaN:Number(e)}},41347,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});let n=e.r(73948);r.toFinite=function(e){return e?(e=n.toNumber(e))===1/0||e===-1/0?(e<0?-1:1)*Number.MAX_VALUE:e==e?e:0:0===e?e:0}},36986,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});let n=e.r(68109),i=e.r(41347);r.range=function(e,t,r){r&&"number"!=typeof r&&n.isIterateeCall(e,t,r)&&(t=r=void 0),e=i.toFinite(e),void 0===t?(t=e,e=0):t=i.toFinite(t),r=void 0===r?e<t?1:-1:i.toFinite(r);let a=Math.max(Math.ceil((t-e)/(r||1)),0),o=Array(a);for(let t=0;t<a;t++)o[t]=e,e+=r;return o}},31053,(e,t,r)=>{t.exports=e.r(36986).range},2119,(e,t,r)=>{!function(r){"use strict";var n,i={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},a=!0,o="[DecimalError] ",s=o+"Invalid argument: ",l=o+"Exponent out of range: ",u=Math.floor,c=Math.pow,h=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,f=u(1286742750677284.5),d={};function p(e,t){var r,n,i,o,s,l,u,c,h=e.constructor,f=h.precision;if(!e.s||!t.s)return t.s||(t=new h(e)),a?_(t,f):t;if(u=e.d,c=t.d,s=e.e,i=t.e,u=u.slice(),o=s-i){for(o<0?(n=u,o=-o,l=c.length):(n=c,i=s,l=u.length),o>(l=(s=Math.ceil(f/7))>l?s+1:l+1)&&(o=l,n.length=1),n.reverse();o--;)n.push(0);n.reverse()}for((l=u.length)-(o=c.length)<0&&(o=l,n=c,c=u,u=n),r=0;o;)r=(u[--o]=u[o]+c[o]+r)/1e7|0,u[o]%=1e7;for(r&&(u.unshift(r),++i),l=u.length;0==u[--l];)u.pop();return t.d=u,t.e=i,a?_(t,f):t}function g(e,t,r){if(e!==~~e||e<t||e>r)throw Error(s+e)}function m(e){var t,r,n,i=e.length-1,a="",o=e[0];if(i>0){for(a+=o,t=1;t<i;t++)(r=7-(n=e[t]+"").length)&&(a+=x(r)),a+=n;(r=7-(n=(o=e[t])+"").length)&&(a+=x(r))}else if(0===o)return"0";for(;o%10==0;)o/=10;return a+o}d.absoluteValue=d.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},d.comparedTo=d.cmp=function(e){var t,r,n,i;if(e=new this.constructor(e),this.s!==e.s)return this.s||-e.s;if(this.e!==e.e)return this.e>e.e^this.s<0?1:-1;for(t=0,r=(n=this.d.length)<(i=e.d.length)?n:i;t<r;++t)if(this.d[t]!==e.d[t])return this.d[t]>e.d[t]^this.s<0?1:-1;return n===i?0:n>i^this.s<0?1:-1},d.decimalPlaces=d.dp=function(){var e=this.d.length-1,t=(e-this.e)*7;if(e=this.d[e])for(;e%10==0;e/=10)t--;return t<0?0:t},d.dividedBy=d.div=function(e){return y(this,new this.constructor(e))},d.dividedToIntegerBy=d.idiv=function(e){var t=this.constructor;return _(y(this,new t(e),0,1),t.precision)},d.equals=d.eq=function(e){return!this.cmp(e)},d.exponent=function(){return b(this)},d.greaterThan=d.gt=function(e){return this.cmp(e)>0},d.greaterThanOrEqualTo=d.gte=function(e){return this.cmp(e)>=0},d.isInteger=d.isint=function(){return this.e>this.d.length-2},d.isNegative=d.isneg=function(){return this.s<0},d.isPositive=d.ispos=function(){return this.s>0},d.isZero=function(){return 0===this.s},d.lessThan=d.lt=function(e){return 0>this.cmp(e)},d.lessThanOrEqualTo=d.lte=function(e){return 1>this.cmp(e)},d.logarithm=d.log=function(e){var t,r=this.constructor,i=r.precision,s=i+5;if(void 0===e)e=new r(10);else if((e=new r(e)).s<1||e.eq(n))throw Error(o+"NaN");if(this.s<1)throw Error(o+(this.s?"NaN":"-Infinity"));return this.eq(n)?new r(0):(a=!1,t=y(E(this,s),E(e,s),s),a=!0,_(t,i))},d.minus=d.sub=function(e){return e=new this.constructor(e),this.s==e.s?O(this,e):p(this,(e.s=-e.s,e))},d.modulo=d.mod=function(e){var t,r=this.constructor,n=r.precision;if(!(e=new r(e)).s)throw Error(o+"NaN");return this.s?(a=!1,t=y(this,e,0,1).times(e),a=!0,this.minus(t)):_(new r(this),n)},d.naturalExponential=d.exp=function(){return v(this)},d.naturalLogarithm=d.ln=function(){return E(this)},d.negated=d.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},d.plus=d.add=function(e){return e=new this.constructor(e),this.s==e.s?p(this,e):O(this,(e.s=-e.s,e))},d.precision=d.sd=function(e){var t,r,n;if(void 0!==e&&!!e!==e&&1!==e&&0!==e)throw Error(s+e);if(t=b(this)+1,r=7*(n=this.d.length-1)+1,n=this.d[n]){for(;n%10==0;n/=10)r--;for(n=this.d[0];n>=10;n/=10)r++}return e&&t>r?t:r},d.squareRoot=d.sqrt=function(){var e,t,r,n,i,s,l,c=this.constructor;if(this.s<1){if(!this.s)return new c(0);throw Error(o+"NaN")}for(e=b(this),a=!1,0==(i=Math.sqrt(+this))||i==1/0?(((t=m(this.d)).length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=u((e+1)/2)-(e<0||e%2),n=new c(t=i==1/0?"5e"+e:(t=i.toExponential()).slice(0,t.indexOf("e")+1)+e)):n=new c(i.toString()),i=l=(r=c.precision)+3;;)if(n=(s=n).plus(y(this,s,l+2)).times(.5),m(s.d).slice(0,l)===(t=m(n.d)).slice(0,l)){if(t=t.slice(l-3,l+1),i==l&&"4999"==t){if(_(s,r+1,0),s.times(s).eq(this)){n=s;break}}else if("9999"!=t)break;l+=4}return a=!0,_(n,r)},d.times=d.mul=function(e){var t,r,n,i,o,s,l,u,c,h=this.constructor,f=this.d,d=(e=new h(e)).d;if(!this.s||!e.s)return new h(0);for(e.s*=this.s,r=this.e+e.e,(u=f.length)<(c=d.length)&&(o=f,f=d,d=o,s=u,u=c,c=s),o=[],n=s=u+c;n--;)o.push(0);for(n=c;--n>=0;){for(t=0,i=u+n;i>n;)l=o[i]+d[n]*f[i-n-1]+t,o[i--]=l%1e7|0,t=l/1e7|0;o[i]=(o[i]+t)%1e7|0}for(;!o[--s];)o.pop();return t?++r:o.shift(),e.d=o,e.e=r,a?_(e,h.precision):e},d.toDecimalPlaces=d.todp=function(e,t){var r=this,n=r.constructor;return(r=new n(r),void 0===e)?r:(g(e,0,1e9),void 0===t?t=n.rounding:g(t,0,8),_(r,e+b(r)+1,t))},d.toExponential=function(e,t){var r,n=this,i=n.constructor;return void 0===e?r=T(n,!0):(g(e,0,1e9),void 0===t?t=i.rounding:g(t,0,8),r=T(n=_(new i(n),e+1,t),!0,e+1)),r},d.toFixed=function(e,t){var r,n,i=this.constructor;return void 0===e?T(this):(g(e,0,1e9),void 0===t?t=i.rounding:g(t,0,8),r=T((n=_(new i(this),e+b(this)+1,t)).abs(),!1,e+b(n)+1),this.isneg()&&!this.isZero()?"-"+r:r)},d.toInteger=d.toint=function(){var e=this.constructor;return _(new e(this),b(this)+1,e.rounding)},d.toNumber=function(){return+this},d.toPower=d.pow=function(e){var t,r,i,s,l,c,h=this,f=h.constructor,d=+(e=new f(e));if(!e.s)return new f(n);if(!(h=new f(h)).s){if(e.s<1)throw Error(o+"Infinity");return h}if(h.eq(n))return h;if(i=f.precision,e.eq(n))return _(h,i);if(c=(t=e.e)>=(r=e.d.length-1),l=h.s,c){if((r=d<0?-d:d)<=0x1fffffffffffff){for(s=new f(n),t=Math.ceil(i/7+4),a=!1;r%2&&I((s=s.times(h)).d,t),0!==(r=u(r/2));)I((h=h.times(h)).d,t);return a=!0,e.s<0?new f(n).div(s):_(s,i)}}else if(l<0)throw Error(o+"NaN");return l=l<0&&1&e.d[Math.max(t,r)]?-1:1,h.s=1,a=!1,s=e.times(E(h,i+12)),a=!0,(s=v(s)).s=l,s},d.toPrecision=function(e,t){var r,n,i=this,a=i.constructor;return void 0===e?(r=b(i),n=T(i,r<=a.toExpNeg||r>=a.toExpPos)):(g(e,1,1e9),void 0===t?t=a.rounding:g(t,0,8),r=b(i=_(new a(i),e,t)),n=T(i,e<=r||r<=a.toExpNeg,e)),n},d.toSignificantDigits=d.tosd=function(e,t){var r=this.constructor;return void 0===e?(e=r.precision,t=r.rounding):(g(e,1,1e9),void 0===t?t=r.rounding:g(t,0,8)),_(new r(this),e,t)},d.toString=d.valueOf=d.val=d.toJSON=function(){var e=b(this),t=this.constructor;return T(this,e<=t.toExpNeg||e>=t.toExpPos)};var y=function(){function e(e,t){var r,n=0,i=e.length;for(e=e.slice();i--;)r=e[i]*t+n,e[i]=r%1e7|0,n=r/1e7|0;return n&&e.unshift(n),e}function t(e,t,r,n){var i,a;if(r!=n)a=r>n?1:-1;else for(i=a=0;i<r;i++)if(e[i]!=t[i]){a=e[i]>t[i]?1:-1;break}return a}function r(e,t,r){for(var n=0;r--;)e[r]-=n,n=+(e[r]<t[r]),e[r]=1e7*n+e[r]-t[r];for(;!e[0]&&e.length>1;)e.shift()}return function(n,i,a,s){var l,u,c,h,f,d,p,g,m,y,v,w,x,E,S,O,T,I,A=n.constructor,C=n.s==i.s?1:-1,k=n.d,P=i.d;if(!n.s)return new A(n);if(!i.s)throw Error(o+"Division by zero");for(c=0,u=n.e-i.e,T=P.length,S=k.length,g=(p=new A(C)).d=[];P[c]==(k[c]||0);)++c;if(P[c]>(k[c]||0)&&--u,(w=null==a?a=A.precision:s?a+(b(n)-b(i))+1:a)<0)return new A(0);if(w=w/7+2|0,c=0,1==T)for(h=0,P=P[0],w++;(c<S||h)&&w--;c++)x=1e7*h+(k[c]||0),g[c]=x/P|0,h=x%P|0;else{for((h=1e7/(P[0]+1)|0)>1&&(P=e(P,h),k=e(k,h),T=P.length,S=k.length),E=T,y=(m=k.slice(0,T)).length;y<T;)m[y++]=0;(I=P.slice()).unshift(0),O=P[0],P[1]>=1e7/2&&++O;do h=0,(l=t(P,m,T,y))<0?(v=m[0],T!=y&&(v=1e7*v+(m[1]||0)),(h=v/O|0)>1?(h>=1e7&&(h=1e7-1),d=(f=e(P,h)).length,y=m.length,1==(l=t(f,m,d,y))&&(h--,r(f,T<d?I:P,d))):(0==h&&(l=h=1),f=P.slice()),(d=f.length)<y&&f.unshift(0),r(m,f,y),-1==l&&(y=m.length,(l=t(P,m,T,y))<1&&(h++,r(m,T<y?I:P,y))),y=m.length):0===l&&(h++,m=[0]),g[c++]=h,l&&m[0]?m[y++]=k[E]||0:(m=[k[E]],y=1);while((E++<S||void 0!==m[0])&&w--)}return g[0]||g.shift(),p.e=u,_(p,s?a+b(p)+1:a)}}();function v(e,t){var r,i,o,s,u,h=0,f=0,d=e.constructor,p=d.precision;if(b(e)>16)throw Error(l+b(e));if(!e.s)return new d(n);for(null==t?(a=!1,u=p):u=t,s=new d(.03125);e.abs().gte(.1);)e=e.times(s),f+=5;for(u+=Math.log(c(2,f))/Math.LN10*2+5|0,r=i=o=new d(n),d.precision=u;;){if(i=_(i.times(e),u),r=r.times(++h),m((s=o.plus(y(i,r,u))).d).slice(0,u)===m(o.d).slice(0,u)){for(;f--;)o=_(o.times(o),u);return d.precision=p,null==t?(a=!0,_(o,p)):o}o=s}}function b(e){for(var t=7*e.e,r=e.d[0];r>=10;r/=10)t++;return t}function w(e,t,r){if(t>e.LN10.sd())throw a=!0,r&&(e.precision=r),Error(o+"LN10 precision limit exceeded");return _(new e(e.LN10),t)}function x(e){for(var t="";e--;)t+="0";return t}function E(e,t){var r,i,s,l,u,c,h,f,d,p=1,g=e,v=g.d,x=g.constructor,S=x.precision;if(g.s<1)throw Error(o+(g.s?"NaN":"-Infinity"));if(g.eq(n))return new x(0);if(null==t?(a=!1,f=S):f=t,g.eq(10))return null==t&&(a=!0),w(x,f);if(x.precision=f+=10,i=(r=m(v)).charAt(0),!(15e14>Math.abs(l=b(g))))return h=w(x,f+2,S).times(l+""),g=E(new x(i+"."+r.slice(1)),f-10).plus(h),x.precision=S,null==t?(a=!0,_(g,S)):g;for(;i<7&&1!=i||1==i&&r.charAt(1)>3;)i=(r=m((g=g.times(e)).d)).charAt(0),p++;for(l=b(g),i>1?(g=new x("0."+r),l++):g=new x(i+"."+r.slice(1)),c=u=g=y(g.minus(n),g.plus(n),f),d=_(g.times(g),f),s=3;;){if(u=_(u.times(d),f),m((h=c.plus(y(u,new x(s),f))).d).slice(0,f)===m(c.d).slice(0,f))return c=c.times(2),0!==l&&(c=c.plus(w(x,f+2,S).times(l+""))),c=y(c,new x(p),f),x.precision=S,null==t?(a=!0,_(c,S)):c;c=h,s+=2}}function S(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;48===t.charCodeAt(n);)++n;for(i=t.length;48===t.charCodeAt(i-1);)--i;if(t=t.slice(n,i)){if(i-=n,e.e=u((r=r-n-1)/7),e.d=[],n=(r+1)%7,r<0&&(n+=7),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=7;n<i;)e.d.push(+t.slice(n,n+=7));n=7-(t=t.slice(n)).length}else n-=i;for(;n--;)t+="0";if(e.d.push(+t),a&&(e.e>f||e.e<-f))throw Error(l+r)}else e.s=0,e.e=0,e.d=[0];return e}function _(e,t,r){var n,i,o,s,h,d,p,g,m=e.d;for(s=1,o=m[0];o>=10;o/=10)s++;if((n=t-s)<0)n+=7,i=t,p=m[g=0];else{if((g=Math.ceil((n+1)/7))>=(o=m.length))return e;for(s=1,p=o=m[g];o>=10;o/=10)s++;n%=7,i=n-7+s}if(void 0!==r&&(h=p/(o=c(10,s-i-1))%10|0,d=t<0||void 0!==m[g+1]||p%o,d=r<4?(h||d)&&(0==r||r==(e.s<0?3:2)):h>5||5==h&&(4==r||d||6==r&&(n>0?i>0?p/c(10,s-i):0:m[g-1])%10&1||r==(e.s<0?8:7))),t<1||!m[0])return d?(o=b(e),m.length=1,t=t-o-1,m[0]=c(10,(7-t%7)%7),e.e=u(-t/7)||0):(m.length=1,m[0]=e.e=e.s=0),e;if(0==n?(m.length=g,o=1,g--):(m.length=g+1,o=c(10,7-n),m[g]=i>0?(p/c(10,s-i)%c(10,i)|0)*o:0),d)for(;;)if(0==g){1e7==(m[0]+=o)&&(m[0]=1,++e.e);break}else{if(m[g]+=o,1e7!=m[g])break;m[g--]=0,o=1}for(n=m.length;0===m[--n];)m.pop();if(a&&(e.e>f||e.e<-f))throw Error(l+b(e));return e}function O(e,t){var r,n,i,o,s,l,u,c,h,f,d=e.constructor,p=d.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new d(e),a?_(t,p):t;if(u=e.d,f=t.d,n=t.e,c=e.e,u=u.slice(),s=c-n){for((h=s<0)?(r=u,s=-s,l=f.length):(r=f,n=c,l=u.length),s>(i=Math.max(Math.ceil(p/7),l)+2)&&(s=i,r.length=1),r.reverse(),i=s;i--;)r.push(0);r.reverse()}else{for((h=(i=u.length)<(l=f.length))&&(l=i),i=0;i<l;i++)if(u[i]!=f[i]){h=u[i]<f[i];break}s=0}for(h&&(r=u,u=f,f=r,t.s=-t.s),l=u.length,i=f.length-l;i>0;--i)u[l++]=0;for(i=f.length;i>s;){if(u[--i]<f[i]){for(o=i;o&&0===u[--o];)u[o]=1e7-1;--u[o],u[i]+=1e7}u[i]-=f[i]}for(;0===u[--l];)u.pop();for(;0===u[0];u.shift())--n;return u[0]?(t.d=u,t.e=n,a?_(t,p):t):new d(0)}function T(e,t,r){var n,i=b(e),a=m(e.d),o=a.length;return t?(r&&(n=r-o)>0?a=a.charAt(0)+"."+a.slice(1)+x(n):o>1&&(a=a.charAt(0)+"."+a.slice(1)),a=a+(i<0?"e":"e+")+i):i<0?(a="0."+x(-i-1)+a,r&&(n=r-o)>0&&(a+=x(n))):i>=o?(a+=x(i+1-o),r&&(n=r-i-1)>0&&(a=a+"."+x(n))):((n=i+1)<o&&(a=a.slice(0,n)+"."+a.slice(n)),r&&(n=r-o)>0&&(i+1===o&&(a+="."),a+=x(n))),e.s<0?"-"+a:a}function I(e,t){if(e.length>t)return e.length=t,!0}function A(e){if(!e||"object"!=typeof e)throw Error(o+"Object expected");var t,r,n,i=["precision",1,1e9,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if(void 0!==(n=e[r=i[t]]))if(u(n)===n&&n>=i[t+1]&&n<=i[t+2])this[r]=n;else throw Error(s+r+": "+n);if(void 0!==(n=e[r="LN10"]))if(n==Math.LN10)this[r]=new this(n);else throw Error(s+r+": "+n);return this}if((i=function e(t){var r,n,i;function a(e){if(!(this instanceof a))return new a(e);if(this.constructor=a,e instanceof a){this.s=e.s,this.e=e.e,this.d=(e=e.d)?e.slice():e;return}if("number"==typeof e){if(0*e!=0)throw Error(s+e);if(e>0)this.s=1;else if(e<0)e=-e,this.s=-1;else{this.s=0,this.e=0,this.d=[0];return}if(e===~~e&&e<1e7){this.e=0,this.d=[e];return}return S(this,e.toString())}if("string"!=typeof e)throw Error(s+e);if(45===e.charCodeAt(0)?(e=e.slice(1),this.s=-1):this.s=1,h.test(e))S(this,e);else throw Error(s+e)}if(a.prototype=d,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=e,a.config=a.set=A,void 0===t&&(t={}),t)for(r=0,i=["precision","rounding","toExpNeg","toExpPos","LN10"];r<i.length;)t.hasOwnProperty(n=i[r++])||(t[n]=this[n]);return a.config(t),a}(i)).default=i.Decimal=i,n=new i(1),"function"==typeof define&&define.amd){let t;e.r,void 0!==(t=i)&&e.v(t)}else t.exports?t.exports=i:(r||(r="u">typeof self&&self&&self.self==self?self:Function("return this")()),r.Decimal=i)}(e.e)},63101,(e,t,r)=>{"use strict";var n=Object.prototype.hasOwnProperty,i="~";function a(){}function o(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function s(e,t,r,n,a){if("function"!=typeof r)throw TypeError("The listener must be a function");var s=new o(r,n||e,a),l=i?i+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function l(e,t){0==--e._eventsCount?e._events=new a:delete e._events[t]}function u(){this._events=new a,this._eventsCount=0}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(i=!1)),u.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)n.call(e,t)&&r.push(i?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},u.prototype.listeners=function(e){var t=i?i+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,a=r.length,o=Array(a);n<a;n++)o[n]=r[n].fn;return o},u.prototype.listenerCount=function(e){var t=i?i+e:e,r=this._events[t];return r?r.fn?1:r.length:0},u.prototype.emit=function(e,t,r,n,a,o){var s=i?i+e:e;if(!this._events[s])return!1;var l,u,c=this._events[s],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,n),!0;case 5:return c.fn.call(c.context,t,r,n,a),!0;case 6:return c.fn.call(c.context,t,r,n,a,o),!0}for(u=1,l=Array(h-1);u<h;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var f,d=c.length;for(u=0;u<d;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),h){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,r);break;case 4:c[u].fn.call(c[u].context,t,r,n);break;default:if(!l)for(f=1,l=Array(h-1);f<h;f++)l[f-1]=arguments[f];c[u].fn.apply(c[u].context,l)}}return!0},u.prototype.on=function(e,t,r){return s(this,e,t,r,!1)},u.prototype.once=function(e,t,r){return s(this,e,t,r,!0)},u.prototype.removeListener=function(e,t,r,n){var a=i?i+e:e;if(!this._events[a])return this;if(!t)return l(this,a),this;var o=this._events[a];if(o.fn)o.fn!==t||n&&!o.once||r&&o.context!==r||l(this,a);else{for(var s=0,u=[],c=o.length;s<c;s++)(o[s].fn!==t||n&&!o[s].once||r&&o[s].context!==r)&&u.push(o[s]);u.length?this._events[a]=1===u.length?u[0]:u:l(this,a)}return this},u.prototype.removeAllListeners=function(e){var t;return e?(t=i?i+e:e,this._events[t]&&l(this,t)):(this._events=new a,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=i,u.EventEmitter=u,t.exports=u},53610,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),r.last=function(e){return e[e.length-1]}},30014,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),r.toArray=function(e){return Array.isArray(e)?e:Array.from(e)}},12153,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});let n=e.r(53610),i=e.r(30014),a=e.r(35252);r.last=function(e){if(a.isArrayLike(e))return n.last(i.toArray(e))}},33660,(e,t,r)=>{t.exports=e.r(12153).last},2049,(e,t,r)=>{"use strict";var n="function"==typeof Symbol&&Symbol.for,i=n?Symbol.for("react.element"):60103,a=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,s=n?Symbol.for("react.strict_mode"):60108,l=n?Symbol.for("react.profiler"):60114,u=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,h=n?Symbol.for("react.async_mode"):60111,f=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,p=n?Symbol.for("react.suspense"):60113,g=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,y=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,b=n?Symbol.for("react.fundamental"):60117,w=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function E(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case i:switch(e=e.type){case h:case f:case o:case l:case s:case p:return e;default:switch(e=e&&e.$$typeof){case c:case d:case y:case m:case u:return e;default:return t}}case a:return t}}}function S(e){return E(e)===f}r.AsyncMode=h,r.ConcurrentMode=f,r.ContextConsumer=c,r.ContextProvider=u,r.Element=i,r.ForwardRef=d,r.Fragment=o,r.Lazy=y,r.Memo=m,r.Portal=a,r.Profiler=l,r.StrictMode=s,r.Suspense=p,r.isAsyncMode=function(e){return S(e)||E(e)===h},r.isConcurrentMode=S,r.isContextConsumer=function(e){return E(e)===c},r.isContextProvider=function(e){return E(e)===u},r.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===i},r.isForwardRef=function(e){return E(e)===d},r.isFragment=function(e){return E(e)===o},r.isLazy=function(e){return E(e)===y},r.isMemo=function(e){return E(e)===m},r.isPortal=function(e){return E(e)===a},r.isProfiler=function(e){return E(e)===l},r.isStrictMode=function(e){return E(e)===s},r.isSuspense=function(e){return E(e)===p},r.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===o||e===f||e===l||e===s||e===p||e===g||"object"==typeof e&&null!==e&&(e.$$typeof===y||e.$$typeof===m||e.$$typeof===u||e.$$typeof===c||e.$$typeof===d||e.$$typeof===b||e.$$typeof===w||e.$$typeof===x||e.$$typeof===v)},r.typeOf=E},86880,(e,t,r)=>{"use strict";t.exports=e.r(2049)},72426,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),r.isPlainObject=function(e){if("object"!=typeof e||null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){let t=e[Symbol.toStringTag];return null!=t&&!!Object.getOwnPropertyDescriptor(e,Symbol.toStringTag)?.writable&&e.toString()===`[object ${t}]`}let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}},60954,(e,t,r)=>{t.exports=e.r(72426).isPlainObject},47043,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),r.uniqBy=function(e,t){let r=new Map;for(let n=0;n<e.length;n++){let i=e[n],a=t(i,n,e);r.has(a)||r.set(a,i)}return Array.from(r.values())}},42711,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),r.ary=function(e,t){return function(...r){return e.apply(this,r.slice(0,t))}}},48792,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),r.identity=function(e){return e}},74651,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),r.isObjectLike=function(e){return"object"==typeof e&&null!==e}},23303,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});let n=e.r(35252),i=e.r(74651);r.isArrayLikeObject=function(e){return i.isObjectLike(e)&&n.isArrayLike(e)}},95138,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});let n=e.r(51040);r.property=function(e){return function(t){return n.get(t,e)}}},87807,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),r.isPrimitive=function(e){return null==e||"object"!=typeof e&&"function"!=typeof e}},34957,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});let n=e.r(34250),i=e.r(87807),a=e.r(44296);function o(e,t,r,u){if(t===e)return!0;switch(typeof t){case"object":return function(e,t,r,n){if(null==t)return!0;if(Array.isArray(t))return s(e,t,r,n);if(t instanceof Map){var a=e,o=t,u=r,c=n;if(0===o.size)return!0;if(!(a instanceof Map))return!1;for(let[e,t]of o.entries())if(!1===u(a.get(e),t,e,a,o,c))return!1;return!0}if(t instanceof Set)return l(e,t,r,n);let h=Object.keys(t);if(null==e||i.isPrimitive(e))return 0===h.length;if(0===h.length)return!0;if(n?.has(t))return n.get(t)===e;n?.set(t,e);try{for(let a=0;a<h.length;a++){let o=h[a];if(!i.isPrimitive(e)&&!(o in e)||void 0===t[o]&&void 0!==e[o]||null===t[o]&&null!==e[o]||!r(e[o],t[o],o,e,t,n))return!1}return!0}finally{n?.delete(t)}}(e,t,r,u);case"function":if(Object.keys(t).length>0)return o(e,{...t},r,u);return a.isEqualsSameValueZero(e,t);default:if(!n.isObject(e))return a.isEqualsSameValueZero(e,t);if("string"==typeof t)return""===t;return!0}}function s(e,t,r,n){if(0===t.length)return!0;if(!Array.isArray(e))return!1;let i=new Set;for(let a=0;a<t.length;a++){let o=t[a],s=!1;for(let l=0;l<e.length;l++){if(i.has(l))continue;let u=e[l],c=!1;if(r(u,o,a,e,t,n)&&(c=!0),c){i.add(l),s=!0;break}}if(!s)return!1}return!0}function l(e,t,r,n){return 0===t.size||e instanceof Set&&s([...e],[...t],r,n)}r.isMatchWith=function e(t,r,n){return"function"!=typeof n?e(t,r,()=>void 0):o(t,r,function e(t,r,i,a,s,l){let u=n(t,r,i,a,s,l);return void 0!==u?!!u:o(t,r,e,l)},new Map)},r.isSetMatch=l},68810,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});let n=e.r(34957);r.isMatch=function(e,t){return n.isMatchWith(e,t,()=>void 0)}},48876,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),r.getSymbols=function(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}},27173,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),r.getTag=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}},99691,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),r.argumentsTag="[object Arguments]",r.arrayBufferTag="[object ArrayBuffer]",r.arrayTag="[object Array]",r.bigInt64ArrayTag="[object BigInt64Array]",r.bigUint64ArrayTag="[object BigUint64Array]",r.booleanTag="[object Boolean]",r.dataViewTag="[object DataView]",r.dateTag="[object Date]",r.errorTag="[object Error]",r.float32ArrayTag="[object Float32Array]",r.float64ArrayTag="[object Float64Array]",r.functionTag="[object Function]",r.int16ArrayTag="[object Int16Array]",r.int32ArrayTag="[object Int32Array]",r.int8ArrayTag="[object Int8Array]",r.mapTag="[object Map]",r.numberTag="[object Number]",r.objectTag="[object Object]",r.regexpTag="[object RegExp]",r.setTag="[object Set]",r.stringTag="[object String]",r.symbolTag="[object Symbol]",r.uint16ArrayTag="[object Uint16Array]",r.uint32ArrayTag="[object Uint32Array]",r.uint8ArrayTag="[object Uint8Array]",r.uint8ClampedArrayTag="[object Uint8ClampedArray]"},53714,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),r.isTypedArray=function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}},59238,(e,t,r)=>{"use strict";var n=e.i(38054);Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});let i=e.r(48876),a=e.r(27173),o=e.r(99691),s=e.r(87807),l=e.r(53714);function u(e,t,r,i=new Map,h){let f=h?.(e,t,r,i);if(void 0!==f)return f;if(s.isPrimitive(e))return e;if(i.has(e))return i.get(e);if(Array.isArray(e)){let t=Array(e.length);i.set(e,t);for(let n=0;n<e.length;n++)t[n]=u(e[n],n,r,i,h);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){let t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){let t=new Map;for(let[n,a]of(i.set(e,t),e))t.set(n,u(a,n,r,i,h));return t}if(e instanceof Set){let t=new Set;for(let n of(i.set(e,t),e))t.add(u(n,void 0,r,i,h));return t}if(void 0!==n.Buffer&&n.Buffer.isBuffer(e))return e.subarray();if(l.isTypedArray(e)){let t=new(Object.getPrototypeOf(e)).constructor(e.length);i.set(e,t);for(let n=0;n<e.length;n++)t[n]=u(e[n],n,r,i,h);return t}if(e instanceof ArrayBuffer||"u">typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){let t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return i.set(e,t),c(t,e,r,i,h),t}if("u">typeof File&&e instanceof File){let t=new File([e],e.name,{type:e.type});return i.set(e,t),c(t,e,r,i,h),t}if("u">typeof Blob&&e instanceof Blob){let t=new Blob([e],{type:e.type});return i.set(e,t),c(t,e,r,i,h),t}if(e instanceof Error){let t=new e.constructor;return i.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,c(t,e,r,i,h),t}if(e instanceof Boolean){let t=new Boolean(e.valueOf());return i.set(e,t),c(t,e,r,i,h),t}if(e instanceof Number){let t=new Number(e.valueOf());return i.set(e,t),c(t,e,r,i,h),t}if(e instanceof String){let t=new String(e.valueOf());return i.set(e,t),c(t,e,r,i,h),t}if("object"==typeof e&&function(e){switch(a.getTag(e)){case o.argumentsTag:case o.arrayTag:case o.arrayBufferTag:case o.dataViewTag:case o.booleanTag:case o.dateTag:case o.float32ArrayTag:case o.float64ArrayTag:case o.int8ArrayTag:case o.int16ArrayTag:case o.int32ArrayTag:case o.mapTag:case o.numberTag:case o.objectTag:case o.regexpTag:case o.setTag:case o.stringTag:case o.symbolTag:case o.uint8ArrayTag:case o.uint8ClampedArrayTag:case o.uint16ArrayTag:case o.uint32ArrayTag:return!0;default:return!1}}(e)){let t=Object.create(Object.getPrototypeOf(e));return i.set(e,t),c(t,e,r,i,h),t}return e}function c(e,t,r=e,n,a){let o=[...Object.keys(t),...i.getSymbols(t)];for(let i=0;i<o.length;i++){let s=o[i],l=Object.getOwnPropertyDescriptor(e,s);(null==l||l.writable)&&(e[s]=u(t[s],s,r,n,a))}}r.cloneDeepWith=function(e,t){return u(e,void 0,e,new Map,t)},r.cloneDeepWithImpl=u,r.copyProperties=c},93505,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});let n=e.r(59238);r.cloneDeep=function(e){return n.cloneDeepWithImpl(e,void 0,e,new Map,void 0)}},21751,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});let n=e.r(68810),i=e.r(93505);r.matches=function(e){return e=i.cloneDeep(e),t=>n.isMatch(t,e)}},54005,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});let n=e.r(59238),i=e.r(27173),a=e.r(99691);r.cloneDeepWith=function(e,t){return n.cloneDeepWith(e,(r,o,s,l)=>{let u=t?.(r,o,s,l);if(void 0!==u)return u;if("object"==typeof e){if(i.getTag(e)===a.objectTag&&"function"!=typeof e.constructor){let t={};return l.set(e,t),n.copyProperties(t,e,s,l),t}switch(Object.prototype.toString.call(e)){case a.numberTag:case a.stringTag:case a.booleanTag:{let t=new e.constructor(e?.valueOf());return n.copyProperties(t,e),t}case a.argumentsTag:{let t={};return n.copyProperties(t,e),t.length=e.length,t[Symbol.iterator]=e[Symbol.iterator],t}default:return}}})}},55610,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});let n=e.r(54005);r.cloneDeep=function(e){return n.cloneDeepWith(e)}},95188,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});let n=e.r(27173);r.isArguments=function(e){return null!==e&&"object"==typeof e&&"[object Arguments]"===n.getTag(e)}},65990,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});let n=e.r(77692),i=e.r(65692),a=e.r(95188),o=e.r(78690);r.has=function(e,t){let r;if(0===(r=Array.isArray(t)?t:"string"==typeof t&&n.isDeepKey(t)&&e?.[t]==null?o.toPath(t):[t]).length)return!1;let s=e;for(let e=0;e<r.length;e++){let t=r[e];if((null==s||!Object.hasOwn(s,t))&&!((Array.isArray(s)||a.isArguments(s))&&i.isIndex(t)&&t<s.length))return!1;s=s[t]}return!0}},99531,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});let n=e.r(68810),i=e.r(56872),a=e.r(55610),o=e.r(51040),s=e.r(65990);r.matchesProperty=function(e,t){switch(typeof e){case"object":Object.is(e?.valueOf(),-0)&&(e="-0");break;case"number":e=i.toKey(e)}return t=a.cloneDeep(t),function(r){let i=o.get(r,e);return void 0===i?s.has(r,e):void 0===t?void 0===i:n.isMatch(i,t)}}},34780,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});let n=e.r(48792),i=e.r(95138),a=e.r(21751),o=e.r(99531);r.iteratee=function(e){if(null==e)return n.identity;switch(typeof e){case"function":return e;case"object":if(Array.isArray(e)&&2===e.length)return o.matchesProperty(e[0],e[1]);return a.matches(e);case"string":case"symbol":case"number":return i.property(e)}}},96800,(e,t,r)=>{"use strict";Object.defineProperty(r,Symbol.toStringTag,{value:"Module"});let n=e.r(47043),i=e.r(42711),a=e.r(48792),o=e.r(23303),s=e.r(34780);r.uniqBy=function(e,t=a.identity){return o.isArrayLikeObject(e)?n.uniqBy(Array.from(e),i.ary(s.iteratee(t),1)):[]}},89402,(e,t,r)=>{t.exports=e.r(96800).uniqBy},41047,e=>{"use strict";let t={Ed:"#3b82f6",Zeca:"#eab308",Ian:"#8b5cf6",Jorge:"#ef4444",Samuka:"#10b981"};function r(e){return t[e]||"#a8a29e"}e.s(["getPlayerColor",()=>r])},46947,e=>{"use strict";var t,r,n,i,a,o,s,l,u,c,h,f,d,p,g,m,y,v,b,w,x,E,S,_,O,T,I,A,C,k,P,D,N,j,M,R,L=e.i(38447),F=e.i(68692),V=e.i(88363);e.i(68392);var B=e.i(16505),U=e.i(90288);e.i(86877);var z=Symbol.for("immer-nothing"),q=Symbol.for("immer-draftable"),$=Symbol.for("immer-state");function K(e){throw Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var G=Object,H=G.getPrototypeOf,W="constructor",Q="prototype",Y="configurable",J="enumerable",X="writable",Z="value",ee=e=>!!e&&!!e[$];function et(e){return!!e&&(ei(e)||ec(e)||!!e[q]||!!e[W]?.[q]||eh(e)||ef(e))}var er=G[Q][W].toString(),en=new WeakMap;function ei(e){if(!e||!ed(e))return!1;let t=H(e);if(null===t||t===G[Q])return!0;let r=G.hasOwnProperty.call(t,W)&&t[W];if(r===Object)return!0;if(!ep(r))return!1;let n=en.get(r);return void 0===n&&(n=Function.toString.call(r),en.set(r,n)),n===er}function ea(e,t,r=!0){0===eo(e)?(r?Reflect.ownKeys(e):G.keys(e)).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function eo(e){let t=e[$];return t?t.type_:ec(e)?1:eh(e)?2:3*!!ef(e)}var es=(e,t,r=eo(e))=>2===r?e.has(t):G[Q].hasOwnProperty.call(e,t),el=(e,t,r=eo(e))=>2===r?e.get(t):e[t],eu=(e,t,r,n=eo(e))=>{2===n?e.set(t,r):3===n?e.add(r):e[t]=r},ec=Array.isArray,eh=e=>e instanceof Map,ef=e=>e instanceof Set,ed=e=>"object"==typeof e,ep=e=>"function"==typeof e,eg=e=>e.modified_?e.copy_:e.base_;function em(e,t){if(eh(e))return new Map(e);if(ef(e))return new Set(e);if(ec(e))return Array[Q].slice.call(e);let r=ei(e);if(!0!==t&&("class_only"!==t||r)){let t=H(e);if(null!==t&&r)return{...e};let n=G.create(t);return G.assign(n,e)}{let t=G.getOwnPropertyDescriptors(e);delete t[$];let r=Reflect.ownKeys(t);for(let n=0;n<r.length;n++){let i=r[n],a=t[i];!1===a[X]&&(a[X]=!0,a[Y]=!0),(a.get||a.set)&&(t[i]={[Y]:!0,[X]:!0,[J]:a[J],[Z]:e[i]})}return G.create(H(e),t)}}function ey(e,t=!1){return eb(e)||ee(e)||!et(e)||(eo(e)>1&&G.defineProperties(e,{set:ev,add:ev,clear:ev,delete:ev}),G.freeze(e),t&&ea(e,(e,t)=>{ey(t,!0)},!1)),e}var ev={[Z]:function(){K(2)}};function eb(e){return!(null!==e&&ed(e))||G.isFrozen(e)}var ew="MapSet",ex="Patches",eE="ArrayMethods",eS={};function e_(e){let t=eS[e];return t||K(0,e),t}var eO=e=>!!eS[e];function eT(e,t){t&&(e.patchPlugin_=e_(ex),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function eI(e){eA(e),e.drafts_.forEach(ek),e.drafts_=null}function eA(e){e===a&&(a=e.parent_)}var eC=e=>a={drafts_:[],parent_:a,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:eO(ew)?e_(ew):void 0,arrayMethodsPlugin_:eO(eE)?e_(eE):void 0};function ek(e){let t=e[$];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function eP(e,t){t.unfinalizedDrafts_=t.drafts_.length;let r=t.drafts_[0];if(void 0!==e&&e!==r){r[$].modified_&&(eI(t),K(4)),et(e)&&(e=eD(t,e));let{patchPlugin_:n}=t;n&&n.generateReplacementPatches_(r[$].base_,e,t)}else e=eD(t,r);return function(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&ey(t,r)}(t,e,!0),eI(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==z?e:void 0}function eD(e,t){if(eb(t))return t;let r=t[$];if(!r)return eF(t,e.handledSet_,e);if(!ej(r,e))return t;if(!r.modified_)return r.base_;if(!r.finalized_){let{callbacks_:t}=r;if(t)for(;t.length>0;)t.pop()(e);eL(r,e)}return r.copy_}function eN(e){e.finalized_=!0,e.scope_.unfinalizedDrafts_--}var ej=(e,t)=>e.scope_===t,eM=[];function eR(e,t,r,n){let i=e.copy_||e.base_,a=e.type_;if(void 0!==n&&el(i,n,a)===t)return void eu(i,n,r,a);if(!e.draftLocations_){let t=e.draftLocations_=new Map;ea(i,(e,r)=>{if(ee(r)){let n=t.get(r)||[];n.push(e),t.set(r,n)}})}for(let n of e.draftLocations_.get(t)??eM)eu(i,n,r,a)}function eL(e,t){if(e.modified_&&!e.finalized_&&(3===e.type_||1===e.type_&&e.allIndicesReassigned_||(e.assigned_?.size??0)>0)){let{patchPlugin_:r}=t;if(r){let n=r.getPath(e);n&&r.generatePatches_(e,n,t)}eN(e)}}function eF(e,t,r){return!r.immer_.autoFreeze_&&r.unfinalizedDrafts_<1||ee(e)||t.has(e)||!et(e)||eb(e)||(t.add(e),ea(e,(n,i)=>{if(ee(i)){let t=i[$];ej(t,r)&&(eu(e,n,eg(t),e.type_),eN(t))}else et(i)&&eF(i,t,r)})),e}var eV={get(e,t){let r;if(t===$)return e;let n=e.scope_.arrayMethodsPlugin_,i=1===e.type_&&"string"==typeof t;if(i&&n?.isArrayOperationMethod(t))return n.createMethodInterceptor(e,t);let a=e.copy_||e.base_;if(!es(a,t,e.type_)){var o;let r;return o=e,(r=ez(a,t))?Z in r?r[Z]:r.get?.call(o.draft_):void 0}let s=a[t];if(e.finalized_||!et(s)||i&&e.operationMethod&&n?.isMutatingArrayMethod(e.operationMethod)&&Number.isInteger(r=+t)&&String(r)===t)return s;if(s===eU(e.base_,t)){e$(e);let r=1===e.type_?+t:t,n=eK(e.scope_,s,e,r);return e.copy_[r]=n}return s},has:(e,t)=>t in(e.copy_||e.base_),ownKeys:e=>Reflect.ownKeys(e.copy_||e.base_),set(e,t,r){let n=ez(e.copy_||e.base_,t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){let n=eU(e.copy_||e.base_,t),i=n?.[$];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_.set(t,!1),!0;if((r===n?0!==r||1/r==1/n:r!=r&&n!=n)&&(void 0!==r||es(e.base_,t,e.type_)))return!0;e$(e),eq(e)}return!!(e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t]))||(e.copy_[t]=r,e.assigned_.set(t,!0),!function(e,t,r){let{scope_:n}=e;if(ee(r)){let i=r[$];ej(i,n)&&i.callbacks_.push(function(){e$(e),eR(e,r,eg(i),t)})}else et(r)&&e.callbacks_.push(function(){let i=e.copy_||e.base_;3===e.type_?i.has(r)&&eF(r,n.handledSet_,n):el(i,t,e.type_)===r&&n.drafts_.length>1&&(e.assigned_.get(t)??!1)===!0&&e.copy_&&eF(el(e.copy_,t,e.type_),n.handledSet_,n)})}(e,t,r),!0)},deleteProperty:(e,t)=>(e$(e),void 0!==eU(e.base_,t)||t in e.base_?(e.assigned_.set(t,!1),eq(e)):e.assigned_.delete(t),e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){let r=e.copy_||e.base_,n=Reflect.getOwnPropertyDescriptor(r,t);return n?{[X]:!0,[Y]:1!==e.type_||"length"!==t,[J]:n[J],[Z]:r[t]}:n},defineProperty(){K(11)},getPrototypeOf:e=>H(e.base_),setPrototypeOf(){K(12)}},eB={};for(let e in eV){let t=eV[e];eB[e]=function(){let e=arguments;return e[0]=e[0][0],t.apply(this,e)}}function eU(e,t){let r=e[$];return(r?r.copy_||r.base_:e)[t]}function ez(e,t){if(!(t in e))return;let r=H(e);for(;r;){let e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=H(r)}}function eq(e){!e.modified_&&(e.modified_=!0,e.parent_&&eq(e.parent_))}function e$(e){e.copy_||(e.assigned_=new Map,e.copy_=em(e.base_,e.scope_.immer_.useStrictShallowCopy_))}function eK(e,t,r,n){let[i,o]=eh(t)?e_(ew).proxyMap_(t,r):ef(t)?e_(ew).proxySet_(t,r):function(e,t){let r=ec(e),n={type_:+!!r,scope_:t?t.scope_:a,modified_:!1,finalized_:!1,assigned_:void 0,parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0},i=n,o=eV;r&&(i=[n],o=eB);let{revoke:s,proxy:l}=Proxy.revocable(i,o);return n.draft_=l,n.revoke_=s,[l,n]}(t,r);if((r?.scope_??a).drafts_.push(i),o.callbacks_=r?.callbacks_??[],o.key_=n,r&&void 0!==n)r.callbacks_.push(function(e){if(!o||!ej(o,e))return;e.mapSetPlugin_?.fixSetContents(o);let t=eg(o);eR(r,o.draft_??o,t,n),eL(o,e)});else o.callbacks_.push(function(e){e.mapSetPlugin_?.fixSetContents(o);let{patchPlugin_:t}=e;o.modified_&&t&&t.generatePatches_(o,[],e)});return i}function eG(e){return ee(e)||K(10,e),function e(t){let r;if(!et(t)||eb(t))return t;let n=t[$],i=!0;if(n){if(!n.modified_)return n.base_;n.finalized_=!0,r=em(t,n.scope_.immer_.useStrictShallowCopy_),i=n.scope_.immer_.shouldUseStrictIteration()}else r=em(t,!0);return ea(r,(t,n)=>{eu(r,t,e(n))},i),n&&(n.finalized_=!1),r}(e)}eB.deleteProperty=function(e,t){return eB.set.call(this,e,t,void 0)},eB.set=function(e,t,r){return eV.set.call(this,e[0],t,r,e[0])};var eH=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(e,t,r)=>{let n;if(ep(e)&&!ep(t)){let r=t;t=e;let n=this;return function(e=r,...i){return n.produce(e,e=>t.call(this,e,...i))}}if(ep(t)||K(6),void 0===r||ep(r)||K(7),et(e)){let i=eC(this),a=eK(i,e,void 0),o=!0;try{n=t(a),o=!1}finally{o?eI(i):eA(i)}return eT(i,r),eP(n,i)}if(e&&ed(e))K(1,e);else{if(void 0===(n=t(e))&&(n=e),n===z&&(n=void 0),this.autoFreeze_&&ey(n,!0),r){let t=[],i=[];e_(ex).generateReplacementPatches_(e,n,{patches_:t,inversePatches_:i}),r(t,i)}return n}},this.produceWithPatches=(e,t)=>{let r,n;return ep(e)?(t,...r)=>this.produceWithPatches(t,t=>e(t,...r)):[this.produce(e,t,(e,t)=>{r=e,n=t}),r,n]},(e=>"boolean"==typeof e)(e?.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),(e=>"boolean"==typeof e)(e?.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),(e=>"boolean"==typeof e)(e?.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){et(e)||K(8),ee(e)&&(e=eG(e));let t=eC(this),r=eK(t,e,void 0);return r[$].isManual_=!0,eA(t),r}finishDraft(e,t){let r=e&&e[$];r&&r.isManual_||K(9);let{scope_:n}=r;return eT(n,t),eP(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){let n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));let n=e_(ex).applyPatches_;return ee(e)?n(e,t):this.produce(e,e=>n(e,t))}}().produce,eW=e=>Array.isArray(e)?e:[e],eQ=0,eY=class{revision=eQ;_value;_lastValue;_isEqual=eJ;constructor(e,t=eJ){this._value=this._lastValue=e,this._isEqual=t}get value(){return this._value}set value(e){this.value!==e&&(this._value=e,this.revision=++eQ)}};function eJ(e,t){return e===t}function eX(e){return e instanceof eY||console.warn("Not a valid cell! ",e),e.value}var eZ=(e,t)=>!1;function e0(){return function(e,t=eJ){return new eY(null,t)}(0,eZ)}var e1=e=>{let t=e.collectionTag;null===t&&(t=e.collectionTag=e0()),eX(t)};Symbol();var e2=0,e6=Object.getPrototypeOf({}),e3=class{constructor(e){this.value=e,this.value=e,this.tag.value=e}proxy=new Proxy(this,e5);tag=e0();tags={};children={};collectionTag=null;id=e2++},e5={get:(e,t)=>(function(){let{value:r}=e,n=Reflect.get(r,t);if("symbol"==typeof t||t in e6)return n;if("object"==typeof n&&null!==n){var i;let r=e.children[t];return void 0===r&&(r=e.children[t]=Array.isArray(i=n)?new e4(i):new e3(i)),r.tag&&eX(r.tag),r.proxy}{let r=e.tags[t];return void 0===r&&((r=e.tags[t]=e0()).value=n),eX(r),n}})(),ownKeys:e=>(e1(e),Reflect.ownKeys(e.value)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e.value,t),has:(e,t)=>Reflect.has(e.value,t)},e4=class{constructor(e){this.value=e,this.value=e,this.tag.value=e}proxy=new Proxy([this],e8);tag=e0();tags={};children={};collectionTag=null;id=e2++},e8={get:([e],t)=>("length"===t&&e1(e),e5.get(e,t)),ownKeys:([e])=>e5.ownKeys(e),getOwnPropertyDescriptor:([e],t)=>e5.getOwnPropertyDescriptor(e,t),has:([e],t)=>e5.has(e,t)},e7="u">typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function e9(){return{s:0,v:void 0,o:null,p:null}}function te(e,t={}){let r,n=e9(),{resultEqualityCheck:i}=t,a=0;function o(){let t,o=n,{length:s}=arguments;for(let e=0;e<s;e++){let t=arguments[e];if("function"==typeof t||"object"==typeof t&&null!==t){let e=o.o;null===e&&(o.o=e=new WeakMap);let r=e.get(t);void 0===r?(o=e9(),e.set(t,o)):o=r}else{let e=o.p;null===e&&(o.p=e=new Map);let r=e.get(t);void 0===r?(o=e9(),e.set(t,o)):o=r}}let l=o;if(1===o.s)t=o.v;else if(t=e.apply(null,arguments),a++,i){let e=r?.deref?.()??r;null!=e&&i(e,t)&&(t=e,0!==a&&a--),r="object"==typeof t&&null!==t||"function"==typeof t?new e7(t):t}return l.s=1,l.v=t,t}return o.clearCache=()=>{n=e9(),o.resetResultsCount()},o.resultsCount=()=>a,o.resetResultsCount=()=>{a=0},o}var tt=function(e,...t){let r="function"==typeof e?{memoize:e,memoizeOptions:t}:e,n=(...e)=>{let t,n,i=0,a=0,o={},s=e.pop();"object"==typeof s&&(o=s,s=e.pop()),function(e,t=`expected a function, instead received ${typeof e}`){if("function"!=typeof e)throw TypeError(t)}(s,`createSelector expects an output function after the inputs, but received: [${typeof s}]`);let{memoize:l,memoizeOptions:u=[],argsMemoize:c=te,argsMemoizeOptions:h=[],devModeChecks:f={}}={...r,...o},d=eW(u),p=eW(h),g=(!function(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(e=>"function"==typeof e)){let r=e.map(e=>"function"==typeof e?`function ${e.name||"unnamed"}()`:typeof e).join(", ");throw TypeError(`${t}[${r}]`)}}(t=Array.isArray(e[0])?e[0]:e,"createSelector expects all input-selectors to be functions, but received the following types: "),t),m=l(function(){return i++,s.apply(null,arguments)},...d);return Object.assign(c(function(){a++;let e=function(e,t){let r=[],{length:n}=e;for(let i=0;i<n;i++)r.push(e[i].apply(null,t));return r}(g,arguments);return n=m.apply(null,e)},...p),{resultFunc:s,memoizedResultFunc:m,dependencies:g,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>n,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:l,argsMemoize:c})};return Object.assign(n,{withTypes:()=>n}),n}(te),tr=Object.assign((e,t=tt)=>{!function(e,t=`expected an object, instead received ${typeof e}`){if("object"!=typeof e)throw TypeError(t)}(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);let r=Object.keys(e);return t(r.map(t=>e[t]),(...e)=>e.reduce((e,t,n)=>(e[r[n]]=t,e),{}))},{withTypes:()=>tr});function tn(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var ti="function"==typeof Symbol&&Symbol.observable||"@@observable",ta=()=>Math.random().toString(36).substring(7).split("").join("."),to={INIT:`@@redux/INIT${ta()}`,REPLACE:`@@redux/REPLACE${ta()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${ta()}`};function ts(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function tl(e){let t,r=Object.keys(e),n={};for(let t=0;t<r.length;t++){let i=r[t];"function"==typeof e[i]&&(n[i]=e[i])}let i=Object.keys(n);try{Object.keys(n).forEach(e=>{let t=n[e];if(void 0===t(void 0,{type:to.INIT}))throw Error(tn(12));if(void 0===t(void 0,{type:to.PROBE_UNKNOWN_ACTION()}))throw Error(tn(13))})}catch(e){t=e}return function(e={},r){if(t)throw t;let a=!1,o={};for(let t=0;t<i.length;t++){let s=i[t],l=n[s],u=e[s],c=l(u,r);if(void 0===c)throw r&&r.type,Error(tn(14));o[s]=c,a=a||c!==u}return(a=a||i.length!==Object.keys(e).length)?o:e}}function tu(...e){return 0===e.length?e=>e:1===e.length?e[0]:e.reduce((e,t)=>(...r)=>e(t(...r)))}function tc(e){return ts(e)&&"type"in e&&"string"==typeof e.type}function th(e){return({dispatch:t,getState:r})=>n=>i=>"function"==typeof i?i(t,r,e):n(i)}var tf=th(),td="u">typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!=arguments.length)return"object"==typeof arguments[0]?tu:tu.apply(null,arguments)};function tp(e,t){function r(...n){if(t){let r=t(...n);if(!r)throw Error(t6(0));return{type:e,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=t=>tc(t)&&t.type===e,r}"u">typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;var tg=class e extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(...e){return super.concat.apply(this,e)}prepend(...t){return 1===t.length&&Array.isArray(t[0])?new e(...t[0].concat(this)):new e(...t.concat(this))}};function tm(e){return et(e)?eH(e,()=>{}):e}function ty(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}var tv="RTK_autoBatch",tb=()=>e=>({payload:e,meta:{[tv]:!0}}),tw=e=>t=>{setTimeout(t,e)},tx=(e={type:"raf"})=>t=>(...r)=>{let n=t(...r),i=!0,a=!1,o=!1,s=new Set,l="tick"===e.type?queueMicrotask:"raf"===e.type?"u">typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:tw(10):"callback"===e.type?e.queueNotification:tw(e.timeout),u=()=>{o=!1,a&&(a=!1,s.forEach(e=>e()))};return Object.assign({},n,{subscribe(e){let t=n.subscribe(()=>i&&e());return s.add(e),()=>{t(),s.delete(e)}},dispatch(e){try{return(a=!(i=!e?.meta?.[tv]))&&!o&&(o=!0,l(u)),n.dispatch(e)}finally{i=!0}}})};function tE(e){let t,r={},n=[],i={addCase(e,t){let n="string"==typeof e?e:e.type;if(!n)throw Error(t6(28));if(n in r)throw Error(t6(29));return r[n]=t,i},addAsyncThunk:(e,t)=>(t.pending&&(r[e.pending.type]=t.pending),t.rejected&&(r[e.rejected.type]=t.rejected),t.fulfilled&&(r[e.fulfilled.type]=t.fulfilled),t.settled&&n.push({matcher:e.settled,reducer:t.settled}),i),addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),i),addDefaultCase:e=>(t=e,i)};return e(i),[r,n,t]}var tS=Symbol.for("rtk-slice-createasyncthunk"),t_=((r=t_||{}).reducer="reducer",r.reducerWithPrepare="reducerWithPrepare",r.asyncThunk="asyncThunk",r),tO=function({creators:e}={}){let t=e?.asyncThunk?.[tS];return function(e){let r,{name:n,reducerPath:i=n}=e;if(!n)throw Error(t6(11));let a=("function"==typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name]:(...t)=>e(...t)}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},o=Object.keys(a),s={},l={},u={},c=[],h={addCase(e,t){let r="string"==typeof e?e:e.type;if(!r)throw Error(t6(12));if(r in l)throw Error(t6(13));return l[r]=t,h},addMatcher:(e,t)=>(c.push({matcher:e,reducer:t}),h),exposeAction:(e,t)=>(u[e]=t,h),exposeCaseReducer:(e,t)=>(s[e]=t,h)};function f(){let[t={},r=[],n]="function"==typeof e.extraReducers?tE(e.extraReducers):[e.extraReducers],i={...t,...l};return function(e,t){let r,[n,i,a]=tE(t);if("function"==typeof e)r=()=>tm(e());else{let t=tm(e);r=()=>t}function o(e=r(),t){let s=[n[t.type],...i.filter(({matcher:e})=>e(t)).map(({reducer:e})=>e)];return 0===s.filter(e=>!!e).length&&(s=[a]),s.reduce((e,r)=>{if(r)if(ee(e)){let n=r(e,t);return void 0===n?e:n}else{if(et(e))return eH(e,e=>r(e,t));let n=r(e,t);if(void 0===n){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return n}return e},e)}return o.getInitialState=r,o}(e.initialState,e=>{for(let t in i)e.addCase(t,i[t]);for(let t of c)e.addMatcher(t.matcher,t.reducer);for(let t of r)e.addMatcher(t.matcher,t.reducer);n&&e.addDefaultCase(n)})}o.forEach(r=>{let i=a[r],o={reducerName:r,type:`${n}/${r}`,createNotation:"function"==typeof e.reducers};"asyncThunk"===i._reducerDefinitionType?function({type:e,reducerName:t},r,n,i){if(!i)throw Error(t6(18));let{payloadCreator:a,fulfilled:o,pending:s,rejected:l,settled:u,options:c}=r,h=i(e,a,c);n.exposeAction(t,h),o&&n.addCase(h.fulfilled,o),s&&n.addCase(h.pending,s),l&&n.addCase(h.rejected,l),u&&n.addMatcher(h.settled,u),n.exposeCaseReducer(t,{fulfilled:o||tT,pending:s||tT,rejected:l||tT,settled:u||tT})}(o,i,h,t):function({type:e,reducerName:t,createNotation:r},n,i){let a,o;if("reducer"in n){if(r&&"reducerWithPrepare"!==n._reducerDefinitionType)throw Error(t6(17));a=n.reducer,o=n.prepare}else a=n;i.addCase(e,a).exposeCaseReducer(t,a).exposeAction(t,o?tp(e,o):tp(e))}(o,i,h)});let d=e=>e,p=new Map,g=new WeakMap;function m(e,t){return r||(r=f()),r(e,t)}function y(){return r||(r=f()),r.getInitialState()}function v(t,r=!1){function n(e){let i=e[t];return void 0===i&&r&&(i=ty(g,n,y)),i}function i(t=d){let n=ty(p,r,()=>new WeakMap);return ty(n,t,()=>{let n={};for(let[i,a]of Object.entries(e.selectors??{}))n[i]=function(e,t,r,n){function i(a,...o){let s=t(a);return void 0===s&&n&&(s=r()),e(s,...o)}return i.unwrapped=e,i}(a,t,()=>ty(g,t,y),r);return n})}return{reducerPath:t,getSelectors:i,get selectors(){return i(n)},selectSlice:n}}let b={name:n,reducer:m,actions:u,caseReducers:s,getInitialState:y,...v(i),injectInto(e,{reducerPath:t,...r}={}){let n=t??i;return e.inject({reducerPath:n,reducer:m},r),{...b,...v(n,!0)}}};return b}}();function tT(){}var tI="listener",tA="completed",tC="cancelled",tk=`task-${tC}`,tP=`task-${tA}`,tD=`${tI}-${tC}`,tN=`${tI}-${tA}`,tj=class{constructor(e){this.code=e,this.message=`task ${tC} (reason: ${e})`}name="TaskAbortError";message},tM=(e,t)=>{if("function"!=typeof e)throw TypeError(t6(32))},tR=()=>{},tL=(e,t=tR)=>(e.catch(t),e),tF=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),tV=e=>{if(e.aborted)throw new tj(e.reason)};function tB(e,t){let r=tR;return new Promise((n,i)=>{let a=()=>i(new tj(e.reason));e.aborted?a():(r=tF(e,a),t.finally(()=>r()).then(n,i))}).finally(()=>{r=tR})}var tU=async(e,t)=>{try{await Promise.resolve();let t=await e();return{status:"ok",value:t}}catch(e){return{status:e instanceof tj?"cancelled":"rejected",error:e}}finally{t?.()}},tz=e=>t=>tL(tB(e,t).then(t=>(tV(e),t))),tq=e=>{let t=tz(e);return e=>t(new Promise(t=>setTimeout(t,e)))},{assign:t$}=Object,tK={},tG="listenerMiddleware",tH=e=>{let{type:t,actionCreator:r,matcher:n,predicate:i,effect:a}=e;if(t)i=tp(t).match;else if(r)t=r.type,i=r.match;else if(n)i=n;else if(i);else throw Error(t6(21));return tM(a,"options.listener"),{predicate:i,type:t,effect:a}},tW=t$(e=>{let{type:t,predicate:r,effect:n}=tH(e);return{id:((e=21)=>{let t="",r=e;for(;r--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t})(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw Error(t6(22))}}},{withTypes:()=>tW}),tQ=(e,t)=>{let{type:r,effect:n,predicate:i}=tH(t);return Array.from(e.values()).find(e=>("string"==typeof r?e.type===r:e.predicate===i)&&e.effect===n)},tY=e=>{e.pending.forEach(e=>{e.abort(tD)})},tJ=(e,t,r)=>{try{e(t,r)}catch(e){setTimeout(()=>{throw e},0)}},tX=t$(tp(`${tG}/add`),{withTypes:()=>tX}),tZ=tp(`${tG}/removeAll`),t0=t$(tp(`${tG}/remove`),{withTypes:()=>t0}),t1=(...e)=>{console.error(`${tG}/error`,...e)},t2=(e={})=>{let t=new Map,r=new Map,{extra:n,onError:i=t1}=e;tM(i,"onError");let a=e=>{var r;return(r=tQ(t,e)??tW(e)).unsubscribe=()=>t.delete(r.id),t.set(r.id,r),e=>{r.unsubscribe(),e?.cancelActive&&tY(r)}};t$(a,{withTypes:()=>a});let o=e=>{let r=tQ(t,e);return r&&(r.unsubscribe(),e.cancelActive&&tY(r)),!!r};t$(o,{withTypes:()=>o});let s=async(e,o,s,l)=>{var u,c;let h,f=new AbortController,d=(u=f.signal,h=async(e,t)=>{tV(u);let r=()=>{},n=[new Promise((t,n)=>{let i=a({predicate:e,effect:(e,r)=>{r.unsubscribe(),t([e,r.getState(),r.getOriginalState()])}});r=()=>{i(),n()}})];null!=t&&n.push(new Promise(e=>setTimeout(e,t,null)));try{let e=await tB(u,Promise.race(n));return tV(u),e}finally{r()}},(e,t)=>tL(h(e,t))),p=[];try{let i;e.pending.add(f),i=r.get(e)??0,r.set(e,i+1),await Promise.resolve(e.effect(o,t$({},s,{getOriginalState:l,condition:(e,t)=>d(e,t).then(Boolean),take:d,delay:tq(f.signal),pause:tz(f.signal),extra:n,signal:f.signal,fork:(c=f.signal,(e,t)=>{tM(e,"taskExecutor");let r=new AbortController;tF(c,()=>r.abort(c.reason));let n=tU(async()=>{tV(c),tV(r.signal);let t=await e({pause:tz(r.signal),delay:tq(r.signal),signal:r.signal});return tV(r.signal),t},()=>r.abort(tP));return t?.autoJoin&&p.push(n.catch(tR)),{result:tz(c)(n),cancel(){r.abort(tk)}}}),unsubscribe:e.unsubscribe,subscribe:()=>{t.set(e.id,e)},cancelActiveListeners:()=>{e.pending.forEach((e,t,r)=>{e!==f&&(e.abort(tD),r.delete(e))})},cancel:()=>{f.abort(tD),e.pending.delete(f)},throwIfCancelled:()=>{tV(f.signal)}})))}catch(e){e instanceof tj||tJ(i,e,{raisedBy:"effect"})}finally{let t;await Promise.all(p),f.abort(tN),1===(t=r.get(e)??1)?r.delete(e):r.set(e,t-1),e.pending.delete(f)}},l=()=>{for(let e of r.keys())tY(e);t.clear()};return{middleware:e=>r=>n=>{let u;if(!tc(n))return r(n);if(tX.match(n))return a(n.payload);if(tZ.match(n))return void l();if(t0.match(n))return o(n.payload);let c=e.getState(),h=()=>{if(c===tK)throw Error(t6(23));return c};try{if(u=r(n),t.size>0){let r=e.getState();for(let a of Array.from(t.values())){let t=!1;try{t=a.predicate(n,r,c)}catch(e){t=!1,tJ(i,e,{raisedBy:"predicate"})}t&&s(a,n,e,h)}}}finally{c=tK}return u},startListening:a,stopListening:o,clearListeners:l}};function t6(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}Symbol.for("rtk-state-proxy-original");var t3=e.i(84249);function t5(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,r=10**t,n=Math.round(e*r)/r;return Object.is(n,-0)?0:n}function t4(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.reduce((e,t,n)=>{var i=r[n-1];return"string"==typeof i?e+i+t:void 0!==i?e+t5(i)+t:e+t},"")}var t8=e=>0===e?0:e>0?1:-1,t7=e=>"number"==typeof e&&e!=+e,t9=e=>"string"==typeof e&&e.indexOf("%")===e.length-1,re=e=>("number"==typeof e||e instanceof Number)&&!t7(e),rt=e=>re(e)||"string"==typeof e,rr=0,rn=e=>{var t=++rr;return"".concat(e||"").concat(t)},ri=function(e,t){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!re(e)&&"string"!=typeof e)return n;if(t9(e)){if(null==t)return n;var a=e.indexOf("%");r=t*parseFloat(e.slice(0,a))/100}else r=+e;return t7(r)&&(r=n),i&&null!=t&&r>t&&(r=t),r},ra=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(r[String(e[n])])return!0;else r[String(e[n])]=!0;return!1};function ro(e,t,r){return re(e)&&re(t)?t5(e+r*(t-e)):t}function rs(e,t,r){if(e&&e.length)return e.find(e=>e&&("function"==typeof t?t(e):(0,t3.default)(e,t))===r)}var rl=e=>null==e?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function ru(e){return null!=e}function rc(){}var rh=(e,t)=>{if(t&&Array.isArray(e)){var r=Number.parseInt(t,10);if(!t7(r))return e[r]}},rf=tO({name:"options",initialState:{chartName:"",tooltipPayloadSearcher:()=>void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},reducers:{createEventEmitter:e=>{null==e.eventEmitter&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),rd=rf.reducer,{createEventEmitter:rp}=rf.actions,rg=(e.i(50329),{notify(){},get:()=>[]}),rm="u">typeof window&&void 0!==window.document&&void 0!==window.document.createElement,ry="u">typeof navigator&&"ReactNative"===navigator.product,rv=rm||ry?F.useLayoutEffect:F.useEffect;function rb(e,t){return e===t?0!==e||0!==t||1/e==1/t:e!=e&&t!=t}var rw=Symbol.for("react-redux-context"),rx="u">typeof globalThis?globalThis:{},rE=function(){if(!F.createContext)return{};let e=rx[rw]??=new Map,t=e.get(F.createContext);return t||(t=F.createContext(null),e.set(F.createContext,t)),t}(),rS=function(e){let{children:t,context:r,serverState:n,store:i}=e,a=F.useMemo(()=>{let e=function(e,t){let r,n=rg,i=0,a=!1;function o(){u.onStateChange&&u.onStateChange()}function s(){if(i++,!r){let t,i;r=e.subscribe(o),t=null,i=null,n={clear(){t=null,i=null},notify(){let e=t;for(;e;)e.callback(),e=e.next},get(){let e=[],r=t;for(;r;)e.push(r),r=r.next;return e},subscribe(e){let r=!0,n=i={callback:e,next:null,prev:i};return n.prev?n.prev.next=n:t=n,function(){r&&null!==t&&(r=!1,n.next?n.next.prev=n.prev:i=n.prev,n.prev?n.prev.next=n.next:t=n.next)}}}}}function l(){i--,r&&0===i&&(r(),r=void 0,n.clear(),n=rg)}let u={addNestedSub:function(e){s();let t=n.subscribe(e),r=!1;return()=>{r||(r=!0,t(),l())}},notifyNestedSubs:function(){n.notify()},handleChangeWrapper:o,isSubscribed:function(){return a},trySubscribe:function(){a||(a=!0,s())},tryUnsubscribe:function(){a&&(a=!1,l())},getListeners:()=>n};return u}(i);return{store:i,subscription:e,getServerState:n?()=>n:void 0}},[i,n]),o=F.useMemo(()=>i.getState(),[i]);return rv(()=>{let{subscription:e}=a;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),o!==i.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}},[a,o]),F.createElement((r||rE).Provider,{value:a},t)};function r_(e=rE){return function(){return F.useContext(e)}}var rO=r_(),rT=Symbol.for("immer-nothing"),rI=Symbol.for("immer-draftable"),rA=Symbol.for("immer-state");function rC(e){throw Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var rk=Object.getPrototypeOf;function rP(e){return!!e&&!!e[rA]}function rD(e){return!!e&&(rM(e)||Array.isArray(e)||!!e[rI]||!!e.constructor?.[rI]||rB(e)||rU(e))}var rN=Object.prototype.constructor.toString(),rj=new WeakMap;function rM(e){if(!e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);if(null===t||t===Object.prototype)return!0;let r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;if(r===Object)return!0;if("function"!=typeof r)return!1;let n=rj.get(r);return void 0===n&&(n=Function.toString.call(r),rj.set(r,n)),n===rN}function rR(e,t,r=!0){0===rL(e)?(r?Reflect.ownKeys(e):Object.keys(e)).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function rL(e){let t=e[rA];return t?t.type_:Array.isArray(e)?1:rB(e)?2:3*!!rU(e)}function rF(e,t){return 2===rL(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function rV(e,t,r){let n=rL(e);2===n?e.set(t,r):3===n?e.add(r):e[t]=r}function rB(e){return e instanceof Map}function rU(e){return e instanceof Set}function rz(e){return e.copy_||e.base_}function rq(e,t){if(rB(e))return new Map(e);if(rU(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);let r=rM(e);if(!0!==t&&("class_only"!==t||r)){let t=rk(e);return null!==t&&r?{...e}:Object.assign(Object.create(t),e)}{let t=Object.getOwnPropertyDescriptors(e);delete t[rA];let r=Reflect.ownKeys(t);for(let n=0;n<r.length;n++){let i=r[n],a=t[i];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[i]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[i]})}return Object.create(rk(e),t)}}function r$(e,t=!1){return rG(e)||rP(e)||!rD(e)||(rL(e)>1&&Object.defineProperties(e,{set:rK,add:rK,clear:rK,delete:rK}),Object.freeze(e),t&&Object.values(e).forEach(e=>r$(e,!0))),e}var rK={value:function(){rC(2)}};function rG(e){return null===e||"object"!=typeof e||Object.isFrozen(e)}var rH={};function rW(e){let t=rH[e];return t||rC(0,e),t}function rQ(e,t){t&&(rW("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function rY(e){rJ(e),e.drafts_.forEach(rZ),e.drafts_=null}function rJ(e){e===o&&(o=e.parent_)}function rX(e){return o={drafts_:[],parent_:o,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function rZ(e){let t=e[rA];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function r0(e,t){t.unfinalizedDrafts_=t.drafts_.length;let r=t.drafts_[0];return void 0!==e&&e!==r?(r[rA].modified_&&(rY(t),rC(4)),rD(e)&&(e=r1(t,e),t.parent_||r6(t,e)),t.patches_&&rW("Patches").generateReplacementPatches_(r[rA].base_,e,t.patches_,t.inversePatches_)):e=r1(t,r,[]),rY(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==rT?e:void 0}function r1(e,t,r){if(rG(t))return t;let n=e.immer_.shouldUseStrictIteration(),i=t[rA];if(!i)return rR(t,(n,a)=>r2(e,i,t,n,a,r),n),t;if(i.scope_!==e)return t;if(!i.modified_)return r6(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;let t=i.copy_,a=t,o=!1;3===i.type_&&(a=new Set(t),t.clear(),o=!0),rR(a,(n,a)=>r2(e,i,t,n,a,r,o),n),r6(e,t,!1),r&&e.patches_&&rW("Patches").generatePatches_(i,r,e.patches_,e.inversePatches_)}return i.copy_}function r2(e,t,r,n,i,a,o){if(null==i||"object"!=typeof i&&!o)return;let s=rG(i);if(!s||o){if(rP(i)){let o=r1(e,i,a&&t&&3!==t.type_&&!rF(t.assigned_,n)?a.concat(n):void 0);if(rV(r,n,o),!rP(o))return;e.canAutoFreeze_=!1}else o&&r.add(i);if(rD(i)&&!s){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1||t&&t.base_&&t.base_[n]===i&&s)return;r1(e,i),(!t||!t.scope_.parent_)&&"symbol"!=typeof n&&(rB(r)?r.has(n):Object.prototype.propertyIsEnumerable.call(r,n))&&r6(e,i)}}}function r6(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&r$(t,r)}var r3={get(e,t){if(t===rA)return e;let r=rz(e);if(!rF(r,t)){var n;let i;return n=e,(i=r8(r,t))?"value"in i?i.value:i.get?.call(n.draft_):void 0}let i=r[t];return e.finalized_||!rD(i)?i:i===r4(e.base_,t)?(r9(e),e.copy_[t]=nt(i,e)):i},has:(e,t)=>t in rz(e),ownKeys:e=>Reflect.ownKeys(rz(e)),set(e,t,r){let n=r8(rz(e),t);if(n?.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){let n=r4(rz(e),t),i=n?.[rA];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if((r===n?0!==r||1/r==1/n:r!=r&&n!=n)&&(void 0!==r||rF(e.base_,t)))return!0;r9(e),r7(e)}return!!(e.copy_[t]===r&&(void 0!==r||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t]))||(e.copy_[t]=r,e.assigned_[t]=!0,!0)},deleteProperty:(e,t)=>(void 0!==r4(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,r9(e),r7(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){let r=rz(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:n.enumerable,value:r[t]}:n},defineProperty(){rC(11)},getPrototypeOf:e=>rk(e.base_),setPrototypeOf(){rC(12)}},r5={};function r4(e,t){let r=e[rA];return(r?rz(r):e)[t]}function r8(e,t){if(!(t in e))return;let r=rk(e);for(;r;){let e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=rk(r)}}function r7(e){!e.modified_&&(e.modified_=!0,e.parent_&&r7(e.parent_))}function r9(e){e.copy_||(e.copy_=rq(e.base_,e.scope_.immer_.useStrictShallowCopy_))}rR(r3,(e,t)=>{r5[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),r5.deleteProperty=function(e,t){return r5.set.call(this,e,t,void 0)},r5.set=function(e,t,r){return r3.set.call(this,e[0],t,r,e[0])};var ne=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,t,r)=>{let n;if("function"==typeof e&&"function"!=typeof t){let r=t;t=e;let n=this;return function(e=r,...i){return n.produce(e,e=>t.call(this,e,...i))}}if("function"!=typeof t&&rC(6),void 0!==r&&"function"!=typeof r&&rC(7),rD(e)){let i=rX(this),a=nt(e,void 0),o=!0;try{n=t(a),o=!1}finally{o?rY(i):rJ(i)}return rQ(i,r),r0(n,i)}if(e&&"object"==typeof e)rC(1,e);else{if(void 0===(n=t(e))&&(n=e),n===rT&&(n=void 0),this.autoFreeze_&&r$(n,!0),r){let t=[],i=[];rW("Patches").generateReplacementPatches_(e,n,t,i),r(t,i)}return n}},this.produceWithPatches=(e,t)=>{let r,n;return"function"==typeof e?(t,...r)=>this.produceWithPatches(t,t=>e(t,...r)):[this.produce(e,t,(e,t)=>{r=e,n=t}),r,n]},"boolean"==typeof e?.autoFreeze&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof e?.useStrictShallowCopy&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),"boolean"==typeof e?.useStrictIteration&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){var t;rD(e)||rC(8),rP(e)&&(rP(t=e)||rC(10,t),e=function e(t){let r;if(!rD(t)||rG(t))return t;let n=t[rA],i=!0;if(n){if(!n.modified_)return n.base_;n.finalized_=!0,r=rq(t,n.scope_.immer_.useStrictShallowCopy_),i=n.scope_.immer_.shouldUseStrictIteration()}else r=rq(t,!0);return rR(r,(t,n)=>{rV(r,t,e(n))},i),n&&(n.finalized_=!1),r}(t));let r=rX(this),n=nt(e,void 0);return n[rA].isManual_=!0,rJ(r),n}finishDraft(e,t){let r=e&&e[rA];r&&r.isManual_||rC(9);let{scope_:n}=r;return rQ(n,t),r0(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){let n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}r>-1&&(t=t.slice(r+1));let n=rW("Patches").applyPatches_;return rP(e)?n(e,t):this.produce(e,e=>n(e,t))}};function nt(e,t){let r=rB(e)?rW("MapSet").proxyMap_(e,t):rU(e)?rW("MapSet").proxySet_(e,t):function(e,t){let r=Array.isArray(e),n={type_:+!!r,scope_:t?t.scope_:o,modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1},i=n,a=r3;r&&(i=[n],a=r5);let{revoke:s,proxy:l}=Proxy.revocable(i,a);return n.draft_=l,n.revoke_=s,l}(e,t);return(t?t.scope_:o).drafts_.push(r),r}new ne().produce;var nr={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},nn=tO({name:"tooltip",initialState:{itemInteraction:{click:nr,hover:nr},axisInteraction:{click:nr,hover:nr},keyboardInteraction:nr,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:tb()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:n}=t.payload,i=eG(e).tooltipItemPayloads.indexOf(r);i>-1&&(e.tooltipItemPayloads[i]=n)},prepare:tb()},removeTooltipEntrySettings:{reducer(e,t){var r=eG(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:tb()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:ni,replaceTooltipEntrySettings:na,removeTooltipEntrySettings:no,setTooltipSettingsState:ns,setActiveMouseOverItemIndex:nl,mouseLeaveItem:nu,mouseLeaveChart:nc,setActiveClickItemIndex:nh,setMouseOverAxisIndex:nf,setMouseClickAxisIndex:nd,setSyncInteraction:np,setKeyboardInteraction:ng}=nn.actions,nm=nn.reducer,ny=tO({name:"chartData",initialState:{chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},reducers:{setChartData(e,t){if(e.chartData=t.payload,null==t.payload){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;null!=r&&(e.dataStartIndex=r),null!=n&&(e.dataEndIndex=n)}}}),{setChartData:nv,setDataStartEndIndexes:nb,setComputedData:nw}=ny.actions,nx=ny.reducer,nE=tO({name:"chartLayout",initialState:{layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,i,a;e.margin.top=null!=(r=t.payload.top)?r:0,e.margin.right=null!=(n=t.payload.right)?n:0,e.margin.bottom=null!=(i=t.payload.bottom)?i:0,e.margin.left=null!=(a=t.payload.left)?a:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:nS,setLayout:n_,setChartSize:nO,setScale:nT}=nE.actions,nI=nE.reducer,nA=e.i(93135),nC=(0,F.createContext)(null),nk=e=>e,nP=()=>{var e=(0,F.useContext)(nC);return e?e.store.dispatch:nk},nD=()=>{},nN=()=>nD,nj=(e,t)=>e===t;function nM(e){var t=(0,F.useContext)(nC),r=(0,F.useMemo)(()=>t?t=>{if(null!=t)return e(t)}:nD,[t,e]);return(0,nA.useSyncExternalStoreWithSelector)(t?t.subscription.addNestedSub:nN,t?t.store.getState:nD,t?t.store.getState:nD,r,nj)}var nR=e.i(44884),nL=e=>e.legend.settings,nF=tt([e=>e.legend.payload,nL],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?(0,nR.default)(n,r):n});function nV(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}function nB(e){return function(){return e}}function nU(e,t){if((i=e.length)>1)for(var r,n,i,a=1,o=e[t[0]],s=o.length;a<i;++a)for(n=o,o=e[t[a]],r=0;r<s;++r)o[r][1]+=o[r][0]=isNaN(n[r][1])?n[r][0]:n[r][1]}function nz(e){for(var t=e.length,r=Array(t);--t>=0;)r[t]=t;return r}function nq(e,t){return e[t]}function n$(e){let t=[];return t.key=e,t}function nK(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function nG(e){return Number.isFinite(e)}function nH(e){return"number"==typeof e&&e>0&&Number.isFinite(e)}function nW(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function nQ(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nW(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nW(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function nY(e,t,r){return null==e||null==t?r:rt(t)?(0,t3.default)(e,t,r):"function"==typeof t?t(e):r}Array.prototype.slice;var nJ=(e,t)=>"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t,nX=(e,t,r,n)=>{if(n)return e.map(e=>e.coordinate);var i,a,o=e.map(e=>(e.coordinate===t&&(i=!0),e.coordinate===r&&(a=!0),e.coordinate));return i||o.push(t),a||o.push(r),o},nZ=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:i,range:a,scale:o,realScaleType:s,isCategorical:l,categoricalDomain:u,tickCount:c,ticks:h,niceTicks:f,axisType:d}=e;if(!o)return null;var p="scaleBand"===s&&o.bandwidth?o.bandwidth()/2:2,g=(t||r)&&"category"===i&&o.bandwidth?o.bandwidth()/p:0;return(g="angleAxis"===d&&a&&a.length>=2?2*t8(a[0]-a[1])*g:g,t&&(h||f))?(h||f||[]).map((e,t)=>{var r=n?n.indexOf(e):e,i=o.map(r);return nG(i)?{coordinate:i+g,value:e,offset:g,index:t}:null}).filter(ru):l&&u?u.map((e,t)=>{var r=o.map(e);return nG(r)?{coordinate:r+g,value:e,index:t,offset:g}:null}).filter(ru):o.ticks&&!r&&null!=c?o.ticks(c).map((e,t)=>{var r=o.map(e);return nG(r)?{coordinate:r+g,value:e,index:t,offset:g}:null}).filter(ru):o.domain().map((e,t)=>{var r=o.map(e);return nG(r)?{coordinate:r+g,value:n?n[e]:e,index:t,offset:g}:null}).filter(ru)},n0={sign:e=>{var t,r=e.length;if(!(r<=0)){var n=null==(t=e[0])?void 0:t.length;if(null!=n&&!(n<=0))for(var i=0;i<n;++i)for(var a=0,o=0,s=0;s<r;++s){var l=e[s],u=null==l?void 0:l[i];if(null!=u){var c=u[1],h=u[0],f=t7(c)?h:c;f>=0?(u[0]=a,a+=f,u[1]=a):(u[0]=o,o+=f,u[1]=o)}}}},expand:function(e,t){if((n=e.length)>0){for(var r,n,i,a=0,o=e[0].length;a<o;++a){for(i=r=0;r<n;++r)i+=e[r][a][1]||0;if(i)for(r=0;r<n;++r)e[r][a][1]/=i}nU(e,t)}},none:nU,silhouette:function(e,t){if((r=e.length)>0){for(var r,n=0,i=e[t[0]],a=i.length;n<a;++n){for(var o=0,s=0;o<r;++o)s+=e[o][n][1]||0;i[n][1]+=i[n][0]=-s/2}nU(e,t)}},wiggle:function(e,t){if((i=e.length)>0&&(n=(r=e[t[0]]).length)>0){for(var r,n,i,a=0,o=1;o<n;++o){for(var s=0,l=0,u=0;s<i;++s){for(var c=e[t[s]],h=c[o][1]||0,f=(h-(c[o-1][1]||0))/2,d=0;d<s;++d){var p=e[t[d]];f+=(p[o][1]||0)-(p[o-1][1]||0)}l+=h,u+=f*h}r[o-1][1]+=r[o-1][0]=a,l&&(a-=u/l)}r[o-1][1]+=r[o-1][0]=a,nU(e,t)}},positive:e=>{var t,r=e.length;if(!(r<=0)){var n=null==(t=e[0])?void 0:t.length;if(null!=n&&!(n<=0))for(var i=0;i<n;++i)for(var a=0,o=0;o<r;++o){var s=e[o],l=null==s?void 0:s[i];if(null!=l){var u=t7(l[1])?l[0]:l[1];u>=0?(l[0]=a,a+=u,l[1]=a):(l[0]=0,l[1]=0)}}}}};function n1(e){var{axis:t,ticks:r,bandSize:n,entry:i,index:a,dataKey:o}=e;if("category"===t.type){if(!t.allowDuplicatedCategory&&t.dataKey&&null!=i[t.dataKey]){var s=rs(r,"value",i[t.dataKey]);if(s)return s.coordinate+n/2}return null!=r&&r[a]?r[a].coordinate+n/2:null}var l=nY(i,null==o?t.dataKey:o),u=t.scale.map(l);return re(u)?u:null}var n2=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,n6=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,n3=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var i=(0,nR.default)(t,e=>e.coordinate),a=1/0,o=1,s=i.length;o<s;o++){var l=i[o],u=i[o-1];a=Math.min(((null==l?void 0:l.coordinate)||0)-((null==u?void 0:u.coordinate)||0),a)}return a===1/0?0:a}return r?void 0:0};function n5(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:i,name:a}=e;return nQ(nQ({},t),{},{dataKey:r,payload:n,value:i,name:a})}function n4(e,t){return e?String(e):"string"==typeof t?t:void 0}var n8=e=>e.layout.width,n7=e=>e.layout.height,n9=e=>e.layout.scale,ie=e=>e.layout.margin,it=tt(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),ir=tt(e=>e.cartesianAxis.yAxis,e=>Object.values(e));function ii(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ia(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ii(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ii(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var io=tt([n8,n7,ie,e=>e.brush.height,function(e){return ir(e).reduce((e,t)=>"left"!==t.orientation||t.mirror||t.hide?e:e+("number"==typeof t.width?t.width:60),0)},function(e){return ir(e).reduce((e,t)=>"right"!==t.orientation||t.mirror||t.hide?e:e+("number"==typeof t.width?t.width:60),0)},function(e){return it(e).reduce((e,t)=>"top"!==t.orientation||t.mirror||t.hide?e:e+t.height,0)},function(e){return it(e).reduce((e,t)=>"bottom"!==t.orientation||t.mirror||t.hide?e:e+t.height,0)},nL,e=>e.legend.size],(e,t,r,n,i,a,o,s,l,u)=>{var c={left:(r.left||0)+i,right:(r.right||0)+a},h=ia(ia({},{top:(r.top||0)+o,bottom:(r.bottom||0)+s}),c),f=h.bottom;h.bottom+=n;var d=e-(h=((e,t,r)=>{if(t&&r){var{width:n,height:i}=r,{align:a,verticalAlign:o,layout:s}=t;if(("vertical"===s||"horizontal"===s&&"middle"===o)&&"center"!==a&&re(e[a]))return nQ(nQ({},e),{},{[a]:e[a]+(n||0)});if(("horizontal"===s||"vertical"===s&&"center"===a)&&"middle"!==o&&re(e[o]))return nQ(nQ({},e),{},{[o]:e[o]+(i||0)})}return e})(h,l,u)).left-h.right,p=t-h.top-h.bottom;return ia(ia({brushBottom:f},h),{},{width:Math.max(d,0),height:Math.max(p,0)})}),is=tt(io,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),il=tt(n8,n7,(e,t)=>({x:0,y:0,width:e,height:t})),iu=(0,F.createContext)(null),ic=()=>null!=(0,F.useContext)(iu),ih=e=>e.brush,id=tt([ih,io,ie],(e,t,r)=>({height:e.height,x:re(e.x)?e.x:t.left,y:re(e.y)?e.y:t.top+t.height+t.brushBottom-((null==r?void 0:r.bottom)||0),width:re(e.width)?e.width:t.width}));function ip(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=function e(t){var r,n,i="";if("string"==typeof t||"number"==typeof t)i+=t;else if("object"==typeof t)if(Array.isArray(t)){var a=t.length;for(r=0;r<a;r++)t[r]&&(n=e(t[r]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}(e))&&(n&&(n+=" "),n+=t);return n}var ig=e.i(90512),im=function(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),i=2;i<r;i++)n[i-2]=arguments[i];if("u">typeof console&&console.warn&&(void 0===t&&console.warn("LogUtils requires an error message argument"),!e))if(void 0===t)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var a=0;console.warn(t.replace(/%s/g,()=>n[a++]))}},iy="100%",iv="100%",ib={width:-1,height:-1},iw=(e,t,r)=>{var{width:n=iy,height:i=iv,aspect:a,maxHeight:o}=r,s=t9(n)?e:Number(n),l=t9(i)?t:Number(i);return a&&a>0&&(s?l=s/a:l&&(s=l*a),o&&null!=l&&l>o&&(l=o)),{calculatedWidth:s,calculatedHeight:l}},ix={width:0,height:0,overflow:"visible"},iE={width:0,overflowX:"visible"},iS={height:0,overflowY:"visible"},i_={};function iO(){return(iO=Object.assign.bind()).apply(null,arguments)}function iT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function iI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?iT(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iT(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var iA=(0,F.createContext)(ib);function iC(e){var{children:t,width:r,height:n}=e,i=(0,F.useMemo)(()=>({width:r,height:n}),[r,n]);return nH(i.width)&&nH(i.height)?F.createElement(iA.Provider,{value:i},t):null}var ik=()=>(0,F.useContext)(iA),iP=(0,F.forwardRef)((e,t)=>{var{aspect:r,initialDimension:n=ib,width:i,height:a,minWidth:o=0,minHeight:s,maxHeight:l,children:u,debounce:c=0,id:h,className:f,onResize:d,style:p={}}=e,g=(0,F.useRef)(null),m=(0,F.useRef)();m.current=d,(0,F.useImperativeHandle)(t,()=>g.current);var[y,v]=(0,F.useState)({containerWidth:n.width,containerHeight:n.height}),b=(0,F.useCallback)((e,t)=>{v(r=>{var n=Math.round(e),i=Math.round(t);return r.containerWidth===n&&r.containerHeight===i?r:{containerWidth:n,containerHeight:i}})},[]);(0,F.useEffect)(()=>{if(null==g.current||"u"<typeof ResizeObserver)return rc;var e=e=>{var t,r=e[0];if(null!=r){var{width:n,height:i}=r.contentRect;b(n,i),null==(t=m.current)||t.call(m,n,i)}};c>0&&(e=(0,ig.default)(e,c,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),{width:r,height:n}=g.current.getBoundingClientRect();return b(r,n),t.observe(g.current),()=>{t.disconnect()}},[b,c]);var{containerWidth:w,containerHeight:x}=y;im(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:E,calculatedHeight:S}=iw(w,x,{width:i,height:a,aspect:r,maxHeight:l});return im(null!=E&&E>0||null!=S&&S>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",E,S,i,a,o,s,r),F.createElement("div",{id:h?"".concat(h):void 0,className:ip("recharts-responsive-container",f),style:iI(iI({},p),{},{width:i,height:a,minWidth:o,minHeight:s,maxHeight:l}),ref:g},F.createElement("div",{style:(e=>{var{width:t,height:r}=e,n=t9(t),i=t9(r);return n&&i?ix:n?iE:i?iS:i_})({width:i,height:a})},F.createElement(iC,{width:E,height:S},u)))}),iD=(0,F.forwardRef)((e,t)=>{var r=ik();if(nH(r.width)&&nH(r.height))return e.children;var{width:n,height:i}=function(e){var{width:t,height:r,aspect:n}=e,i=t,a=r;return void 0===i&&void 0===a?(i=iy,a=iv):void 0===i?i=n&&n>0?void 0:iy:void 0===a&&(a=n&&n>0?void 0:iv),{width:i,height:a}}({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:a,calculatedHeight:o}=iw(void 0,void 0,{width:n,height:i,aspect:e.aspect,maxHeight:e.maxHeight});return re(a)&&re(o)?F.createElement(iC,{width:a,height:o},e.children):F.createElement(iP,iO({},e,{width:n,height:i,ref:t}))});function iN(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var ij=()=>{var e,t=ic(),r=nM(is),n=nM(id),i=null==(e=nM(ih))?void 0:e.padding;return t&&n&&i?{width:n.width-i.left-i.right,height:n.height-i.top-i.bottom,x:i.left,y:i.top}:r},iM={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},iR=()=>{var e;return null!=(e=nM(io))?e:iM},iL=e=>e.layout.layoutType,iF=()=>{var e=nM(iL);if("horizontal"===e||"vertical"===e)return e},iV=e=>{var t=e.layout.layoutType;if("centric"===t||"radial"===t)return t},iB=e=>{var t=nP(),r=ic(),{width:n,height:i}=e,a=ik(),o=n,s=i;return a&&(o=a.width>0?a.width:n,s=a.height>0?a.height:i),(0,F.useEffect)(()=>{!r&&nH(o)&&nH(s)&&t(nO({width:o,height:s}))},[t,r,o,s]),null},iU=e.i(31053);function iz(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function iq(e,t){switch(arguments.length){case 0:break;case 1:"function"==typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"==typeof t?this.interpolator(t):this.range(t)}return this}e.s([],28626),e.i(28626),e.s([],83189),e.i(83189);class i$ extends Map{constructor(e,t=iG){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[t,r]of e)this.set(t,r)}get(e){return super.get(iK(this,e))}has(e){return super.has(iK(this,e))}set(e,t){return super.set(function({_intern:e,_key:t},r){let n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}(this,e),t)}delete(e){return super.delete(function({_intern:e,_key:t},r){let n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}(this,e))}}function iK({_intern:e,_key:t},r){let n=t(r);return e.has(n)?e.get(n):r}function iG(e){return null!==e&&"object"==typeof e?e.valueOf():e}let iH=Symbol("implicit");function iW(){var e=new i$,t=[],r=[],n=iH;function i(i){let a=e.get(i);if(void 0===a){if(n!==iH)return n;e.set(i,a=t.push(i)-1)}return r[a%r.length]}return i.domain=function(r){if(!arguments.length)return t.slice();for(let n of(t=[],e=new i$,r))e.has(n)||e.set(n,t.push(n)-1);return i},i.range=function(e){return arguments.length?(r=Array.from(e),i):r.slice()},i.unknown=function(e){return arguments.length?(n=e,i):n},i.copy=function(){return iW(t,r).unknown(n)},iz.apply(i,arguments),i}function iQ(){var e,t,r=iW().unknown(void 0),n=r.domain,i=r.range,a=0,o=1,s=!1,l=0,u=0,c=.5;function h(){var r=n().length,h=o<a,f=h?o:a,d=h?a:o;e=(d-f)/Math.max(1,r-l+2*u),s&&(e=Math.floor(e)),f+=(d-f-e*(r-l))*c,t=e*(1-l),s&&(f=Math.round(f),t=Math.round(t));var p=(function(e,t,r){e*=1,t*=1,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=0|Math.max(0,Math.ceil((t-e)/r)),a=Array(i);++n<i;)a[n]=e+n*r;return a})(r).map(function(t){return f+e*t});return i(h?p.reverse():p)}return delete r.unknown,r.domain=function(e){return arguments.length?(n(e),h()):n()},r.range=function(e){return arguments.length?([a,o]=e,a*=1,o*=1,h()):[a,o]},r.rangeRound=function(e){return[a,o]=e,a*=1,o*=1,s=!0,h()},r.bandwidth=function(){return t},r.step=function(){return e},r.round=function(e){return arguments.length?(s=!!e,h()):s},r.padding=function(e){return arguments.length?(l=Math.min(1,u=+e),h()):l},r.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),h()):l},r.paddingOuter=function(e){return arguments.length?(u=+e,h()):u},r.align=function(e){return arguments.length?(c=Math.max(0,Math.min(1,e)),h()):c},r.copy=function(){return iQ(n(),[a,o]).round(s).paddingInner(l).paddingOuter(u).align(c)},iz.apply(h(),arguments)}function iY(){return function e(t){var r=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return e(r())},t}(iQ.apply(null,arguments).paddingInner(1))}let iJ=Math.sqrt(50),iX=Math.sqrt(10),iZ=Math.sqrt(2);function i0(e,t,r){let n,i,a,o=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(o)),l=o/Math.pow(10,s),u=l>=iJ?10:l>=iX?5:l>=iZ?2:1;return(s<0?(n=Math.round(e*(a=Math.pow(10,-s)/u)),i=Math.round(t*a),n/a<e&&++n,i/a>t&&--i,a=-a):(n=Math.round(e/(a=Math.pow(10,s)*u)),i=Math.round(t/a),n*a<e&&++n,i*a>t&&--i),i<n&&.5<=r&&r<2)?i0(e,t,2*r):[n,i,a]}function i1(e,t,r){if(t*=1,e*=1,!((r*=1)>0))return[];if(e===t)return[e];let n=t<e,[i,a,o]=n?i0(t,e,r):i0(e,t,r);if(!(a>=i))return[];let s=a-i+1,l=Array(s);if(n)if(o<0)for(let e=0;e<s;++e)l[e]=-((a-e)/o);else for(let e=0;e<s;++e)l[e]=(a-e)*o;else if(o<0)for(let e=0;e<s;++e)l[e]=-((i+e)/o);else for(let e=0;e<s;++e)l[e]=(i+e)*o;return l}function i2(e,t,r){return i0(e*=1,t*=1,r*=1)[2]}function i6(e,t,r){t*=1,e*=1,r*=1;let n=t<e,i=n?i2(t,e,r):i2(e,t,r);return(n?-1:1)*(i<0?-(1/i):i)}function i3(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function i5(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function i4(e){let t,r,n;function i(e,n,a=0,o=e.length){if(a<o){if(0!==t(n,n))return o;do{let t=a+o>>>1;0>r(e[t],n)?a=t+1:o=t}while(a<o)}return a}return 2!==e.length?(t=i3,r=(t,r)=>i3(e(t),r),n=(t,r)=>e(t)-r):(t=e===i3||e===i5?e:i8,r=e,n=e),{left:i,center:function(e,t,r=0,a=e.length){let o=i(e,t,r,a-1);return o>r&&n(e[o-1],t)>-n(e[o],t)?o-1:o},right:function(e,n,i=0,a=e.length){if(i<a){if(0!==t(n,n))return a;do{let t=i+a>>>1;0>=r(e[t],n)?i=t+1:a=t}while(i<a)}return i}}}function i8(){return 0}function i7(e){return null===e?NaN:+e}let i9=i4(i3),ae=i9.right;function at(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function ar(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function an(){}i9.left,i4(i7).center;var ai="\\s*([+-]?\\d+)\\s*",aa="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ao="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",as=/^#([0-9a-f]{3,8})$/,al=RegExp(`^rgb\\(${ai},${ai},${ai}\\)$`),au=RegExp(`^rgb\\(${ao},${ao},${ao}\\)$`),ac=RegExp(`^rgba\\(${ai},${ai},${ai},${aa}\\)$`),ah=RegExp(`^rgba\\(${ao},${ao},${ao},${aa}\\)$`),af=RegExp(`^hsl\\(${aa},${ao},${ao}\\)$`),ad=RegExp(`^hsla\\(${aa},${ao},${ao},${aa}\\)$`),ap={aliceblue:0xf0f8ff,antiquewhite:0xfaebd7,aqua:65535,aquamarine:8388564,azure:0xf0ffff,beige:0xf5f5dc,bisque:0xffe4c4,black:0,blanchedalmond:0xffebcd,blue:255,blueviolet:9055202,brown:0xa52a2a,burlywood:0xdeb887,cadetblue:6266528,chartreuse:8388352,chocolate:0xd2691e,coral:0xff7f50,cornflowerblue:6591981,cornsilk:0xfff8dc,crimson:0xdc143c,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:0xb8860b,darkgray:0xa9a9a9,darkgreen:25600,darkgrey:0xa9a9a9,darkkhaki:0xbdb76b,darkmagenta:9109643,darkolivegreen:5597999,darkorange:0xff8c00,darkorchid:0x9932cc,darkred:9109504,darksalmon:0xe9967a,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:0xff1493,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:0xb22222,floralwhite:0xfffaf0,forestgreen:2263842,fuchsia:0xff00ff,gainsboro:0xdcdcdc,ghostwhite:0xf8f8ff,gold:0xffd700,goldenrod:0xdaa520,gray:8421504,green:32768,greenyellow:0xadff2f,grey:8421504,honeydew:0xf0fff0,hotpink:0xff69b4,indianred:0xcd5c5c,indigo:4915330,ivory:0xfffff0,khaki:0xf0e68c,lavender:0xe6e6fa,lavenderblush:0xfff0f5,lawngreen:8190976,lemonchiffon:0xfffacd,lightblue:0xadd8e6,lightcoral:0xf08080,lightcyan:0xe0ffff,lightgoldenrodyellow:0xfafad2,lightgray:0xd3d3d3,lightgreen:9498256,lightgrey:0xd3d3d3,lightpink:0xffb6c1,lightsalmon:0xffa07a,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:0xb0c4de,lightyellow:0xffffe0,lime:65280,limegreen:3329330,linen:0xfaf0e6,magenta:0xff00ff,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:0xba55d3,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:0xc71585,midnightblue:1644912,mintcream:0xf5fffa,mistyrose:0xffe4e1,moccasin:0xffe4b5,navajowhite:0xffdead,navy:128,oldlace:0xfdf5e6,olive:8421376,olivedrab:7048739,orange:0xffa500,orangered:0xff4500,orchid:0xda70d6,palegoldenrod:0xeee8aa,palegreen:0x98fb98,paleturquoise:0xafeeee,palevioletred:0xdb7093,papayawhip:0xffefd5,peachpuff:0xffdab9,peru:0xcd853f,pink:0xffc0cb,plum:0xdda0dd,powderblue:0xb0e0e6,purple:8388736,rebeccapurple:6697881,red:0xff0000,rosybrown:0xbc8f8f,royalblue:4286945,saddlebrown:9127187,salmon:0xfa8072,sandybrown:0xf4a460,seagreen:3050327,seashell:0xfff5ee,sienna:0xa0522d,silver:0xc0c0c0,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:0xfffafa,springgreen:65407,steelblue:4620980,tan:0xd2b48c,teal:32896,thistle:0xd8bfd8,tomato:0xff6347,turquoise:4251856,violet:0xee82ee,wheat:0xf5deb3,white:0xffffff,whitesmoke:0xf5f5f5,yellow:0xffff00,yellowgreen:0x9acd32};function ag(){return this.rgb().formatHex()}function am(){return this.rgb().formatRgb()}function ay(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=as.exec(e))?(r=t[1].length,t=parseInt(t[1],16),6===r?av(t):3===r?new ax(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===r?ab(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===r?ab(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=al.exec(e))?new ax(t[1],t[2],t[3],1):(t=au.exec(e))?new ax(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=ac.exec(e))?ab(t[1],t[2],t[3],t[4]):(t=ah.exec(e))?ab(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=af.exec(e))?aI(t[1],t[2]/100,t[3]/100,1):(t=ad.exec(e))?aI(t[1],t[2]/100,t[3]/100,t[4]):ap.hasOwnProperty(e)?av(ap[e]):"transparent"===e?new ax(NaN,NaN,NaN,0):null}function av(e){return new ax(e>>16&255,e>>8&255,255&e,1)}function ab(e,t,r,n){return n<=0&&(e=t=r=NaN),new ax(e,t,r,n)}function aw(e,t,r,n){var i;return 1==arguments.length?((i=e)instanceof an||(i=ay(i)),i)?new ax((i=i.rgb()).r,i.g,i.b,i.opacity):new ax:new ax(e,t,r,null==n?1:n)}function ax(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}function aE(){return`#${aT(this.r)}${aT(this.g)}${aT(this.b)}`}function aS(){let e=a_(this.opacity);return`${1===e?"rgb(":"rgba("}${aO(this.r)}, ${aO(this.g)}, ${aO(this.b)}${1===e?")":`, ${e})`}`}function a_(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function aO(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function aT(e){return((e=aO(e))<16?"0":"")+e.toString(16)}function aI(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new aC(e,t,r,n)}function aA(e){if(e instanceof aC)return new aC(e.h,e.s,e.l,e.opacity);if(e instanceof an||(e=ay(e)),!e)return new aC;if(e instanceof aC)return e;var t=(e=e.rgb()).r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),a=Math.max(t,r,n),o=NaN,s=a-i,l=(a+i)/2;return s?(o=t===a?(r-n)/s+(r<n)*6:r===a?(n-t)/s+2:(t-r)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new aC(o,s,l,e.opacity)}function aC(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}function ak(e){return(e=(e||0)%360)<0?e+360:e}function aP(e){return Math.max(0,Math.min(1,e||0))}function aD(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}function aN(e,t,r,n,i){var a=e*e,o=a*e;return((1-3*e+3*a-o)*t+(4-6*a+3*o)*r+(1+3*e+3*a-3*o)*n+o*i)/6}at(an,ay,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ag,formatHex:ag,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return aA(this).formatHsl()},formatRgb:am,toString:am}),at(ax,aw,ar(an,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new ax(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new ax(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ax(aO(this.r),aO(this.g),aO(this.b),a_(this.opacity))},displayable(){return -.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:aE,formatHex:aE,formatHex8:function(){return`#${aT(this.r)}${aT(this.g)}${aT(this.b)}${aT((isNaN(this.opacity)?1:this.opacity)*255)}`},formatRgb:aS,toString:aS})),at(aC,function(e,t,r,n){return 1==arguments.length?aA(e):new aC(e,t,r,null==n?1:n)},ar(an,{brighter(e){return e=null==e?1.4285714285714286:Math.pow(1.4285714285714286,e),new aC(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?.7:Math.pow(.7,e),new aC(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new ax(aD(e>=240?e-240:e+120,i,n),aD(e,i,n),aD(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new aC(ak(this.h),aP(this.s),aP(this.l),a_(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=a_(this.opacity);return`${1===e?"hsl(":"hsla("}${ak(this.h)}, ${100*aP(this.s)}%, ${100*aP(this.l)}%${1===e?")":`, ${e})`}`}}));let aj=e=>()=>e;function aM(e,t){var r=t-e;return r?function(t){return e+t*r}:aj(isNaN(e)?t:e)}let aR=function e(t){var r,n=1==(r=+t)?aM:function(e,t){var n,i,a;return t-e?(n=e,i=t,n=Math.pow(n,a=r),i=Math.pow(i,a)-n,a=1/a,function(e){return Math.pow(n+e*i,a)}):aj(isNaN(e)?t:e)};function i(e,t){var r=n((e=aw(e)).r,(t=aw(t)).r),i=n(e.g,t.g),a=n(e.b,t.b),o=aM(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+""}}return i.gamma=e,i}(1);function aL(e){return function(t){var r,n,i=t.length,a=Array(i),o=Array(i),s=Array(i);for(r=0;r<i;++r)n=aw(t[r]),a[r]=n.r||0,o[r]=n.g||0,s[r]=n.b||0;return a=e(a),o=e(o),s=e(s),n.opacity=1,function(e){return n.r=a(e),n.g=o(e),n.b=s(e),n+""}}}function aF(e,t){return e*=1,t*=1,function(r){return e*(1-r)+t*r}}aL(function(e){var t=e.length-1;return function(r){var n=r<=0?r=0:r>=1?(r=1,t-1):Math.floor(r*t),i=e[n],a=e[n+1],o=n>0?e[n-1]:2*i-a,s=n<t-1?e[n+2]:2*a-i;return aN((r-n/t)*t,o,i,a,s)}}),aL(function(e){var t=e.length;return function(r){var n=Math.floor(((r%=1)<0?++r:r)*t),i=e[(n+t-1)%t],a=e[n%t],o=e[(n+1)%t],s=e[(n+2)%t];return aN((r-n/t)*t,i,a,o,s)}});var aV=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,aB=RegExp(aV.source,"g");function aU(e,t){var r,n,i=typeof t;return null==t||"boolean"===i?aj(t):("number"===i?aF:"string"===i?(n=ay(t))?(t=n,aR):function(e,t){var r,n,i,a,o,s=aV.lastIndex=aB.lastIndex=0,l=-1,u=[],c=[];for(e+="",t+="";(i=aV.exec(e))&&(a=aB.exec(t));)(o=a.index)>s&&(o=t.slice(s,o),u[l]?u[l]+=o:u[++l]=o),(i=i[0])===(a=a[0])?u[l]?u[l]+=a:u[++l]=a:(u[++l]=null,c.push({i:l,x:aF(i,a)})),s=aB.lastIndex;return s<t.length&&(o=t.slice(s),u[l]?u[l]+=o:u[++l]=o),u.length<2?c[0]?(r=c[0].x,function(e){return r(e)+""}):(n=t,function(){return n}):(t=c.length,function(e){for(var r,n=0;n<t;++n)u[(r=c[n]).i]=r.x(e);return u.join("")})}:t instanceof ay?aR:t instanceof Date?function(e,t){var r=new Date;return e*=1,t*=1,function(n){return r.setTime(e*(1-n)+t*n),r}}:!ArrayBuffer.isView(r=t)||r instanceof DataView?Array.isArray(t)?function(e,t){var r,n=t?t.length:0,i=e?Math.min(n,e.length):0,a=Array(i),o=Array(n);for(r=0;r<i;++r)a[r]=aU(e[r],t[r]);for(;r<n;++r)o[r]=t[r];return function(e){for(r=0;r<i;++r)o[r]=a[r](e);return o}}:"function"!=typeof t.valueOf&&"function"!=typeof t.toString||isNaN(t)?function(e,t){var r,n={},i={};for(r in(null===e||"object"!=typeof e)&&(e={}),(null===t||"object"!=typeof t)&&(t={}),t)r in e?n[r]=aU(e[r],t[r]):i[r]=t[r];return function(e){for(r in n)i[r]=n[r](e);return i}}:aF:function(e,t){t||(t=[]);var r,n=e?Math.min(t.length,e.length):0,i=t.slice();return function(a){for(r=0;r<n;++r)i[r]=e[r]*(1-a)+t[r]*a;return i}})(e,t)}function az(e,t){return e*=1,t*=1,function(r){return Math.round(e*(1-r)+t*r)}}function aq(e){return+e}var a$=[0,1];function aK(e){return e}function aG(e,t){var r;return(t-=e*=1)?function(r){return(r-e)/t}:(r=isNaN(t)?NaN:.5,function(){return r})}function aH(e,t,r){var n=e[0],i=e[1],a=t[0],o=t[1];return i<n?(n=aG(i,n),a=r(o,a)):(n=aG(n,i),a=r(a,o)),function(e){return a(n(e))}}function aW(e,t,r){var n=Math.min(e.length,t.length)-1,i=Array(n),a=Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)i[o]=aG(e[o],e[o+1]),a[o]=r(t[o],t[o+1]);return function(t){var r=ae(e,t,1,n)-1;return a[r](i[r](t))}}function aQ(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function aY(){var e,t,r,n,i,a,o=a$,s=a$,l=aU,u=aK;function c(){var e,t,r,l=Math.min(o.length,s.length);return u!==aK&&(e=o[0],t=o[l-1],e>t&&(r=e,e=t,t=r),u=function(r){return Math.max(e,Math.min(t,r))}),n=l>2?aW:aH,i=a=null,h}function h(t){return null==t||isNaN(t*=1)?r:(i||(i=n(o.map(e),s,l)))(e(u(t)))}return h.invert=function(r){return u(t((a||(a=n(s,o.map(e),aF)))(r)))},h.domain=function(e){return arguments.length?(o=Array.from(e,aq),c()):o.slice()},h.range=function(e){return arguments.length?(s=Array.from(e),c()):s.slice()},h.rangeRound=function(e){return s=Array.from(e),l=az,c()},h.clamp=function(e){return arguments.length?(u=!!e||aK,c()):u!==aK},h.interpolate=function(e){return arguments.length?(l=e,c()):l},h.unknown=function(e){return arguments.length?(r=e,h):r},function(r,n){return e=r,t=n,c()}}function aJ(){return aY()(aK,aK)}function aX(e,t){if(!isFinite(e)||0===e)return null;var r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function aZ(e){return(e=aX(Math.abs(e)))?e[1]:NaN}var a0=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function a1(e){var t;if(!(t=a0.exec(e)))throw Error("invalid format: "+e);return new a2({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function a2(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function a6(e,t){var r=aX(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+Array(i-n.length+2).join("0")}a1.prototype=a2.prototype,a2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};let a3={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>a6(100*e,t),r:a6,s:function(e,t){var r=aX(e,t);if(!r)return s=void 0,e.toPrecision(t);var n=r[0],i=r[1],a=i-(s=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=n.length;return a===o?n:a>o?n+Array(a-o+1).join("0"):a>0?n.slice(0,a)+"."+n.slice(a):"0."+Array(1-a).join("0")+aX(e,Math.max(0,t+a-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function a5(e){return e}var a4=Array.prototype.map,a8=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function a7(e,t,r,n){var i,a,o=i6(e,t,r);switch((n=a1(null==n?",f":n)).type){case"s":var s=Math.max(Math.abs(e),Math.abs(t));return null!=n.precision||isNaN(a=Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(aZ(s)/3)))-aZ(Math.abs(o))))||(n.precision=a),c(n,s);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(a=Math.max(0,aZ(Math.abs(Math.max(Math.abs(e),Math.abs(t)))-(i=Math.abs(i=o)))-aZ(i))+1)||(n.precision=a-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(a=Math.max(0,-aZ(Math.abs(o))))||(n.precision=a-("%"===n.type)*2)}return u(n)}function a9(e){var t=e.domain;return e.ticks=function(e){var r=t();return i1(r[0],r[r.length-1],null==e?10:e)},e.tickFormat=function(e,r){var n=t();return a7(n[0],n[n.length-1],null==e?10:e,r)},e.nice=function(r){null==r&&(r=10);var n,i,a=t(),o=0,s=a.length-1,l=a[o],u=a[s],c=10;for(u<l&&(i=l,l=u,u=i,i=o,o=s,s=i);c-- >0;){if((i=i2(l,u,r))===n)return a[o]=l,a[s]=u,t(a);if(i>0)l=Math.floor(l/i)*i,u=Math.ceil(u/i)*i;else if(i<0)l=Math.ceil(l*i)/i,u=Math.floor(u*i)/i;else break;n=i}return e},e}function oe(){var e=aJ();return e.copy=function(){return aQ(e,oe())},iz.apply(e,arguments),a9(e)}function ot(e){var t;function r(e){return null==e||isNaN(e*=1)?t:e}return r.invert=r,r.domain=r.range=function(t){return arguments.length?(e=Array.from(t,aq),r):e.slice()},r.unknown=function(e){return arguments.length?(t=e,r):t},r.copy=function(){return ot(e).unknown(t)},e=arguments.length?Array.from(e,aq):[0,1],a9(r)}function or(e,t){e=e.slice();var r,n=0,i=e.length-1,a=e[n],o=e[i];return o<a&&(r=n,n=i,i=r,r=a,a=o,o=r),e[n]=t.floor(a),e[i]=t.ceil(o),e}function on(e){return Math.log(e)}function oi(e){return Math.exp(e)}function oa(e){return-Math.log(-e)}function oo(e){return-Math.exp(-e)}function os(e){return isFinite(e)?+("1e"+e):e<0?0:e}function ol(e){return(t,r)=>-e(-t,r)}function ou(e){let t,r,n=e(on,oi),i=n.domain,a=10;function o(){var o,s;return t=(o=a)===Math.E?Math.log:10===o&&Math.log10||2===o&&Math.log2||(o=Math.log(o),e=>Math.log(e)/o),r=10===(s=a)?os:s===Math.E?Math.exp:e=>Math.pow(s,e),i()[0]<0?(t=ol(t),r=ol(r),e(oa,oo)):e(on,oi),n}return n.base=function(e){return arguments.length?(a=+e,o()):a},n.domain=function(e){return arguments.length?(i(e),o()):i()},n.ticks=e=>{let n,o,s=i(),l=s[0],u=s[s.length-1],c=u<l;c&&([l,u]=[u,l]);let h=t(l),f=t(u),d=null==e?10:+e,p=[];if(!(a%1)&&f-h<d){if(h=Math.floor(h),f=Math.ceil(f),l>0){for(;h<=f;++h)for(n=1;n<a;++n)if(!((o=h<0?n/r(-h):n*r(h))<l)){if(o>u)break;p.push(o)}}else for(;h<=f;++h)for(n=a-1;n>=1;--n)if(!((o=h>0?n/r(-h):n*r(h))<l)){if(o>u)break;p.push(o)}2*p.length<d&&(p=i1(l,u,d))}else p=i1(h,f,Math.min(f-h,d)).map(r);return c?p.reverse():p},n.tickFormat=(e,i)=>{if(null==e&&(e=10),null==i&&(i=10===a?"s":","),"function"!=typeof i&&(a%1||null!=(i=a1(i)).precision||(i.trim=!0),i=u(i)),e===1/0)return i;let o=Math.max(1,a*e/n.ticks().length);return e=>{let n=e/r(Math.round(t(e)));return n*a<a-.5&&(n*=a),n<=o?i(e):""}},n.nice=()=>i(or(i(),{floor:e=>r(Math.floor(t(e))),ceil:e=>r(Math.ceil(t(e)))})),n}function oc(){let e=ou(aY()).domain([1,10]);return e.copy=()=>aQ(e,oc()).base(e.base()),iz.apply(e,arguments),e}function oh(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function of(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function od(e){var t=1,r=e(oh(1),of(t));return r.constant=function(r){return arguments.length?e(oh(t=+r),of(t)):t},a9(r)}function op(){var e=od(aY());return e.copy=function(){return aQ(e,op()).constant(e.constant())},iz.apply(e,arguments)}function og(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function om(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function oy(e){return e<0?-e*e:e*e}function ov(e){var t=e(aK,aK),r=1;return t.exponent=function(t){return arguments.length?1==(r=+t)?e(aK,aK):.5===r?e(om,oy):e(og(r),og(1/r)):r},a9(t)}function ob(){var e=ov(aY());return e.copy=function(){return aQ(e,ob()).exponent(e.exponent())},iz.apply(e,arguments),e}function ow(){return ob.apply(null,arguments).exponent(.5)}function ox(e){return Math.sign(e)*e*e}function oE(){var e,t=aJ(),r=[0,1],n=!1;function i(r){var i,a=Math.sign(i=t(r))*Math.sqrt(Math.abs(i));return isNaN(a)?e:n?Math.round(a):a}return i.invert=function(e){return t.invert(ox(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain()},i.range=function(e){return arguments.length?(t.range((r=Array.from(e,aq)).map(ox)),i):r.slice()},i.rangeRound=function(e){return i.range(e).round(!0)},i.round=function(e){return arguments.length?(n=!!e,i):n},i.clamp=function(e){return arguments.length?(t.clamp(e),i):t.clamp()},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return oE(t.domain(),r).round(n).clamp(t.clamp()).unknown(e)},iz.apply(i,arguments),a9(i)}function oS(e,t){let r;if(void 0===t)for(let t of e)null!=t&&(r<t||void 0===r&&t>=t)&&(r=t);else{let n=-1;for(let i of e)null!=(i=t(i,++n,e))&&(r<i||void 0===r&&i>=i)&&(r=i)}return r}function o_(e,t){let r;if(void 0===t)for(let t of e)null!=t&&(r>t||void 0===r&&t>=t)&&(r=t);else{let n=-1;for(let i of e)null!=(i=t(i,++n,e))&&(r>i||void 0===r&&i>=i)&&(r=i)}return r}function oO(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:+(e>t))}function oT(e,t,r){let n=e[t];e[t]=e[r],e[r]=n}function oI(){var e,t=[],r=[],n=[];function i(){var e=0,i=Math.max(1,r.length);for(n=Array(i-1);++e<i;)n[e-1]=function(e,t,r=i7){if(!(!(n=e.length)||isNaN(t*=1))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,a=Math.floor(i),o=+r(e[a],a,e);return o+(r(e[a+1],a+1,e)-o)*(i-a)}}(t,e/i);return a}function a(t){return null==t||isNaN(t*=1)?e:r[ae(n,t)]}return a.invertExtent=function(e){var i=r.indexOf(e);return i<0?[NaN,NaN]:[i>0?n[i-1]:t[0],i<n.length?n[i]:t[t.length-1]]},a.domain=function(e){if(!arguments.length)return t.slice();for(let r of(t=[],e))null==r||isNaN(r*=1)||t.push(r);return t.sort(i3),i()},a.range=function(e){return arguments.length?(r=Array.from(e),i()):r.slice()},a.unknown=function(t){return arguments.length?(e=t,a):e},a.quantiles=function(){return n.slice()},a.copy=function(){return oI().domain(t).range(r).unknown(e)},iz.apply(a,arguments)}function oA(){var e,t=0,r=1,n=1,i=[.5],a=[0,1];function o(t){return null!=t&&t<=t?a[ae(i,t,0,n)]:e}function s(){var e=-1;for(i=Array(n);++e<n;)i[e]=((e+1)*r-(e-n)*t)/(n+1);return o}return o.domain=function(e){return arguments.length?([t,r]=e,t*=1,r*=1,s()):[t,r]},o.range=function(e){return arguments.length?(n=(a=Array.from(e)).length-1,s()):a.slice()},o.invertExtent=function(e){var o=a.indexOf(e);return o<0?[NaN,NaN]:o<1?[t,i[0]]:o>=n?[i[n-1],r]:[i[o-1],i[o]]},o.unknown=function(t){return arguments.length&&(e=t),o},o.thresholds=function(){return i.slice()},o.copy=function(){return oA().domain([t,r]).range(a).unknown(e)},iz.apply(a9(o),arguments)}function oC(){var e,t=[.5],r=[0,1],n=1;function i(i){return null!=i&&i<=i?r[ae(t,i,0,n)]:e}return i.domain=function(e){return arguments.length?(n=Math.min((t=Array.from(e)).length,r.length-1),i):t.slice()},i.range=function(e){return arguments.length?(r=Array.from(e),n=Math.min(t.length,r.length-1),i):r.slice()},i.invertExtent=function(e){var n=r.indexOf(e);return[t[n-1],t[n]]},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return oC().domain(t).range(r).unknown(e)},iz.apply(i,arguments)}u=(l=function(e){var t,r,n,i=void 0===e.grouping||void 0===e.thousands?a5:(t=a4.call(e.grouping,Number),r=e.thousands+"",function(e,n){for(var i=e.length,a=[],o=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>n&&(s=Math.max(1,n-l)),a.push(e.substring(i-=s,i+s)),!((l+=s+1)>n));)s=t[o=(o+1)%t.length];return a.reverse().join(r)}),a=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",l=void 0===e.decimal?".":e.decimal+"",u=void 0===e.numerals?a5:(n=a4.call(e.numerals,String),function(e){return e.replace(/[0-9]/g,function(e){return n[+e]})}),c=void 0===e.percent?"%":e.percent+"",h=void 0===e.minus?"":e.minus+"",f=void 0===e.nan?"NaN":e.nan+"";function d(e,t){var r=(e=a1(e)).fill,n=e.align,d=e.sign,p=e.symbol,g=e.zero,m=e.width,y=e.comma,v=e.precision,b=e.trim,w=e.type;"n"===w?(y=!0,w="g"):a3[w]||(void 0===v&&(v=12),b=!0,w="g"),(g||"0"===r&&"="===n)&&(g=!0,r="0",n="=");var x=(t&&void 0!==t.prefix?t.prefix:"")+("$"===p?a:"#"===p&&/[boxX]/.test(w)?"0"+w.toLowerCase():""),E=("$"===p?o:/[%p]/.test(w)?c:"")+(t&&void 0!==t.suffix?t.suffix:""),S=a3[w],_=/[defgprs%]/.test(w);function O(e){var t,a,o,c=x,p=E;if("c"===w)p=S(e)+p,e="";else{var O=(e*=1)<0||1/e<0;if(e=isNaN(e)?f:S(Math.abs(e),v),b&&(e=function(e){r:for(var t,r=e.length,n=1,i=-1;n<r;++n)switch(e[n]){case".":i=t=n;break;case"0":0===i&&(i=n),t=n;break;default:if(!+e[n])break r;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),O&&0==+e&&"+"!==d&&(O=!1),c=(O?"("===d?d:h:"-"===d||"("===d?"":d)+c,p=("s"!==w||isNaN(e)||void 0===s?"":a8[8+s/3])+p+(O&&"("===d?")":""),_){for(t=-1,a=e.length;++t<a;)if(48>(o=e.charCodeAt(t))||o>57){p=(46===o?l+e.slice(t+1):e.slice(t))+p,e=e.slice(0,t);break}}}y&&!g&&(e=i(e,1/0));var T=c.length+e.length+p.length,I=T<m?Array(m-T+1).join(r):"";switch(y&&g&&(e=i(I+e,I.length?m-p.length:1/0),I=""),n){case"<":e=c+e+p+I;break;case"=":e=c+I+e+p;break;case"^":e=I.slice(0,T=I.length>>1)+c+e+p+I.slice(T);break;default:e=I+c+e+p}return u(e)}return v=void 0===v?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),O.toString=function(){return e+""},O}return{format:d,formatPrefix:function(e,t){var r=3*Math.max(-8,Math.min(8,Math.floor(aZ(t)/3))),n=Math.pow(10,-r),i=d(((e=a1(e)).type="f",e),{suffix:a8[8+r/3]});return function(e){return i(n*e)}}}}({thousands:",",grouping:[3],currency:["$",""]})).format,c=l.formatPrefix;let ok=new Date,oP=new Date;function oD(e,t,r,n){function i(t){return e(t=0==arguments.length?new Date:new Date(+t)),t}return i.floor=t=>(e(t=new Date(+t)),t),i.ceil=r=>(e(r=new Date(r-1)),t(r,1),e(r),r),i.round=e=>{let t=i(e),r=i.ceil(e);return e-t<r-e?t:r},i.offset=(e,r)=>(t(e=new Date(+e),null==r?1:Math.floor(r)),e),i.range=(r,n,a)=>{let o,s=[];if(r=i.ceil(r),a=null==a?1:Math.floor(a),!(r<n)||!(a>0))return s;do s.push(o=new Date(+r)),t(r,a),e(r);while(o<r&&r<n)return s},i.filter=r=>oD(t=>{if(t>=t)for(;e(t),!r(t);)t.setTime(t-1)},(e,n)=>{if(e>=e)if(n<0)for(;++n<=0;)for(;t(e,-1),!r(e););else for(;--n>=0;)for(;t(e,1),!r(e););}),r&&(i.count=(t,n)=>(ok.setTime(+t),oP.setTime(+n),e(ok),e(oP),Math.floor(r(ok,oP))),i.every=e=>isFinite(e=Math.floor(e))&&e>0?e>1?i.filter(n?t=>n(t)%e==0:t=>i.count(0,t)%e==0):i:null),i}let oN=oD(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());oN.every=e=>isFinite(e=Math.floor(e))&&e>0?oD(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)}):null,oN.range;let oj=oD(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());oj.every=e=>isFinite(e=Math.floor(e))&&e>0?oD(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)}):null,oj.range;let oM=oD(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());oM.range;let oR=oD(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());oR.range;function oL(e){return oD(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*6e4)/6048e5)}let oF=oL(0),oV=oL(1),oB=oL(2),oU=oL(3),oz=oL(4),oq=oL(5),o$=oL(6);function oK(e){return oD(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/6048e5)}oF.range,oV.range,oB.range,oU.range,oz.range,oq.range,o$.range;let oG=oK(0),oH=oK(1),oW=oK(2),oQ=oK(3),oY=oK(4),oJ=oK(5),oX=oK(6);oG.range,oH.range,oW.range,oQ.range,oY.range,oJ.range,oX.range;let oZ=oD(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*6e4)/864e5,e=>e.getDate()-1);oZ.range;let o0=oD(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/864e5,e=>e.getUTCDate()-1);o0.range;let o1=oD(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/864e5,e=>Math.floor(e/864e5));o1.range;let o2=oD(e=>{e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds()-6e4*e.getMinutes())},(e,t)=>{e.setTime(+e+36e5*t)},(e,t)=>(t-e)/36e5,e=>e.getHours());o2.range;let o6=oD(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+36e5*t)},(e,t)=>(t-e)/36e5,e=>e.getUTCHours());o6.range;let o3=oD(e=>{e.setTime(e-e.getMilliseconds()-1e3*e.getSeconds())},(e,t)=>{e.setTime(+e+6e4*t)},(e,t)=>(t-e)/6e4,e=>e.getMinutes());o3.range;let o5=oD(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+6e4*t)},(e,t)=>(t-e)/6e4,e=>e.getUTCMinutes());o5.range;let o4=oD(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+1e3*t)},(e,t)=>(t-e)/1e3,e=>e.getUTCSeconds());o4.range;let o8=oD(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);function o7(e,t,r,n,i,a){let o=[[o4,1,1e3],[o4,5,5e3],[o4,15,15e3],[o4,30,3e4],[a,1,6e4],[a,5,3e5],[a,15,9e5],[a,30,18e5],[i,1,36e5],[i,3,108e5],[i,6,216e5],[i,12,432e5],[n,1,864e5],[n,2,1728e5],[r,1,6048e5],[t,1,2592e6],[t,3,7776e6],[e,1,31536e6]];function s(t,r,n){let i=Math.abs(r-t)/n,a=i4(([,,e])=>e).right(o,i);if(a===o.length)return e.every(i6(t/31536e6,r/31536e6,n));if(0===a)return o8.every(Math.max(i6(t,r,n),1));let[s,l]=o[i/o[a-1][2]<o[a][2]/i?a-1:a];return s.every(l)}return[function(e,t,r){let n=t<e;n&&([e,t]=[t,e]);let i=r&&"function"==typeof r.range?r:s(e,t,r),a=i?i.range(e,+t+1):[];return n?a.reverse():a},s]}o8.every=e=>isFinite(e=Math.floor(e))&&e>0?e>1?oD(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):o8:null,o8.range;let[o9,se]=o7(oj,oR,oG,o1,o6,o5),[st,sr]=o7(oN,oM,oF,oZ,o2,o3);function sn(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function si(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function sa(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}var so={"-":"",_:" ",0:"0"},ss=/^\s*\d+/,sl=/^%/,su=/[\\^$*+?|[\]().{}]/g;function sc(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",a=i.length;return n+(a<r?Array(r-a+1).join(t)+i:i)}function sh(e){return e.replace(su,"\\$&")}function sf(e){return RegExp("^(?:"+e.map(sh).join("|")+")","i")}function sd(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function sp(e,t,r){var n=ss.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function sg(e,t,r){var n=ss.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function sm(e,t,r){var n=ss.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function sy(e,t,r){var n=ss.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function sv(e,t,r){var n=ss.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function sb(e,t,r){var n=ss.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function sw(e,t,r){var n=ss.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function sx(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function sE(e,t,r){var n=ss.exec(t.slice(r,r+1));return n?(e.q=3*n[0]-3,r+n[0].length):-1}function sS(e,t,r){var n=ss.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function s_(e,t,r){var n=ss.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function sO(e,t,r){var n=ss.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function sT(e,t,r){var n=ss.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function sI(e,t,r){var n=ss.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function sA(e,t,r){var n=ss.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function sC(e,t,r){var n=ss.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function sk(e,t,r){var n=ss.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function sP(e,t,r){var n=sl.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function sD(e,t,r){var n=ss.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function sN(e,t,r){var n=ss.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function sj(e,t){return sc(e.getDate(),t,2)}function sM(e,t){return sc(e.getHours(),t,2)}function sR(e,t){return sc(e.getHours()%12||12,t,2)}function sL(e,t){return sc(1+oZ.count(oN(e),e),t,3)}function sF(e,t){return sc(e.getMilliseconds(),t,3)}function sV(e,t){return sF(e,t)+"000"}function sB(e,t){return sc(e.getMonth()+1,t,2)}function sU(e,t){return sc(e.getMinutes(),t,2)}function sz(e,t){return sc(e.getSeconds(),t,2)}function sq(e){var t=e.getDay();return 0===t?7:t}function s$(e,t){return sc(oF.count(oN(e)-1,e),t,2)}function sK(e){var t=e.getDay();return t>=4||0===t?oz(e):oz.ceil(e)}function sG(e,t){return e=sK(e),sc(oz.count(oN(e),e)+(4===oN(e).getDay()),t,2)}function sH(e){return e.getDay()}function sW(e,t){return sc(oV.count(oN(e)-1,e),t,2)}function sQ(e,t){return sc(e.getFullYear()%100,t,2)}function sY(e,t){return sc((e=sK(e)).getFullYear()%100,t,2)}function sJ(e,t){return sc(e.getFullYear()%1e4,t,4)}function sX(e,t){var r=e.getDay();return sc((e=r>=4||0===r?oz(e):oz.ceil(e)).getFullYear()%1e4,t,4)}function sZ(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+sc(t/60|0,"0",2)+sc(t%60,"0",2)}function s0(e,t){return sc(e.getUTCDate(),t,2)}function s1(e,t){return sc(e.getUTCHours(),t,2)}function s2(e,t){return sc(e.getUTCHours()%12||12,t,2)}function s6(e,t){return sc(1+o0.count(oj(e),e),t,3)}function s3(e,t){return sc(e.getUTCMilliseconds(),t,3)}function s5(e,t){return s3(e,t)+"000"}function s4(e,t){return sc(e.getUTCMonth()+1,t,2)}function s8(e,t){return sc(e.getUTCMinutes(),t,2)}function s7(e,t){return sc(e.getUTCSeconds(),t,2)}function s9(e){var t=e.getUTCDay();return 0===t?7:t}function le(e,t){return sc(oG.count(oj(e)-1,e),t,2)}function lt(e){var t=e.getUTCDay();return t>=4||0===t?oY(e):oY.ceil(e)}function lr(e,t){return e=lt(e),sc(oY.count(oj(e),e)+(4===oj(e).getUTCDay()),t,2)}function ln(e){return e.getUTCDay()}function li(e,t){return sc(oH.count(oj(e)-1,e),t,2)}function la(e,t){return sc(e.getUTCFullYear()%100,t,2)}function lo(e,t){return sc((e=lt(e)).getUTCFullYear()%100,t,2)}function ls(e,t){return sc(e.getUTCFullYear()%1e4,t,4)}function ll(e,t){var r=e.getUTCDay();return sc((e=r>=4||0===r?oY(e):oY.ceil(e)).getUTCFullYear()%1e4,t,4)}function lu(){return"+0000"}function lc(){return"%"}function lh(e){return+e}function lf(e){return Math.floor(e/1e3)}function ld(e){return new Date(e)}function lp(e){return e instanceof Date?+e:+new Date(+e)}function lg(e,t,r,n,i,a,o,s,l,u){var c=aJ(),h=c.invert,f=c.domain,d=u(".%L"),p=u(":%S"),g=u("%I:%M"),m=u("%I %p"),y=u("%a %d"),v=u("%b %d"),b=u("%B"),w=u("%Y");function x(e){return(l(e)<e?d:s(e)<e?p:o(e)<e?g:a(e)<e?m:n(e)<e?i(e)<e?y:v:r(e)<e?b:w)(e)}return c.invert=function(e){return new Date(h(e))},c.domain=function(e){return arguments.length?f(Array.from(e,lp)):f().map(ld)},c.ticks=function(t){var r=f();return e(r[0],r[r.length-1],null==t?10:t)},c.tickFormat=function(e,t){return null==t?x:u(t)},c.nice=function(e){var r=f();return e&&"function"==typeof e.range||(e=t(r[0],r[r.length-1],null==e?10:e)),e?f(or(r,e)):c},c.copy=function(){return aQ(c,lg(e,t,r,n,i,a,o,s,l,u))},c}function lm(){return iz.apply(lg(st,sr,oN,oM,oF,oZ,o2,o3,o4,f).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function ly(){return iz.apply(lg(o9,se,oj,oR,oG,o0,o6,o5,o4,d).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function lv(){var e,t,r,n,i,a=0,o=1,s=aK,l=!1;function u(t){return null==t||isNaN(t*=1)?i:s(0===r?.5:(t=(n(t)-e)*r,l?Math.max(0,Math.min(1,t)):t))}function c(e){return function(t){var r,n;return arguments.length?([r,n]=t,s=e(r,n),u):[s(0),s(1)]}}return u.domain=function(i){return arguments.length?([a,o]=i,e=n(a*=1),t=n(o*=1),r=e===t?0:1/(t-e),u):[a,o]},u.clamp=function(e){return arguments.length?(l=!!e,u):l},u.interpolator=function(e){return arguments.length?(s=e,u):s},u.range=c(aU),u.rangeRound=c(az),u.unknown=function(e){return arguments.length?(i=e,u):i},function(i){return n=i,e=i(a),t=i(o),r=e===t?0:1/(t-e),u}}function lb(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function lw(){var e=a9(lv()(aK));return e.copy=function(){return lb(e,lw())},iq.apply(e,arguments)}function lx(){var e=ou(lv()).domain([1,10]);return e.copy=function(){return lb(e,lx()).base(e.base())},iq.apply(e,arguments)}function lE(){var e=od(lv());return e.copy=function(){return lb(e,lE()).constant(e.constant())},iq.apply(e,arguments)}function lS(){var e=ov(lv());return e.copy=function(){return lb(e,lS()).exponent(e.exponent())},iq.apply(e,arguments)}function l_(){return lS.apply(null,arguments).exponent(.5)}function lO(){var e=[],t=aK;function r(r){if(null!=r&&!isNaN(r*=1))return t((ae(e,r,1)-1)/(e.length-1))}return r.domain=function(t){if(!arguments.length)return e.slice();for(let r of(e=[],t))null==r||isNaN(r*=1)||e.push(r);return e.sort(i3),r},r.interpolator=function(e){return arguments.length?(t=e,r):t},r.range=function(){return e.map((r,n)=>t(n/(e.length-1)))},r.quantiles=function(t){return Array.from({length:t+1},(r,n)=>(function(e,t,r){if(!(!(n=(e=Float64Array.from(function*(e,t){if(void 0===t)for(let t of e)null!=t&&(t*=1)>=t&&(yield t);else{let r=-1;for(let n of e)null!=(n=t(n,++r,e))&&(n*=1)>=n&&(yield n)}}(e,void 0))).length)||isNaN(t*=1))){if(t<=0||n<2)return o_(e);if(t>=1)return oS(e);var n,i=(n-1)*t,a=Math.floor(i),o=oS((function e(t,r,n=0,i=1/0,a){if(r=Math.floor(r),n=Math.floor(Math.max(0,n)),i=Math.floor(Math.min(t.length-1,i)),!(n<=r&&r<=i))return t;for(a=void 0===a?oO:function(e=i3){if(e===i3)return oO;if("function"!=typeof e)throw TypeError("compare is not a function");return(t,r)=>{let n=e(t,r);return n||0===n?n:(0===e(r,r))-(0===e(t,t))}}(a);i>n;){if(i-n>600){let o=i-n+1,s=r-n+1,l=Math.log(o),u=.5*Math.exp(2*l/3),c=.5*Math.sqrt(l*u*(o-u)/o)*(s-o/2<0?-1:1),h=Math.max(n,Math.floor(r-s*u/o+c)),f=Math.min(i,Math.floor(r+(o-s)*u/o+c));e(t,r,h,f,a)}let o=t[r],s=n,l=i;for(oT(t,n,r),a(t[i],o)>0&&oT(t,n,i);s<l;){for(oT(t,s,l),++s,--l;0>a(t[s],o);)++s;for(;a(t[l],o)>0;)--l}0===a(t[n],o)?oT(t,n,l):oT(t,++l,i),l<=r&&(n=l+1),r<=l&&(i=l-1)}return t})(e,a).subarray(0,a+1));return o+(o_(e.subarray(a+1))-o)*(i-a)}})(e,n/t))},r.copy=function(){return lO(t).domain(e)},iq.apply(r,arguments)}function lT(){var e,t,r,n,i,a,o,s=0,l=.5,u=1,c=1,h=aK,f=!1;function d(e){return isNaN(e*=1)?o:(e=.5+((e=+a(e))-t)*(c*e<c*t?n:i),h(f?Math.max(0,Math.min(1,e)):e))}function p(e){return function(t){var r,n,i;return arguments.length?([r,n,i]=t,h=function(e,t){void 0===t&&(t=e,e=aU);for(var r=0,n=t.length-1,i=t[0],a=Array(n<0?0:n);r<n;)a[r]=e(i,i=t[++r]);return function(e){var t=Math.max(0,Math.min(n-1,Math.floor(e*=n)));return a[t](e-t)}}(e,[r,n,i]),d):[h(0),h(.5),h(1)]}}return d.domain=function(o){return arguments.length?([s,l,u]=o,e=a(s*=1),t=a(l*=1),r=a(u*=1),n=e===t?0:.5/(t-e),i=t===r?0:.5/(r-t),c=t<e?-1:1,d):[s,l,u]},d.clamp=function(e){return arguments.length?(f=!!e,d):f},d.interpolator=function(e){return arguments.length?(h=e,d):h},d.range=p(aU),d.rangeRound=p(az),d.unknown=function(e){return arguments.length?(o=e,d):o},function(o){return a=o,e=o(s),t=o(l),r=o(u),n=e===t?0:.5/(t-e),i=t===r?0:.5/(r-t),c=t<e?-1:1,d}}function lI(){var e=a9(lT()(aK));return e.copy=function(){return lb(e,lI())},iq.apply(e,arguments)}function lA(){var e=ou(lT()).domain([.1,1,10]);return e.copy=function(){return lb(e,lA()).base(e.base())},iq.apply(e,arguments)}function lC(){var e=od(lT());return e.copy=function(){return lb(e,lC()).constant(e.constant())},iq.apply(e,arguments)}function lk(){var e=ov(lT());return e.copy=function(){return lb(e,lk()).exponent(e.exponent())},iq.apply(e,arguments)}function lP(){return lk.apply(null,arguments).exponent(.5)}f=(h=function(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,a=e.days,o=e.shortDays,s=e.months,l=e.shortMonths,u=sf(i),c=sd(i),h=sf(a),f=sd(a),d=sf(o),p=sd(o),g=sf(s),m=sd(s),y=sf(l),v=sd(l),b={a:function(e){return o[e.getDay()]},A:function(e){return a[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:sj,e:sj,f:sV,g:sY,G:sX,H:sM,I:sR,j:sL,L:sF,m:sB,M:sU,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:lh,s:lf,S:sz,u:sq,U:s$,V:sG,w:sH,W:sW,x:null,X:null,y:sQ,Y:sJ,Z:sZ,"%":lc},w={a:function(e){return o[e.getUTCDay()]},A:function(e){return a[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:s0,e:s0,f:s5,g:lo,G:ll,H:s1,I:s2,j:s6,L:s3,m:s4,M:s8,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:lh,s:lf,S:s7,u:s9,U:le,V:lr,w:ln,W:li,x:null,X:null,y:la,Y:ls,Z:lu,"%":lc},x={a:function(e,t,r){var n=d.exec(t.slice(r));return n?(e.w=p.get(n[0].toLowerCase()),r+n[0].length):-1},A:function(e,t,r){var n=h.exec(t.slice(r));return n?(e.w=f.get(n[0].toLowerCase()),r+n[0].length):-1},b:function(e,t,r){var n=y.exec(t.slice(r));return n?(e.m=v.get(n[0].toLowerCase()),r+n[0].length):-1},B:function(e,t,r){var n=g.exec(t.slice(r));return n?(e.m=m.get(n[0].toLowerCase()),r+n[0].length):-1},c:function(e,r,n){return _(e,t,r,n)},d:s_,e:s_,f:sk,g:sw,G:sb,H:sT,I:sT,j:sO,L:sC,m:sS,M:sI,p:function(e,t,r){var n=u.exec(t.slice(r));return n?(e.p=c.get(n[0].toLowerCase()),r+n[0].length):-1},q:sE,Q:sD,s:sN,S:sA,u:sg,U:sm,V:sy,w:sp,W:sv,x:function(e,t,n){return _(e,r,t,n)},X:function(e,t,r){return _(e,n,t,r)},y:sw,Y:sb,Z:sx,"%":sP};function E(e,t){return function(r){var n,i,a,o=[],s=-1,l=0,u=e.length;for(r instanceof Date||(r=new Date(+r));++s<u;)37===e.charCodeAt(s)&&(o.push(e.slice(l,s)),null!=(i=so[n=e.charAt(++s)])?n=e.charAt(++s):i="e"===n?" ":"0",(a=t[n])&&(n=a(r,i)),o.push(n),l=s+1);return o.push(e.slice(l,s)),o.join("")}}function S(e,t){return function(r){var n,i,a=sa(1900,void 0,1);if(_(a,e,r+="",0)!=r.length)return null;if("Q"in a)return new Date(a.Q);if("s"in a)return new Date(1e3*a.s+("L"in a?a.L:0));if(!t||"Z"in a||(a.Z=0),"p"in a&&(a.H=a.H%12+12*a.p),void 0===a.m&&(a.m="q"in a?a.q:0),"V"in a){if(a.V<1||a.V>53)return null;"w"in a||(a.w=1),"Z"in a?(n=(i=(n=si(sa(a.y,0,1))).getUTCDay())>4||0===i?oH.ceil(n):oH(n),n=o0.offset(n,(a.V-1)*7),a.y=n.getUTCFullYear(),a.m=n.getUTCMonth(),a.d=n.getUTCDate()+(a.w+6)%7):(n=(i=(n=sn(sa(a.y,0,1))).getDay())>4||0===i?oV.ceil(n):oV(n),n=oZ.offset(n,(a.V-1)*7),a.y=n.getFullYear(),a.m=n.getMonth(),a.d=n.getDate()+(a.w+6)%7)}else("W"in a||"U"in a)&&("w"in a||(a.w="u"in a?a.u%7:+("W"in a)),i="Z"in a?si(sa(a.y,0,1)).getUTCDay():sn(sa(a.y,0,1)).getDay(),a.m=0,a.d="W"in a?(a.w+6)%7+7*a.W-(i+5)%7:a.w+7*a.U-(i+6)%7);return"Z"in a?(a.H+=a.Z/100|0,a.M+=a.Z%100,si(a)):sn(a)}}function _(e,t,r,n){for(var i,a,o=0,s=t.length,l=r.length;o<s;){if(n>=l)return -1;if(37===(i=t.charCodeAt(o++))){if(!(a=x[(i=t.charAt(o++))in so?t.charAt(o++):i])||(n=a(e,r,n))<0)return -1}else if(i!=r.charCodeAt(n++))return -1}return n}return b.x=E(r,b),b.X=E(n,b),b.c=E(t,b),w.x=E(r,w),w.X=E(n,w),w.c=E(t,w),{format:function(e){var t=E(e+="",b);return t.toString=function(){return e},t},parse:function(e){var t=S(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=E(e+="",w);return t.toString=function(){return e},t},utcParse:function(e){var t=S(e+="",!0);return t.toString=function(){return e},t}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]})).format,h.parse,d=h.utcFormat,h.utcParse,e.s(["scaleBand",()=>iQ,"scaleDiverging",()=>lI,"scaleDivergingLog",()=>lA,"scaleDivergingPow",()=>lk,"scaleDivergingSqrt",()=>lP,"scaleDivergingSymlog",()=>lC,"scaleIdentity",()=>ot,"scaleImplicit",0,iH,"scaleLinear",()=>oe,"scaleLog",()=>oc,"scaleOrdinal",()=>iW,"scalePoint",()=>iY,"scalePow",()=>ob,"scaleQuantile",()=>oI,"scaleQuantize",()=>oA,"scaleRadial",()=>oE,"scaleSequential",()=>lw,"scaleSequentialLog",()=>lx,"scaleSequentialPow",()=>lS,"scaleSequentialQuantile",()=>lO,"scaleSequentialSqrt",()=>l_,"scaleSequentialSymlog",()=>lE,"scaleSqrt",()=>ow,"scaleSymlog",()=>op,"scaleThreshold",()=>oC,"scaleTime",()=>lm,"scaleUtc",()=>ly,"tickFormat",()=>a7],57197),e.i(57197),e.s(["scaleBand",()=>iQ,"scaleDiverging",()=>lI,"scaleDivergingLog",()=>lA,"scaleDivergingPow",()=>lk,"scaleDivergingSqrt",()=>lP,"scaleDivergingSymlog",()=>lC,"scaleIdentity",()=>ot,"scaleImplicit",0,iH,"scaleLinear",()=>oe,"scaleLog",()=>oc,"scaleOrdinal",()=>iW,"scalePoint",()=>iY,"scalePow",()=>ob,"scaleQuantile",()=>oI,"scaleQuantize",()=>oA,"scaleRadial",()=>oE,"scaleSequential",()=>lw,"scaleSequentialLog",()=>lx,"scaleSequentialPow",()=>lS,"scaleSequentialQuantile",()=>lO,"scaleSequentialSqrt",()=>l_,"scaleSequentialSymlog",()=>lE,"scaleSqrt",()=>ow,"scaleSymlog",()=>op,"scaleThreshold",()=>oC,"scaleTime",()=>lm,"scaleUtc",()=>ly,"tickFormat",()=>a7],7322);var lD=e.i(7322),lN=e=>e.chartData,lj=tt([lN],e=>{var t=null!=e.chartData?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),lM=(e,t,r,n)=>n?lj(e):lN(e);function lR(e){if(Array.isArray(e)&&2===e.length){var[t,r]=e;if(nG(t)&&nG(r))return!0}return!1}function lL(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function lF(e,t){if(t&&"function"!=typeof e&&Array.isArray(e)&&2===e.length){var r,n,[i,a]=e;if(nG(i))r=i;else if("function"==typeof i)return;if(nG(a))n=a;else if("function"==typeof a)return;var o=[r,n];if(lR(o))return o}}var lV=e.i(2119);function lB(e){return 0===e?1:Math.floor(new lV.default(e).abs().log(10).toNumber())+1}function lU(e,t,r){for(var n=new lV.default(e),i=0,a=[];n.lt(t)&&i<1e5;)a.push(n.toNumber()),n=n.add(r),i++;return a}var lz=e=>{var[t,r]=e,[n,i]=[t,r];return t>r&&([n,i]=[r,t]),[n,i]},lq=(e,t,r)=>{if(e.lte(0))return new lV.default(0);var n=lB(e.toNumber()),i=new lV.default(10).pow(n),a=e.div(i),o=1!==n?.05:.1,s=new lV.default(Math.ceil(a.div(o).toNumber())).add(r).mul(o).mul(i);return new lV.default(t?s.toNumber():Math.ceil(s.toNumber()))},l$=function(e,t,r,n){var i,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new lV.default(0),tickMin:new lV.default(0),tickMax:new lV.default(0)};var o=lq(new lV.default(t).sub(e).div(r-1),n,a),s=Math.ceil((i=e<=0&&t>=0?new lV.default(0):(i=new lV.default(e).add(t).div(2)).sub(new lV.default(i).mod(o))).sub(e).div(o).toNumber()),l=Math.ceil(new lV.default(t).sub(i).div(o).toNumber()),u=s+l+1;return u>r?l$(e,t,r,n,a+1):(u<r&&(l=t>0?l+(r-u):l,s=t>0?s:s+(r-u)),{step:o,tickMin:i.sub(new lV.default(s).mul(o)),tickMax:i.add(new lV.default(l).mul(o))})},lK=function(e){var[t,r]=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,i=!(arguments.length>2)||void 0===arguments[2]||arguments[2],a=Math.max(n,2),[o,s]=lz([t,r]);if(o===-1/0||s===1/0){var l=s===1/0?[o,...Array(n-1).fill(1/0)]:[...Array(n-1).fill(-1/0),s];return t>r?l.reverse():l}if(o===s)return((e,t,r)=>{var n=new lV.default(1),i=new lV.default(e);if(!i.isint()&&r){var a=Math.abs(e);a<1?(n=new lV.default(10).pow(lB(e)-1),i=new lV.default(Math.floor(i.div(n).toNumber())).mul(n)):a>1&&(i=new lV.default(Math.floor(e)))}else 0===e?i=new lV.default(Math.floor((t-1)/2)):r||(i=new lV.default(Math.floor(e)));for(var o=Math.floor((t-1)/2),s=[],l=0;l<t;l++)s.push(i.add(new lV.default(l-o).mul(n)).toNumber());return s})(o,n,i);var{step:u,tickMin:c,tickMax:h}=l$(o,s,a,i,0),f=lU(c,h.add(new lV.default(.1).mul(u)),u);return t>r?f.reverse():f},lG=function(e,t){var[r,n]=e,i=!(arguments.length>2)||void 0===arguments[2]||arguments[2],[a,o]=lz([r,n]);if(a===-1/0||o===1/0)return[r,n];if(a===o)return[a];var s=Math.max(t,2),l=lq(new lV.default(o).sub(a).div(s-1),i,0),u=[...lU(new lV.default(a),new lV.default(o),l),o];return!1===i&&(u=u.map(e=>Math.round(e))),r>n?u.reverse():u},lH=e=>e.rootProps.stackOffset,lW=e=>e.rootProps.reverseStackOrder,lQ=e=>e.options.chartName,lY=e=>e.rootProps.syncId,lJ=e=>e.rootProps.syncMethod,lX=e=>e.options.eventEmitter;function lZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function l0(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?lZ(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lZ(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var l1=Math.PI/180,l2=(e,t,r,n)=>({x:e+Math.cos(-l1*n)*r,y:t+Math.sin(-l1*n)*r}),l6={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},l3={allowDecimals:!1,allowDuplicatedCategory:!0,allowDataOverflow:!1,angle:0,angleAxisId:0,axisLine:!0,axisLineType:"polygon",cx:0,cy:0,hide:!1,includeHidden:!1,label:!1,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"auto",zIndex:l6.axis},l5={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,includeHidden:!1,hide:!1,label:!1,orientation:"right",radiusAxisId:0,reversed:!1,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,tickLine:!0,type:"auto",zIndex:l6.axis},l4=(e,t)=>{if(e&&t)return null!=e&&e.reversed?[t[1],t[0]]:t};function l8(e,t,r){return"auto"!==r?r:null!=e?nJ(e,t)?"category":"number":void 0}function l7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function l9(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l7(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l7(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ue={allowDataOverflow:l3.allowDataOverflow,allowDecimals:l3.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:l3.angleAxisId,includeHidden:!1,name:void 0,reversed:l3.reversed,scale:l3.scale,tick:l3.tick,tickCount:void 0,ticks:void 0,type:l3.type,unit:void 0},ut={allowDataOverflow:l5.allowDataOverflow,allowDecimals:l5.allowDecimals,allowDuplicatedCategory:l5.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:l5.radiusAxisId,includeHidden:l5.includeHidden,name:void 0,reversed:l5.reversed,scale:l5.scale,tick:l5.tick,tickCount:l5.tickCount,ticks:void 0,type:l5.type,unit:void 0},ur=tt([(e,t)=>{if(null!=t)return e.polarAxis.angleAxis[t]},iV],(e,t)=>{if(null!=e)return e;var r,n=null!=(r=l8(t,"angleAxis",ue.type))?r:"category";return l9(l9({},ue),{},{type:n})}),un=tt([(e,t)=>e.polarAxis.radiusAxis[t],iV],(e,t)=>{if(null!=e)return e;var r,n=null!=(r=l8(t,"radiusAxis",ut.type))?r:"category";return l9(l9({},ut),{},{type:n})}),ui=e=>e.polarOptions,ua=tt([n8,n7,io],function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0,width:0,height:0,brushBottom:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(t-(r.top||0)-(r.bottom||0)))/2}),uo=tt([ui,ua],(e,t)=>{if(null!=e)return ri(e.innerRadius,t,0)}),us=tt([ui,ua],(e,t)=>{if(null!=e)return ri(e.outerRadius,t,.8*t)}),ul=tt([ui],e=>{if(null==e)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]});tt([ur,ul],l4);var uu=tt([ua,uo,us],(e,t,r)=>{if(null!=e&&null!=t&&null!=r)return[t,r]});tt([un,uu],l4);var uc=tt([iL,ui,uo,us,n8,n7],(e,t,r,n,i,a)=>{if(("centric"===e||"radial"===e)&&null!=t&&null!=r&&null!=n){var{cx:o,cy:s,startAngle:l,endAngle:u}=t;return{cx:ri(o,i,i/2),cy:ri(s,a,a/2),innerRadius:r,outerRadius:n,startAngle:l,endAngle:u,clockWise:!1}}}),uh=(e,t)=>t,uf=(e,t,r)=>r;function ud(e){return null==e?void 0:e.id}function up(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:i,dataKey:a}=r,o=new Map;return e.forEach(e=>{var t,r=null!=(t=e.data)?t:n;if(null!=r&&0!==r.length){var s=ud(e);r.forEach((t,r)=>{var n,l=null==a||i?r:String(nY(t,a,null)),u=nY(t,e.dataKey,0);Object.assign(n=o.has(l)?o.get(l):{},{[s]:u}),o.set(l,n)})}}),Array.from(o.values())}function ug(e){return"stackId"in e&&null!=e.stackId&&null!=e.dataKey}var um=(e,t)=>e===t||null!=e&&null!=t&&e[0]===t[0]&&e[1]===t[1];function uy(e,t){return!!(Array.isArray(e)&&Array.isArray(t))&&0===e.length&&0===t.length||e===t}var uv=e=>{var t=iL(e);return"horizontal"===t?"xAxis":"vertical"===t?"yAxis":"centric"===t?"angleAxis":"radiusAxis"},ub=e=>e.tooltip.settings.axisId;function uw(e){var t=e.ticks,r=e.bandwidth,n=e.range(),i=[Math.min(...n),Math.max(...n)];return{domain:()=>e.domain(),range:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(()=>i),rangeMin:()=>i[0],rangeMax:()=>i[1],isInRange(e){var t=i[0],r=i[1];return t<=r?e>=t&&e<=r:e>=r&&e<=t},bandwidth:r?()=>r.call(e):void 0,ticks:t?r=>t.call(e,r):void 0,map:(t,r)=>{var n=e(t);if(null!=n){if(e.bandwidth&&null!=r&&r.position){var i=e.bandwidth();switch(r.position){case"middle":n+=i/2;break;case"end":n+=i}}return n}}}}function ux(e,t,r){if("function"==typeof e)return uw(e.copy().domain(t).range(r));if(null!=e){var n=function(e){if(e in lD)return lD[e]();var t="scale".concat(rl(e));if(t in lD)return lD[t]()}(e);if(null!=n)return n.domain(t).range(r),uw(n)}}function uE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function uS(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?uE(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uE(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var u_=[0,"auto"],uO={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},uT=(e,t)=>e.cartesianAxis.xAxis[t],uI=(e,t)=>{var r=uT(e,t);return null==r?uO:r},uA={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:u_,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:60},uC=(e,t)=>e.cartesianAxis.yAxis[t],uk=(e,t)=>{var r=uC(e,t);return null==r?uA:r},uP={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},uD=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return null==r?uP:r},uN=(e,t,r)=>{switch(t){case"xAxis":return uI(e,r);case"yAxis":return uk(e,r);case"zAxis":return uD(e,r);case"angleAxis":return ur(e,r);case"radiusAxis":return un(e,r);default:throw Error("Unexpected axis type: ".concat(t))}},uj=(e,t,r)=>{switch(t){case"xAxis":return uI(e,r);case"yAxis":return uk(e,r);case"angleAxis":return ur(e,r);case"radiusAxis":return un(e,r);default:throw Error("Unexpected axis type: ".concat(t))}},uM=e=>e.graphicalItems.cartesianItems.some(e=>"bar"===e.type)||e.graphicalItems.polarItems.some(e=>"radialBar"===e.type);function uR(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var uL=e=>e.graphicalItems.cartesianItems,uF=tt([uh,uf],uR),uV=(e,t,r)=>e.filter(r).filter(e=>(null==t?void 0:t.includeHidden)===!0||!e.hide),uB=tt([uL,uN,uF],uV,{memoizeOptions:{resultEqualityCheck:uy}}),uU=tt([uB],e=>e.filter(e=>"area"===e.type||"bar"===e.type).filter(ug)),uz=e=>e.filter(e=>!("stackId"in e)||void 0===e.stackId),uq=tt([uB],uz),u$=e=>e.map(e=>e.data).filter(Boolean).flat(1),uK=tt([uB],u$,{memoizeOptions:{resultEqualityCheck:uy}}),uG=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:i}=t;return e.length>0?e:r.slice(n,i+1)},uH=tt([uK,lM],uG),uW=(e,t,r)=>(null==t?void 0:t.dataKey)!=null?e.map(e=>({value:nY(e,t.dataKey)})):r.length>0?r.map(e=>e.dataKey).flatMap(t=>e.map(e=>({value:nY(e,t)}))):e.map(e=>({value:e})),uQ=tt([uH,uN,uB],uW);function uY(e,t){switch(e){case"xAxis":return"x"===t.direction;case"yAxis":return"y"===t.direction;default:return!1}}function uJ(e){if(rt(e)||e instanceof Date){var t=Number(e);if(nG(t))return t}}function uX(e){if(Array.isArray(e)){var t=[uJ(e[0]),uJ(e[1])];return lR(t)?t:void 0}var r=uJ(e);if(null!=r)return[r,r]}function uZ(e){return e.map(uJ).filter(ru)}var u0=e=>{var t=uv(e),r=ub(e);return uj(e,t,r)},u1=tt([u0],e=>null==e?void 0:e.dataKey),u2=tt([uU,lM,u0],up),u6=(e,t,r,n)=>Object.fromEntries(Object.entries(t.reduce((e,t)=>{if(null==t.stackId)return e;var r=e[t.stackId];return null==r&&(r=[]),r.push(t),e[t.stackId]=r,e},{})).map(t=>{var i,a,o,[s,l]=t,u=n?[...l].reverse():l,c=u.map(ud);return[s,{stackedData:(a=null!=(i=n0[r])?i:nU,(o=(function(){var e=nB([]),t=nz,r=nU,n=nq;function i(i){var a,o,s=Array.from(e.apply(this,arguments),n$),l=s.length,u=-1;for(let e of i)for(a=0,++u;a<l;++a)(s[a][u]=[0,+n(e,s[a].key,u,i)]).data=e;for(a=0,o=nV(t(s));a<l;++a)s[o[a]].index=a;return r(s,o),s}return i.keys=function(t){return arguments.length?(e="function"==typeof t?t:nB(Array.from(t)),i):e},i.value=function(e){return arguments.length?(n="function"==typeof e?e:nB(+e),i):n},i.order=function(e){return arguments.length?(t=null==e?nz:"function"==typeof e?e:nB(Array.from(e)),i):t},i.offset=function(e){return arguments.length?(r=null==e?nU:e,i):r},i})().keys(c).value((e,t)=>Number(nY(e,t,0))).order(nz).offset(a)(e)).forEach((t,r)=>{t.forEach((t,n)=>{var i=nY(e[n],c[r],0);Array.isArray(i)&&2===i.length&&re(i[0])&&re(i[1])&&(t[0]=i[0],t[1]=i[1])})}),o),graphicalItems:u}]})),u3=tt([u2,uU,lH,lW],u6),u5=(e,t,r,n)=>{var{dataStartIndex:i,dataEndIndex:a}=t;if(null==n&&"zAxis"!==r){var o=((e,t,r)=>{if(null!=e){let n;return[(n=Object.keys(e).reduce((n,i)=>{var a=e[i];if(!a)return n;var{stackedData:o}=a,s=o.reduce((e,n)=>{var i,a=[Math.min(...i=nK(n,t,r).flat(2).filter(re)),Math.max(...i)];return nG(a[0])&&nG(a[1])?[Math.min(e[0],a[0]),Math.max(e[1],a[1])]:e},[1/0,-1/0]);return[Math.min(s[0],n[0]),Math.max(s[1],n[1])]},[1/0,-1/0]))[0]===1/0?0:n[0],n[1]===-1/0?0:n[1]]}})(e,i,a);if(null==o||0!==o[0]||0!==o[1])return o}},u4=tt([uN],e=>e.allowDataOverflow),u8=e=>{var t;if(null==e||!("domain"in e))return u_;if(null!=e.domain)return e.domain;if("ticks"in e&&null!=e.ticks){if("number"===e.type){var r=uZ(e.ticks);return[Math.min(...r),Math.max(...r)]}if("category"===e.type)return e.ticks.map(String)}return null!=(t=null==e?void 0:e.domain)?t:u_},u7=tt([uN],u8),u9=tt([u7,u4],lF),ce=tt([u3,lN,uh,u9],u5,{memoizeOptions:{resultEqualityCheck:um}}),ct=e=>e.errorBars,cr=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];var n=t.filter(Boolean);if(0!==n.length){var i=n.flat();return[Math.min(...i),Math.max(...i)]}},cn=(e,t,r,n,i)=>{var a,o;if(r.length>0&&e.forEach(e=>{r.forEach(r=>{var s,l,u=null==(s=n[r.id])?void 0:s.filter(e=>uY(i,e)),c=nY(e,null!=(l=t.dataKey)?l:r.dataKey),h=!(!u||"number"!=typeof c||t7(c))&&u.length?uZ(u.flatMap(t=>{var r,n,i=nY(e,t.dataKey);if(Array.isArray(i)?[r,n]=i:r=n=i,nG(r)&&nG(n))return[c-r,c+n]})):[];if(h.length>=2){var f=Math.min(...h),d=Math.max(...h);(null==a||f<a)&&(a=f),(null==o||d>o)&&(o=d)}var p=uX(c);null!=p&&(a=null==a?p[0]:Math.min(a,p[0]),o=null==o?p[1]:Math.max(o,p[1]))})}),(null==t?void 0:t.dataKey)!=null&&e.forEach(e=>{var r=uX(nY(e,t.dataKey));null!=r&&(a=null==a?r[0]:Math.min(a,r[0]),o=null==o?r[1]:Math.max(o,r[1]))}),nG(a)&&nG(o))return[a,o]},ci=tt([uH,uN,uq,ct,uh],cn,{memoizeOptions:{resultEqualityCheck:um}});function ca(e){var{value:t}=e;if(rt(t)||t instanceof Date)return t}var co=e=>e.referenceElements.dots,cs=(e,t,r)=>e.filter(e=>"extendDomain"===e.ifOverflow).filter(e=>"xAxis"===t?e.xAxisId===r:e.yAxisId===r),cl=tt([co,uh,uf],cs),cu=e=>e.referenceElements.areas,cc=tt([cu,uh,uf],cs),ch=e=>e.referenceElements.lines,cf=tt([ch,uh,uf],cs),cd=(e,t)=>{if(null!=e){var r=uZ(e.map(e=>"xAxis"===t?e.x:e.y));if(0!==r.length)return[Math.min(...r),Math.max(...r)]}},cp=tt(cl,uh,cd),cg=(e,t)=>{if(null!=e){var r=uZ(e.flatMap(e=>["xAxis"===t?e.x1:e.y1,"xAxis"===t?e.x2:e.y2]));if(0!==r.length)return[Math.min(...r),Math.max(...r)]}},cm=tt([cc,uh],cg),cy=(e,t)=>{if(null!=e){var r=e.flatMap(e=>"xAxis"===t?function(e){if(null!=e.x)return uZ([e.x]);var t,r=null==(t=e.segment)?void 0:t.map(e=>e.x);return null==r||0===r.length?[]:uZ(r)}(e):function(e){if(null!=e.y)return uZ([e.y]);var t,r=null==(t=e.segment)?void 0:t.map(e=>e.y);return null==r||0===r.length?[]:uZ(r)}(e));if(0!==r.length)return[Math.min(...r),Math.max(...r)]}},cv=tt([cf,uh],cy),cb=tt(cp,cv,cm,(e,t,r)=>cr(e,r,t)),cw=(e,t,r,n,i,a,o,s)=>null!=r?r:function(e,t,r){if(r||null!=t){if("function"==typeof e&&null!=t)try{var n=e(t,r);if(lR(n))return lL(n,t,r)}catch(e){}if(Array.isArray(e)&&2===e.length){var i,a,[o,s]=e;if("auto"===o)null!=t&&(i=Math.min(...t));else if(re(o))i=o;else if("function"==typeof o)try{null!=t&&(i=o(null==t?void 0:t[0]))}catch(e){}else if("string"==typeof o&&n2.test(o)){var l=n2.exec(o);if(null==l||null==l[1]||null==t)i=void 0;else{var u=+l[1];i=t[0]-u}}else i=null==t?void 0:t[0];if("auto"===s)null!=t&&(a=Math.max(...t));else if(re(s))a=s;else if("function"==typeof s)try{null!=t&&(a=s(null==t?void 0:t[1]))}catch(e){}else if("string"==typeof s&&n6.test(s)){var c=n6.exec(s);if(null==c||null==c[1]||null==t)a=void 0;else{var h=+c[1];a=t[1]+h}}else a=null==t?void 0:t[1];var f=[i,a];if(lR(f))return null==t?f:lL(f,t,r)}}}(t,"vertical"===o&&"xAxis"===s||"horizontal"===o&&"yAxis"===s?cr(n,a,i):cr(a,i),e.allowDataOverflow),cx=tt([uN,u7,u9,ce,ci,cb,iL,uh],cw,{memoizeOptions:{resultEqualityCheck:um}}),cE=[0,1],cS=(e,t,r,n,i,a,o)=>{if(null!=e&&null!=r&&0!==r.length||void 0!==o){var s,l,{dataKey:u,type:c}=e,h=nJ(t,a);return h&&null==u?(0,iU.default)(0,null!=(l=null==r?void 0:r.length)?l:0):"category"===c?(s=n.map(ca).filter(e=>null!=e),h&&(null==e.dataKey||e.allowDuplicatedCategory&&ra(s))?(0,iU.default)(0,n.length):e.allowDuplicatedCategory?s:Array.from(new Set(s))):"expand"===i?cE:o}},c_=tt([uN,iL,uH,uQ,lH,uh,cx],cS),cO=(e,t,r)=>{if(null!=e){var{scale:n,type:i}=e;if("auto"===n)return"category"===i&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!t)?"point":"category"===i?"band":"linear";if("string"==typeof n){var a="scale".concat(rl(n));return a in lD?a:"point"}}},cT=tt([uN,uM,lQ],cO);function cI(e,t,r,n){if(null!=r&&null!=n)return"function"==typeof e.scale?ux(e.scale,r,n):ux(t,r,n)}var cA=(e,t,r)=>{var n=u8(t);if("auto"===r||"linear"===r){if(null!=t&&t.tickCount&&Array.isArray(n)&&("auto"===n[0]||"auto"===n[1])&&lR(e))return lK(e,t.tickCount,t.allowDecimals);if(null!=t&&t.tickCount&&"number"===t.type&&lR(e))return lG(e,t.tickCount,t.allowDecimals)}},cC=tt([c_,uj,cT],cA),ck=(e,t,r,n)=>{if("angleAxis"!==n&&(null==e?void 0:e.type)==="number"&&lR(t)&&Array.isArray(r)&&r.length>0){var i,a;return[Math.min(t[0],null!=(i=r[0])?i:0),Math.max(t[1],null!=(a=r[r.length-1])?a:0)]}return t},cP=tt([uN,c_,cC,uh],ck),cD=tt(uQ,uN,(e,t)=>{if(t&&"number"===t.type){var r=1/0,n=Array.from(uZ(e.map(e=>e.value))).sort((e,t)=>e-t),i=n[0],a=n[n.length-1];if(null==i||null==a)return 1/0;var o=a-i;if(0===o)return 1/0;for(var s=0;s<n.length-1;s++){var l=n[s],u=n[s+1];null!=l&&null!=u&&(r=Math.min(r,u-l))}return r/o}}),cN=tt(cD,iL,e=>e.rootProps.barCategoryGap,io,(e,t,r,n,i)=>i,(e,t,r,n,i)=>{if(!nG(e))return 0;var a="vertical"===t?n.height:n.width;if("gap"===i)return e*a/2;if("no-gap"===i){var o=ri(r,e*a),s=e*a/2;return s-o-(s-o)/a*o}return 0}),cj=tt(uI,(e,t,r)=>{var n=uI(e,t);return null==n||"string"!=typeof n.padding?0:cN(e,"xAxis",t,r,n.padding)},(e,t)=>{if(null==e)return{left:0,right:0};var r,n,{padding:i}=e;return"string"==typeof i?{left:t,right:t}:{left:(null!=(r=i.left)?r:0)+t,right:(null!=(n=i.right)?n:0)+t}}),cM=tt(uk,(e,t,r)=>{var n=uk(e,t);return null==n||"string"!=typeof n.padding?0:cN(e,"yAxis",t,r,n.padding)},(e,t)=>{if(null==e)return{top:0,bottom:0};var r,n,{padding:i}=e;return"string"==typeof i?{top:t,bottom:t}:{top:(null!=(r=i.top)?r:0)+t,bottom:(null!=(n=i.bottom)?n:0)+t}}),cR=tt([io,cj,id,ih,(e,t,r)=>r],(e,t,r,n,i)=>{var{padding:a}=n;return i?[a.left,r.width-a.right]:[e.left+t.left,e.left+e.width-t.right]}),cL=tt([io,iL,cM,id,ih,(e,t,r)=>r],(e,t,r,n,i,a)=>{var{padding:o}=i;return a?[n.height-o.bottom,o.top]:"horizontal"===t?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),cF=(e,t,r,n)=>{var i;switch(t){case"xAxis":return cR(e,r,n);case"yAxis":return cL(e,r,n);case"zAxis":return null==(i=uD(e,r))?void 0:i.range;case"angleAxis":return ul(e);case"radiusAxis":return uu(e,r);default:return}},cV=tt([uN,cF],l4),cB=tt([cT,cP],(e,t)=>{if(null!=t)if("linear"!==e)return t;else{if(!lR(t)){for(var r,n,i=0;i<t.length;i++){var a=t[i];nG(a)&&((void 0===r||a<r)&&(r=a),(void 0===n||a>n)&&(n=a))}return void 0!==r&&void 0!==n?[r,n]:void 0}return t}}),cU=tt([uN,cT,cB,cV],cI);function cz(e,t){return e.id<t.id?-1:+(e.id>t.id)}tt([uB,ct,uh],(e,t,r)=>e.flatMap(e=>t[e.id]).filter(Boolean).filter(e=>uY(r,e)));var cq=(e,t)=>t,c$=(e,t,r)=>r,cK=tt(it,cq,c$,(e,t,r)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===r).sort(cz)),cG=tt(ir,cq,c$,(e,t,r)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===r).sort(cz)),cH=(e,t)=>({width:e.width,height:t.height}),cW=tt(io,uI,cH),cQ=tt(n7,io,cK,cq,c$,(e,t,r,n,i)=>{var a,o={};return r.forEach(r=>{var s=cH(t,r);null==a&&(a=((e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}})(t,n,e));var l="top"===n&&!i||"bottom"===n&&i;o[r.id]=a-Number(l)*s.height,a+=(l?-1:1)*s.height}),o}),cY=tt(n8,io,cG,cq,c$,(e,t,r,n,i)=>{var a,o={};return r.forEach(r=>{var s={width:"number"==typeof r.width?r.width:60,height:t.height};null==a&&(a=((e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}})(t,n,e));var l="left"===n&&!i||"right"===n&&i;o[r.id]=a-Number(l)*s.width,a+=(l?-1:1)*s.width}),o}),cJ=tt([io,uI,(e,t)=>{var r=uI(e,t);if(null!=r)return cQ(e,r.orientation,r.mirror)},(e,t)=>t],(e,t,r,n)=>{if(null!=t){var i=null==r?void 0:r[n];return null==i?{x:e.left,y:0}:{x:e.left,y:i}}}),cX=tt([io,uk,(e,t)=>{var r=uk(e,t);if(null!=r)return cY(e,r.orientation,r.mirror)},(e,t)=>t],(e,t,r,n)=>{if(null!=t){var i=null==r?void 0:r[n];return null==i?{x:0,y:e.top}:{x:i,y:e.top}}}),cZ=tt(io,uk,(e,t)=>({width:"number"==typeof t.width?t.width:60,height:e.height})),c0=(e,t,r,n)=>{if(null!=r){var{allowDuplicatedCategory:i,type:a,dataKey:o}=r,s=nJ(e,n),l=t.map(e=>e.value);if(o&&s&&"category"===a&&i&&ra(l))return l}},c1=tt([iL,uQ,uN,uh],c0),c2=(e,t,r,n)=>{if(null!=r&&null!=r.dataKey){var{type:i,scale:a}=r;if(nJ(e,n)&&("number"===i||"auto"!==a))return t.map(e=>e.value)}},c6=tt([iL,uQ,uj,uh],c2),c3=tt([iL,(e,t,r)=>{switch(t){case"xAxis":return uI(e,r);case"yAxis":return uk(e,r);default:throw Error("Unexpected axis type: ".concat(t))}},cT,cU,c1,c6,cF,cC,uh],(e,t,r,n,i,a,o,s,l)=>{if(null!=t){var u=nJ(e,l);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:l,categoricalDomain:a,duplicateDomain:i,isCategorical:u,niceTicks:s,range:o,realScaleType:r,scale:n}}}),c5=tt([iL,uj,cT,cU,cC,cF,c1,c6,uh],(e,t,r,n,i,a,o,s,l)=>{if(null!=t&&null!=n){var u=nJ(e,l),{type:c,ticks:h,tickCount:f}=t,d="scaleBand"===r&&"function"==typeof n.bandwidth?n.bandwidth()/2:2,p="category"===c&&n.bandwidth?n.bandwidth()/d:0;p="angleAxis"===l&&null!=a&&a.length>=2?2*t8(a[0]-a[1])*p:p;var g=h||i;return g?g.map((e,t)=>{var r=o?o.indexOf(e):e,i=n.map(r);return nG(i)?{index:t,coordinate:i+p,value:e,offset:p}:null}).filter(ru):u&&s?s.map((e,t)=>{var r=n.map(e);return nG(r)?{coordinate:r+p,value:e,index:t,offset:p}:null}).filter(ru):n.ticks?n.ticks(f).map((e,t)=>{var r=n.map(e);return nG(r)?{coordinate:r+p,value:e,index:t,offset:p}:null}).filter(ru):n.domain().map((e,t)=>{var r=n.map(e);return nG(r)?{coordinate:r+p,value:o?o[e]:e,index:t,offset:p}:null}).filter(ru)}}),c4=tt([iL,uj,cU,cF,c1,c6,uh],(e,t,r,n,i,a,o)=>{if(null!=t&&null!=r&&null!=n&&n[0]!==n[1]){var s=nJ(e,o),{tickCount:l}=t,u=0;return(u="angleAxis"===o&&(null==n?void 0:n.length)>=2?2*t8(n[0]-n[1])*u:u,s&&a)?a.map((e,t)=>{var n=r.map(e);return nG(n)?{coordinate:n+u,value:e,index:t,offset:u}:null}).filter(ru):r.ticks?r.ticks(l).map((e,t)=>{var n=r.map(e);return nG(n)?{coordinate:n+u,value:e,index:t,offset:u}:null}).filter(ru):r.domain().map((e,t)=>{var n=r.map(e);return nG(n)?{coordinate:n+u,value:i?i[e]:e,index:t,offset:u}:null}).filter(ru)}}),c8=tt(uN,cU,(e,t)=>{if(null!=e&&null!=t)return uS(uS({},e),{},{scale:t})}),c7=tt([uN,cT,c_,cV],cI);tt((e,t,r)=>uD(e,r),c7,(e,t)=>{if(null!=e&&null!=t)return uS(uS({},e),{},{scale:t})});var c9=tt([iL,it,ir],(e,t,r)=>{switch(e){case"horizontal":return t.some(e=>e.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(e=>e.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),he=e=>e.options.defaultTooltipEventType,ht=e=>e.options.validateTooltipEventTypes;function hr(e,t,r){if(null==e)return t;var n=e?"axis":"item";return null==r?t:r.includes(n)?n:t}function hn(e,t){return hr(t,he(e),ht(e))}var hi=(e,t)=>{var r,n=Number(t);if(!t7(n)&&null!=t)return n>=0?null==e||null==(r=e[n])?void 0:r.value:void 0};function ha(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ho(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ha(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ha(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var hs=(e,t,r,n)=>{if(null==t)return nr;var i,a,o,s=(i=e,a=t,o=r,"axis"===a?"click"===o?i.axisInteraction.click:i.axisInteraction.hover:"click"===o?i.itemInteraction.click:i.itemInteraction.hover);if(null==s)return nr;if(s.active)return s;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&null!=e.syncInteraction.index)return e.syncInteraction;var l=!0===e.settings.active;if(null!=s.index){if(l)return ho(ho({},s),{},{active:!0})}else if(null!=n)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return ho(ho({},nr),{},{coordinate:s.coordinate})},hl=(e,t,r,n)=>{var i=null==e?void 0:e.index;if(null==i)return null;var a=Number(i);if(!nG(a))return i;var o=Infinity;t.length>0&&(o=t.length-1);var s=Math.max(0,Math.min(a,o)),l=t[s];return null==l?String(s):!function(e,t,r){if(null==r||null==t)return!0;var n=nY(e,t);return!(null!=n&&lR(r))||function(e,t){var r=function(e){if("number"==typeof e)return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}(e),n=t[0],i=t[1];if(void 0===r)return!1;var a=Math.min(n,i),o=Math.max(n,i);return r>=a&&r<=o}(n,r)}(l,r,n)?null:String(s)},hu=(e,t,r,n,i,a,o)=>{if(null!=a){var s=o[0],l=null==s?void 0:s.getPosition(a);if(null!=l)return l;var u=null==i?void 0:i[Number(a)];if(u)if("horizontal"===r)return{x:u.coordinate,y:(n.top+t)/2};else return{x:(n.left+e)/2,y:u.coordinate}}},hc=(e,t,r,n)=>{if("axis"===t)return e.tooltipItemPayloads;if(0===e.tooltipItemPayloads.length)return[];if(null==(i="hover"===r?e.itemInteraction.hover.graphicalItemId:e.itemInteraction.click.graphicalItemId)&&null!=n){var i,a=e.tooltipItemPayloads[0];return null!=a?[a]:[]}return e.tooltipItemPayloads.filter(e=>{var t;return(null==(t=e.settings)?void 0:t.graphicalItemId)===i})},hh=e=>e.options.tooltipPayloadSearcher,hf=e=>e.tooltip;function hd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function hp(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?hd(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hd(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var hg=(e,t,r,n,i,a,o)=>{if(null!=t&&null!=a){var{chartData:s,computedData:l,dataStartIndex:u,dataEndIndex:c}=r;return e.reduce((e,r)=>{var h,f,d,{dataDefinedOnItem:p,settings:g}=r,m=null!=p?p:s,y=Array.isArray(m)?nK(m,u,c):m,v=null!=(h=null==g?void 0:g.dataKey)?h:n,b=null==g?void 0:g.nameKey;return Array.isArray(f=n&&Array.isArray(y)&&!Array.isArray(y[0])&&"axis"===o?rs(y,n,i):a(y,t,l,b))?f.forEach(t=>{var r=hp(hp({},g),{},{name:t.name,unit:t.unit,color:void 0,fill:void 0});e.push(n5({tooltipEntrySettings:r,dataKey:t.dataKey,payload:t.payload,value:nY(t.payload,t.dataKey),name:t.name}))}):e.push(n5({tooltipEntrySettings:g,dataKey:v,payload:f,value:nY(f,v),name:null!=(d=nY(f,b))?d:null==g?void 0:g.name})),e},[])}},hm=tt([u0,uM,lQ],cO),hy=tt([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),hv=tt([uv,ub],uR),hb=tt([hy,u0,hv],uV,{memoizeOptions:{resultEqualityCheck:uy}}),hw=tt([hb],e=>e.filter(ug)),hx=tt([hb],u$,{memoizeOptions:{resultEqualityCheck:uy}}),hE=tt([hx,lN],uG),hS=tt([hw,lN,u0],up),h_=tt([hE,u0,hb],uW),hO=tt([u0],u8),hT=tt([u0],e=>e.allowDataOverflow),hI=tt([hO,hT],lF),hA=tt([hb],e=>e.filter(ug)),hC=tt([hS,hA,lH,lW],u6),hk=tt([hC,lN,uv,hI],u5),hP=tt([hb],uz),hD=tt([hE,u0,hP,ct,uv],cn,{memoizeOptions:{resultEqualityCheck:um}}),hN=tt([co,uv,ub],cs),hj=tt([hN,uv],cd),hM=tt([cu,uv,ub],cs),hR=tt([hM,uv],cg),hL=tt([ch,uv,ub],cs),hF=tt([hL,uv],cy),hV=tt([hj,hF,hR],cr),hB=tt([u0,hO,hI,hk,hD,hV,iL,uv],cw),hU=tt([u0,iL,hE,h_,lH,uv,hB],cS),hz=tt([hU,u0,hm],cA),hq=tt([u0,hU,hz,uv],ck),h$=e=>{var t=uv(e),r=ub(e);return cF(e,t,r,!1)},hK=tt([u0,h$],l4),hG=tt([u0,hm,hq,hK],cI),hH=tt([iL,h_,u0,uv],c0),hW=tt([iL,h_,u0,uv],c2),hQ=tt([iL,u0,hm,hG,h$,hH,hW,uv],(e,t,r,n,i,a,o,s)=>{if(t){var{type:l}=t,u=nJ(e,s);if(n){var c="scaleBand"===r&&n.bandwidth?n.bandwidth()/2:2,h="category"===l&&n.bandwidth?n.bandwidth()/c:0;return(h="angleAxis"===s&&null!=i&&(null==i?void 0:i.length)>=2?2*t8(i[0]-i[1])*h:h,u&&o)?o.map((e,t)=>{var r=n.map(e);return nG(r)?{coordinate:r+h,value:e,index:t,offset:h}:null}).filter(ru):n.domain().map((e,t)=>{var r=n.map(e);return nG(r)?{coordinate:r+h,value:a?a[e]:e,index:t,offset:h}:null}).filter(ru)}}}),hY=tt([he,ht,e=>e.tooltip.settings],(e,t,r)=>hr(r.shared,e,t)),hJ=e=>e.tooltip.settings.trigger,hX=e=>e.tooltip.settings.defaultIndex,hZ=tt([hf,hY,hJ,hX],hs),h0=tt([hZ,hE,u1,hU],hl),h1=tt([hQ,h0],hi),h2=tt([hZ],e=>{if(e)return e.dataKey});tt([hZ],e=>{if(e)return e.graphicalItemId});var h6=tt([hf,hY,hJ,hX],hc),h3=tt([n8,n7,iL,io,hQ,hX,h6],hu),h5=tt([hZ,h3],(e,t)=>null!=e&&e.coordinate?e.coordinate:t),h4=tt([hZ],e=>{var t;return null!=(t=null==e?void 0:e.active)&&t}),h8=tt([h6,h0,lN,u1,h1,hh,hY],hg),h7=tt([h8],e=>{if(null!=e)return Array.from(new Set(e.map(e=>e.payload).filter(e=>null!=e)))});function h9(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function fe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h9(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h9(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ft=(e,t,r,n,i)=>{var a=null!=(h=null==t?void 0:t.length)?h:0;if(a<=1||null==e)return 0;if("angleAxis"===n&&null!=i&&1e-6>=Math.abs(Math.abs(i[1]-i[0])-360))for(var o=0;o<a;o++){var s=o>0?null==(f=r[o-1])?void 0:f.coordinate:null==(d=r[a-1])?void 0:d.coordinate,l=null==(p=r[o])?void 0:p.coordinate,u=o>=a-1?null==(g=r[0])?void 0:g.coordinate:null==(m=r[o+1])?void 0:m.coordinate,c=void 0;if(null!=s&&null!=l&&null!=u)if(t8(l-s)!==t8(u-l)){var h,f,d,p,g,m,y,v=[];if(t8(u-l)===t8(i[1]-i[0])){c=u;var b=l+i[1]-i[0];v[0]=Math.min(b,(b+s)/2),v[1]=Math.max(b,(b+s)/2)}else{c=s;var w=u+i[1]-i[0];v[0]=Math.min(l,(w+l)/2),v[1]=Math.max(l,(w+l)/2)}var x=[Math.min(l,(c+l)/2),Math.max(l,(c+l)/2)];if(e>x[0]&&e<=x[1]||e>=v[0]&&e<=v[1])return null==(y=r[o])?void 0:y.index}else{var E,S=Math.min(s,u),_=Math.max(s,u);if(e>(S+l)/2&&e<=(_+l)/2)return null==(E=r[o])?void 0:E.index}}else if(t)for(var O=0;O<a;O++){var T=t[O];if(null!=T){var I=t[O+1],A=t[O-1];if(0===O&&null!=I&&e<=(T.coordinate+I.coordinate)/2||O===a-1&&null!=A&&e>(T.coordinate+A.coordinate)/2||O>0&&O<a-1&&null!=A&&null!=I&&e>(T.coordinate+A.coordinate)/2&&e<=(T.coordinate+I.coordinate)/2)return T.index}}return -1},fr=(e,t)=>t,fn=(e,t,r)=>r,fi=(e,t,r,n)=>n,fa=tt(hQ,e=>(0,nR.default)(e,e=>e.coordinate)),fo=tt([hf,fr,fn,fi],hs),fs=tt([fo,hE,u1,hU],hl),fl=tt([hf,fr,fn,fi],hc),fu=tt([n8,n7,iL,io,hQ,fi,fl],hu),fc=tt([fo,fu],(e,t)=>{var r;return null!=(r=e.coordinate)?r:t}),fh=tt([hQ,fs],hi),ff=tt([fl,fs,lN,u1,fh,hh,fr],hg),fd=tt([fo,fs],(e,t)=>({isActive:e.active&&null!=t,activeIndex:t})),fp=tt([(e,t)=>t,iL,uc,uv,hK,hQ,fa,io],(e,t,r,n,i,a,o,s)=>{if(e&&t&&n&&i&&a){if("horizontal"===t||"vertical"===t){if(!e||!n||!i||!a)return;if(function(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}(e,s)){var l=ft("horizontal"===t?e.chartX:"vertical"===t?e.chartY:void 0,o,a,n,i),u=((e,t,r,n)=>{var i=t.find(e=>e&&e.index===r);if(i){if("horizontal"===e)return{x:i.coordinate,y:n.chartY};if("vertical"===e)return{x:n.chartX,y:i.coordinate}}return{x:0,y:0}})(t,a,l,e);return{activeIndex:String(l),activeCoordinate:u}}return}if(e&&n&&i&&a&&r){var c=((e,t)=>{var r,{chartX:n,chartY:i}=e,{radius:a,angle:o}=((e,t)=>{var{x:r,y:n}=e,{cx:i,cy:a}=t,o=((e,t)=>{var{x:r,y:n}=e,{x:i,y:a}=t;return Math.sqrt((r-i)**2+(n-a)**2)})({x:r,y:n},{x:i,y:a});if(o<=0)return{radius:o,angle:0};var s=Math.acos((r-i)/o);return n>a&&(s=2*Math.PI-s),{radius:o,angle:180*s/Math.PI,angleInRadian:s}})({x:n,y:i},t),{innerRadius:s,outerRadius:l}=t;if(a<s||a>l||0===a)return null;var{startAngle:u,endAngle:c}=(e=>{var{startAngle:t,endAngle:r}=e,n=Math.min(Math.floor(t/360),Math.floor(r/360));return{startAngle:t-360*n,endAngle:r-360*n}})(t),h=o;if(u<=c){for(;h>c;)h-=360;for(;h<u;)h+=360;r=h>=u&&h<=c}else{for(;h>u;)h-=360;for(;h<c;)h+=360;r=h>=c&&h<=u}return r?l0(l0({},t),{},{radius:a,angle:((e,t)=>{var{startAngle:r,endAngle:n}=t;return e+360*Math.min(Math.floor(r/360),Math.floor(n/360))})(h,t)}):null})(e,r);if(c){var h=ft("centric"===t?c.angle:c.radius,o,a,n,i),f=((e,t,r,n)=>{var i=t.find(e=>e&&e.index===r);if(i){if("centric"===e){var a=i.coordinate,{radius:o}=n;return fe(fe(fe({},n),l2(n.cx,n.cy,o,a)),{},{angle:a,radius:o})}var s=i.coordinate,{angle:l}=n;return fe(fe(fe({},n),l2(n.cx,n.cy,s,l)),{},{angle:l,radius:s})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}})(t,a,h,c);return{activeIndex:String(h),activeCoordinate:f}}return}}}),fg=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},fm=tp("mouseClick"),fy=t2();fy.startListening({actionCreator:fm,effect:(e,t)=>{var r=e.payload,n=fp(t.getState(),fg(r));(null==n?void 0:n.activeIndex)!=null&&t.dispatch(nd({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var fv=tp("mouseMove"),fb=t2(),fw=null;function fx(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":"children"===e&&"object"==typeof t&&null!==t?"<<CHILDREN>>":t}function fE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function fS(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?fE(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fE(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}fb.startListening({actionCreator:fv,effect:(e,t)=>{var r=e.payload;null!==fw&&cancelAnimationFrame(fw);var n=fg(r);fw=requestAnimationFrame(()=>{var e=t.getState();if("axis"===hn(e,e.tooltip.settings.shared)){var r=fp(e,n);(null==r?void 0:r.activeIndex)!=null?t.dispatch(nf({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate})):t.dispatch(nc())}fw=null})}});var f_=tO({name:"cartesianAxis",initialState:{xAxis:{},yAxis:{},zAxis:{}},reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:tb()},replaceXAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;void 0!==e.xAxis[r.id]&&(r.id!==n.id&&delete e.xAxis[r.id],e.xAxis[n.id]=n)},prepare:tb()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:tb()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:tb()},replaceYAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;void 0!==e.yAxis[r.id]&&(r.id!==n.id&&delete e.yAxis[r.id],e.yAxis[n.id]=n)},prepare:tb()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:tb()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:tb()},replaceZAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;void 0!==e.zAxis[r.id]&&(r.id!==n.id&&delete e.zAxis[r.id],e.zAxis[n.id]=n)},prepare:tb()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:tb()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,i=e.yAxis[r];if(i){var a,o=i.widthHistory||[];if(3===o.length&&o[0]===o[2]&&n===o[1]&&n!==i.width&&1>=Math.abs(n-(null!=(a=o[0])?a:0)))return;var s=[...o,n].slice(-3);e.yAxis[r]=fS(fS({},i),{},{width:n,widthHistory:s})}}}}),{addXAxis:fO,replaceXAxis:fT,removeXAxis:fI,addYAxis:fA,replaceYAxis:fC,removeYAxis:fk,addZAxis:fP,replaceZAxis:fD,removeZAxis:fN,updateYAxisWidth:fj}=f_.actions,fM=f_.reducer,fR=tO({name:"graphicalItems",initialState:{cartesianItems:[],polarItems:[]},reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:tb()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,i=eG(e).cartesianItems.indexOf(r);i>-1&&(e.cartesianItems[i]=n)},prepare:tb()},removeCartesianGraphicalItem:{reducer(e,t){var r=eG(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:tb()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:tb()},removePolarGraphicalItem:{reducer(e,t){var r=eG(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:tb()}}}),{addCartesianGraphicalItem:fL,replaceCartesianGraphicalItem:fF,removeCartesianGraphicalItem:fV,addPolarGraphicalItem:fB,removePolarGraphicalItem:fU}=fR.actions,fz=fR.reducer,fq=tO({name:"referenceElements",initialState:{dots:[],areas:[],lines:[]},reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=eG(e).dots.findIndex(e=>e===t.payload);-1!==r&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=eG(e).areas.findIndex(e=>e===t.payload);-1!==r&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=eG(e).lines.findIndex(e=>e===t.payload);-1!==r&&e.lines.splice(r,1)}}}),{addDot:f$,removeDot:fK,addArea:fG,removeArea:fH,addLine:fW,removeLine:fQ}=fq.actions,fY=fq.reducer,fJ={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},fX=tO({name:"brush",initialState:fJ,reducers:{setBrushSettings:(e,t)=>null==t.payload?fJ:t.payload}}),{setBrushSettings:fZ}=fX.actions,f0=fX.reducer,f1=tO({name:"legend",initialState:{settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:tb()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:n}=t.payload,i=eG(e).payload.indexOf(r);i>-1&&(e.payload[i]=n)},prepare:tb()},removeLegendPayload:{reducer(e,t){var r=eG(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:tb()}}}),{setLegendSize:f2,setLegendSettings:f6,addLegendPayload:f3,replaceLegendPayload:f5,removeLegendPayload:f4}=f1.actions,f8=f1.reducer,f7={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},f9=tO({name:"rootProps",initialState:f7,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=null!=(r=t.payload.barGap)?r:f7.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),de=f9.reducer,{updateOptions:dt}=f9.actions,dr=tO({name:"polarAxis",initialState:{radiusAxis:{},angleAxis:{}},reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:dn,removeRadiusAxis:di,addAngleAxis:da,removeAngleAxis:ds}=dr.actions,dl=dr.reducer,du=tO({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:dc}=du.actions,dh=du.reducer,df=tp("keyDown"),dd=tp("focus"),dp=t2();dp.startListening({actionCreator:df,effect:(e,t)=>{var r=t.getState();if(!1===r.rootProps.accessibilityLayer)return;var{keyboardInteraction:n}=r.tooltip,i=e.payload;if("ArrowRight"===i||"ArrowLeft"===i||"Enter"===i){var a=hl(n,hE(r),u1(r),hU(r)),o=null==a?-1:Number(a);if(Number.isFinite(o)&&!(o<0)){var s=hQ(r);if("Enter"===i){var l=fu(r,"axis","hover",String(n.index));t.dispatch(ng({active:!n.active,activeIndex:n.index,activeCoordinate:l}));return}var u=o+("ArrowRight"===i?1:-1)*("left-to-right"===c9(r)?1:-1);if(null!=s&&!(u>=s.length)&&!(u<0)){var c=fu(r,"axis","hover",String(u));t.dispatch(ng({active:!0,activeIndex:u.toString(),activeCoordinate:c}))}}}}}),dp.startListening({actionCreator:dd,effect:(e,t)=>{var r=t.getState();if(!1!==r.rootProps.accessibilityLayer){var{keyboardInteraction:n}=r.tooltip;if(!n.active&&null==n.index){var i=fu(r,"axis","hover",String("0"));t.dispatch(ng({active:!0,activeIndex:"0",activeCoordinate:i}))}}}});var dg=tp("externalEvent"),dm=t2(),dy=new Map;dm.startListening({actionCreator:dg,effect:(e,t)=>{var{handler:r,reactEvent:n}=e.payload;if(null!=r){n.persist();var i=n.type,a=dy.get(i);void 0!==a&&cancelAnimationFrame(a);var o=requestAnimationFrame(()=>{try{var e=t.getState(),a={activeCoordinate:h5(e),activeDataKey:h2(e),activeIndex:h0(e),activeLabel:h1(e),activeTooltipIndex:h0(e),isTooltipActive:h4(e)};r(a,n)}finally{dy.delete(i)}});dy.set(i,o)}}});var dv=tt([hf],e=>e.tooltipItemPayloads),db=tt([dv,(e,t)=>t,(e,t,r)=>r],(e,t,r)=>{if(null!=t){var n=e.find(e=>e.settings.graphicalItemId===r);if(null!=n){var{getPosition:i}=n;if(null!=i)return i(t)}}}),dw=tp("touchMove"),dx=t2();dx.startListening({actionCreator:dw,effect:(e,t)=>{var r=e.payload;if(null!=r.touches&&0!==r.touches.length){var n=t.getState(),i=hn(n,n.tooltip.settings.shared);if("axis"===i){var a=r.touches[0];if(null==a)return;var o=fp(n,fg({clientX:a.clientX,clientY:a.clientY,currentTarget:r.currentTarget}));(null==o?void 0:o.activeIndex)!=null&&t.dispatch(nf({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if("item"===i){var s,l=r.touches[0];if(null==document.elementFromPoint||null==l)return;var u=document.elementFromPoint(l.clientX,l.clientY);if(!u||!u.getAttribute)return;var c=u.getAttribute("data-recharts-item-index"),h=null!=(s=u.getAttribute("data-recharts-item-id"))?s:void 0,f=hb(n).find(e=>e.id===h);if(null==c||null==f||null==h)return;var{dataKey:d}=f,p=db(n,c,h);t.dispatch(nl({activeDataKey:d,activeIndex:c,activeCoordinate:p,activeGraphicalItemId:h}))}}}});var dE=tO({name:"errorBars",initialState:{},reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:i}=t.payload;e[r]&&(e[r]=e[r].map(e=>e.dataKey===n.dataKey&&e.direction===n.direction?i:e))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(e=>e.dataKey!==n.dataKey||e.direction!==n.direction))}}}),{addErrorBar:dS,replaceErrorBar:d_,removeErrorBar:dO}=dE.actions,dT=dE.reducer,dI={devToolsEnabled:!0,isSsr:!("u">typeof window&&window.document&&window.document.createElement&&window.setTimeout)};function dA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function dC(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dA(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dA(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var dk={zIndexMap:Object.values(l6).reduce((e,t)=>dC(dC({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),{})},dP=new Set(Object.values(l6)),dD=tO({name:"zIndex",initialState:dk,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:tb()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!dP.has(r)&&delete e.zIndexMap[r])},prepare:tb()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r,element:n,isPanorama:i}=t.payload;e.zIndexMap[r]?i?e.zIndexMap[r].panoramaElement=n:e.zIndexMap[r].element=n:e.zIndexMap[r]={consumers:0,element:i?void 0:n,panoramaElement:i?n:void 0}},prepare:tb()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElement=void 0:e.zIndexMap[r].element=void 0)},prepare:tb()}}}),{registerZIndexPortal:dN,unregisterZIndexPortal:dj,registerZIndexPortalElement:dM,unregisterZIndexPortalElement:dR}=dD.actions,dL=tl({brush:f0,cartesianAxis:fM,chartData:nx,errorBars:dT,graphicalItems:fz,layout:nI,legend:f8,options:rd,polarAxis:dl,polarOptions:dh,referenceElements:fY,rootProps:de,tooltip:nm,zIndex:dD.reducer}),dF=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Chart";return function(e){let t,r,n,i=function(e){let{thunk:t=!0,immutableCheck:r=!0,serializableCheck:n=!0,actionCreatorCheck:i=!0}=e??{},a=new tg;return t&&("boolean"==typeof t?a.push(tf):a.push(th(t.extraArgument))),a},{reducer:a,middleware:o,devTools:s=!0,duplicateMiddlewareCheck:l=!0,preloadedState:u,enhancers:c}=e||{};if("function"==typeof a)t=a;else if(ts(a))t=tl(a);else throw Error(t6(1));r="function"==typeof o?o(i):i();let h=tu;s&&(h=td({trace:!1,..."object"==typeof s&&s}));let f=(n=function(...e){return t=>(r,n)=>{let i=t(r,n),a=()=>{throw Error(tn(15))},o={getState:i.getState,dispatch:(e,...t)=>a(e,...t)};return a=tu(...e.map(e=>e(o)))(i.dispatch),{...i,dispatch:a}}}(...r),function(e){let{autoBatch:t=!0}=e??{},r=new tg(n);return t&&r.push(tx("object"==typeof t?t:void 0)),r});return function e(t,r,n){if("function"!=typeof t)throw Error(tn(2));if("function"==typeof r&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw Error(tn(0));if("function"==typeof r&&void 0===n&&(n=r,r=void 0),void 0!==n){if("function"!=typeof n)throw Error(tn(1));return n(e)(t,r)}let i=t,a=r,o=new Map,s=o,l=0,u=!1;function c(){s===o&&(s=new Map,o.forEach((e,t)=>{s.set(t,e)}))}function h(){if(u)throw Error(tn(3));return a}function f(e){if("function"!=typeof e)throw Error(tn(4));if(u)throw Error(tn(5));let t=!0;c();let r=l++;return s.set(r,e),function(){if(t){if(u)throw Error(tn(6));t=!1,c(),s.delete(r),o=null}}}function d(e){if(!ts(e))throw Error(tn(7));if(void 0===e.type)throw Error(tn(8));if("string"!=typeof e.type)throw Error(tn(17));if(u)throw Error(tn(9));try{u=!0,a=i(a,e)}finally{u=!1}return(o=s).forEach(e=>{e()}),e}return d({type:to.INIT}),{dispatch:d,subscribe:f,getState:h,replaceReducer:function(e){if("function"!=typeof e)throw Error(tn(10));i=e,d({type:to.REPLACE})},[ti]:function(){return{subscribe(e){if("object"!=typeof e||null===e)throw Error(tn(11));function t(){e.next&&e.next(h())}return t(),{unsubscribe:f(t)}},[ti](){return this}}}}}(t,u,h(..."function"==typeof c?c(f):f()))}({reducer:dL,preloadedState:e,middleware:e=>e({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes("es6")}).concat([fy.middleware,fb.middleware,dp.middleware,dm.middleware,dx.middleware]),enhancers:e=>{var t=e;return"function"==typeof e&&(t=e()),t.concat(tx({type:"raf"}))},devTools:dI.devToolsEnabled&&{serialize:{replacer:fx},name:"recharts-".concat(t)}})};function dV(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,i=ic(),a=(0,F.useRef)(null);return i?r:(null==a.current&&(a.current=dF(t,n)),F.createElement(rS,{context:nC,store:a.current},r))}var dB=e=>{var{chartData:t}=e,r=nP(),n=ic();return(0,F.useEffect)(()=>n?()=>{}:(r(nv(t)),()=>{r(nv(void 0))}),[t,r,n]),null},dU=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function dz(e,t){for(var r of new Set([...Object.keys(e),...Object.keys(t)]))if(dU.has(r)){if(null==e[r]&&null==t[r])continue;if(!function(e,t){if(rb(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;let r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let n=0;n<r.length;n++)if(!Object.prototype.hasOwnProperty.call(t,r[n])||!rb(e[r[n]],t[r[n]]))return!1;return!0}(e[r],t[r]))return!1}else{var n,i;if(n=e[r],i=t[r],(null!=n||null!=i)&&("number"==typeof n&&"number"==typeof i?n!==i&&(n==n||i==i):n!==i))return!1}return!0}var dq=(0,F.memo)(function(e){var{layout:t,margin:r}=e,n=nP(),i=ic();return(0,F.useEffect)(()=>{i||(n(n_(t)),n(nS(r)))},[n,i,t,r]),null},dz);function d$(e){var t=nP();return(0,F.useEffect)(()=>{t(dt(e))},[t,e]),null}var dK=()=>{var e;return null==(e=nM(e=>e.rootProps.accessibilityLayer))||e},dG=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function dH(e){return"string"==typeof e&&dG.includes(e)}var dW=new Set(["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"]);function dQ(e){return"string"==typeof e&&dW.has(e)}function dY(e){return"string"==typeof e&&e.startsWith("data-")}function dJ(e){if("object"!=typeof e||null===e)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(dQ(r)||dY(r))&&(t[r]=e[r]);return t}function dX(e){return null==e?null:(0,F.isValidElement)(e)&&"object"==typeof e.props&&null!==e.props?dJ(e.props):"object"!=typeof e||Array.isArray(e)?null:dJ(e)}function dZ(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(dQ(r)||dY(r)||dH(r))&&(t[r]=e[r]);return t}var d0=["children","width","height","viewBox","className","style","title","desc"];function d1(){return(d1=Object.assign.bind()).apply(null,arguments)}var d2=(0,F.forwardRef)((e,t)=>{var{children:r,width:n,height:i,viewBox:a,className:o,style:s,title:l,desc:u}=e,c=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,d0),h=a||{width:n,height:i,x:0,y:0},f=ip("recharts-surface",o);return F.createElement("svg",d1({},dZ(c),{className:f,width:n,height:i,style:s,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:t}),F.createElement("title",null,l),F.createElement("desc",null,u),r)}),d6=tt(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(null!=t){var n=e[t];if(null!=n)return r?n.panoramaElement:n.element}}),d3=tt(e=>e.zIndex.zIndexMap,e=>Array.from(new Set(Object.keys(e).map(e=>parseInt(e,10)).concat(Object.values(l6)))).sort((e,t)=>e-t),{memoizeOptions:{resultEqualityCheck:function(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}}});function d5(e){var{zIndex:t,isPanorama:r}=e,n=(0,F.useRef)(null),i=nP();return(0,F.useLayoutEffect)(()=>(n.current&&i(dM({zIndex:t,element:n.current,isPanorama:r})),()=>{i(dR({zIndex:t,isPanorama:r}))}),[i,t,r]),F.createElement("g",{tabIndex:-1,ref:n})}function d4(e){var{children:t,isPanorama:r}=e,n=nM(d3);if(!n||0===n.length)return t;var i=n.filter(e=>e<0),a=n.filter(e=>e>0);return F.createElement(F.Fragment,null,i.map(e=>F.createElement(d5,{key:e,zIndex:e,isPanorama:r})),t,a.map(e=>F.createElement(d5,{key:e,zIndex:e,isPanorama:r})))}var d8=["children"];function d7(){return(d7=Object.assign.bind()).apply(null,arguments)}var d9={width:"100%",height:"100%",display:"block"},pe=(0,F.forwardRef)((e,t)=>{var r,n,i=nM(n8),a=nM(n7),o=dK();if(!nH(i)||!nH(a))return null;var{children:s,otherAttributes:l,title:u,desc:c}=e;return null!=l&&(r="number"==typeof l.tabIndex?l.tabIndex:o?0:void 0,n="string"==typeof l.role?l.role:o?"application":void 0),F.createElement(d2,d7({},l,{title:u,desc:c,role:n,tabIndex:r,width:i,height:a,style:d9,ref:t}),s)}),pt=e=>{var{children:t}=e,r=nM(id);if(!r)return null;var{width:n,height:i,y:a,x:o}=r;return F.createElement(d2,{width:n,height:i,x:o,y:a},t)},pr=(0,F.forwardRef)((e,t)=>{var{children:r}=e,n=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,d8);return ic()?F.createElement(pt,null,F.createElement(d4,{isPanorama:!0},r)):F.createElement(pe,d7({ref:t},n),F.createElement(d4,{isPanorama:!1},r))}),pn=new(e.i(63101)).default,pi="recharts.syncEvent.tooltip",pa="recharts.syncEvent.brush";function po(e){return e.tooltip.syncInteraction}var ps=["x","y"];function pl(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function pu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pl(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pl(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var pc=(0,F.createContext)(null),ph=(0,F.createContext)(null);function pf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function pd(){return(pd=Object.assign.bind()).apply(null,arguments)}var pp=()=>{var e,t,r,n,i,a,o,s,l,u,c,h;return e=nP(),(0,F.useEffect)(()=>{e(rp())},[e]),t=nM(lY),r=nM(lX),n=nP(),i=nM(lJ),a=nM(hQ),o=nM(iL),s=ij(),l=nM(e=>e.rootProps.className),(0,F.useEffect)(()=>{if(null==t)return rc;var e=(e,l,u)=>{if(r!==u&&t===e){if("index"===i){if(s&&null!=l&&null!=(c=l.payload)&&c.coordinate&&l.payload.sourceViewBox){var c,h,f=l.payload.coordinate,{x:d,y:p}=f,g=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(f,ps),{x:m,y:y,width:v,height:b}=l.payload.sourceViewBox,w=pu(pu({},g),{},{x:s.x+(v?(d-m)/v:0)*s.width,y:s.y+(b?(p-y)/b:0)*s.height});n(pu(pu({},l),{},{payload:pu(pu({},l.payload),{},{coordinate:w})}))}else n(l);return}if(null!=a){if("function"==typeof i){var x=i(a,{activeTooltipIndex:null==l.payload.index?void 0:Number(l.payload.index),isTooltipActive:l.payload.active,activeIndex:null==l.payload.index?void 0:Number(l.payload.index),activeLabel:l.payload.label,activeDataKey:l.payload.dataKey,activeCoordinate:l.payload.coordinate});h=a[x]}else"value"===i&&(h=a.find(e=>String(e.value)===l.payload.label));var{coordinate:E}=l.payload;if(null==h||!1===l.payload.active||null==E||null==s)return void n(np({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));var{x:S,y:_}=E,O=Math.min(S,s.x+s.width),T=Math.min(_,s.y+s.height),I={x:"horizontal"===o?h.coordinate:O,y:"horizontal"===o?T:h.coordinate};n(np({active:l.payload.active,coordinate:I,dataKey:l.payload.dataKey,index:String(h.index),label:l.payload.label,sourceViewBox:l.payload.sourceViewBox,graphicalItemId:l.payload.graphicalItemId}))}}};return pn.on(pi,e),()=>{pn.off(pi,e)}},[l,n,r,t,i,a,o,s]),u=nM(lY),c=nM(lX),h=nP(),(0,F.useEffect)(()=>{if(null==u)return rc;var e=(e,t,r)=>{c!==r&&u===e&&h(nb(t))};return pn.on(pa,e),()=>{pn.off(pa,e)}},[h,c,u]),null};function pg(e){if("number"==typeof e)return e;if("string"==typeof e){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var pm=(0,F.forwardRef)((e,t)=>{var r,n,i=(0,F.useRef)(null),[a,o]=(0,F.useState)({containerWidth:pg(null==(r=e.style)?void 0:r.width),containerHeight:pg(null==(n=e.style)?void 0:n.height)}),s=(0,F.useCallback)((e,t)=>{o(r=>{var n=Math.round(e),i=Math.round(t);return r.containerWidth===n&&r.containerHeight===i?r:{containerWidth:n,containerHeight:i}})},[]),l=(0,F.useCallback)(e=>{if("function"==typeof t&&t(e),null!=e&&"u">typeof ResizeObserver){var{width:r,height:n}=e.getBoundingClientRect();s(r,n);var a=new ResizeObserver(e=>{var t=e[0];if(null!=t){var{width:r,height:n}=t.contentRect;s(r,n)}});a.observe(e),i.current=a}},[t,s]);return(0,F.useEffect)(()=>()=>{var e=i.current;null!=e&&e.disconnect()},[s]),F.createElement(F.Fragment,null,F.createElement(iB,{width:a.containerWidth,height:a.containerHeight}),F.createElement("div",pd({ref:l},e)))}),py=(0,F.forwardRef)((e,t)=>{var{width:r,height:n}=e,[i,a]=(0,F.useState)({containerWidth:pg(r),containerHeight:pg(n)}),o=(0,F.useCallback)((e,t)=>{a(r=>{var n=Math.round(e),i=Math.round(t);return r.containerWidth===n&&r.containerHeight===i?r:{containerWidth:n,containerHeight:i}})},[]),s=(0,F.useCallback)(e=>{if("function"==typeof t&&t(e),null!=e){var{width:r,height:n}=e.getBoundingClientRect();o(r,n)}},[t,o]);return F.createElement(F.Fragment,null,F.createElement(iB,{width:i.containerWidth,height:i.containerHeight}),F.createElement("div",pd({ref:s},e)))}),pv=(0,F.forwardRef)((e,t)=>{var{width:r,height:n}=e;return F.createElement(F.Fragment,null,F.createElement(iB,{width:r,height:n}),F.createElement("div",pd({ref:t},e)))}),pb=(0,F.forwardRef)((e,t)=>{var{width:r,height:n}=e;return"string"==typeof r||"string"==typeof n?F.createElement(py,pd({},e,{ref:t})):"number"==typeof r&&"number"==typeof n?F.createElement(pv,pd({},e,{width:r,height:n,ref:t})):F.createElement(F.Fragment,null,F.createElement(iB,{width:r,height:n}),F.createElement("div",pd({ref:t},e)))}),pw=(0,F.forwardRef)((e,t)=>{var{children:r,className:n,height:i,onClick:a,onContextMenu:o,onDoubleClick:s,onMouseDown:l,onMouseEnter:u,onMouseLeave:c,onMouseMove:h,onMouseUp:f,onTouchEnd:d,onTouchMove:p,onTouchStart:g,style:m,width:y,responsive:v,dispatchTouchEvents:b=!0}=e,w=(0,F.useRef)(null),x=nP(),[E,S]=(0,F.useState)(null),[_,O]=(0,F.useState)(null),T=function(){var e=nP(),[t,r]=(0,F.useState)(null),n=nM(n9);return(0,F.useEffect)(()=>{if(null!=t){var r=t.getBoundingClientRect().width/t.offsetWidth;nG(r)&&r!==n&&e(nT(r))}},[t,e,n]),r}(),I=ik(),A=(null==I?void 0:I.width)>0?I.width:y,C=(null==I?void 0:I.height)>0?I.height:i,k=(0,F.useCallback)(e=>{T(e),"function"==typeof t&&t(e),S(e),O(e),null!=e&&(w.current=e)},[T,t,S,O]),P=(0,F.useCallback)(e=>{x(fm(e)),x(dg({handler:a,reactEvent:e}))},[x,a]),D=(0,F.useCallback)(e=>{x(fv(e)),x(dg({handler:u,reactEvent:e}))},[x,u]),N=(0,F.useCallback)(e=>{x(nc()),x(dg({handler:c,reactEvent:e}))},[x,c]),j=(0,F.useCallback)(e=>{x(fv(e)),x(dg({handler:h,reactEvent:e}))},[x,h]),M=(0,F.useCallback)(()=>{x(dd())},[x]),R=(0,F.useCallback)(e=>{x(df(e.key))},[x]),L=(0,F.useCallback)(e=>{x(dg({handler:o,reactEvent:e}))},[x,o]),V=(0,F.useCallback)(e=>{x(dg({handler:s,reactEvent:e}))},[x,s]),B=(0,F.useCallback)(e=>{x(dg({handler:l,reactEvent:e}))},[x,l]),U=(0,F.useCallback)(e=>{x(dg({handler:f,reactEvent:e}))},[x,f]),z=(0,F.useCallback)(e=>{x(dg({handler:g,reactEvent:e}))},[x,g]),q=(0,F.useCallback)(e=>{b&&x(dw(e)),x(dg({handler:p,reactEvent:e}))},[x,b,p]),$=(0,F.useCallback)(e=>{x(dg({handler:d,reactEvent:e}))},[x,d]);return F.createElement(pc.Provider,{value:E},F.createElement(ph.Provider,{value:_},F.createElement(v?pm:pb,{width:null!=A?A:null==m?void 0:m.width,height:null!=C?C:null==m?void 0:m.height,className:ip("recharts-wrapper",n),style:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pf(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pf(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({position:"relative",cursor:"default",width:A,height:C},m),onClick:P,onContextMenu:L,onDoubleClick:V,onFocus:M,onKeyDown:R,onMouseDown:B,onMouseEnter:D,onMouseLeave:N,onMouseMove:j,onMouseUp:U,onTouchEnd:$,onTouchMove:q,onTouchStart:z,ref:k},F.createElement(pp,null),r)))}),px=tt([io],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),pE=tt([px,n8,n7],(e,t,r)=>{if(e&&null!=t&&null!=r)return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),pS=(0,F.createContext)(void 0),p_=e=>{var{children:t}=e,[r]=(0,F.useState)("".concat(rn("recharts"),"-clip")),n=nM(pE);if(null==n)return null;var{x:i,y:a,width:o,height:s}=n;return F.createElement(pS.Provider,{value:r},F.createElement("defs",null,F.createElement("clipPath",{id:r},F.createElement("rect",{x:i,y:a,height:s,width:o}))),t)},pO=["width","height","responsive","children","className","style","compact","title","desc"],pT=(0,F.forwardRef)((e,t)=>{var{width:r,height:n,responsive:i,children:a,className:o,style:s,compact:l,title:u,desc:c}=e,h=dJ(function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,pO));return l?F.createElement(F.Fragment,null,F.createElement(iB,{width:r,height:n}),F.createElement(pr,{otherAttributes:h,title:u,desc:c},a)):F.createElement(pw,{className:o,style:s,width:r,height:n,responsive:null!=i&&i,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},F.createElement(pr,{otherAttributes:h,title:u,desc:c,ref:t},F.createElement(p_,null,a)))});function pI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function pA(e,t){var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pI(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pI(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e);return Object.keys(t).reduce((e,r)=>(void 0===e[r]&&void 0!==t[r]&&(e[r]=t[r]),e),r)}function pC(){return(pC=Object.assign.bind()).apply(null,arguments)}var pk={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:{top:5,right:5,bottom:5,left:5},responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},pP=(0,F.forwardRef)(function(e,t){var r,n=pA(e.categoricalChartProps,pk),{chartName:i,defaultTooltipEventType:a,validateTooltipEventTypes:o,tooltipPayloadSearcher:s,categoricalChartProps:l}=e;return F.createElement(dV,{preloadedState:{options:{chartName:i,defaultTooltipEventType:a,validateTooltipEventTypes:o,tooltipPayloadSearcher:s,eventEmitter:void 0}},reduxStoreName:null!=(r=l.id)?r:i},F.createElement(dB,{chartData:l.data}),F.createElement(dq,{layout:n.layout,margin:n.margin}),F.createElement(d$,{baseValue:n.baseValue,accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className,reverseStackOrder:n.reverseStackOrder}),F.createElement(pT,pC({},n,{ref:t})))}),pD=["axis"],pN=(0,F.forwardRef)((e,t)=>F.createElement(pP,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:pD,tooltipPayloadSearcher:rh,categoricalChartProps:e,ref:t})),pj=F,pM=["children","className"];function pR(){return(pR=Object.assign.bind()).apply(null,arguments)}var pL=F.forwardRef((e,t)=>{var{children:r,className:n}=e,i=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,pM),a=ip("recharts-layer",n);return F.createElement("g",pR({className:a},dZ(i),{ref:t}),r)}),pF=e.i(33660);function pV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var pB=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pV(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pV(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},{cacheSize:2e3,enableCache:!0}),pU=new class{constructor(e){!function(e,t,r){var n;(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(this,"cache",new Map),this.maxSize=e}get(e){var t=this.cache.get(e);return void 0!==t&&(this.cache.delete(e),this.cache.set(e,t)),t}set(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;null!=r&&this.cache.delete(r)}this.cache.set(e,t)}clear(){this.cache.clear()}size(){return this.cache.size}}(pB.cacheSize),pz={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},pq="recharts_measurement_span",p$=(e,t)=>{try{var r=document.getElementById(pq);r||((r=document.createElement("span")).setAttribute("id",pq),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,pz,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch(e){return{width:0,height:0}}},pK=function(e){var t,r,n,i,a,o,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(null==e||dI.isSsr)return{width:0,height:0};if(!pB.enableCache)return p$(e,s);var l=(t=s.fontSize||"",r=s.fontFamily||"",n=s.fontWeight||"",i=s.fontStyle||"",a=s.letterSpacing||"",o=s.textTransform||"","".concat(e,"|").concat(t,"|").concat(r,"|").concat(n,"|").concat(i,"|").concat(a,"|").concat(o)),u=pU.get(l);if(u)return u;var c=p$(e,s);return pU.set(l,c),c},pG=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,pH=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,pW=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,pQ=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,pY={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},pJ=["cm","mm","pt","pc","in","Q","px"];class pX{static parse(e){var t,[,r,n]=null!=(t=pQ.exec(e))?t:[];return null==r?pX.NaN:new pX(parseFloat(r),null!=n?n:"")}constructor(e,t){this.num=e,this.unit=t,this.num=e,this.unit=t,t7(e)&&(this.unit=""),""===t||pW.test(t)||(this.num=NaN,this.unit=""),function(e){return pJ.includes(e)}(t)&&(this.num=function(e,t){return e*pY[t]}(e,t),this.unit="px")}add(e){return this.unit!==e.unit?new pX(NaN,""):new pX(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new pX(NaN,""):new pX(this.num-e.num,this.unit)}multiply(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new pX(NaN,""):new pX(this.num*e.num,this.unit||e.unit)}divide(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new pX(NaN,""):new pX(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return t7(this.num)}}function pZ(e){if(null==e||e.includes("NaN"))return"NaN";for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,i,a]=null!=(r=pG.exec(t))?r:[],o=pX.parse(null!=n?n:""),s=pX.parse(null!=a?a:""),l="*"===i?o.multiply(s):o.divide(s);if(l.isNaN())return"NaN";t=t.replace(pG,l.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,c,h,f]=null!=(u=pH.exec(t))?u:[],d=pX.parse(null!=c?c:""),p=pX.parse(null!=f?f:""),g="+"===h?d.add(p):d.subtract(p);if(g.isNaN())return"NaN";t=t.replace(pH,g.toString())}return t}n="NaN",i=new pX(NaN,""),(n="symbol"==typeof(t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(n,"string"))?t:t+"")in pX?Object.defineProperty(pX,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):pX[n]=i;var p0=/\(([^()]*)\)/;function p1(e){var t=function(e){try{var t;return t=e.replace(/\s+/g,""),t=function(e){for(var t,r=e;null!=(t=p0.exec(r));){var[,n]=t;r=r.replace(p0,pZ(n))}return r}(t),t=pZ(t)}catch(e){return"NaN"}}(e.slice(5,-1));return"NaN"===t?"":t}var p2=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],p6=["dx","dy","angle","className","breakAll"];function p3(){return(p3=Object.assign.bind()).apply(null,arguments)}function p5(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var p4=/[ \f\n\r\t\v\u2028\u2029]+/,p8=e=>{var{children:t,breakAll:r,style:n}=e;try{var i=[];null!=t&&(i=r?t.toString().split(""):t.toString().split(p4));var a=i.map(e=>({word:e,width:pK(e,n).width})),o=r?0:pK("",n).width;return{wordsWithComputedWidth:a,spaceWidth:o}}catch(e){return null}},p7=(e,t,r,n)=>e.reduce((e,i)=>{var{word:a,width:o}=i,s=e[e.length-1];return s&&null!=o&&(null==t||n||s.width+o+r<Number(t))?(s.words.push(a),s.width+=o+r):e.push({words:[a],width:o}),e},[]),p9=e=>e.reduce((e,t)=>e.width>t.width?e:t),ge=(e,t,r,n,i,a,o,s)=>{var l=p8({breakAll:r,style:n,children:e.slice(0,t)+""});if(!l)return[!1,[]];var u=p7(l.wordsWithComputedWidth,a,o,s);return[u.length>i||p9(u).width>Number(a),u]},gt=e=>[{words:null==e?[]:e.toString().split(p4),width:void 0}],gr="#808080",gn={angle:0,breakAll:!1,capHeight:"0.71em",fill:gr,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},gi=(0,F.forwardRef)((e,t)=>{var r,n=pA(e,gn),{x:i,y:a,lineHeight:o,capHeight:s,fill:l,scaleToFit:u,textAnchor:c,verticalAnchor:h}=n,f=p5(n,p2),d=(0,F.useMemo)(()=>(e=>{var{width:t,scaleToFit:r,children:n,style:i,breakAll:a,maxLines:o}=e;if((t||r)&&!dI.isSsr){var s=p8({breakAll:a,children:n,style:i});if(!s)return gt(n);var{wordsWithComputedWidth:l,spaceWidth:u}=s;return((e,t,r,n,i)=>{var a,{maxLines:o,children:s,style:l,breakAll:u}=e,c=re(o),h=String(s),f=p7(t,n,r,i);if(!c||i||!(f.length>o||p9(f).width>Number(n)))return f;for(var d=0,p=h.length-1,g=0;d<=p&&g<=h.length-1;){var m=Math.floor((d+p)/2),[y,v]=ge(h,m-1,u,l,o,n,r,i),[b]=ge(h,m,u,l,o,n,r,i);if(y||b||(d=m+1),y&&b&&(p=m-1),!y&&b){a=v;break}g++}return a||f})({breakAll:a,children:n,maxLines:o,style:i},l,u,t,!!r)}return gt(n)})({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:u,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,u,f.style,f.width]),{dx:p,dy:g,angle:m,className:y,breakAll:v}=f,b=p5(f,p6);if(!rt(i)||!rt(a)||0===d.length)return null;var w=Number(i)+(re(p)?p:0),x=Number(a)+(re(g)?g:0);if(!nG(w)||!nG(x))return null;switch(h){case"start":r=p1("calc(".concat(s,")"));break;case"middle":r=p1("calc(".concat((d.length-1)/2," * -").concat(o," + (").concat(s," / 2))"));break;default:r=p1("calc(".concat(d.length-1," * -").concat(o,")"))}var E=[],S=d[0];if(u&&null!=S){var _=S.width,{width:O}=f;E.push("scale(".concat(re(O)&&re(_)?O/_:1,")"))}return m&&E.push("rotate(".concat(m,", ").concat(w,", ").concat(x,")")),E.length&&(b.transform=E.join(" ")),F.createElement("text",p3({},dZ(b),{ref:t,x:w,y:x,className:ip("recharts-text",y),textAnchor:c,fill:l.includes("url")?gr:l}),d.map((e,t)=>{var n=e.words.join(v?"":" ");return F.createElement("tspan",{x:w,dy:0===t?r:o,key:"".concat(n,"-").concat(t)},n)}))});gi.displayName="Text";var ga=e.i(14877);function go(e){var{zIndex:t,children:r}=e,n=void 0!==nM(iL)&&void 0!==t&&0!==t,i=ic(),a=nP();(0,F.useLayoutEffect)(()=>n?(a(dN({zIndex:t})),()=>{a(dj({zIndex:t}))}):rc,[a,t,n]);var o=nM(e=>d6(e,t,i));return n?o?(0,ga.createPortal)(r,o):null:r}function gs(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function gl(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gs(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gs(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var gu=["labelRef"],gc=["content"];function gh(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function gf(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function gd(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gf(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gf(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function gp(){return(gp=Object.assign.bind()).apply(null,arguments)}var gg=(0,F.createContext)(null),gm=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:i,width:a,height:o,children:s}=e,l=(0,F.useMemo)(()=>({x:t,y:r,upperWidth:n,lowerWidth:i,width:a,height:o}),[t,r,n,i,a,o]);return F.createElement(gg.Provider,{value:l},s)},gy=()=>{var e=(0,F.useContext)(gg),t=ij();return e||(t?iN(t):void 0)},gv=(0,F.createContext)(null),gb=e=>null!=e&&"function"==typeof e,gw=e=>null!=e&&"cx"in e&&re(e.cx),gx={angle:0,offset:5,zIndex:l6.label,position:"middle",textBreakAll:!1};function gE(e){var t,r,n,i,a,o,s=pA(e,gx),{viewBox:l,parentViewBox:u,position:c,value:h,children:f,content:d,className:p="",textBreakAll:g,labelRef:m}=s,y=(t=(0,F.useContext)(gv),r=nM(uc),t||r),v=gy(),b=function(e){if(!gw(e))return e;var{cx:t,cy:r,outerRadius:n}=e,i=2*n;return{x:t-n,y:r-n,width:i,upperWidth:i,lowerWidth:i,height:i}}(i=null==l?"center"===c?v:null!=y?y:v:gw(l)?l:iN(l));if(!i||null==h&&null==f&&!(0,F.isValidElement)(d)&&"function"!=typeof d)return null;var w=gd(gd({},s),{},{viewBox:i});if((0,F.isValidElement)(d)){var{labelRef:x}=w,E=gh(w,gu);return(0,F.cloneElement)(d,E)}if("function"==typeof d){var{content:S}=w,_=gh(w,gc);if(a=(0,F.createElement)(d,_),(0,F.isValidElement)(a))return a}else a=(e=>{var{value:t,formatter:r}=e,n=null==e.children?t:e.children;return"function"==typeof r?r(n):n})(s);var O=dZ(s);if(gw(i)){if("insideStart"===c||"insideEnd"===c||"end"===c)return((e,t,r,n,i)=>{var a,o,{offset:s,className:l}=e,{cx:u,cy:c,innerRadius:h,outerRadius:f,startAngle:d,endAngle:p,clockWise:g}=i,m=(h+f)/2,y=t8(p-d)*Math.min(Math.abs(p-d),360),v=y>=0?1:-1;switch(t){case"insideStart":a=d+v*s,o=g;break;case"insideEnd":a=p-v*s,o=!g;break;case"end":a=p+v*s,o=g;break;default:throw Error("Unsupported position ".concat(t))}o=y<=0?o:!o;var b=l2(u,c,m,a),w=l2(u,c,m,a+(o?1:-1)*359),x="M".concat(b.x,",").concat(b.y,"\n    A").concat(m,",").concat(m,",0,1,").concat(+!o,",\n    ").concat(w.x,",").concat(w.y),E=null==e.id?rn("recharts-radial-line-"):e.id;return F.createElement("text",gp({},n,{dominantBaseline:"central",className:ip("recharts-radial-bar-label",l)}),F.createElement("defs",null,F.createElement("path",{id:E,d:x})),F.createElement("textPath",{xlinkHref:"#".concat(E)},r))})(s,c,a,O,i);o=((e,t,r)=>{var{cx:n,cy:i,innerRadius:a,outerRadius:o,startAngle:s,endAngle:l}=e,u=(s+l)/2;if("outside"===r){var{x:c,y:h}=l2(n,i,o+t,u);return{x:c,y:h,textAnchor:c>=n?"start":"end",verticalAnchor:"middle"}}if("center"===r)return{x:n,y:i,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===r)return{x:n,y:i,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===r)return{x:n,y:i,textAnchor:"middle",verticalAnchor:"end"};var{x:f,y:d}=l2(n,i,(a+o)/2,u);return{x:f,y:d,textAnchor:"middle",verticalAnchor:"middle"}})(i,s.offset,s.position)}else{if(!b)return null;var T=(e=>{var{viewBox:t,position:r,offset:n=0,parentViewBox:i,clamp:a}=e,{x:o,y:s,height:l,upperWidth:u,lowerWidth:c}=iN(t),h=o+(u-c)/2,f=(o+h)/2,d=(u+c)/2,p=l>=0?1:-1,g=p*n,m=p>0?"end":"start",y=p>0?"start":"end",v=u>=0?1:-1,b=v*n,w=v>0?"end":"start",x=v>0?"start":"end";if("top"===r){var E={x:o+u/2,y:s-g,horizontalAnchor:"middle",verticalAnchor:m};return a&&i&&(E.height=Math.max(s-i.y,0),E.width=u),E}if("bottom"===r){var S={x:h+c/2,y:s+l+g,horizontalAnchor:"middle",verticalAnchor:y};return a&&i&&(S.height=Math.max(i.y+i.height-(s+l),0),S.width=c),S}if("left"===r){var _={x:f-b,y:s+l/2,horizontalAnchor:w,verticalAnchor:"middle"};return a&&i&&(_.width=Math.max(_.x-i.x,0),_.height=l),_}if("right"===r){var O={x:f+d+b,y:s+l/2,horizontalAnchor:x,verticalAnchor:"middle"};return a&&i&&(O.width=Math.max(i.x+i.width-O.x,0),O.height=l),O}var T=a&&i?{width:d,height:l}:{};return"insideLeft"===r?gl({x:f+b,y:s+l/2,horizontalAnchor:x,verticalAnchor:"middle"},T):"insideRight"===r?gl({x:f+d-b,y:s+l/2,horizontalAnchor:w,verticalAnchor:"middle"},T):"insideTop"===r?gl({x:o+u/2,y:s+g,horizontalAnchor:"middle",verticalAnchor:y},T):"insideBottom"===r?gl({x:h+c/2,y:s+l-g,horizontalAnchor:"middle",verticalAnchor:m},T):"insideTopLeft"===r?gl({x:o+b,y:s+g,horizontalAnchor:x,verticalAnchor:y},T):"insideTopRight"===r?gl({x:o+u-b,y:s+g,horizontalAnchor:w,verticalAnchor:y},T):"insideBottomLeft"===r?gl({x:h+b,y:s+l-g,horizontalAnchor:x,verticalAnchor:m},T):"insideBottomRight"===r?gl({x:h+c-b,y:s+l-g,horizontalAnchor:w,verticalAnchor:m},T):r&&"object"==typeof r&&(re(r.x)||t9(r.x))&&(re(r.y)||t9(r.y))?gl({x:o+ri(r.x,d),y:s+ri(r.y,l),horizontalAnchor:"end",verticalAnchor:"end"},T):gl({x:o+u/2,y:s+l/2,horizontalAnchor:"middle",verticalAnchor:"middle"},T)})({viewBox:b,position:c,offset:s.offset,parentViewBox:gw(u)?void 0:u,clamp:!0});o=gd(gd({x:T.x,y:T.y,textAnchor:T.horizontalAnchor,verticalAnchor:T.verticalAnchor},void 0!==T.width?{width:T.width}:{}),void 0!==T.height?{height:T.height}:{})}return F.createElement(go,{zIndex:s.zIndex},F.createElement(gi,gp({ref:m,className:ip("recharts-label",p)},O,o,{textAnchor:"start"===(n=O.textAnchor)||"middle"===n||"end"===n||"inherit"===n?O.textAnchor:o.textAnchor,breakAll:g}),a))}function gS(e){var{label:t,labelRef:r}=e;return((e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return!0===e?F.createElement(gE,gp({key:"label-implicit"},n)):rt(e)?F.createElement(gE,gp({key:"label-implicit",value:e},n)):(0,F.isValidElement)(e)?e.type===gE?(0,F.cloneElement)(e,gd({key:"label-implicit"},n)):F.createElement(gE,gp({key:"label-implicit",content:e},n)):gb(e)?F.createElement(gE,gp({key:"label-implicit",content:e},n)):e&&"object"==typeof e?F.createElement(gE,gp({},e,{key:"label-implicit"},n)):null})(t,gy(),r)||null}gE.displayName="Label";var g_=["valueAccessor"],gO=["dataKey","clockWise","id","textBreakAll","zIndex"];function gT(){return(gT=Object.assign.bind()).apply(null,arguments)}function gI(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var gA=e=>Array.isArray(e.value)?(0,pF.default)(e.value):e.value,gC=(0,F.createContext)(void 0),gk=gC.Provider,gP=(0,F.createContext)(void 0);function gD(e){var{valueAccessor:t=gA}=e,r=gI(e,g_),{dataKey:n,clockWise:i,id:a,textBreakAll:o,zIndex:s}=r,l=gI(r,gO),u=(0,F.useContext)(gC),c=(0,F.useContext)(gP),h=u||c;return h&&h.length?F.createElement(go,{zIndex:null!=s?s:l6.label},F.createElement(pL,{className:"recharts-label-list"},h.map((e,i)=>{var s,u=null==n?t(e,i):nY(e.payload,n),c=null==a?{}:{id:"".concat(a,"-").concat(i)};return F.createElement(gE,gT({key:"label-".concat(i)},dZ(e),l,c,{fill:null!=(s=r.fill)?s:e.fill,parentViewBox:e.parentViewBox,value:u,textBreakAll:o,viewBox:e.viewBox,index:i,zIndex:0}))}))):null}function gN(e){var{label:t}=e;return t?!0===t?F.createElement(gD,{key:"labelList-implicit"}):F.isValidElement(t)||gb(t)?F.createElement(gD,{key:"labelList-implicit",content:t}):"object"==typeof t?F.createElement(gD,gT({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}gP.Provider,gD.displayName="LabelList";var gj=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,gM=(e,t)=>{if(!e||"function"==typeof e||"boolean"==typeof e)return null;var r=e;if((0,F.isValidElement)(e)&&(r=e.props),"object"!=typeof r&&"function"!=typeof r)return null;var n={};return Object.keys(r).forEach(e=>{dH(e)&&(n[e]=t||(t=>r[e](r,t)))}),n},gR=(e,t,r)=>{if(null===e||"object"!=typeof e&&"function"!=typeof e)return null;var n=null;return Object.keys(e).forEach(i=>{var a=e[i];dH(i)&&"function"==typeof a&&(n||(n={}),n[i]=e=>(a(t,r,e),null))}),n};function gL(){return(gL=Object.assign.bind()).apply(null,arguments)}var gF=e=>{var{cx:t,cy:r,r:n,className:i}=e,a=ip("recharts-dot",i);return re(t)&&re(r)&&re(n)?F.createElement("circle",gL({},dJ(e),gM(e),{className:a,cx:t,cy:r,r:n})):null},gV=(e.i(86880),e=>!e||"object"!=typeof e||!("clipDot"in e)||!!e.clipDot),gB=["points"];function gU(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function gz(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gU(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gU(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function gq(){return(gq=Object.assign.bind()).apply(null,arguments)}function g$(e){var{option:t,dotProps:r,className:n}=e;if((0,F.isValidElement)(t))return(0,F.cloneElement)(t,r);if("function"==typeof t)return t(r);var i=ip(n,"boolean"!=typeof t?t.className:""),a=null!=r?r:{},{points:o}=a,s=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(a,gB);return F.createElement(gF,gq({},s,{className:i}))}function gK(e){var{points:t,dot:r,className:n,dotClassName:i,dataKey:a,baseProps:o,needClip:s,clipPathId:l,zIndex:u=l6.scatter}=e;if(null==t||!r&&1!==t.length)return null;var c=gV(r),h=null==r?null:(0,F.isValidElement)(r)?dZ(r.props):"object"!=typeof r||Array.isArray(r)?null:dZ(r),f=t.map((e,n)=>{var s,l,u=gz(gz(gz({r:3},o),h),{},{index:n,cx:null!=(s=e.x)?s:void 0,cy:null!=(l=e.y)?l:void 0,dataKey:a,value:e.value,payload:e.payload,points:t});return F.createElement(g$,{key:"dot-".concat(n),option:r,dotProps:u,className:i})}),d={};return s&&null!=l&&(d.clipPath="url(#clipPath-".concat(c?"":"dots-").concat(l,")")),F.createElement(go,{zIndex:u},F.createElement(pL,gq({className:n},d),f))}function gG(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function gH(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gG(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gG(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var gW=e=>{var t,{point:r,childIndex:n,mainColor:i,activeDot:a,dataKey:o,clipPath:s}=e;if(!1===a||null==r.x||null==r.y)return null;var l=gH(gH(gH({},{index:n,dataKey:o,cx:r.x,cy:r.y,r:4,fill:null!=i?i:"none",strokeWidth:2,stroke:"#fff",payload:r.payload,value:r.value}),dX(a)),gM(a));return t=(0,F.isValidElement)(a)?(0,F.cloneElement)(a,l):"function"==typeof a?a(l):F.createElement(gF,l),F.createElement(pL,{className:"recharts-active-dot",clipPath:s},t)};function gQ(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:i,clipPath:a,zIndex:o=l6.activeDot}=e,s=nM(h0),l=nM(h7);if(null==t||null==l)return null;var u=t.find(e=>l.includes(e.payload));return null==u?null:F.createElement(go,{zIndex:o},F.createElement(gW,{point:u,childIndex:Number(s),mainColor:r,dataKey:i,activeDot:n,clipPath:a}))}function gY(e){var{tooltipEntrySettings:t}=e,r=nP(),n=ic(),i=(0,F.useRef)(null);return(0,F.useLayoutEffect)(()=>{n||(null===i.current?r(ni(t)):i.current!==t&&r(na({prev:i.current,next:t})),i.current=t)},[t,r,n]),(0,F.useLayoutEffect)(()=>()=>{i.current&&(r(no(i.current)),i.current=null)},[r]),null}var gJ=["children"],gX=(0,F.createContext)({data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0});function gZ(e){var{children:t}=e,r=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,gJ);return F.createElement(gX.Provider,{value:r},t)}function g0(e,t){var r,n,i=nM(t=>uI(t,e)),a=nM(e=>uk(e,t)),o=null!=(r=null==i?void 0:i.allowDataOverflow)?r:uO.allowDataOverflow,s=null!=(n=null==a?void 0:a.allowDataOverflow)?n:uA.allowDataOverflow;return{needClip:o||s,needClipX:o,needClipY:s}}function g1(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,i=nM(pE),{needClipX:a,needClipY:o,needClip:s}=g0(t,r);if(!s||!i)return null;var{x:l,y:u,width:c,height:h}=i;return F.createElement("clipPath",{id:"clipPath-".concat(n)},F.createElement("rect",{x:a?l:l-c/2,y:o?u:u-h/2,width:a?c:2*c,height:o?h:2*h}))}var g2=(e,t,r,n)=>c8(e,"xAxis",t,n),g6=(e,t,r,n)=>c4(e,"xAxis",t,n),g3=(e,t,r,n)=>c8(e,"yAxis",r,n),g5=(e,t,r,n)=>c4(e,"yAxis",r,n),g4=tt([iL,g2,g3,g6,g5],(e,t,r,n,i)=>nJ(e,"xAxis")?n3(t,n,!1):n3(r,i,!1));function g8(e){return"line"===e.type}var g7=tt([uL,(e,t,r,n,i)=>i],(e,t)=>e.filter(g8).find(e=>e.id===t)),g9=tt([iL,g2,g3,g6,g5,g7,g4,lM],(e,t,r,n,i,a,o,s)=>{var l,{chartData:u,dataStartIndex:c,dataEndIndex:h}=s;if(null!=a&&null!=t&&null!=r&&null!=n&&null!=i&&0!==n.length&&0!==i.length&&null!=o&&("horizontal"===e||"vertical"===e)){var{dataKey:f,data:d}=a;if(null!=(l=null!=d&&d.length>0?d:null==u?void 0:u.slice(c,h+1)))return function(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:i,yAxisTicks:a,dataKey:o,bandSize:s,displayedData:l}=e;return l.map((e,l)=>{var u=nY(e,o);if("horizontal"===t){var c=n1({axis:r,ticks:i,bandSize:s,entry:e,index:l}),h=null==u?null:n.scale.map(u);return{x:c,y:null!=h?h:null,value:u,payload:e}}var f=null==u?null:r.scale.map(u),d=n1({axis:n,ticks:a,bandSize:s,entry:e,index:l});return null==f||null==d?null:{x:f,y:d,value:u,payload:e}}).filter(Boolean)}({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:i,dataKey:f,bandSize:o,displayedData:l})}});function me(e){var{legendPayload:t}=e,r=nP(),n=ic(),i=(0,F.useRef)(null);return(0,F.useLayoutEffect)(()=>{n||(null===i.current?r(f3(t)):i.current!==t&&r(f5({prev:i.current,next:t})),i.current=t)},[r,n,t]),(0,F.useLayoutEffect)(()=>()=>{i.current&&(r(f4(i.current)),i.current=null)},[r]),null}function mt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"animation-",r=(0,F.useRef)(rn(t)),n=(0,F.useRef)(e);return n.current!==e&&(r.current=rn(t),n.current=e),r.current}var mr=null!=(p=F["useId".toString()])?p:()=>{var[e]=F.useState(()=>rn("uid-"));return e},mn=(0,F.createContext)(void 0),mi=e=>{var t,r,{id:n,type:i,children:a}=e,o=(t="recharts-".concat(i),r=mr(),n||(t?"".concat(t,"-").concat(r):r));return F.createElement(mn.Provider,{value:o},a(o))},ma=(0,F.memo)(e=>{var t=nP(),r=(0,F.useRef)(null);return(0,F.useLayoutEffect)(()=>{null===r.current?t(fL(e)):r.current!==e&&t(fF({prev:r.current,next:e})),r.current=e},[t,e]),(0,F.useLayoutEffect)(()=>()=>{r.current&&(t(fV(r.current)),r.current=null)},[t]),null});function mo(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ms(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mo(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mo(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ml=(e,t,r)=>e.map(e=>"".concat(e.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase()))," ").concat(t,"ms ").concat(r)).join(","),mu=(e,t)=>Object.keys(t).reduce((r,n)=>ms(ms({},r),{},{[n]:e(n,t[n])}),{});function mc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function mh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mc(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mc(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var mf=(e,t,r)=>e+(t-e)*r,md=e=>{var{from:t,to:r}=e;return t!==r},mp=(e,t,r)=>{var n=mu((t,r)=>{if(md(r)){var[n,i]=e(r.from,r.to,r.velocity);return mh(mh({},r),{},{from:n,velocity:i})}return r},t);return r<1?mu((e,t)=>md(t)&&null!=n[e]?mh(mh({},t),{},{velocity:mf(t.velocity,n[e].velocity,r),from:mf(t.from,n[e].from,r)}):t,t):mp(e,n,r-1)},mg=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],mm=(e,t)=>e.map((e,r)=>e*t**r).reduce((e,t)=>e+t),my=(e,t)=>r=>mm(mg(e,t),r),mv=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];if(1===t.length)switch(t[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:var n=(e=>{var t,r=e.split("(");if(2!==r.length||"cubic-bezier"!==r[0])return null;var n=null==(t=r[1])||null==(t=t.split(")")[0])?void 0:t.split(",");if(null==n||4!==n.length)return null;var i=n.map(e=>parseFloat(e));return[i[0],i[1],i[2],i[3]]})(t[0]);if(n)return n}return 4===t.length?t:[0,0,1,1]},mb=function(){return((e,t,r,n)=>{var i=my(e,r),a=my(t,n),o=t=>mm([...mg(e,r).map((e,t)=>e*t).slice(1),0],t),s=e=>e>1?1:e<0?0:e,l=e=>{for(var t=e>1?1:e,r=t,n=0;n<8;++n){var l=i(r)-t,u=o(r);if(1e-4>Math.abs(l-t)||u<1e-4)break;r=s(r-l/u)}return a(r)};return l.isStepper=!1,l})(...mv(...arguments))},mw=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{stiff:t=100,damping:r=8,dt:n=17}=e,i=(e,i,a)=>{var o=a+(-(e-i)*t-a*r)*n/1e3,s=a*n/1e3+e;return 1e-4>Math.abs(s-i)&&1e-4>Math.abs(o)?[i,0]:[s,o]};return i.isStepper=!0,i.dt=n,i};class mx{setTimeout(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=performance.now(),n=null,i=a=>{a-r>=t?e(a):"function"==typeof requestAnimationFrame&&(n=requestAnimationFrame(i))};return n=requestAnimationFrame(i),()=>{null!=n&&cancelAnimationFrame(n)}}}var mE=(0,F.createContext)(function(){var e,t,r,n,i;return e=new mx,t=()=>null,r=!1,n=null,i=a=>{if(!r){if(Array.isArray(a)){if(!a.length)return;var[o,...s]=a;if("number"==typeof o){n=e.setTimeout(i.bind(null,s),o);return}i(o),n=e.setTimeout(i.bind(null,s));return}"string"==typeof a&&t(a),"object"==typeof a&&t(a),"function"==typeof a&&a()}},{stop:()=>{r=!0},start:e=>{r=!1,n&&(n(),n=null),i(e)},subscribe:e=>(t=e,()=>{t=()=>null}),getTimeoutController:()=>e}}),mS={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},m_={t:0},mO={t:1};function mT(e){var t,r,n,i=pA(e,mS),{isActive:a,canBegin:o,duration:s,easing:l,begin:u,onAnimationEnd:c,onAnimationStart:h,children:f}=i,d="auto"===a?!dI.isSsr:a,p=(t=i.animationId,r=i.animationManager,n=(0,F.useContext)(mE),(0,F.useMemo)(()=>null!=r?r:n(t),[t,r,n])),[g,m]=(0,F.useState)(d?m_:mO),y=(0,F.useRef)(null);return(0,F.useEffect)(()=>{d||m(mO)},[d]),(0,F.useEffect)(()=>{if(!d||!o)return rc;var e=((e,t,r,n,i,a)=>{var o,s,l,u,c,h,f,d,p=[Object.keys(e),Object.keys(t)].reduce((e,t)=>e.filter(e=>t.includes(e)));return null==r?()=>(i(mh(mh({},e),t)),()=>{}):!0===r.isStepper?(s=p.reduce((r,n)=>mh(mh({},r),{},{[n]:{from:e[n],velocity:0,to:t[n]}}),{}),l=null,u=n=>{o||(o=n);var c=(n-o)/r.dt;s=mp(r,s,c),i(mh(mh(mh({},e),t),mu((e,t)=>t.from,s))),o=n,Object.values(s).filter(md).length&&(l=a.setTimeout(u))},()=>(l=a.setTimeout(u),()=>{var e;null==(e=l)||e()})):(h=null,f=p.reduce((r,n)=>{var i=e[n],a=t[n];return null==i||null==a?r:mh(mh({},r),{},{[n]:[i,a]})},{}),d=o=>{c||(c=o);var s=(o-c)/n,l=mu((e,t)=>mf(...t,r(s)),f);if(i(mh(mh(mh({},e),t),l)),s<1)h=a.setTimeout(d);else{var u=mu((e,t)=>mf(...t,r(1)),f);i(mh(mh(mh({},e),t),u))}},()=>(h=a.setTimeout(d),()=>{var e;null==(e=h)||e()}))})(m_,mO,(e=>{if("string"==typeof e)switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return mb(e);case"spring":return mw();default:if("cubic-bezier"===e.split("(")[0])return mb(e)}return"function"==typeof e?e:null})(l),s,m,p.getTimeoutController());return p.start([h,u,()=>{y.current=e()},s,c]),()=>{p.stop(),y.current&&y.current(),c()}},[d,o,s,l,u,h,c,p]),f(g.t)}var mI=e.i(60954),mA=["radius"],mC=["radius"];function mk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function mP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mk(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mk(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function mD(){return(mD=Object.assign.bind()).apply(null,arguments)}function mN(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function mj(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var mM=(e,t,r,n,i)=>{var a=t5(r),o=t5(n),s=Math.min(Math.abs(a)/2,Math.abs(o)/2),l=o>=0?1:-1,u=a>=0?1:-1,c=+(o>=0&&a>=0||o<0&&a<0);if(s>0&&Array.isArray(i)){for(var h=[0,0,0,0],f=0;f<4;f++){var d,p,O=null!=(p=i[f])?p:0;h[f]=O>s?s:O}d=t4(g||(g=mj(["M",",",""])),e,t+l*h[0]),h[0]>0&&(d+=t4(m||(m=mj(["A ",",",",0,0,",",",",",""])),h[0],h[0],c,e+u*h[0],t)),d+=t4(y||(y=mj(["L ",",",""])),e+r-u*h[1],t),h[1]>0&&(d+=t4(v||(v=mj(["A ",",",",0,0,",",\n        ",",",""])),h[1],h[1],c,e+r,t+l*h[1])),d+=t4(b||(b=mj(["L ",",",""])),e+r,t+n-l*h[2]),h[2]>0&&(d+=t4(w||(w=mj(["A ",",",",0,0,",",\n        ",",",""])),h[2],h[2],c,e+r-u*h[2],t+n)),d+=t4(x||(x=mj(["L ",",",""])),e+u*h[3],t+n),h[3]>0&&(d+=t4(E||(E=mj(["A ",",",",0,0,",",\n        ",",",""])),h[3],h[3],c,e,t+n-l*h[3])),d+="Z"}else if(s>0&&i===+i&&i>0){var T=Math.min(s,i);d=t4(S||(S=mj(["M ",",","\n            A ",",",",0,0,",",",",","\n            L ",",","\n            A ",",",",0,0,",",",",","\n            L ",",","\n            A ",",",",0,0,",",",",","\n            L ",",","\n            A ",",",",0,0,",",",","," Z"])),e,t+l*T,T,T,c,e+u*T,t,e+r-u*T,t,T,T,c,e+r,t+l*T,e+r,t+n-l*T,T,T,c,e+r-u*T,t+n,e+u*T,t+n,T,T,c,e,t+n-l*T)}else d=t4(_||(_=mj(["M ",","," h "," v "," h "," Z"])),e,t,r,n,-r);return d},mR={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},mL=e=>{var t=pA(e,mR),r=(0,F.useRef)(null),[n,i]=(0,F.useState)(-1);(0,F.useEffect)(()=>{if(r.current&&r.current.getTotalLength)try{var e=r.current.getTotalLength();e&&i(e)}catch(e){}},[]);var{x:a,y:o,width:s,height:l,radius:u,className:c}=t,{animationEasing:h,animationDuration:f,animationBegin:d,isAnimationActive:p,isUpdateAnimationActive:g}=t,m=(0,F.useRef)(s),y=(0,F.useRef)(l),v=(0,F.useRef)(a),b=(0,F.useRef)(o),w=mt((0,F.useMemo)(()=>({x:a,y:o,width:s,height:l,radius:u}),[a,o,s,l,u]),"rectangle-");if(a!==+a||o!==+o||s!==+s||l!==+l||0===s||0===l)return null;var x=ip("recharts-rectangle",c);if(!g){var E=dZ(t),{radius:S}=E,_=mN(E,mA);return F.createElement("path",mD({},_,{x:t5(a),y:t5(o),width:t5(s),height:t5(l),radius:"number"==typeof u?u:void 0,className:x,d:mM(a,o,s,l,u)}))}var O=m.current,T=y.current,I=v.current,A=b.current,C="0px ".concat(-1===n?1:n,"px"),k="".concat(n,"px 0px"),P=ml(["strokeDasharray"],f,"string"==typeof h?h:mR.animationEasing);return F.createElement(mT,{animationId:w,key:w,canBegin:n>0,duration:f,easing:h,isActive:g,begin:d},e=>{var n,i=ro(O,s,e),c=ro(T,l,e),h=ro(I,a,e),f=ro(A,o,e);r.current&&(m.current=i,y.current=c,v.current=h,b.current=f),n=p?e>0?{transition:P,strokeDasharray:k}:{strokeDasharray:C}:{strokeDasharray:k};var d=dZ(t),{radius:g}=d,w=mN(d,mC);return F.createElement("path",mD({},w,{radius:"number"==typeof u?u:void 0,className:x,d:mM(h,f,i,c,u),ref:r,style:mP(mP({},n),t.style)}))})};function mF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function mV(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mF(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mF(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function mB(){return(mB=Object.assign.bind()).apply(null,arguments)}function mU(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var mz=(e,t,r,n,i)=>{var a=r-n;return t4(O||(O=mU(["M ",",",""])),e,t)+t4(T||(T=mU(["L ",",",""])),e+r,t)+t4(I||(I=mU(["L ",",",""])),e+r-a/2,t+i)+t4(A||(A=mU(["L ",",",""])),e+r-a/2-n,t+i)+t4(C||(C=mU(["L ",","," Z"])),e,t)},mq={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},m$=e=>{var t=pA(e,mq),{x:r,y:n,upperWidth:i,lowerWidth:a,height:o,className:s}=t,{animationEasing:l,animationDuration:u,animationBegin:c,isUpdateAnimationActive:h}=t,f=(0,F.useRef)(null),[d,p]=(0,F.useState)(-1),g=(0,F.useRef)(i),m=(0,F.useRef)(a),y=(0,F.useRef)(o),v=(0,F.useRef)(r),b=(0,F.useRef)(n),w=mt(e,"trapezoid-");if((0,F.useEffect)(()=>{if(f.current&&f.current.getTotalLength)try{var e=f.current.getTotalLength();e&&p(e)}catch(e){}},[]),r!==+r||n!==+n||i!==+i||a!==+a||o!==+o||0===i&&0===a||0===o)return null;var x=ip("recharts-trapezoid",s);if(!h)return F.createElement("g",null,F.createElement("path",mB({},dZ(t),{className:x,d:mz(r,n,i,a,o)})));var E=g.current,S=m.current,_=y.current,O=v.current,T=b.current,I="0px ".concat(-1===d?1:d,"px"),A="".concat(d,"px 0px"),C=ml(["strokeDasharray"],u,l);return F.createElement(mT,{animationId:w,key:w,canBegin:d>0,duration:u,easing:l,isActive:h,begin:c},e=>{var s=ro(E,i,e),l=ro(S,a,e),u=ro(_,o,e),c=ro(O,r,e),h=ro(T,n,e);f.current&&(g.current=s,m.current=l,y.current=u,v.current=c,b.current=h);var d=e>0?{transition:C,strokeDasharray:A}:{strokeDasharray:I};return F.createElement("path",mB({},dZ(t),{className:x,d:mz(c,h,s,l,u),ref:f,style:mV(mV({},d),t.style)}))})};function mK(){return(mK=Object.assign.bind()).apply(null,arguments)}function mG(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var mH=e=>{var{cx:t,cy:r,radius:n,angle:i,sign:a,isExternal:o,cornerRadius:s,cornerIsExternal:l}=e,u=s*(o?1:-1)+n,c=Math.asin(s/u)/l1,h=l?i:i+a*c,f=l2(t,r,u,h);return{center:f,circleTangency:l2(t,r,n,h),lineTangency:l2(t,r,u*Math.cos(c*l1),l?i-a*c:i),theta:c}},mW=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:a,endAngle:o}=e,s=t8(o-a)*Math.min(Math.abs(o-a),359.999),l=a+s,u=l2(t,r,i,a),c=l2(t,r,i,l),h=t4(k||(k=mG(["M ",",","\n    A ",",",",0,\n    ",",",",\n    ",",","\n  "])),u.x,u.y,i,i,+(Math.abs(s)>180),+(a>l),c.x,c.y);if(n>0){var f=l2(t,r,n,a),d=l2(t,r,n,l);h+=t4(P||(P=mG(["L ",",","\n            A ",",",",0,\n            ",",",",\n            ",","," Z"])),d.x,d.y,n,n,+(Math.abs(s)>180),+(a<=l),f.x,f.y)}else h+=t4(D||(D=mG(["L ",","," Z"])),t,r);return h},mQ={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},mY=e=>{var t,r=pA(e,mQ),{cx:n,cy:i,innerRadius:a,outerRadius:o,cornerRadius:s,forceCornerRadius:l,cornerIsExternal:u,startAngle:c,endAngle:h,className:f}=r;if(o<a||c===h)return null;var d=ip("recharts-sector",f),p=o-a,g=ri(s,p,0,!0);return t=g>0&&360>Math.abs(c-h)?(e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:i,cornerRadius:a,forceCornerRadius:o,cornerIsExternal:s,startAngle:l,endAngle:u}=e,c=t8(u-l),{circleTangency:h,lineTangency:f,theta:d}=mH({cx:t,cy:r,radius:i,angle:l,sign:c,cornerRadius:a,cornerIsExternal:s}),{circleTangency:p,lineTangency:g,theta:m}=mH({cx:t,cy:r,radius:i,angle:u,sign:-c,cornerRadius:a,cornerIsExternal:s}),y=s?Math.abs(l-u):Math.abs(l-u)-d-m;if(y<0)return o?t4(N||(N=mG(["M ",",","\n        a",",",",0,0,1,",",0\n        a",",",",0,0,1,",",0\n      "])),f.x,f.y,a,a,2*a,a,a,-(2*a)):mW({cx:t,cy:r,innerRadius:n,outerRadius:i,startAngle:l,endAngle:u});var v=t4(j||(j=mG(["M ",",","\n    A",",",",0,0,",",",",","\n    A",",",",0,",",",",",",","\n    A",",",",0,0,",",",",","\n  "])),f.x,f.y,a,a,+(c<0),h.x,h.y,i,i,+(y>180),+(c<0),p.x,p.y,a,a,+(c<0),g.x,g.y);if(n>0){var{circleTangency:b,lineTangency:w,theta:x}=mH({cx:t,cy:r,radius:n,angle:l,sign:c,isExternal:!0,cornerRadius:a,cornerIsExternal:s}),{circleTangency:E,lineTangency:S,theta:_}=mH({cx:t,cy:r,radius:n,angle:u,sign:-c,isExternal:!0,cornerRadius:a,cornerIsExternal:s}),O=s?Math.abs(l-u):Math.abs(l-u)-x-_;if(O<0&&0===a)return"".concat(v,"L").concat(t,",").concat(r,"Z");v+=t4(M||(M=mG(["L",",","\n      A",",",",0,0,",",",",","\n      A",",",",0,",",",",",",","\n      A",",",",0,0,",",",",","Z"])),S.x,S.y,a,a,+(c<0),E.x,E.y,n,n,+(O>180),+(c>0),b.x,b.y,a,a,+(c<0),w.x,w.y)}else v+=t4(R||(R=mG(["L",",","Z"])),t,r);return v})({cx:n,cy:i,innerRadius:a,outerRadius:o,cornerRadius:Math.min(g,p/2),forceCornerRadius:l,cornerIsExternal:u,startAngle:c,endAngle:h}):mW({cx:n,cy:i,innerRadius:a,outerRadius:o,startAngle:c,endAngle:h}),F.createElement("path",mK({},dZ(r),{className:d,d:t}))};let mJ=Math.PI,mX=2*mJ,mZ=mX-1e-6;function m0(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}class m1{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?m0:function(e){let t=Math.floor(e);if(!(t>=0))throw Error(`invalid digits: ${e}`);if(t>15)return m0;let r=10**t;return function(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=Math.round(arguments[t]*r)/r+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,n){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+n}`}bezierCurveTo(e,t,r,n,i,a){this._append`C${+e},${+t},${+r},${+n},${this._x1=+i},${this._y1=+a}`}arcTo(e,t,r,n,i){if(e*=1,t*=1,r*=1,n*=1,(i*=1)<0)throw Error(`negative radius: ${i}`);let a=this._x1,o=this._y1,s=r-e,l=n-t,u=a-e,c=o-t,h=u*u+c*c;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(h>1e-6)if(Math.abs(c*s-l*u)>1e-6&&i){let f=r-a,d=n-o,p=s*s+l*l,g=Math.sqrt(p),m=Math.sqrt(h),y=i*Math.tan((mJ-Math.acos((p+h-(f*f+d*d))/(2*g*m)))/2),v=y/m,b=y/g;Math.abs(v-1)>1e-6&&this._append`L${e+v*u},${t+v*c}`,this._append`A${i},${i},0,0,${+(c*f>u*d)},${this._x1=e+b*s},${this._y1=t+b*l}`}else this._append`L${this._x1=e},${this._y1=t}`}arc(e,t,r,n,i,a){if(e*=1,t*=1,r*=1,a=!!a,r<0)throw Error(`negative radius: ${r}`);let o=r*Math.cos(n),s=r*Math.sin(n),l=e+o,u=t+s,c=1^a,h=a?n-i:i-n;null===this._x1?this._append`M${l},${u}`:(Math.abs(this._x1-l)>1e-6||Math.abs(this._y1-u)>1e-6)&&this._append`L${l},${u}`,r&&(h<0&&(h=h%mX+mX),h>mZ?this._append`A${r},${r},0,1,${c},${e-o},${t-s}A${r},${r},0,1,${c},${this._x1=l},${this._y1=u}`:h>1e-6&&this._append`A${r},${r},0,${+(h>=mJ)},${c},${this._x1=e+r*Math.cos(i)},${this._y1=t+r*Math.sin(i)}`)}rect(e,t,r,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r*=1}v${+n}h${-r}Z`}toString(){return this._}}function m2(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(null==r)t=null;else{let e=Math.floor(r);if(!(e>=0))throw RangeError(`invalid digits: ${r}`);t=e}return e},()=>new m1(t)}m1.prototype;let m6=Math.cos,m3=Math.sin,m5=Math.sqrt,m4=Math.PI,m8=2*m4;m5(3);let m7={draw(e,t){let r=m5(t/m4);e.moveTo(r,0),e.arc(0,0,r,0,m8)}},m9=m5(1/3),ye=2*m9,yt=m3(m4/10)/m3(7*m4/10),yr=m3(m8/10)*yt,yn=-m6(m8/10)*yt,yi=m5(3);m5(3);let ya=m5(3)/2,yo=1/m5(12),ys=(yo/2+1)*3;var yl=["type","size","sizeType"];function yu(){return(yu=Object.assign.bind()).apply(null,arguments)}function yc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function yh(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yc(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yc(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var yf={symbolCircle:m7,symbolCross:{draw(e,t){let r=m5(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},symbolDiamond:{draw(e,t){let r=m5(t/ye),n=r*m9;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},symbolSquare:{draw(e,t){let r=m5(t),n=-r/2;e.rect(n,n,r,r)}},symbolStar:{draw(e,t){let r=m5(.8908130915292852*t),n=yr*r,i=yn*r;e.moveTo(0,-r),e.lineTo(n,i);for(let t=1;t<5;++t){let a=m8*t/5,o=m6(a),s=m3(a);e.lineTo(s*r,-o*r),e.lineTo(o*n-s*i,s*n+o*i)}e.closePath()}},symbolTriangle:{draw(e,t){let r=-m5(t/(3*yi));e.moveTo(0,2*r),e.lineTo(-yi*r,-r),e.lineTo(yi*r,-r),e.closePath()}},symbolWye:{draw(e,t){let r=m5(t/ys),n=r/2,i=r*yo,a=r*yo+r,o=-n;e.moveTo(n,i),e.lineTo(n,a),e.lineTo(o,a),e.lineTo(-.5*n-ya*i,ya*n+-.5*i),e.lineTo(-.5*n-ya*a,ya*n+-.5*a),e.lineTo(-.5*o-ya*a,ya*o+-.5*a),e.lineTo(-.5*n+ya*i,-.5*i-ya*n),e.lineTo(-.5*n+ya*a,-.5*a-ya*n),e.lineTo(-.5*o+ya*a,-.5*a-ya*o),e.closePath()}}},yd=Math.PI/180,yp=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,i=yh(yh({},function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,yl)),{},{type:t,size:r,sizeType:n}),a="circle";"string"==typeof t&&(a=t);var{className:o,cx:s,cy:l}=i,u=dZ(i);return re(s)&&re(l)&&re(r)?F.createElement("path",yu({},u,{className:ip("recharts-symbols",o),transform:"translate(".concat(s,", ").concat(l,")"),d:(()=>{var e,t=(e=a,yf["symbol".concat(rl(e))]||m7),i=(function(e,t){let r=null,n=m2(i);function i(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return e="function"==typeof e?e:nB(e||m7),t="function"==typeof t?t:nB(void 0===t?64:+t),i.type=function(t){return arguments.length?(e="function"==typeof t?t:nB(t),i):e},i.size=function(e){return arguments.length?(t="function"==typeof e?e:nB(+e),i):t},i.context=function(e){return arguments.length?(r=null==e?null:e,i):r},i})().type(t).size(((e,t,r)=>{if("area"===t)return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var n=18*yd;return 1.25*e*e*(Math.tan(n)-Math.tan(2*n)*Math.tan(n)**2);case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}})(r,n,a))();if(null!==i)return i})()})):null};function yg(e){this._context=e}function ym(e){return new yg(e)}function yy(e){return e[0]}function yv(e){return e[1]}function yb(e,t){var r=nB(!0),n=null,i=ym,a=null,o=m2(s);function s(s){var l,u,c,h=(s=nV(s)).length,f=!1;for(null==n&&(a=i(c=o())),l=0;l<=h;++l)!(l<h&&r(u=s[l],l,s))===f&&((f=!f)?a.lineStart():a.lineEnd()),f&&a.point(+e(u,l,s),+t(u,l,s));if(c)return a=null,c+""||null}return e="function"==typeof e?e:void 0===e?yy:nB(e),t="function"==typeof t?t:void 0===t?yv:nB(t),s.x=function(t){return arguments.length?(e="function"==typeof t?t:nB(+t),s):e},s.y=function(e){return arguments.length?(t="function"==typeof e?e:nB(+e),s):t},s.defined=function(e){return arguments.length?(r="function"==typeof e?e:nB(!!e),s):r},s.curve=function(e){return arguments.length?(i=e,null!=n&&(a=i(n)),s):i},s.context=function(e){return arguments.length?(null==e?n=a=null:a=i(n=e),s):n},s}function yw(e,t,r){var n=null,i=nB(!0),a=null,o=ym,s=null,l=m2(u);function u(u){var c,h,f,d,p,g=(u=nV(u)).length,m=!1,y=Array(g),v=Array(g);for(null==a&&(s=o(p=l())),c=0;c<=g;++c){if(!(c<g&&i(d=u[c],c,u))===m)if(m=!m)h=c,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),f=c-1;f>=h;--f)s.point(y[f],v[f]);s.lineEnd(),s.areaEnd()}m&&(y[c]=+e(d,c,u),v[c]=+t(d,c,u),s.point(n?+n(d,c,u):y[c],r?+r(d,c,u):v[c]))}if(p)return s=null,p+""||null}function c(){return yb().defined(i).curve(o).context(a)}return e="function"==typeof e?e:void 0===e?yy:nB(+e),t="function"==typeof t?t:void 0===t?nB(0):nB(+t),r="function"==typeof r?r:void 0===r?yv:nB(+r),u.x=function(t){return arguments.length?(e="function"==typeof t?t:nB(+t),n=null,u):e},u.x0=function(t){return arguments.length?(e="function"==typeof t?t:nB(+t),u):e},u.x1=function(e){return arguments.length?(n=null==e?null:"function"==typeof e?e:nB(+e),u):n},u.y=function(e){return arguments.length?(t="function"==typeof e?e:nB(+e),r=null,u):t},u.y0=function(e){return arguments.length?(t="function"==typeof e?e:nB(+e),u):t},u.y1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:nB(+e),u):r},u.lineX0=u.lineY0=function(){return c().x(e).y(t)},u.lineY1=function(){return c().x(e).y(r)},u.lineX1=function(){return c().x(n).y(t)},u.defined=function(e){return arguments.length?(i="function"==typeof e?e:nB(!!e),u):i},u.curve=function(e){return arguments.length?(o=e,null!=a&&(s=o(a)),u):o},u.context=function(e){return arguments.length?(null==e?a=s=null:s=o(a=e),u):a},u}function yx(){}function yE(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function yS(e){this._context=e}function y_(e){this._context=e}function yO(e){this._context=e}yp.registerSymbol=(e,t)=>{yf["symbol".concat(rl(e))]=t},yg.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},yS.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:yE(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:yE(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},y_.prototype={areaStart:yx,areaEnd:yx,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:yE(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},yO.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:yE(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};class yT{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}function yI(e){this._context=e}yI.prototype={areaStart:yx,areaEnd:yx,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e*=1,t*=1,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function yA(e,t,r){var n=e._x1-e._x0,i=t-e._x1,a=(e._y1-e._y0)/(n||i<0&&-0),o=(r-e._y1)/(i||n<0&&-0);return((a<0?-1:1)+(o<0?-1:1))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs((a*i+o*n)/(n+i)))||0}function yC(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function yk(e,t,r){var n=e._x0,i=e._y0,a=e._x1,o=e._y1,s=(a-n)/3;e._context.bezierCurveTo(n+s,i+s*t,a-s,o-s*r,a,o)}function yP(e){this._context=e}function yD(e){this._context=new yN(e)}function yN(e){this._context=e}function yj(e){this._context=e}function yM(e){var t,r,n=e.length-1,i=Array(n),a=Array(n),o=Array(n);for(i[0]=0,a[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,a[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,a[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/a[t-1],a[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/a[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/a[t];for(t=0,a[n-1]=(e[n]+i[n-1])/2;t<n-1;++t)a[t]=2*e[t+1]-i[t+1];return[i,a]}function yR(e,t){this._context=e,this._t=t}function yL(){return(yL=Object.assign.bind()).apply(null,arguments)}function yF(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function yV(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yF(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yF(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}yP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:yk(this,this._t0,yC(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(t*=1,(e*=1)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,yk(this,yC(this,r=yA(this,e,t)),r);break;default:yk(this,this._t0,r=yA(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}},(yD.prototype=Object.create(yP.prototype)).point=function(e,t){yP.prototype.point.call(this,t,e)},yN.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,a){this._context.bezierCurveTo(t,e,n,r,a,i)}},yj.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===r)this._context.lineTo(e[1],t[1]);else for(var n=yM(e),i=yM(t),a=0,o=1;o<r;++a,++o)this._context.bezierCurveTo(n[0][a],i[0][a],n[1][a],i[1][a],e[o],t[o]);(this._line||0!==this._line&&1===r)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},yR.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e*=1,t*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}}this._x=e,this._y=t}};var yB={curveBasisClosed:function(e){return new y_(e)},curveBasisOpen:function(e){return new yO(e)},curveBasis:function(e){return new yS(e)},curveBumpX:function(e){return new yT(e,!0)},curveBumpY:function(e){return new yT(e,!1)},curveLinearClosed:function(e){return new yI(e)},curveLinear:ym,curveMonotoneX:function(e){return new yP(e)},curveMonotoneY:function(e){return new yD(e)},curveNatural:function(e){return new yj(e)},curveStep:function(e){return new yR(e,.5)},curveStepAfter:function(e){return new yR(e,1)},curveStepBefore:function(e){return new yR(e,0)}},yU=e=>nG(e.x)&&nG(e.y),yz=e=>null!=e.base&&yU(e.base)&&yU(e),yq=e=>e.x,y$=e=>e.y,yK=e=>{var{className:t,points:r,path:n,pathRef:i}=e,a=nM(iL);if((!r||!r.length)&&!n)return null;var o={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||a,connectNulls:e.connectNulls},s=r&&r.length?(e=>{var{type:t="linear",points:r=[],baseLine:n,layout:i,connectNulls:a=!1}=e,o=((e,t)=>{if("function"==typeof e)return e;var r="curve".concat(rl(e));if(("curveMonotone"===r||"curveBump"===r)&&t){var n=yB["".concat(r).concat("vertical"===t?"Y":"X")];if(n)return n}return yB[r]||ym})(t,i),s=a?r.filter(yU):r;if(Array.isArray(n)){var l=r.map((e,t)=>yV(yV({},e),{},{base:n[t]}));return("vertical"===i?yw().y(y$).x1(yq).x0(e=>e.base.x):yw().x(yq).y1(y$).y0(e=>e.base.y)).defined(yz).curve(o)(a?l.filter(yz):l)}return("vertical"===i&&re(n)?yw().y(y$).x1(yq).x0(n):re(n)?yw().x(yq).y1(y$).y0(n):yb().x(yq).y(y$)).defined(yU).curve(o)(s)})(o):n;return F.createElement("path",yL({},dJ(e),gM(e),{className:ip("recharts-curve",t),d:null===s?void 0:s,ref:i}))},yG=["option","shapeType","activeClassName"];function yH(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function yW(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?yH(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yH(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function yQ(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return F.createElement(mL,r);case"trapezoid":return F.createElement(m$,r);case"sector":return F.createElement(mY,r);case"symbols":if("symbols"===t)return F.createElement(yp,r);break;case"curve":return F.createElement(yK,r);default:return null}}function yY(e){var t,{option:r,shapeType:n,activeClassName:i="recharts-active-shape"}=e,a=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,yG);if((0,F.isValidElement)(r))t=(0,F.cloneElement)(r,yW(yW({},a),(0,F.isValidElement)(r)?r.props:r));else if("function"==typeof r)t=r(a,a.index);else if((0,mI.default)(r)&&"boolean"!=typeof r){var o=yW(yW({},a),r);t=F.createElement(yQ,{shapeType:n,elementProps:o})}else t=F.createElement(yQ,{shapeType:n,elementProps:a});return a.isActive?F.createElement(pL,{className:i},t):t}var yJ=["id"],yX=["type","layout","connectNulls","needClip","shape"],yZ=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function y0(){return(y0=Object.assign.bind()).apply(null,arguments)}function y1(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function y2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y1(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y1(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function y6(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var y3=pj.memo(e=>{var{dataKey:t,data:r,stroke:n,strokeWidth:i,fill:a,name:o,hide:s,unit:l,tooltipType:u,id:c}=e,h={dataDefinedOnItem:r,getPosition:rc,settings:{stroke:n,strokeWidth:i,fill:a,dataKey:t,nameKey:void 0,name:n4(o,t),hide:s,type:u,color:n,unit:l,graphicalItemId:c}};return pj.createElement(gY,{tooltipEntrySettings:h})}),y5=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function y4(e){var{clipPathId:t,points:r,props:n}=e,{dot:i,dataKey:a,needClip:o}=n,{id:s}=n,l=dJ(y6(n,yJ));return pj.createElement(gK,{points:r,dot:i,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:a,baseProps:l,needClip:o,clipPathId:t})}function y8(e){var{showLabels:t,children:r,points:n}=e,i=(0,pj.useMemo)(()=>null==n?void 0:n.map(e=>{var t,r,n={x:null!=(t=e.x)?t:0,y:null!=(r=e.y)?r:0,width:0,lowerWidth:0,upperWidth:0,height:0};return y2(y2({},n),{},{value:e.value,payload:e.payload,viewBox:n,parentViewBox:void 0,fill:void 0})}),[n]);return pj.createElement(gk,{value:t?i:void 0},r)}function y7(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:i,props:a}=e,{type:o,layout:s,connectNulls:l,needClip:u,shape:c}=a,h=y2(y2({},dZ(y6(a,yX))),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(t,")"):void 0,points:n,type:o,layout:s,connectNulls:l,strokeDasharray:null!=i?i:a.strokeDasharray});return pj.createElement(pj.Fragment,null,(null==n?void 0:n.length)>1&&pj.createElement(yY,y0({shapeType:"curve",option:c},h,{pathRef:r})),pj.createElement(y4,{points:n,clipPathId:t,props:a}))}function y9(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:i,longestAnimatedLengthRef:a}=e,{points:o,strokeDasharray:s,isAnimationActive:l,animationBegin:u,animationDuration:c,animationEasing:h,animateNewValues:f,width:d,height:p,onAnimationEnd:g,onAnimationStart:m}=r,y=i.current,v=mt(o,"recharts-line-"),b=(0,pj.useRef)(v),[w,x]=(0,pj.useState)(!1),E=(0,pj.useCallback)(()=>{"function"==typeof g&&g(),x(!1)},[g]),S=(0,pj.useCallback)(()=>{"function"==typeof m&&m(),x(!0)},[m]),_=function(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch(e){return 0}}(n.current),O=(0,pj.useRef)(0);b.current!==v&&(O.current=a.current,b.current=v);var T=O.current;return pj.createElement(y8,{points:o,showLabels:!w},r.children,pj.createElement(mT,{animationId:v,begin:u,duration:c,isActive:l,easing:h,onAnimationEnd:E,onAnimationStart:S,key:v},e=>{var u,c=Math.min(ro(T,_+T,e),_);if(u=l?s?((e,t,r)=>{var n=r.reduce((e,t)=>e+t);if(!n)return y5(t,e);for(var i=Math.floor(e/n),a=e%n,o=t-e,s=[],l=0,u=0;l<r.length;u+=null!=(c=r[l])?c:0,++l){var c,h=r[l];if(null!=h&&u+h>a){s=[...r.slice(0,l),a-u];break}}var f=s.length%2==0?[0,o]:[o];return[...function(e,t){for(var r=e.length%2!=0?[...e,0]:e,n=[],i=0;i<t;++i)n=[...n,...r];return n}(r,i),...s,...f].map(e=>"".concat(e,"px")).join(", ")})(c,_,"".concat(s).split(/[,\s]+/gim).map(e=>parseFloat(e))):y5(_,c):null==s?void 0:String(s),e>0&&_>0&&(i.current=o,a.current=Math.max(a.current,c)),y){var h=y.length/o.length,g=1===e?o:o.map((t,r)=>{var n=Math.floor(r*h);if(y[n]){var i=y[n];return y2(y2({},t),{},{x:ro(i.x,t.x,e),y:ro(i.y,t.y,e)})}return f?y2(y2({},t),{},{x:ro(2*d,t.x,e),y:ro(p/2,t.y,e)}):y2(y2({},t),{},{x:t.x,y:t.y})});return i.current=g,pj.createElement(y7,{props:r,points:g,clipPathId:t,pathRef:n,strokeDasharray:u})}return pj.createElement(y7,{props:r,points:o,clipPathId:t,pathRef:n,strokeDasharray:u})}),pj.createElement(gN,{label:r.label}))}function ve(e){var{clipPathId:t,props:r}=e,n=(0,pj.useRef)(null),i=(0,pj.useRef)(0),a=(0,pj.useRef)(null);return pj.createElement(y9,{props:r,clipPathId:t,previousPointsRef:n,longestAnimatedLengthRef:i,pathRef:a})}var vt=(e,t)=>{var r,n;return{x:null!=(r=e.x)?r:void 0,y:null!=(n=e.y)?n:void 0,value:e.value,errorVal:nY(e.payload,t)}};class vr extends pj.Component{render(){var{hide:e,dot:t,points:r,className:n,xAxisId:i,yAxisId:a,top:o,left:s,width:l,height:u,id:c,needClip:h,zIndex:f}=this.props;if(e)return null;var d=ip("recharts-line",n),{r:p,strokeWidth:g}=function(e){var t=dX(e);if(null!=t){var{r,strokeWidth:n}=t,i=Number(r),a=Number(n);return(Number.isNaN(i)||i<0)&&(i=3),(Number.isNaN(a)||a<0)&&(a=2),{r:i,strokeWidth:a}}return{r:3,strokeWidth:2}}(t),m=gV(t),y=2*p+g,v=h?"url(#clipPath-".concat(m?"":"dots-").concat(c,")"):void 0;return pj.createElement(go,{zIndex:f},pj.createElement(pL,{className:d},h&&pj.createElement("defs",null,pj.createElement(g1,{clipPathId:c,xAxisId:i,yAxisId:a}),!m&&pj.createElement("clipPath",{id:"clipPath-dots-".concat(c)},pj.createElement("rect",{x:s-y/2,y:o-y/2,width:l+y,height:u+y}))),pj.createElement(gZ,{xAxisId:i,yAxisId:a,data:r,dataPointFormatter:vt,errorBarOffset:0},pj.createElement(ve,{props:this.props,clipPathId:c}))),pj.createElement(gQ,{activeDot:this.props.activeDot,points:r,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:v}))}}var vn={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:l6.line,type:"linear"};function vi(e){var t=pA(e,vn),{activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:a,animationEasing:o,connectNulls:s,dot:l,hide:u,isAnimationActive:c,label:h,legendType:f,xAxisId:d,yAxisId:p,id:g}=t,m=y6(t,yZ),{needClip:y}=g0(d,p),v=nM(pE),b=nM(iL),w=ic(),x=nM(e=>g9(e,d,p,w,g));if("horizontal"!==b&&"vertical"!==b||null==x||null==v)return null;var{height:E,width:S,x:_,y:O}=v;return pj.createElement(vr,y0({},m,{id:g,connectNulls:s,dot:l,activeDot:r,animateNewValues:n,animationBegin:i,animationDuration:a,animationEasing:o,isAnimationActive:c,hide:u,label:h,legendType:f,xAxisId:d,yAxisId:p,points:x,layout:b,height:E,width:S,left:_,top:O,needClip:y}))}var va=pj.memo(function(e){var t=pA(e,vn),r=ic();return pj.createElement(mi,{id:t.id,type:"line"},e=>pj.createElement(pj.Fragment,null,pj.createElement(me,{legendPayload:(e=>{var{dataKey:t,name:r,stroke:n,legendType:i,hide:a}=e;return[{inactive:a,dataKey:t,type:i,color:n,value:n4(r,t),payload:e}]})(t)}),pj.createElement(y3,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:e}),pj.createElement(ma,{type:"line",id:e,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),pj.createElement(vi,y0({},t,{id:e}))))},dz);va.displayName="Line";var vo=function(e){var{width:t,height:r}=e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=(n%180+180)%180*Math.PI/180,a=Math.atan(r/t);return Math.abs(i>a&&i<Math.PI-a?r/Math.sin(i):t/Math.cos(i))};function vs(e,t){if(t<1)return[];if(1===t)return e;for(var r=[],n=0;n<e.length;n+=t){var i=e[n];void 0!==i&&r.push(i)}return r}function vl(e,t,r,n,i){if(e*t<e*n||e*t>e*i)return!1;var a=r();return e*(t-e*a/2-n)>=0&&e*(t+e*a/2-i)<=0}function vu(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function vc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vu(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vu(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function vh(e,t,r){var n,{tick:i,ticks:a,viewBox:o,minTickGap:s,orientation:l,interval:u,tickFormatter:c,unit:h,angle:f}=e;if(!a||!a.length||!i)return[];if(re(u)||dI.isSsr)return null!=(n=vs(a,(re(u)?u:0)+1))?n:[];var d="top"===l||"bottom"===l?"width":"height",p=h&&"width"===d?pK(h,{fontSize:t,letterSpacing:r}):{width:0,height:0},g=(e,n)=>{var i,a="function"==typeof c?c(e.value,n):e.value;return"width"===d?(i=pK(a,{fontSize:t,letterSpacing:r}),vo({width:i.width+p.width,height:i.height+p.height},f)):pK(a,{fontSize:t,letterSpacing:r})[d]},m=a[0],y=a[1],v=a.length>=2&&null!=m&&null!=y?t8(y.coordinate-m.coordinate):1,b=function(e,t,r){var n="width"===r,{x:i,y:a,width:o,height:s}=e;return 1===t?{start:n?i:a,end:n?i+o:a+s}:{start:n?i+o:a+s,end:n?i:a}}(o,v,d);return"equidistantPreserveStart"===u?function(e,t,r,n,i){for(var a,o=(n||[]).slice(),{start:s,end:l}=t,u=0,c=1,h=s;c<=o.length;)if(a=function(){var t,a=null==n?void 0:n[u];if(void 0===a)return{v:vs(n,c)};var o=u,f=()=>(void 0===t&&(t=r(a,o)),t),d=a.coordinate,p=0===u||vl(e,d,f,h,l);p||(u=0,h=s,c+=1),p&&(h=d+e*(f()/2+i),u+=c)}())return a.v;return[]}(v,b,g,a,s):"equidistantPreserveEnd"===u?function(e,t,r,n,i){var a=(n||[]).slice().length;if(0===a)return[];for(var{start:o,end:s}=t,l=1;l<=a;l++){for(var u,c=(a-1)%l,h=o,f=!0,d=c;d<a&&(0===(u=function(){var t,a=n[d];if(null==a)return 0;var o=d,l=()=>(void 0===t&&(t=r(a,o)),t),u=a.coordinate,p=d===c||vl(e,u,l,h,s);if(!p)return f=!1,1;p&&(h=u+e*(l()/2+i))}())||1!==u);d+=l);if(f){for(var p=[],g=c;g<a;g+=l){var m=n[g];null!=m&&p.push(m)}return p}}return[]}(v,b,g,a,s):("preserveStart"===u||"preserveStartEnd"===u?function(e,t,r,n,i,a){var o=(n||[]).slice(),s=o.length,{start:l,end:u}=t;if(a){var c=n[s-1];if(null!=c){var h=r(c,s-1),f=e*(c.coordinate+e*h/2-u);o[s-1]=c=vc(vc({},c),{},{tickCoord:f>0?c.coordinate-f*e:c.coordinate}),null!=c.tickCoord&&vl(e,c.tickCoord,()=>h,l,u)&&(u=c.tickCoord-e*(h/2+i),o[s-1]=vc(vc({},c),{},{isShow:!0}))}}for(var d=a?s-1:s,p=function(t){var n,a=o[t];if(null==a)return 1;var s=a,c=()=>(void 0===n&&(n=r(a,t)),n);if(0===t){var h=e*(s.coordinate-e*c()/2-l);o[t]=s=vc(vc({},s),{},{tickCoord:h<0?s.coordinate-h*e:s.coordinate})}else o[t]=s=vc(vc({},s),{},{tickCoord:s.coordinate});null!=s.tickCoord&&vl(e,s.tickCoord,c,l,u)&&(l=s.tickCoord+e*(c()/2+i),o[t]=vc(vc({},s),{},{isShow:!0}))},g=0;g<d;g++)if(p(g))continue;return o}(v,b,g,a,s,"preserveStartEnd"===u):function(e,t,r,n,i){for(var a=(n||[]).slice(),o=a.length,{start:s}=t,{end:l}=t,u=function(t){var n,u=a[t];if(null==u)return 1;var c=u,h=()=>(void 0===n&&(n=r(u,t)),n);if(t===o-1){var f=e*(c.coordinate+e*h()/2-l);a[t]=c=vc(vc({},c),{},{tickCoord:f>0?c.coordinate-f*e:c.coordinate})}else a[t]=c=vc(vc({},c),{},{tickCoord:c.coordinate});null!=c.tickCoord&&vl(e,c.tickCoord,h,s,l)&&(l=c.tickCoord-e*(h()/2+i),a[t]=vc(vc({},c),{},{isShow:!0}))},c=o-1;c>=0;c--)if(u(c))continue;return a}(v,b,g,a,s)).filter(e=>e.isShow)}var vf=["axisLine","width","height","className","hide","ticks","axisType"];function vd(){return(vd=Object.assign.bind()).apply(null,arguments)}function vp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function vg(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vp(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vp(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var vm={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:l6.axis};function vy(e){var{x:t,y:r,width:n,height:i,orientation:a,mirror:o,axisLine:s,otherSvgProps:l}=e;if(!s)return null;var u=vg(vg(vg({},l),dJ(s)),{},{fill:"none"});if("top"===a||"bottom"===a){var c=+("top"===a&&!o||"bottom"===a&&o);u=vg(vg({},u),{},{x1:t,y1:r+c*i,x2:t+n,y2:r+c*i})}else{var h=+("left"===a&&!o||"right"===a&&o);u=vg(vg({},u),{},{x1:t+h*n,y1:r,x2:t+h*n,y2:r+i})}return F.createElement("line",vd({},u,{className:ip("recharts-cartesian-axis-line",(0,t3.default)(s,"className"))}))}function vv(e){var t,{option:r,tickProps:n,value:i}=e,a=ip(n.className,"recharts-cartesian-axis-tick-value");if(F.isValidElement(r))t=F.cloneElement(r,vg(vg({},n),{},{className:a}));else if("function"==typeof r)t=r(vg(vg({},n),{},{className:a}));else{var o="recharts-cartesian-axis-tick-value";"boolean"!=typeof r&&(o=ip(o,r&&"object"==typeof r&&"className"in r&&"string"==typeof r.className?r.className:"")),t=F.createElement(gi,vd({},n,{className:o}),i)}return t}var vb=(0,F.forwardRef)((e,t)=>{var{ticks:r=[],tick:n,tickLine:i,stroke:a,tickFormatter:o,unit:s,padding:l,tickTextProps:u,orientation:c,mirror:h,x:f,y:d,width:p,height:g,tickSize:m,tickMargin:y,fontSize:v,letterSpacing:b,getTicksConfig:w,events:x,axisType:E}=e,S=vh(vg(vg({},w),{},{ticks:r}),v,b),_=function(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}(c,h),O=function(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}(c,h),T=dJ(w),I=dX(n),A={};"object"==typeof i&&(A=i);var C=vg(vg({},T),{},{fill:"none"},A),k=S.map(e=>vg({entry:e},function(e,t,r,n,i,a,o,s,l){var u,c,h,f,d,p,g=s?-1:1,m=e.tickSize||o,y=re(e.tickCoord)?e.tickCoord:e.coordinate;switch(a){case"top":u=c=e.coordinate,p=(h=(f=r+!s*i)-g*m)-g*l,d=y;break;case"left":h=f=e.coordinate,d=(u=(c=t+!s*n)-g*m)-g*l,p=y;break;case"right":h=f=e.coordinate,d=(u=(c=t+s*n)+g*m)+g*l,p=y;break;default:u=c=e.coordinate,p=(h=(f=r+s*i)+g*m)+g*l,d=y}return{line:{x1:u,y1:h,x2:c,y2:f},tick:{x:d,y:p}}}(e,f,d,p,g,c,m,h,y))),P=k.map(e=>{var{entry:t,line:r}=e;return F.createElement(pL,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(t.value,"-").concat(t.coordinate,"-").concat(t.tickCoord)},i&&F.createElement("line",vd({},C,r,{className:ip("recharts-cartesian-axis-tick-line",(0,t3.default)(i,"className"))})))}),D=k.map((e,t)=>{var r,i,{entry:c,tick:h}=e,f=vg(vg(vg(vg({verticalAnchor:O},T),{},{textAnchor:_,stroke:"none",fill:a},h),{},{index:t,payload:c,visibleTicksCount:S.length,tickFormatter:o,padding:l},u),{},{angle:null!=(r=null!=(i=null==u?void 0:u.angle)?i:T.angle)?r:0}),d=vg(vg({},f),I);return F.createElement(pL,vd({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(c.value,"-").concat(c.coordinate,"-").concat(c.tickCoord)},gR(x,c,t)),n&&F.createElement(vv,{option:n,tickProps:d,value:"".concat("function"==typeof o?o(c.value,t):c.value).concat(s||"")}))});return F.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(E,"-ticks")},D.length>0&&F.createElement(go,{zIndex:l6.label},F.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(E,"-tick-labels"),ref:t},D)),P.length>0&&F.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(E,"-tick-lines")},P))}),vw=(0,F.forwardRef)((e,t)=>{var{axisLine:r,width:n,height:i,className:a,hide:o,ticks:s,axisType:l}=e,u=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,vf),[c,h]=(0,F.useState)(""),[f,d]=(0,F.useState)(""),p=(0,F.useRef)(null);(0,F.useImperativeHandle)(t,()=>({getCalculatedWidth:()=>{var t;return(e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:i=0,tickMargin:a=0}=e,o=0;if(t){Array.from(t).forEach(e=>{if(e){var t=e.getBoundingClientRect();t.width>o&&(o=t.width)}});var s=r?r.getBoundingClientRect().width:0;return Math.round(o+(i+a)+s+(r?n:0))}return 0})({ticks:p.current,label:null==(t=e.labelRef)?void 0:t.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var g=(0,F.useCallback)(e=>{if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value");p.current=t;var r=t[0];if(r){var n=window.getComputedStyle(r),i=n.fontSize,a=n.letterSpacing;(i!==c||a!==f)&&(h(i),d(a))}}},[c,f]);return o||null!=n&&n<=0||null!=i&&i<=0?null:F.createElement(go,{zIndex:e.zIndex},F.createElement(pL,{className:ip("recharts-cartesian-axis",a)},F.createElement(vy,{x:e.x,y:e.y,width:n,height:i,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:dJ(e)}),F.createElement(vb,{ref:g,axisType:l,events:u,fontSize:c,getTicksConfig:e,height:e.height,letterSpacing:f,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:s,unit:e.unit,width:e.width,x:e.x,y:e.y}),F.createElement(gm,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},F.createElement(gS,{label:e.label,labelRef:e.labelRef}),e.children)))}),vx=F.forwardRef((e,t)=>{var r=pA(e,vm);return F.createElement(vw,vd({},r,{ref:t}))});vx.displayName="CartesianAxis";var vE=["domain","range"],vS=["domain","range"];function v_(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function vO(e,t){return e===t||!!(Array.isArray(e)&&2===e.length&&Array.isArray(t))&&2===t.length&&e[0]===t[0]&&e[1]===t[1]}function vT(e,t){if(e===t)return!0;var{domain:r,range:n}=e,i=v_(e,vE),{domain:a,range:o}=t,s=v_(t,vS);return!!vO(r,a)&&!!vO(n,o)&&dz(i,s)}var vI=["type"],vA=["dangerouslySetInnerHTML","ticks","scale"],vC=["id","scale"];function vk(){return(vk=Object.assign.bind()).apply(null,arguments)}function vP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function vD(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vP(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vP(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function vN(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function vj(e){var t=nP(),r=(0,F.useRef)(null),n=iF(),{type:i}=e,a=vN(e,vI),o=l8(n,"xAxis",i),s=(0,F.useMemo)(()=>{if(null!=o)return vD(vD({},a),{},{type:o})},[a,o]);return(0,F.useLayoutEffect)(()=>{null!=s&&(null===r.current?t(fO(s)):r.current!==s&&t(fT({prev:r.current,next:s})),r.current=s)},[s,t]),(0,F.useLayoutEffect)(()=>()=>{r.current&&(t(fI(r.current)),r.current=null)},[t]),null}var vM=e=>{var{xAxisId:t,className:r}=e,n=nM(il),i=ic(),a="xAxis",o=nM(e=>c5(e,a,t,i)),s=nM(e=>cW(e,t)),l=nM(e=>cJ(e,t)),u=nM(e=>uT(e,t));if(null==s||null==l||null==u)return null;var{dangerouslySetInnerHTML:c,ticks:h,scale:f}=e,d=vN(e,vA),{id:p,scale:g}=u,m=vN(u,vC);return F.createElement(vx,vk({},d,m,{x:l.x,y:l.y,width:s.width,height:s.height,className:ip("recharts-".concat(a," ").concat(a),r),viewBox:n,ticks:o,axisType:a}))},vR={allowDataOverflow:uO.allowDataOverflow,allowDecimals:uO.allowDecimals,allowDuplicatedCategory:uO.allowDuplicatedCategory,angle:uO.angle,axisLine:vm.axisLine,height:uO.height,hide:!1,includeHidden:uO.includeHidden,interval:uO.interval,label:!1,minTickGap:uO.minTickGap,mirror:uO.mirror,orientation:uO.orientation,padding:uO.padding,reversed:uO.reversed,scale:uO.scale,tick:uO.tick,tickCount:uO.tickCount,tickLine:vm.tickLine,tickSize:vm.tickSize,type:uO.type,xAxisId:0},vL=F.memo(e=>{var t=pA(e,vR);return F.createElement(F.Fragment,null,F.createElement(vj,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),F.createElement(vM,t))},vT);vL.displayName="XAxis";var vF=["type"],vV=["dangerouslySetInnerHTML","ticks","scale"],vB=["id","scale"];function vU(){return(vU=Object.assign.bind()).apply(null,arguments)}function vz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function vq(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vz(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vz(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function v$(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}function vK(e){var t=nP(),r=(0,F.useRef)(null),n=iF(),{type:i}=e,a=v$(e,vF),o=l8(n,"yAxis",i),s=(0,F.useMemo)(()=>{if(null!=o)return vq(vq({},a),{},{type:o})},[o,a]);return(0,F.useLayoutEffect)(()=>{null!=s&&(null===r.current?t(fA(s)):r.current!==s&&t(fC({prev:r.current,next:s})),r.current=s)},[s,t]),(0,F.useLayoutEffect)(()=>()=>{r.current&&(t(fk(r.current)),r.current=null)},[t]),null}function vG(e){var{yAxisId:t,className:r,width:n,label:i}=e,a=(0,F.useRef)(null),o=(0,F.useRef)(null),s=nM(il),l=ic(),u=nP(),c="yAxis",h=nM(e=>cZ(e,t)),f=nM(e=>cX(e,t)),d=nM(e=>c5(e,c,t,l)),p=nM(e=>uC(e,t));if((0,F.useLayoutEffect)(()=>{if(!("auto"!==n||!h||gb(i)||(0,F.isValidElement)(i))&&null!=p){var e=a.current;if(e){var r=e.getCalculatedWidth();Math.round(h.width)!==Math.round(r)&&u(fj({id:t,width:r}))}}},[d,h,u,i,t,n,p]),null==h||null==f||null==p)return null;var{dangerouslySetInnerHTML:g,ticks:m,scale:y}=e,v=v$(e,vV),{id:b,scale:w}=p,x=v$(p,vB);return F.createElement(vx,vU({},v,x,{ref:a,labelRef:o,x:f.x,y:f.y,tickTextProps:"auto"===n?{width:void 0}:{width:n},width:h.width,height:h.height,className:ip("recharts-".concat(c," ").concat(c),r),viewBox:s,ticks:d,axisType:c}))}var vH={allowDataOverflow:uA.allowDataOverflow,allowDecimals:uA.allowDecimals,allowDuplicatedCategory:uA.allowDuplicatedCategory,angle:uA.angle,axisLine:vm.axisLine,hide:!1,includeHidden:uA.includeHidden,interval:uA.interval,label:!1,minTickGap:uA.minTickGap,mirror:uA.mirror,orientation:uA.orientation,padding:uA.padding,reversed:uA.reversed,scale:uA.scale,tick:uA.tick,tickCount:uA.tickCount,tickLine:vm.tickLine,tickSize:vm.tickSize,type:uA.type,width:uA.width,yAxisId:0},vW=F.memo(e=>{var t=pA(e,vH);return F.createElement(F.Fragment,null,F.createElement(vK,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),F.createElement(vG,t))},vT);vW.displayName="YAxis";var vQ=["x1","y1","x2","y2","key"],vY=["offset"],vJ=["xAxisId","yAxisId"],vX=["xAxisId","yAxisId"];function vZ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function v0(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vZ(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vZ(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function v1(){return(v1=Object.assign.bind()).apply(null,arguments)}function v2(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var v6=e=>{var{fill:t}=e;if(!t||"none"===t)return null;var{fillOpacity:r,x:n,y:i,width:a,height:o,ry:s}=e;return F.createElement("rect",{x:n,y:i,ry:s,width:a,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function v3(e){var{option:t,lineItemProps:r}=e;if(F.isValidElement(t))n=F.cloneElement(t,r);else if("function"==typeof t)n=t(r);else{var n,i,{x1:a,y1:o,x2:s,y2:l,key:u}=r,c=null!=(i=dJ(v2(r,vQ)))?i:{},{offset:h}=c,f=v2(c,vY);n=F.createElement("line",v1({},f,{x1:a,y1:o,x2:s,y2:l,fill:"none",key:u}))}return n}function v5(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:i}=e;if(!n||!i||!i.length)return null;var{xAxisId:a,yAxisId:o}=e,s=v2(e,vJ),l=i.map((e,i)=>{var a=v0(v0({},s),{},{x1:t,y1:e,x2:t+r,y2:e,key:"line-".concat(i),index:i});return F.createElement(v3,{key:"line-".concat(i),option:n,lineItemProps:a})});return F.createElement("g",{className:"recharts-cartesian-grid-horizontal"},l)}function v4(e){var{y:t,height:r,vertical:n=!0,verticalPoints:i}=e;if(!n||!i||!i.length)return null;var{xAxisId:a,yAxisId:o}=e,s=v2(e,vX),l=i.map((e,i)=>{var a=v0(v0({},s),{},{x1:e,y1:t,x2:e,y2:t+r,key:"line-".concat(i),index:i});return F.createElement(v3,{option:n,lineItemProps:a,key:"line-".concat(i)})});return F.createElement("g",{className:"recharts-cartesian-grid-vertical"},l)}function v8(e){var{horizontalFill:t,fillOpacity:r,x:n,y:i,width:a,height:o,horizontalPoints:s,horizontal:l=!0}=e;if(!l||!t||!t.length||null==s)return null;var u=s.map(e=>Math.round(e+i-i)).sort((e,t)=>e-t);i!==u[0]&&u.unshift(0);var c=u.map((e,s)=>{var l=u[s+1],c=null==l?i+o-e:l-e;if(c<=0)return null;var h=s%t.length;return F.createElement("rect",{key:"react-".concat(s),y:e,x:n,height:c,width:a,stroke:"none",fill:t[h],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return F.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},c)}function v7(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:i,y:a,width:o,height:s,verticalPoints:l}=e;if(!t||!r||!r.length)return null;var u=l.map(e=>Math.round(e+i-i)).sort((e,t)=>e-t);i!==u[0]&&u.unshift(0);var c=u.map((e,t)=>{var l=u[t+1],c=null==l?i+o-e:l-e;if(c<=0)return null;var h=t%r.length;return F.createElement("rect",{key:"react-".concat(t),x:e,y:a,width:c,height:s,stroke:"none",fill:r[h],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return F.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},c)}var v9=(e,t)=>{var{xAxis:r,width:n,height:i,offset:a}=e;return nX(vh(v0(v0(v0({},vm),r),{},{ticks:nZ(r,!0),viewBox:{x:0,y:0,width:n,height:i}})),a.left,a.left+a.width,t)},be=(e,t)=>{var{yAxis:r,width:n,height:i,offset:a}=e;return nX(vh(v0(v0(v0({},vm),r),{},{ticks:nZ(r,!0),viewBox:{x:0,y:0,width:n,height:i}})),a.top,a.top+a.height,t)},bt={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:l6.grid};function br(e){var t=nM(n8),r=nM(n7),n=iR(),i=v0(v0({},pA(e,bt)),{},{x:re(e.x)?e.x:n.left,y:re(e.y)?e.y:n.top,width:re(e.width)?e.width:n.width,height:re(e.height)?e.height:n.height}),{xAxisId:a,yAxisId:o,x:s,y:l,width:u,height:c,syncWithTicks:h,horizontalValues:f,verticalValues:d}=i,p=ic(),g=nM(e=>c3(e,"xAxis",a,p)),m=nM(e=>c3(e,"yAxis",o,p));if(!nH(u)||!nH(c)||!re(s)||!re(l))return null;var y=i.verticalCoordinatesGenerator||v9,v=i.horizontalCoordinatesGenerator||be,{horizontalPoints:b,verticalPoints:w}=i;if((!b||!b.length)&&"function"==typeof v){var x=f&&f.length,E=v({yAxis:m?v0(v0({},m),{},{ticks:x?f:m.ticks}):void 0,width:null!=t?t:u,height:null!=r?r:c,offset:n},!!x||h);im(Array.isArray(E),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof E,"]")),Array.isArray(E)&&(b=E)}if((!w||!w.length)&&"function"==typeof y){var S=d&&d.length,_=y({xAxis:g?v0(v0({},g),{},{ticks:S?d:g.ticks}):void 0,width:null!=t?t:u,height:null!=r?r:c,offset:n},!!S||h);im(Array.isArray(_),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof _,"]")),Array.isArray(_)&&(w=_)}return F.createElement(go,{zIndex:i.zIndex},F.createElement("g",{className:"recharts-cartesian-grid"},F.createElement(v6,{fill:i.fill,fillOpacity:i.fillOpacity,x:i.x,y:i.y,width:i.width,height:i.height,ry:i.ry}),F.createElement(v8,v1({},i,{horizontalPoints:b})),F.createElement(v7,v1({},i,{verticalPoints:w})),F.createElement(v5,v1({},i,{offset:n,horizontalPoints:b,xAxis:g,yAxis:m})),F.createElement(v4,v1({},i,{offset:n,verticalPoints:w,xAxis:g,yAxis:m}))))}function bn(){return(bn=Object.assign.bind()).apply(null,arguments)}function bi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ba(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bi(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bi(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function bo(e){return Array.isArray(e)&&rt(e[0])&&rt(e[1])?e.join(" ~ "):e}br.displayName="CartesianGrid";var bs={margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},bl={display:"block",paddingTop:4,paddingBottom:4,color:"#000"},bu={},bc=e=>{var{separator:t=" : ",contentStyle:r,itemStyle:n,labelStyle:i=bu,payload:a,formatter:o,itemSorter:s,wrapperClassName:l,labelClassName:u,label:c,labelFormatter:h,accessibilityLayer:f=!1}=e,d=ba(ba({},bs),r),p=ba({margin:0},i),g=null!=c,m=g?c:"",y=ip("recharts-default-tooltip",l),v=ip("recharts-tooltip-label",u);return g&&h&&null!=a&&(m=h(c,a)),F.createElement("div",bn({className:y,style:d},f?{role:"status","aria-live":"assertive"}:{}),F.createElement("p",{className:v,style:p},F.isValidElement(m)?m:"".concat(m)),(()=>{if(a&&a.length){var e=(s?(0,nR.default)(a,s):a).map((e,r)=>{if("none"===e.type)return null;var i=e.formatter||o||bo,{value:s,name:l}=e,u=s,c=l,h=i(s,l,e,r,a);if(Array.isArray(h))[u,c]=h;else{if(null==h)return null;u=h}var f=ba(ba({},bl),{},{color:e.color||bl.color},n);return F.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(r),style:f},rt(c)?F.createElement("span",{className:"recharts-tooltip-item-name"},c):null,rt(c)?F.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,F.createElement("span",{className:"recharts-tooltip-item-value"},u),F.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))});return F.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null})())},bh=F,bf="recharts-tooltip-wrapper",bd={visibility:"hidden"};function bp(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offset:i,position:a,reverseDirection:o,tooltipDimension:s,viewBox:l,viewBoxDimension:u}=e;if(a&&re(a[n]))return a[n];var c=r[n]-s-(i>0?i:0),h=r[n]+i;if(t[n])return o[n]?c:h;var f=l[n];return null==f?0:o[n]?c<f?Math.max(h,f):Math.max(c,f):null==u?0:h+s>f+u?Math.max(c,f):Math.max(h,f)}function bg(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function bm(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bg(Object(r),!0).forEach(function(t){by(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bg(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function by(e,t,r){var n;return(t="symbol"==typeof(n=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?n:n+"")in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class bv extends bh.PureComponent{constructor(){super(...arguments),by(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),by(this,"handleKeyDown",e=>{if("Escape"===e.key){var t,r,n,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:null!=(t=null==(r=this.props.coordinate)?void 0:r.x)?t:0,y:null!=(n=null==(i=this.props.coordinate)?void 0:i.y)?n:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,t;this.state.dismissed&&((null==(e=this.props.coordinate)?void 0:e.x)!==this.state.dismissedAtCoordinate.x||(null==(t=this.props.coordinate)?void 0:t.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:t,animationDuration:r,animationEasing:n,children:i,coordinate:a,hasPayload:o,isAnimationActive:s,offset:l,position:u,reverseDirection:c,useTranslate3d:h,viewBox:f,wrapperStyle:d,lastBoundingBox:p,innerRef:g,hasPortalFromProps:m}=this.props,{cssClasses:y,cssProperties:v}=function(e){var t,r,n,{allowEscapeViewBox:i,coordinate:a,offsetTop:o,offsetLeft:s,position:l,reverseDirection:u,tooltipBox:c,useTranslate3d:h,viewBox:f}=e;return{cssProperties:t=c.height>0&&c.width>0&&a?function(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}({translateX:r=bp({allowEscapeViewBox:i,coordinate:a,key:"x",offset:s,position:l,reverseDirection:u,tooltipDimension:c.width,viewBox:f,viewBoxDimension:f.width}),translateY:n=bp({allowEscapeViewBox:i,coordinate:a,key:"y",offset:o,position:l,reverseDirection:u,tooltipDimension:c.height,viewBox:f,viewBoxDimension:f.height}),useTranslate3d:h}):bd,cssClasses:function(e){var{coordinate:t,translateX:r,translateY:n}=e;return ip(bf,{["".concat(bf,"-right")]:re(r)&&t&&re(t.x)&&r>=t.x,["".concat(bf,"-left")]:re(r)&&t&&re(t.x)&&r<t.x,["".concat(bf,"-bottom")]:re(n)&&t&&re(t.y)&&n>=t.y,["".concat(bf,"-top")]:re(n)&&t&&re(t.y)&&n<t.y})}({translateX:r,translateY:n,coordinate:a})}}({allowEscapeViewBox:t,coordinate:a,offsetLeft:"number"==typeof l?l:l.x,offsetTop:"number"==typeof l?l:l.y,position:u,reverseDirection:c,tooltipBox:{height:p.height,width:p.width},useTranslate3d:h,viewBox:f}),b=m?{}:bm(bm({transition:s&&e?"transform ".concat(r,"ms ").concat(n):void 0},v),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),w=bm(bm({},b),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},d);return bh.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:y,style:w,ref:g},i)}}var bb=e.i(89402);function bw(e,t,r){return!0===t?(0,bb.default)(e,r):"function"==typeof t?(0,bb.default)(e,t):e}function bx(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[t,r]=(0,F.useState)({height:0,left:0,top:0,width:0}),n=(0,F.useCallback)(e=>{if(null!=e){var n=e.getBoundingClientRect(),i={height:n.height,left:n.left,top:n.top,width:n.width};(Math.abs(i.height-t.height)>1||Math.abs(i.left-t.left)>1||Math.abs(i.top-t.top)>1||Math.abs(i.width-t.width)>1)&&r({height:i.height,left:i.left,top:i.top,width:i.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}var bE=["x","y","top","left","width","height","className"];function bS(){return(bS=Object.assign.bind()).apply(null,arguments)}function b_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var bO=e=>{var{x:t=0,y:r=0,top:n=0,left:i=0,width:a=0,height:o=0,className:s}=e,l=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b_(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b_(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({x:t,y:r,top:n,left:i,width:a,height:o},function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,bE));return re(t)&&re(r)&&re(a)&&re(o)&&re(n)&&re(i)?F.createElement("path",bS({},dZ(l),{className:ip("recharts-cross",s),d:"M".concat(t,",").concat(n,"v").concat(o,"M").concat(i,",").concat(r,"h").concat(a)})):null};function bT(e){var{cx:t,cy:r,radius:n,startAngle:i,endAngle:a}=e;return{points:[l2(t,r,n,i),l2(t,r,n,a)],cx:t,cy:r,radius:n,startAngle:i,endAngle:a}}function bI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function bA(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bI(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bI(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function bC(){return(bC=Object.assign.bind()).apply(null,arguments)}function bk(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function bP(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bk(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bk(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function bD(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return(0,F.isValidElement)(t)?(0,F.cloneElement)(t,n):(0,F.createElement)(r,n)}function bN(e){var t,r,n,i,a,{coordinate:o,payload:s,index:l,offset:u,tooltipAxisBandSize:c,layout:h,cursor:f,tooltipEventType:d,chartName:p}=e;if(!f||!o||"ScatterChart"!==p&&"axis"!==d)return null;if("ScatterChart"===p)n=o,i=bO,a=l6.cursorLine;else if("BarChart"===p)t=c/2,n={stroke:"none",fill:"#ccc",x:"horizontal"===h?o.x-t:u.left+.5,y:"horizontal"===h?u.top+.5:o.y-t,width:"horizontal"===h?c:u.width-1,height:"horizontal"===h?u.height-1:c},i=mL,a=l6.cursorRectangle;else if("radial"===h&&gj(o)){var{cx:g,cy:m,radius:y,startAngle:v,endAngle:b}=bT(o);n={cx:g,cy:m,startAngle:v,endAngle:b,innerRadius:y,outerRadius:y},i=mY,a=l6.cursorLine}else n={points:function(e,t,r){if("horizontal"===e)return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if("vertical"===e)return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(gj(t)){if("centric"===e){var{cx:n,cy:i,innerRadius:a,outerRadius:o,angle:s}=t,l=l2(n,i,a,s),u=l2(n,i,o,s);return[{x:l.x,y:l.y},{x:u.x,y:u.y}]}return bT(t)}}(h,o,u)},i=yK,a=l6.cursorLine;var w="object"==typeof f&&"className"in f?f.className:void 0,x=bP(bP(bP(bP({stroke:"#ccc",pointerEvents:"none"},u),n),dX(f)),{},{payload:s,payloadIndex:l,className:ip("recharts-tooltip-cursor",w)});return F.createElement(go,{zIndex:null!=(r=e.zIndex)?r:a},F.createElement(bD,{cursor:f,cursorComp:i,cursorProps:x}))}function bj(e){var t,r,n,i=(t=nM(u0),r=nM(hQ),n=nM(hG),t&&n?n3(bA(bA({},t),{},{scale:n}),r):n3(void 0,r)),a=iR(),o=nM(iL),s=nM(lQ);return null==i||null==a||null==o||null==s?null:F.createElement(bN,bC({},e,{offset:a,layout:o,tooltipAxisBandSize:i,chartName:s}))}function bM(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function bR(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bM(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bM(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function bL(e){return e.dataKey}var bF=[],bV={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function bB(e){var t,r,n,i,a,o,s,l,u,c,h=pA(e,bV),{active:f,allowEscapeViewBox:d,animationDuration:p,animationEasing:g,content:m,filterNull:y,isAnimationActive:v,offset:b,payloadUniqBy:w,position:x,reverseDirection:E,useTranslate3d:S,wrapperStyle:_,cursor:O,shared:T,trigger:I,defaultIndex:A,portal:C,axisId:k}=h,P=nP(),D="number"==typeof A?String(A):A;(0,F.useEffect)(()=>{P(ns({shared:T,trigger:I,axisId:k,active:f,defaultIndex:D}))},[P,T,I,k,f,D]);var N=ij(),j=dK(),M=nM(e=>hn(e,T)),{activeIndex:R,isActive:L}=null!=(u=nM(e=>fd(e,M,I,D)))?u:{},V=nM(e=>ff(e,M,I,D)),B=nM(e=>fh(e,M,I,D)),U=nM(e=>fc(e,M,I,D)),z=(0,F.useContext)(pc),q=null!=(c=null!=f?f:L)&&c,[$,K]=bx([V,q]),G="axis"===M?B:void 0;t=nM(e=>((e,t,r)=>{if(null!=t){var n=hf(e);return"axis"===t?"hover"===r?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:"hover"===r?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}})(e,M,I)),r=nM(lX),n=nM(lY),i=nM(lJ),o=null==(a=nM(po))?void 0:a.active,s=ij(),(0,F.useEffect)(()=>{if(!o&&null!=n&&null!=r){var e=np({active:q,coordinate:U,dataKey:t,index:R,label:"number"==typeof G?String(G):G,sourceViewBox:s,graphicalItemId:void 0});pn.emit(pi,n,e,r)}},[o,U,t,R,G,r,n,i,q,s]);var H=null!=C?C:z;if(null==H||null==N||null==M)return null;var W=null!=V?V:bF;q||(W=bF),y&&W.length&&(W=bw(W.filter(e=>null!=e.value&&(!0!==e.hide||h.includeHidden)),w,bL));var Q=W.length>0,Y=F.createElement(bv,{allowEscapeViewBox:d,animationDuration:p,animationEasing:g,isAnimationActive:v,active:q,coordinate:U,hasPayload:Q,offset:b,position:x,reverseDirection:E,useTranslate3d:S,viewBox:N,wrapperStyle:_,lastBoundingBox:$,innerRef:K,hasPortalFromProps:!!C},(l=bR(bR({},h),{},{payload:W,label:G,active:q,activeIndex:R,coordinate:U,accessibilityLayer:j}),F.isValidElement(m)?F.cloneElement(m,l):"function"==typeof m?F.createElement(m,l):F.createElement(bc,l)));return F.createElement(F.Fragment,null,(0,ga.createPortal)(Y,H),q&&F.createElement(bj,{cursor:O,tooltipEventType:M,coordinate:U,payload:W,index:R}))}function bU(){return(bU=Object.assign.bind()).apply(null,arguments)}function bz(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}var bq={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function b$(e){var t,{data:r,iconType:n,inactiveColor:i}=e,a=32/6,o=32/3,s=r.inactive?i:r.color,l=null!=n?n:r.type;if("none"===l)return null;if("plainline"===l)return F.createElement("line",{strokeWidth:4,fill:"none",stroke:s,strokeDasharray:null==(t=r.payload)?void 0:t.strokeDasharray,x1:0,y1:16,x2:32,y2:16,className:"recharts-legend-icon"});if("line"===l)return F.createElement("path",{strokeWidth:4,fill:"none",stroke:s,d:"M0,".concat(16,"h").concat(o,"\n            A").concat(a,",").concat(a,",0,1,1,").concat(2*o,",").concat(16,"\n            H").concat(32,"M").concat(2*o,",").concat(16,"\n            A").concat(a,",").concat(a,",0,1,1,").concat(o,",").concat(16),className:"recharts-legend-icon"});if("rect"===l)return F.createElement("path",{stroke:"none",fill:s,d:"M0,".concat(4,"h").concat(32,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(F.isValidElement(r.legendIcon)){var u=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bz(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bz(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},r);return delete u.legendIcon,F.cloneElement(r.legendIcon,u)}return F.createElement(yp,{fill:s,cx:16,cy:16,size:32,sizeType:"diameter",type:l})}function bK(e){var{payload:t,iconSize:r,layout:n,formatter:i,inactiveColor:a,iconType:o}=e,s={x:0,y:0,width:32,height:32},l={display:"horizontal"===n?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((t,n)=>{var c=t.formatter||i,h=ip({"recharts-legend-item":!0,["legend-item-".concat(n)]:!0,inactive:t.inactive});if("none"===t.type)return null;var f=t.inactive?a:t.color,d=c?c(t.value,t,n):t.value;return F.createElement("li",bU({className:h,style:l,key:"legend-item-".concat(n)},gR(e,t,n)),F.createElement(d2,{width:r,height:r,viewBox:s,style:u,"aria-label":"".concat(d," legend icon")},F.createElement(b$,{data:t,iconType:o,inactiveColor:a})),F.createElement("span",{className:"recharts-legend-item-text",style:{color:f}},d))})}var bG=e=>{var t=pA(e,bq),{payload:r,layout:n,align:i}=t;return r&&r.length?F.createElement("ul",{className:"recharts-default-legend",style:{padding:0,margin:0,textAlign:"horizontal"===n?i:"left"}},F.createElement(bK,bU({},t,{payload:r}))):null},bH=["contextPayload"];function bW(){return(bW=Object.assign.bind()).apply(null,arguments)}function bQ(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function bY(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?bQ(Object(r),!0).forEach(function(t){var n,i,a;n=e,i=t,a=r[t],(i=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(i))in n?Object.defineProperty(n,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[i]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bQ(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function bJ(e){return e.value}function bX(e){var{contextPayload:t}=e,r=function(e,t){if(null==e)return{};var r,n,i=function(e,t){if(null==e)return{};var r={};for(var n in e)if(({}).hasOwnProperty.call(e,n)){if(-1!==t.indexOf(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],-1===t.indexOf(r)&&({}).propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}(e,bH),n=bw(t,e.payloadUniqBy,bJ),i=bY(bY({},r),{},{payload:n});return F.isValidElement(e.content)?F.cloneElement(e.content,i):"function"==typeof e.content?F.createElement(e.content,i):F.createElement(bG,i)}function bZ(e){var t=nP();return(0,F.useEffect)(()=>{t(f6(e))},[t,e]),null}function b0(e){var t=nP();return(0,F.useEffect)(()=>(t(f2(e)),()=>{t(f2({width:0,height:0}))}),[t,e]),null}var b1={align:"center",iconSize:14,inactiveColor:"#ccc",itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function b2(e){var t,r=pA(e,b1),n=nM(nF),i=(0,F.useContext)(ph),a=nM(e=>e.layout.margin),{width:o,height:s,wrapperStyle:l,portal:u}=r,[c,h]=bx([n]),f=nM(n8),d=nM(n7);if(null==f||null==d)return null;var p=f-((null==a?void 0:a.left)||0)-((null==a?void 0:a.right)||0),g=(t=r.layout,"vertical"===t&&null!=s?{height:s}:"horizontal"===t?{width:o||p}:null),m=u?l:bY(bY({position:"absolute",width:(null==g?void 0:g.width)||o||"auto",height:(null==g?void 0:g.height)||s||"auto"},function(e,t,r,n,i,a){var o,s,{layout:l,align:u,verticalAlign:c}=t;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(o="center"===u&&"vertical"===l?{left:((n||0)-a.width)/2}:"right"===u?{right:r&&r.right||0}:{left:r&&r.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(s="middle"===c?{top:((i||0)-a.height)/2}:"bottom"===c?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),bY(bY({},o),s)}(l,r,a,f,d,c)),l),y=null!=u?u:i;if(null==y||null==n)return null;var v=F.createElement("div",{className:"recharts-legend-wrapper",style:m,ref:h},F.createElement(bZ,{layout:r.layout,align:r.align,verticalAlign:r.verticalAlign,itemSorter:r.itemSorter}),!u&&F.createElement(b0,{width:c.width,height:c.height}),F.createElement(bX,bW({},r,g,{margin:a,chartWidth:f,chartHeight:d,contextPayload:n})));return(0,ga.createPortal)(v,y)}b2.displayName="Legend";var b6=e.i(41047);function b3(){let[e,t]=(0,F.useState)([]),[r,n]=(0,F.useState)([]),[i,a]=(0,F.useState)(!0);(0,F.useEffect)(()=>{o()},[]);let o=async()=>{try{let e=(0,B.collection)(V.db,"players"),r=await (0,B.getDocs)(e),i=new Map(r.docs.map(e=>[e.id,{id:e.id,name:e.data().name,color:(0,b6.getPlayerColor)(e.data().name)}])),a=(0,B.collection)(V.db,"matches"),o=(0,B.query)(a,(0,B.orderBy)("date","asc")),s=(await (0,B.getDocs)(o)).docs.map(e=>({id:e.id,...e.data()})),l=new Map;r.docs.forEach(e=>{l.set(e.id,0)});let u=[],c={date:"Incio",matchIndex:0};i.forEach((e,t)=>{c[e.name]=0}),u.push(c),s.forEach((e,t)=>{e.results.forEach(e=>{let t=l.get(e.playerId)||0;l.set(e.playerId,t+e.points)});let r={date:e.date.toDate?e.date.toDate().toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit"}):`Partida ${t+1}`,matchIndex:t+1};i.forEach((e,t)=>{r[e.name]=l.get(t)||0}),u.push(r)}),t(u),n(Array.from(i.values()))}catch(e){console.error("Erro ao carregar dados de evoluo:",e)}finally{a(!1)}};return i?(0,L.jsx)("div",{className:"bg-stone-900/50 border border-stone-800 rounded-xl p-8 mb-8",children:(0,L.jsxs)("div",{className:"text-center",children:[(0,L.jsx)("div",{className:"w-12 h-12 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,L.jsx)("p",{className:"text-stone-400",children:"Carregando evoluo dos pontos..."})]})}):e.length<=1?(0,L.jsx)("div",{className:"bg-stone-900/50 border border-stone-800 rounded-xl p-8 mb-8",children:(0,L.jsx)("p",{className:"text-stone-400 text-center",children:"Nenhuma partida registrada ainda. Adicione partidas para ver a evoluo dos pontos."})}):(0,L.jsxs)("div",{className:"bg-stone-900/50 border border-stone-800 rounded-xl p-6 mb-8 backdrop-blur-sm",children:[(0,L.jsx)("h3",{className:"text-2xl font-bold font-cinzel text-yellow-400 mb-6 text-center",children:" Evoluo dos Pontos"}),(0,L.jsx)(iD,{width:"100%",height:400,children:(0,L.jsxs)(pN,{data:e,margin:{top:5,right:30,left:20,bottom:5},children:[(0,L.jsx)(br,{strokeDasharray:"3 3",stroke:"#44403c"}),(0,L.jsx)(vL,{dataKey:"date",stroke:"#a8a29e",style:{fontSize:"12px"}}),(0,L.jsx)(vW,{stroke:"#a8a29e",style:{fontSize:"12px"},label:{value:"Pontos",angle:-90,position:"insideLeft",fill:"#a8a29e"}}),(0,L.jsx)(bB,{contentStyle:{backgroundColor:"#1c1917",border:"1px solid #44403c",borderRadius:"8px",color:"#e7e5e4"}}),(0,L.jsx)(b2,{wrapperStyle:{paddingTop:"20px",fontSize:"14px"}}),r.map(e=>(0,L.jsx)(va,{type:"monotone",dataKey:e.name,stroke:e.color,strokeWidth:3,dot:{fill:e.color,r:4},activeDot:{r:6}},e.id))]})})]})}function b5(){let[e,t]=(0,F.useState)([]),[r,n]=(0,F.useState)(!0);(0,F.useEffect)(()=>{i()},[]);let i=async()=>{try{let e=(0,B.collection)(V.db,"players"),r=(0,B.query)(e,(0,B.orderBy)("stats.points","desc")),n=(await (0,B.getDocs)(r)).docs.map(e=>({id:e.id,...e.data()}));t(n)}catch(e){console.error("Erro ao carregar jogadores:",e)}finally{n(!1)}};return r?(0,L.jsx)("section",{id:"classificacao",className:"min-h-screen bg-stone-950 text-stone-100 p-8 font-sans flex items-center justify-center",children:(0,L.jsxs)("div",{className:"text-center",children:[(0,L.jsx)("div",{className:"w-16 h-16 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,L.jsx)("p",{className:"text-stone-400",children:"Carregando classificao..."})]})}):(0,L.jsx)("section",{id:"classificacao",className:"min-h-screen bg-stone-950 text-stone-100 p-8 font-sans flex items-center",children:(0,L.jsxs)("div",{className:"max-w-5xl mx-auto w-full",children:[(0,L.jsxs)("div",{className:"text-center mb-12",children:[(0,L.jsx)("h2",{className:"text-4xl md:text-6xl font-bold font-cinzel text-transparent bg-clip-text bg-gradient-to-b from-yellow-200 to-yellow-600 mb-4",children:"Tabela de Classificao"}),(0,L.jsx)("p",{className:"text-stone-400 text-lg",children:"Quem dominar o imprio?"})]}),(0,L.jsx)(b3,{}),(0,L.jsx)("div",{className:"bg-stone-900/50 border border-stone-800 rounded-xl overflow-hidden backdrop-blur-sm",children:(0,L.jsx)("div",{className:"overflow-x-auto",children:(0,L.jsxs)("table",{className:"w-full",children:[(0,L.jsx)("thead",{className:"bg-stone-900/80 border-b border-stone-800",children:(0,L.jsxs)("tr",{children:[(0,L.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-stone-400 uppercase tracking-wider",children:"Posio"}),(0,L.jsx)("th",{className:"px-6 py-4 text-left text-xs font-semibold text-stone-400 uppercase tracking-wider",children:"Jogador"}),(0,L.jsx)("th",{className:"px-6 py-4 text-center text-xs font-semibold text-stone-400 uppercase tracking-wider",children:"Pontos"}),(0,L.jsx)("th",{className:"px-6 py-4 text-center text-xs font-semibold text-stone-400 uppercase tracking-wider",children:"Vitrias"}),(0,L.jsx)("th",{className:"px-6 py-4 text-center text-xs font-semibold text-stone-400 uppercase tracking-wider",children:"Partidas"}),(0,L.jsx)("th",{className:"px-6 py-4 text-center text-xs font-semibold text-stone-400 uppercase tracking-wider",children:"Taxa de Vitria"})]})}),(0,L.jsx)("tbody",{className:"divide-y divide-stone-800",children:e.map((e,t)=>{let r=e.stats.matchesPlayed>0?(e.stats.wins/e.stats.matchesPlayed*100).toFixed(0):"0",n=0===t&&e.stats.points>0;return(0,L.jsxs)("tr",{className:"hover:bg-stone-800/50 transition-colors",children:[(0,L.jsx)("td",{className:"px-6 py-4",children:(0,L.jsxs)("div",{className:"flex items-center gap-2",children:[n&&(0,L.jsx)(U.Crown,{className:"w-5 h-5 text-yellow-500 animate-pulse"}),(0,L.jsxs)("span",{className:`text-2xl font-bold font-cinzel ${0===t?"text-yellow-500":1===t?"text-stone-300":2===t?"text-amber-700":"text-stone-500"}`,children:[t+1,""]})]})}),(0,L.jsx)("td",{className:"px-6 py-4",children:(0,L.jsxs)("div",{className:"flex items-center gap-3",children:[(0,L.jsx)("div",{className:"w-3 h-3 rounded-full flex-shrink-0",style:{backgroundColor:(0,b6.getPlayerColor)(e.name)}}),(0,L.jsx)("img",{src:e.avatar_url,alt:e.name,className:"w-10 h-10 rounded-full ring-2 ring-yellow-700/50"}),(0,L.jsx)("span",{className:"font-semibold text-lg",children:e.name})]})}),(0,L.jsx)("td",{className:"px-6 py-4 text-center",children:(0,L.jsx)("span",{className:"text-2xl font-bold font-cinzel text-yellow-500",children:e.stats.points})}),(0,L.jsx)("td",{className:"px-6 py-4 text-center",children:(0,L.jsx)("span",{className:"text-lg font-semibold text-stone-300",children:e.stats.wins})}),(0,L.jsx)("td",{className:"px-6 py-4 text-center",children:(0,L.jsx)("span",{className:"text-lg text-stone-400",children:e.stats.matchesPlayed})}),(0,L.jsx)("td",{className:"px-6 py-4 text-center",children:(0,L.jsx)("div",{className:"flex items-center justify-center gap-1",children:(0,L.jsxs)("span",{className:"text-lg font-semibold text-stone-300",children:[r,"%"]})})})]},e.id)})})]})})})]})})}e.s(["default",()=>b5],46947)},89069,e=>{"use strict";let t=(0,e.i(74224).default)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);e.s(["Trophy",()=>t],89069)},58950,e=>{"use strict";var t=e.i(38447),r=e.i(68692),n=e.i(88363);e.i(68392);var i=e.i(16505);let a=(0,e.i(74224).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var o=e.i(89069),s=e.i(41047);function l(){let[e,l]=(0,r.useState)([]),[u,c]=(0,r.useState)(!0);(0,r.useEffect)(()=>{h()},[]);let h=async()=>{try{let e=(0,i.collection)(n.db,"matches"),t=(0,i.query)(e,(0,i.orderBy)("date","desc")),r=await (0,i.getDocs)(t),a=(0,i.collection)(n.db,"players"),o=await (0,i.getDocs)(a),s=new Map(o.docs.map(e=>[e.id,e.data().name])),u=r.docs.map(e=>{let t=e.data();return{id:e.id,date:t.date,notes:t.notes,results:t.results.map(e=>({...e,playerName:s.get(e.playerId)||"Desconhecido"})).sort((e,t)=>e.rank-t.rank)}});l(u)}catch(e){console.error("Erro ao carregar partidas:",e)}finally{c(!1)}};return u?(0,t.jsx)("section",{id:"partidas",className:"min-h-screen bg-stone-950 text-stone-100 p-8 font-sans flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-16 h-16 border-4 border-yellow-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-stone-400",children:"Carregando histrico..."})]})}):(0,t.jsx)("section",{id:"partidas",className:"min-h-screen bg-stone-950 text-stone-100 p-8 font-sans flex items-center",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto w-full",children:[(0,t.jsxs)("div",{className:"text-center mb-12",children:[(0,t.jsx)("h2",{className:"text-4xl md:text-6xl font-bold font-cinzel text-transparent bg-clip-text bg-gradient-to-b from-yellow-200 to-yellow-600 mb-4",children:"Histrico de Partidas"}),(0,t.jsx)("p",{className:"text-stone-400 text-lg",children:"Todas as batalhas registradas"})]}),0===e.length?(0,t.jsxs)("div",{className:"text-center py-16 bg-stone-900/50 border border-stone-800 rounded-xl",children:[(0,t.jsx)(o.Trophy,{className:"w-16 h-16 text-stone-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-stone-400 text-lg mb-6",children:"Nenhuma partida registrada ainda."}),(0,t.jsx)("a",{href:"#adicionar",className:"inline-block px-6 py-3 bg-yellow-700 hover:bg-yellow-600 rounded-lg transition-colors font-semibold",children:"+ Adicionar Primeira Partida"})]}):(0,t.jsx)("div",{className:"space-y-6 max-h-[600px] overflow-y-auto pr-2 scrollbar-thin scrollbar-thumb-stone-700 scrollbar-track-stone-900",children:e.map(e=>(0,t.jsxs)("div",{className:"bg-stone-900/50 border border-stone-800 rounded-xl p-6 backdrop-blur-sm hover:border-yellow-700/50 transition-colors",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 text-stone-400 text-sm mb-4",children:[(0,t.jsx)(a,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:(e=>{if(!e)return"Data desconhecida";let t=e.toDate?e.toDate():new Date(e);return new Intl.DateTimeFormat("pt-BR",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(t)})(e.date)})]}),(0,t.jsx)("div",{className:"space-y-3",children:e.results.map((e,r)=>(0,t.jsxs)("div",{className:`flex items-center justify-between p-3 rounded-lg ${1===e.rank?"bg-yellow-900/20 border border-yellow-700/30":"bg-stone-800/30"}`,children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("span",{className:"text-2xl",children:(e=>{switch(e){case 1:return"";case 2:return"";case 3:return"";case 4:return"4";default:return""}})(e.rank)}),(0,t.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:(0,s.getPlayerColor)(e.playerName||"")}}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-semibold text-lg",children:e.playerName}),(0,t.jsxs)("p",{className:"text-xs text-stone-500",children:[e.rank," Lugar"]})]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsxs)("p",{className:"text-2xl font-bold font-cinzel text-yellow-500",children:["+",e.points]}),(0,t.jsx)("p",{className:"text-xs text-stone-500",children:"pontos"})]})]},r))}),e.notes&&(0,t.jsx)("div",{className:"mt-4 pt-4 border-t border-stone-800",children:(0,t.jsxs)("p",{className:"text-sm text-stone-400 italic",children:[" ",e.notes]})})]},e.id))})]})})}e.s(["default",()=>l],58950)},52526,e=>{"use strict";var t=e.i(38447),r=e.i(68692),n=e.i(88363);e.i(68392);var i=e.i(16505),a=e.i(89069);function o(){let[e,o]=(0,r.useState)([]),[s,l]=(0,r.useState)([]),[u,c]=(0,r.useState)(new Date().toISOString().slice(0,16)),[h,f]=(0,r.useState)(""),[d,p]=(0,r.useState)(!1),[g,m]=(0,r.useState)(!1);(0,r.useEffect)(()=>{y()},[]);let y=async()=>{let e=(0,i.collection)(n.db,"players");o((await (0,i.getDocs)(e)).docs.map(e=>({id:e.id,...e.data()})))},v=(e,t)=>{let r=[...s],n="up"===t?e-1:e+1;n<0||n>=r.length||([r[e],r[n]]=[r[n],r[e]],r.forEach((e,t)=>e.rank=t+1),l(r))},b=e=>{switch(e){case 1:return 3;case 2:return 2;case 3:return 1;default:return 0}},w=async e=>{if(e.preventDefault(),s.length<3)return void alert("Selecione pelo menos 3 jogadores!");p(!0);try{let e={date:i.Timestamp.fromDate(new Date(u)),notes:h||null,results:s.map(e=>({playerId:e.id,rank:e.rank,points:b(e.rank)}))};for(let t of(await (0,i.addDoc)((0,i.collection)(n.db,"matches"),e),s)){let e=(0,i.doc)(n.db,"players",t.id),r=b(t.rank);await (0,i.updateDoc)(e,{"stats.points":(0,i.increment)(r),"stats.matchesPlayed":(0,i.increment)(1),"stats.wins":1===t.rank?(0,i.increment)(1):(0,i.increment)(0)})}m(!0),l([]),f(""),c(new Date().toISOString().slice(0,16)),setTimeout(()=>{m(!1),window.location.href="#classificacao",window.location.reload()},2e3)}catch(e){console.error("Erro ao adicionar partida:",e),alert("Erro ao adicionar partida. Tente novamente.")}finally{p(!1)}};return(0,t.jsx)("section",{id:"adicionar",className:"min-h-screen bg-stone-950 text-stone-100 p-8 font-sans flex items-center",children:(0,t.jsxs)("div",{className:"max-w-3xl mx-auto w-full",children:[(0,t.jsxs)("div",{className:"text-center mb-12",children:[(0,t.jsx)("h2",{className:"text-4xl md:text-6xl font-bold font-cinzel text-transparent bg-clip-text bg-gradient-to-b from-yellow-200 to-yellow-600 mb-4",children:"Adicionar Partida"}),(0,t.jsx)("p",{className:"text-stone-400 text-lg",children:"Registre os resultados da batalha"})]}),g?(0,t.jsxs)("div",{className:"bg-green-900/20 border border-green-700/50 rounded-xl p-8 text-center",children:[(0,t.jsx)(a.Trophy,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),(0,t.jsx)("h3",{className:"text-2xl font-bold text-green-400 mb-2",children:"Partida Registrada!"}),(0,t.jsx)("p",{className:"text-stone-300",children:"Indo para a classificao..."})]}):(0,t.jsxs)("form",{onSubmit:w,className:"space-y-8",children:[(0,t.jsxs)("div",{className:"bg-stone-900/50 border border-stone-800 rounded-xl p-6",children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-stone-400 mb-2 uppercase tracking-wider",children:" Data e Hora"}),(0,t.jsx)("input",{type:"datetime-local",value:u,onChange:e=>c(e.target.value),className:"w-full bg-stone-800 border border-stone-700 rounded-lg px-4 py-3 text-stone-100 focus:outline-none focus:ring-2 focus:ring-yellow-700",required:!0})]}),(0,t.jsxs)("div",{className:"bg-stone-900/50 border border-stone-800 rounded-xl p-6",children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-stone-400 mb-4 uppercase tracking-wider",children:"Selecione os Jogadores (3-4)"}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:e.map(e=>{let r=s.find(t=>t.id===e.id);return(0,t.jsxs)("button",{type:"button",onClick:()=>(e=>{if(s.find(t=>t.id===e.id))l(s.filter(t=>t.id!==e.id));else{if(s.length>=4)return void alert("Mximo de 4 jogadores por partida!");l([...s,{...e,rank:s.length+1}])}})(e),className:`p-4 rounded-lg border-2 transition-all ${r?"border-yellow-700 bg-yellow-900/20":"border-stone-700 bg-stone-800/50 hover:border-stone-600"}`,children:[(0,t.jsx)("img",{src:e.avatar_url,alt:e.name,className:"w-12 h-12 rounded-full mx-auto mb-2"}),(0,t.jsx)("p",{className:"font-semibold text-center",children:e.name}),r&&(0,t.jsx)("p",{className:"text-xs text-yellow-500 text-center mt-1",children:"Selecionado"})]},e.id)})})]}),s.length>0&&(0,t.jsxs)("div",{className:"bg-stone-900/50 border border-stone-800 rounded-xl p-6",children:[(0,t.jsxs)("label",{className:"block text-sm font-semibold text-stone-400 mb-4 uppercase tracking-wider",children:["Ordem de Classificao (1 ao ",s.length,")"]}),(0,t.jsx)("div",{className:"space-y-3",children:s.map((e,r)=>(0,t.jsxs)("div",{className:"flex items-center gap-4 p-4 bg-stone-800/50 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,t.jsx)("button",{type:"button",onClick:()=>v(r,"up"),disabled:0===r,className:"text-stone-400 hover:text-stone-200 disabled:opacity-30",children:""}),(0,t.jsx)("button",{type:"button",onClick:()=>v(r,"down"),disabled:r===s.length-1,className:"text-stone-400 hover:text-stone-200 disabled:opacity-30",children:""})]}),(0,t.jsxs)("span",{className:"text-3xl font-bold font-cinzel text-yellow-500 w-12",children:[r+1,""]}),(0,t.jsx)("img",{src:e.avatar_url,alt:e.name,className:"w-10 h-10 rounded-full"}),(0,t.jsx)("span",{className:"font-semibold flex-1",children:e.name}),(0,t.jsxs)("span",{className:"text-yellow-500 font-bold",children:["+",b(r+1)," pts"]})]},e.id))})]}),(0,t.jsxs)("div",{className:"bg-stone-900/50 border border-stone-800 rounded-xl p-6",children:[(0,t.jsx)("label",{className:"block text-sm font-semibold text-stone-400 mb-2 uppercase tracking-wider",children:"Observaes (Opcional)"}),(0,t.jsx)("textarea",{value:h,onChange:e=>f(e.target.value),placeholder:"Ex: Partida pica no mapa Black Forest...",className:"w-full bg-stone-800 border border-stone-700 rounded-lg px-4 py-3 text-stone-100 focus:outline-none focus:ring-2 focus:ring-yellow-700 resize-none",rows:3})]}),(0,t.jsx)("button",{type:"submit",disabled:d||s.length<3,className:"w-full px-6 py-4 bg-yellow-700 hover:bg-yellow-600 disabled:bg-stone-700 disabled:cursor-not-allowed rounded-lg transition-colors font-semibold text-lg",children:d?"Salvando...":" Registrar Partida"})]})]})})}e.s(["default",()=>o])},36628,e=>{"use strict";var t=e.i(38447),r=e.i(68692),n=e.i(90288),i=e.i(74224);let a=(0,i.default)("Scroll",[["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]]),o=(0,i.default)("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);function s(){let[e,i]=(0,r.useState)("hero");(0,r.useEffect)(()=>{let e=()=>{let e=window.scrollY+window.innerHeight/2;for(let t of["hero","classificacao","partidas","adicionar"]){let r=document.getElementById(t);if(r){let{offsetTop:n,offsetHeight:a}=r;if(e>=n&&e<n+a){i(t);break}}}};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);let s=[{id:"hero",label:"Incio",icon:n.Crown},{id:"classificacao",label:"Classificao",icon:n.Crown},{id:"partidas",label:"Histrico",icon:a},{id:"adicionar",label:"Adicionar",icon:o}];return(0,t.jsx)("nav",{className:"fixed top-0 left-0 right-0 z-50 bg-stone-950/95 backdrop-blur-md border-b border-stone-800",children:(0,t.jsx)("div",{className:"max-w-6xl mx-auto px-4",children:(0,t.jsxs)("div",{className:"flex items-center justify-between h-16",children:[(0,t.jsxs)("a",{href:"#hero",className:"flex items-center gap-2 group",children:[(0,t.jsx)(n.Crown,{className:"w-6 h-6 text-yellow-500 group-hover:text-yellow-400 transition-colors"}),(0,t.jsx)("span",{className:"font-bold font-cinzel text-lg text-yellow-500 group-hover:text-yellow-400 transition-colors hidden sm:block",children:"AOE4 Ranking"})]}),(0,t.jsx)("div",{className:"flex gap-1",children:s.map(r=>{let n=r.icon,i=e===r.id;return(0,t.jsxs)("a",{href:`#${r.id}`,className:`flex items-center gap-2 px-4 py-2 rounded-lg transition-all ${i?"bg-yellow-700 text-stone-100":"text-stone-400 hover:text-stone-200 hover:bg-stone-800"}`,children:[(0,t.jsx)(n,{className:"w-4 h-4"}),(0,t.jsx)("span",{className:"hidden md:block font-semibold text-sm",children:r.label})]},r.id)})})]})})})}e.s(["default",()=>s],36628)}]);