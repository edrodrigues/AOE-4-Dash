{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 100, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/edrodrigues/OneDrive/Documentos/AOE4%20Ranking/aoe4-ranking/lib/firebase.ts"],"sourcesContent":["import { initializeApp, getApps } from \"firebase/app\";\r\nimport { getFirestore } from \"firebase/firestore\";\r\n\r\n// TODO: Replace with your Firebase Configuration\r\n// You can find this in the Firebase Console -> Project Settings -> General\r\nconst firebaseConfig = {\r\n    apiKey: \"AIzaSyBs15tX_VBrS9IvPN2rbJAbB9nRkDijNgk\",\r\n    authDomain: \"aoe4-dashboard.firebaseapp.com\",\r\n    projectId: \"aoe4-dashboard\",\r\n    storageBucket: \"aoe4-dashboard.firebasestorage.app\",\r\n    messagingSenderId: \"1064938687552\",\r\n    appId: \"1:1064938687552:web:18becedde33a6557c4a3a5\",\r\n    measurementId: \"G-57TVF82TDK\"\r\n};\r\n\r\n// Initialize Firebase (Singleton pattern)\r\nconst app = getApps().length === 0 ? initializeApp(firebaseConfig) : getApps()[0];\r\nconst db = getFirestore(app);\r\n\r\nexport { db };\r\n"],"names":[],"mappings":";;;;AAAA;AAAA;AACA;AAAA;;;AAEA,iDAAiD;AACjD,2EAA2E;AAC3E,MAAM,iBAAiB;IACnB,QAAQ;IACR,YAAY;IACZ,WAAW;IACX,eAAe;IACf,mBAAmB;IACnB,OAAO;IACP,eAAe;AACnB;AAEA,0CAA0C;AAC1C,MAAM,MAAM,IAAA,yOAAO,IAAG,MAAM,KAAK,IAAI,IAAA,+OAAa,EAAC,kBAAkB,IAAA,yOAAO,GAAE,CAAC,EAAE;AACjF,MAAM,KAAK,IAAA,+OAAY,EAAC"}},
    {"offset": {"line": 129, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/edrodrigues/OneDrive/Documentos/AOE4%20Ranking/aoe4-ranking/app/adicionar/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { db } from \"@/lib/firebase\";\r\nimport { collection, addDoc, getDocs, doc, updateDoc, increment, Timestamp } from \"firebase/firestore\";\r\nimport { Calendar, Trophy, GripVertical } from \"lucide-react\";\r\n\r\ninterface Player {\r\n    id: string;\r\n    name: string;\r\n    avatar_url: string;\r\n}\r\n\r\ninterface SelectedPlayer extends Player {\r\n    rank: number;\r\n}\r\n\r\nexport default function AddMatchPage() {\r\n    const [players, setPlayers] = useState<Player[]>([]);\r\n    const [selectedPlayers, setSelectedPlayers] = useState<SelectedPlayer[]>([]);\r\n    const [date, setDate] = useState(new Date().toISOString().slice(0, 16));\r\n    const [notes, setNotes] = useState(\"\");\r\n    const [loading, setLoading] = useState(false);\r\n    const [success, setSuccess] = useState(false);\r\n\r\n    useEffect(() => {\r\n        loadPlayers();\r\n    }, []);\r\n\r\n    const loadPlayers = async () => {\r\n        const playersRef = collection(db, \"players\");\r\n        const snapshot = await getDocs(playersRef);\r\n        const playersList = snapshot.docs.map(doc => ({\r\n            id: doc.id,\r\n            ...doc.data()\r\n        } as Player));\r\n        setPlayers(playersList);\r\n    };\r\n\r\n    const togglePlayer = (player: Player) => {\r\n        const isSelected = selectedPlayers.find(p => p.id === player.id);\r\n\r\n        if (isSelected) {\r\n            setSelectedPlayers(selectedPlayers.filter(p => p.id !== player.id));\r\n        } else {\r\n            if (selectedPlayers.length >= 4) {\r\n                alert(\"Máximo de 4 jogadores por partida!\");\r\n                return;\r\n            }\r\n            setSelectedPlayers([...selectedPlayers, { ...player, rank: selectedPlayers.length + 1 }]);\r\n        }\r\n    };\r\n\r\n    const movePlayer = (index: number, direction: \"up\" | \"down\") => {\r\n        const newPlayers = [...selectedPlayers];\r\n        const targetIndex = direction === \"up\" ? index - 1 : index + 1;\r\n\r\n        if (targetIndex < 0 || targetIndex >= newPlayers.length) return;\r\n\r\n        [newPlayers[index], newPlayers[targetIndex]] = [newPlayers[targetIndex], newPlayers[index]];\r\n\r\n        // Update ranks\r\n        newPlayers.forEach((p, i) => p.rank = i + 1);\r\n        setSelectedPlayers(newPlayers);\r\n    };\r\n\r\n    const calculatePoints = (rank: number): number => {\r\n        switch (rank) {\r\n            case 1: return 3;\r\n            case 2: return 2;\r\n            case 3: return 1;\r\n            case 4: return 0;\r\n            default: return 0;\r\n        }\r\n    };\r\n\r\n    const handleSubmit = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n\r\n        if (selectedPlayers.length < 3) {\r\n            alert(\"Selecione pelo menos 3 jogadores!\");\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n\r\n        try {\r\n            // Create match document\r\n            const matchData = {\r\n                date: Timestamp.fromDate(new Date(date)),\r\n                notes: notes || null,\r\n                results: selectedPlayers.map(p => ({\r\n                    playerId: p.id,\r\n                    rank: p.rank,\r\n                    points: calculatePoints(p.rank)\r\n                }))\r\n            };\r\n\r\n            await addDoc(collection(db, \"matches\"), matchData);\r\n\r\n            // Update player stats\r\n            for (const player of selectedPlayers) {\r\n                const playerRef = doc(db, \"players\", player.id);\r\n                const points = calculatePoints(player.rank);\r\n\r\n                await updateDoc(playerRef, {\r\n                    \"stats.points\": increment(points),\r\n                    \"stats.matchesPlayed\": increment(1),\r\n                    \"stats.wins\": player.rank === 1 ? increment(1) : increment(0)\r\n                });\r\n            }\r\n\r\n            setSuccess(true);\r\n            setTimeout(() => {\r\n                window.location.href = \"/classificacao\";\r\n            }, 2000);\r\n\r\n        } catch (error) {\r\n            console.error(\"Erro ao adicionar partida:\", error);\r\n            alert(\"Erro ao adicionar partida. Tente novamente.\");\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <main className=\"min-h-screen bg-stone-950 text-stone-100 p-8 font-sans\">\r\n            <div className=\"max-w-3xl mx-auto\">\r\n                {/* Header */}\r\n                <div className=\"text-center mb-12\">\r\n                    <h1 className=\"text-4xl md:text-6xl font-bold font-cinzel text-transparent bg-clip-text bg-gradient-to-b from-yellow-200 to-yellow-600 mb-4\">\r\n                        Adicionar Partida\r\n                    </h1>\r\n                    <p className=\"text-stone-400 text-lg\">\r\n                        Registre os resultados da batalha\r\n                    </p>\r\n                </div>\r\n\r\n                {success ? (\r\n                    <div className=\"bg-green-900/20 border border-green-700/50 rounded-xl p-8 text-center\">\r\n                        <Trophy className=\"w-16 h-16 text-green-500 mx-auto mb-4\" />\r\n                        <h2 className=\"text-2xl font-bold text-green-400 mb-2\">Partida Registrada!</h2>\r\n                        <p className=\"text-stone-300\">Redirecionando para a classificação...</p>\r\n                    </div>\r\n                ) : (\r\n                    <form onSubmit={handleSubmit} className=\"space-y-8\">\r\n                        {/* Date Input */}\r\n                        <div className=\"bg-stone-900/50 border border-stone-800 rounded-xl p-6\">\r\n                            <label className=\"block text-sm font-semibold text-stone-400 mb-2 uppercase tracking-wider\">\r\n                                <Calendar className=\"w-4 h-4 inline mr-2\" />\r\n                                Data e Hora\r\n                            </label>\r\n                            <input\r\n                                type=\"datetime-local\"\r\n                                value={date}\r\n                                onChange={(e) => setDate(e.target.value)}\r\n                                className=\"w-full bg-stone-800 border border-stone-700 rounded-lg px-4 py-3 text-stone-100 focus:outline-none focus:ring-2 focus:ring-yellow-700\"\r\n                                required\r\n                            />\r\n                        </div>\r\n\r\n                        {/* Player Selection */}\r\n                        <div className=\"bg-stone-900/50 border border-stone-800 rounded-xl p-6\">\r\n                            <label className=\"block text-sm font-semibold text-stone-400 mb-4 uppercase tracking-wider\">\r\n                                Selecione os Jogadores (3-4)\r\n                            </label>\r\n                            <div className=\"grid grid-cols-2 md:grid-cols-3 gap-3\">\r\n                                {players.map(player => {\r\n                                    const isSelected = selectedPlayers.find(p => p.id === player.id);\r\n                                    return (\r\n                                        <button\r\n                                            key={player.id}\r\n                                            type=\"button\"\r\n                                            onClick={() => togglePlayer(player)}\r\n                                            className={`p-4 rounded-lg border-2 transition-all ${isSelected\r\n                                                    ? \"border-yellow-700 bg-yellow-900/20\"\r\n                                                    : \"border-stone-700 bg-stone-800/50 hover:border-stone-600\"\r\n                                                }`}\r\n                                        >\r\n                                            <img\r\n                                                src={player.avatar_url}\r\n                                                alt={player.name}\r\n                                                className=\"w-12 h-12 rounded-full mx-auto mb-2\"\r\n                                            />\r\n                                            <p className=\"font-semibold text-center\">{player.name}</p>\r\n                                            {isSelected && (\r\n                                                <p className=\"text-xs text-yellow-500 text-center mt-1\">\r\n                                                    Selecionado\r\n                                                </p>\r\n                                            )}\r\n                                        </button>\r\n                                    );\r\n                                })}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Ranking Order */}\r\n                        {selectedPlayers.length > 0 && (\r\n                            <div className=\"bg-stone-900/50 border border-stone-800 rounded-xl p-6\">\r\n                                <label className=\"block text-sm font-semibold text-stone-400 mb-4 uppercase tracking-wider\">\r\n                                    Ordem de Classificação (1º ao {selectedPlayers.length}º)\r\n                                </label>\r\n                                <div className=\"space-y-3\">\r\n                                    {selectedPlayers.map((player, index) => (\r\n                                        <div\r\n                                            key={player.id}\r\n                                            className=\"flex items-center gap-4 p-4 bg-stone-800/50 rounded-lg\"\r\n                                        >\r\n                                            <div className=\"flex flex-col gap-1\">\r\n                                                <button\r\n                                                    type=\"button\"\r\n                                                    onClick={() => movePlayer(index, \"up\")}\r\n                                                    disabled={index === 0}\r\n                                                    className=\"text-stone-400 hover:text-stone-200 disabled:opacity-30\"\r\n                                                >\r\n                                                    ▲\r\n                                                </button>\r\n                                                <button\r\n                                                    type=\"button\"\r\n                                                    onClick={() => movePlayer(index, \"down\")}\r\n                                                    disabled={index === selectedPlayers.length - 1}\r\n                                                    className=\"text-stone-400 hover:text-stone-200 disabled:opacity-30\"\r\n                                                >\r\n                                                    ▼\r\n                                                </button>\r\n                                            </div>\r\n\r\n                                            <span className=\"text-3xl font-bold font-cinzel text-yellow-500 w-12\">\r\n                                                {index + 1}º\r\n                                            </span>\r\n\r\n                                            <img\r\n                                                src={player.avatar_url}\r\n                                                alt={player.name}\r\n                                                className=\"w-10 h-10 rounded-full\"\r\n                                            />\r\n\r\n                                            <span className=\"font-semibold flex-1\">{player.name}</span>\r\n\r\n                                            <span className=\"text-yellow-500 font-bold\">\r\n                                                +{calculatePoints(index + 1)} pts\r\n                                            </span>\r\n                                        </div>\r\n                                    ))}\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        {/* Notes */}\r\n                        <div className=\"bg-stone-900/50 border border-stone-800 rounded-xl p-6\">\r\n                            <label className=\"block text-sm font-semibold text-stone-400 mb-2 uppercase tracking-wider\">\r\n                                Observações (Opcional)\r\n                            </label>\r\n                            <textarea\r\n                                value={notes}\r\n                                onChange={(e) => setNotes(e.target.value)}\r\n                                placeholder=\"Ex: Partida épica no mapa Black Forest...\"\r\n                                className=\"w-full bg-stone-800 border border-stone-700 rounded-lg px-4 py-3 text-stone-100 focus:outline-none focus:ring-2 focus:ring-yellow-700 resize-none\"\r\n                                rows={3}\r\n                            />\r\n                        </div>\r\n\r\n                        {/* Submit */}\r\n                        <div className=\"flex gap-4\">\r\n                            <a\r\n                                href=\"/\"\r\n                                className=\"flex-1 px-6 py-4 bg-stone-800 hover:bg-stone-700 rounded-lg transition-colors font-semibold text-center\"\r\n                            >\r\n                                Cancelar\r\n                            </a>\r\n                            <button\r\n                                type=\"submit\"\r\n                                disabled={loading || selectedPlayers.length < 3}\r\n                                className=\"flex-1 px-6 py-4 bg-yellow-700 hover:bg-yellow-600 disabled:bg-stone-700 disabled:cursor-not-allowed rounded-lg transition-colors font-semibold\"\r\n                            >\r\n                                {loading ? \"Salvando...\" : \"Registrar Partida\"}\r\n                            </button>\r\n                        </div>\r\n                    </form>\r\n                )}\r\n            </div>\r\n        </main>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AAAA;AACA;AAAA;AALA;;;;;;AAiBe,SAAS;IACpB,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+QAAQ,EAAW,EAAE;IACnD,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,+QAAQ,EAAmB,EAAE;IAC3E,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,+QAAQ,EAAC,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,GAAG;IACnE,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,+QAAQ,EAAC;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+QAAQ,EAAC;IACvC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+QAAQ,EAAC;IAEvC,IAAA,gRAAS,EAAC;QACN;IACJ,GAAG,EAAE;IAEL,MAAM,cAAc;QAChB,MAAM,aAAa,IAAA,6OAAU,EAAC,mLAAE,EAAE;QAClC,MAAM,WAAW,MAAM,IAAA,0OAAO,EAAC;QAC/B,MAAM,cAAc,SAAS,IAAI,CAAC,GAAG,CAAC,CAAA,MAAO,CAAC;gBAC1C,IAAI,IAAI,EAAE;gBACV,GAAG,IAAI,IAAI,EAAE;YACjB,CAAW;QACX,WAAW;IACf;IAEA,MAAM,eAAe,CAAC;QAClB,MAAM,aAAa,gBAAgB,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,OAAO,EAAE;QAE/D,IAAI,YAAY;YACZ,mBAAmB,gBAAgB,MAAM,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,OAAO,EAAE;QACrE,OAAO;YACH,IAAI,gBAAgB,MAAM,IAAI,GAAG;gBAC7B,MAAM;gBACN;YACJ;YACA,mBAAmB;mBAAI;gBAAiB;oBAAE,GAAG,MAAM;oBAAE,MAAM,gBAAgB,MAAM,GAAG;gBAAE;aAAE;QAC5F;IACJ;IAEA,MAAM,aAAa,CAAC,OAAe;QAC/B,MAAM,aAAa;eAAI;SAAgB;QACvC,MAAM,cAAc,cAAc,OAAO,QAAQ,IAAI,QAAQ;QAE7D,IAAI,cAAc,KAAK,eAAe,WAAW,MAAM,EAAE;QAEzD,CAAC,UAAU,CAAC,MAAM,EAAE,UAAU,CAAC,YAAY,CAAC,GAAG;YAAC,UAAU,CAAC,YAAY;YAAE,UAAU,CAAC,MAAM;SAAC;QAE3F,eAAe;QACf,WAAW,OAAO,CAAC,CAAC,GAAG,IAAM,EAAE,IAAI,GAAG,IAAI;QAC1C,mBAAmB;IACvB;IAEA,MAAM,kBAAkB,CAAC;QACrB,OAAQ;YACJ,KAAK;gBAAG,OAAO;YACf,KAAK;gBAAG,OAAO;YACf,KAAK;gBAAG,OAAO;YACf,KAAK;gBAAG,OAAO;YACf;gBAAS,OAAO;QACpB;IACJ;IAEA,MAAM,eAAe,OAAO;QACxB,EAAE,cAAc;QAEhB,IAAI,gBAAgB,MAAM,GAAG,GAAG;YAC5B,MAAM;YACN;QACJ;QAEA,WAAW;QAEX,IAAI;YACA,wBAAwB;YACxB,MAAM,YAAY;gBACd,MAAM,4OAAS,CAAC,QAAQ,CAAC,IAAI,KAAK;gBAClC,OAAO,SAAS;gBAChB,SAAS,gBAAgB,GAAG,CAAC,CAAA,IAAK,CAAC;wBAC/B,UAAU,EAAE,EAAE;wBACd,MAAM,EAAE,IAAI;wBACZ,QAAQ,gBAAgB,EAAE,IAAI;oBAClC,CAAC;YACL;YAEA,MAAM,IAAA,yOAAM,EAAC,IAAA,6OAAU,EAAC,mLAAE,EAAE,YAAY;YAExC,sBAAsB;YACtB,KAAK,MAAM,UAAU,gBAAiB;gBAClC,MAAM,YAAY,IAAA,sOAAG,EAAC,mLAAE,EAAE,WAAW,OAAO,EAAE;gBAC9C,MAAM,SAAS,gBAAgB,OAAO,IAAI;gBAE1C,MAAM,IAAA,4OAAS,EAAC,WAAW;oBACvB,gBAAgB,IAAA,4OAAS,EAAC;oBAC1B,uBAAuB,IAAA,4OAAS,EAAC;oBACjC,cAAc,OAAO,IAAI,KAAK,IAAI,IAAA,4OAAS,EAAC,KAAK,IAAA,4OAAS,EAAC;gBAC/D;YACJ;YAEA,WAAW;YACX,WAAW;gBACP,OAAO,QAAQ,CAAC,IAAI,GAAG;YAC3B,GAAG;QAEP,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,8BAA8B;YAC5C,MAAM;QACV,SAAU;YACN,WAAW;QACf;IACJ;IAEA,qBACI,4SAAC;QAAK,WAAU;kBACZ,cAAA,4SAAC;YAAI,WAAU;;8BAEX,4SAAC;oBAAI,WAAU;;sCACX,4SAAC;4BAAG,WAAU;sCAA+H;;;;;;sCAG7I,4SAAC;4BAAE,WAAU;sCAAyB;;;;;;;;;;;;gBAKzC,wBACG,4SAAC;oBAAI,WAAU;;sCACX,4SAAC,oSAAM;4BAAC,WAAU;;;;;;sCAClB,4SAAC;4BAAG,WAAU;sCAAyC;;;;;;sCACvD,4SAAC;4BAAE,WAAU;sCAAiB;;;;;;;;;;;yCAGlC,4SAAC;oBAAK,UAAU;oBAAc,WAAU;;sCAEpC,4SAAC;4BAAI,WAAU;;8CACX,4SAAC;oCAAM,WAAU;;sDACb,4SAAC,0SAAQ;4CAAC,WAAU;;;;;;wCAAwB;;;;;;;8CAGhD,4SAAC;oCACG,MAAK;oCACL,OAAO;oCACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;oCACvC,WAAU;oCACV,QAAQ;;;;;;;;;;;;sCAKhB,4SAAC;4BAAI,WAAU;;8CACX,4SAAC;oCAAM,WAAU;8CAA2E;;;;;;8CAG5F,4SAAC;oCAAI,WAAU;8CACV,QAAQ,GAAG,CAAC,CAAA;wCACT,MAAM,aAAa,gBAAgB,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK,OAAO,EAAE;wCAC/D,qBACI,4SAAC;4CAEG,MAAK;4CACL,SAAS,IAAM,aAAa;4CAC5B,WAAW,CAAC,uCAAuC,EAAE,aAC3C,uCACA,2DACJ;;8DAEN,4SAAC;oDACG,KAAK,OAAO,UAAU;oDACtB,KAAK,OAAO,IAAI;oDAChB,WAAU;;;;;;8DAEd,4SAAC;oDAAE,WAAU;8DAA6B,OAAO,IAAI;;;;;;gDACpD,4BACG,4SAAC;oDAAE,WAAU;8DAA2C;;;;;;;2CAfvD,OAAO,EAAE;;;;;oCAqB1B;;;;;;;;;;;;wBAKP,gBAAgB,MAAM,GAAG,mBACtB,4SAAC;4BAAI,WAAU;;8CACX,4SAAC;oCAAM,WAAU;;wCAA2E;wCACzD,gBAAgB,MAAM;wCAAC;;;;;;;8CAE1D,4SAAC;oCAAI,WAAU;8CACV,gBAAgB,GAAG,CAAC,CAAC,QAAQ,sBAC1B,4SAAC;4CAEG,WAAU;;8DAEV,4SAAC;oDAAI,WAAU;;sEACX,4SAAC;4DACG,MAAK;4DACL,SAAS,IAAM,WAAW,OAAO;4DACjC,UAAU,UAAU;4DACpB,WAAU;sEACb;;;;;;sEAGD,4SAAC;4DACG,MAAK;4DACL,SAAS,IAAM,WAAW,OAAO;4DACjC,UAAU,UAAU,gBAAgB,MAAM,GAAG;4DAC7C,WAAU;sEACb;;;;;;;;;;;;8DAKL,4SAAC;oDAAK,WAAU;;wDACX,QAAQ;wDAAE;;;;;;;8DAGf,4SAAC;oDACG,KAAK,OAAO,UAAU;oDACtB,KAAK,OAAO,IAAI;oDAChB,WAAU;;;;;;8DAGd,4SAAC;oDAAK,WAAU;8DAAwB,OAAO,IAAI;;;;;;8DAEnD,4SAAC;oDAAK,WAAU;;wDAA4B;wDACtC,gBAAgB,QAAQ;wDAAG;;;;;;;;2CAnC5B,OAAO,EAAE;;;;;;;;;;;;;;;;sCA4ClC,4SAAC;4BAAI,WAAU;;8CACX,4SAAC;oCAAM,WAAU;8CAA2E;;;;;;8CAG5F,4SAAC;oCACG,OAAO;oCACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;oCACxC,aAAY;oCACZ,WAAU;oCACV,MAAM;;;;;;;;;;;;sCAKd,4SAAC;4BAAI,WAAU;;8CACX,4SAAC;oCACG,MAAK;oCACL,WAAU;8CACb;;;;;;8CAGD,4SAAC;oCACG,MAAK;oCACL,UAAU,WAAW,gBAAgB,MAAM,GAAG;oCAC9C,WAAU;8CAET,UAAU,gBAAgB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQ3D"}}]
}